(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Mx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Iv={exports:{}},Yd={},Lv={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function Gb(){if(u1)return pn;u1=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function M(D,Y,ce){this.props=D,this.context=Y,this.refs=E,this.updater=ce||y}M.prototype.isReactComponent={},M.prototype.setState=function(D,Y){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Y,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function S(){}S.prototype=M.prototype;function T(D,Y,ce){this.props=D,this.context=Y,this.refs=E,this.updater=ce||y}var A=T.prototype=new S;A.constructor=T,w(A,M.prototype),A.isPureReactComponent=!0;var R=Array.isArray,F=Object.prototype.hasOwnProperty,N={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function z(D,Y,ce){var Q,re={},pe=null,$=null;if(Y!=null)for(Q in Y.ref!==void 0&&($=Y.ref),Y.key!==void 0&&(pe=""+Y.key),Y)F.call(Y,Q)&&!O.hasOwnProperty(Q)&&(re[Q]=Y[Q]);var ie=arguments.length-2;if(ie===1)re.children=ce;else if(1<ie){for(var Te=Array(ie),Ce=0;Ce<ie;Ce++)Te[Ce]=arguments[Ce+2];re.children=Te}if(D&&D.defaultProps)for(Q in ie=D.defaultProps,ie)re[Q]===void 0&&(re[Q]=ie[Q]);return{$$typeof:r,type:D,key:pe,ref:$,props:re,_owner:N.current}}function k(D,Y){return{$$typeof:r,type:D.type,key:Y,ref:D.ref,props:D.props,_owner:D._owner}}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function W(D){var Y={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ce){return Y[ce]})}var X=/\/+/g;function K(D,Y){return typeof D=="object"&&D!==null&&D.key!=null?W(""+D.key):Y.toString(36)}function ne(D,Y,ce,Q,re){var pe=typeof D;(pe==="undefined"||pe==="boolean")&&(D=null);var $=!1;if(D===null)$=!0;else switch(pe){case"string":case"number":$=!0;break;case"object":switch(D.$$typeof){case r:case e:$=!0}}if($)return $=D,re=re($),D=Q===""?"."+K($,0):Q,R(re)?(ce="",D!=null&&(ce=D.replace(X,"$&/")+"/"),ne(re,Y,ce,"",function(Ce){return Ce})):re!=null&&(L(re)&&(re=k(re,ce+(!re.key||$&&$.key===re.key?"":(""+re.key).replace(X,"$&/")+"/")+D)),Y.push(re)),1;if($=0,Q=Q===""?".":Q+":",R(D))for(var ie=0;ie<D.length;ie++){pe=D[ie];var Te=Q+K(pe,ie);$+=ne(pe,Y,ce,Te,re)}else if(Te=v(D),typeof Te=="function")for(D=Te.call(D),ie=0;!(pe=D.next()).done;)pe=pe.value,Te=Q+K(pe,ie++),$+=ne(pe,Y,ce,Te,re);else if(pe==="object")throw Y=String(D),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return $}function de(D,Y,ce){if(D==null)return D;var Q=[],re=0;return ne(D,Q,"","",function(pe){return Y.call(ce,pe,re++)}),Q}function ae(D){if(D._status===-1){var Y=D._result;Y=Y(),Y.then(function(ce){(D._status===0||D._status===-1)&&(D._status=1,D._result=ce)},function(ce){(D._status===0||D._status===-1)&&(D._status=2,D._result=ce)}),D._status===-1&&(D._status=0,D._result=Y)}if(D._status===1)return D._result.default;throw D._result}var me={current:null},H={transition:null},J={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:H,ReactCurrentOwner:N};function j(){throw Error("act(...) is not supported in production builds of React.")}return pn.Children={map:de,forEach:function(D,Y,ce){de(D,function(){Y.apply(this,arguments)},ce)},count:function(D){var Y=0;return de(D,function(){Y++}),Y},toArray:function(D){return de(D,function(Y){return Y})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},pn.Component=M,pn.Fragment=t,pn.Profiler=i,pn.PureComponent=T,pn.StrictMode=n,pn.Suspense=c,pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,pn.act=j,pn.cloneElement=function(D,Y,ce){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Q=w({},D.props),re=D.key,pe=D.ref,$=D._owner;if(Y!=null){if(Y.ref!==void 0&&(pe=Y.ref,$=N.current),Y.key!==void 0&&(re=""+Y.key),D.type&&D.type.defaultProps)var ie=D.type.defaultProps;for(Te in Y)F.call(Y,Te)&&!O.hasOwnProperty(Te)&&(Q[Te]=Y[Te]===void 0&&ie!==void 0?ie[Te]:Y[Te])}var Te=arguments.length-2;if(Te===1)Q.children=ce;else if(1<Te){ie=Array(Te);for(var Ce=0;Ce<Te;Ce++)ie[Ce]=arguments[Ce+2];Q.children=ie}return{$$typeof:r,type:D.type,key:re,ref:pe,props:Q,_owner:$}},pn.createContext=function(D){return D={$$typeof:a,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:s,_context:D},D.Consumer=D},pn.createElement=z,pn.createFactory=function(D){var Y=z.bind(null,D);return Y.type=D,Y},pn.createRef=function(){return{current:null}},pn.forwardRef=function(D){return{$$typeof:l,render:D}},pn.isValidElement=L,pn.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:ae}},pn.memo=function(D,Y){return{$$typeof:d,type:D,compare:Y===void 0?null:Y}},pn.startTransition=function(D){var Y=H.transition;H.transition={};try{D()}finally{H.transition=Y}},pn.unstable_act=j,pn.useCallback=function(D,Y){return me.current.useCallback(D,Y)},pn.useContext=function(D){return me.current.useContext(D)},pn.useDebugValue=function(){},pn.useDeferredValue=function(D){return me.current.useDeferredValue(D)},pn.useEffect=function(D,Y){return me.current.useEffect(D,Y)},pn.useId=function(){return me.current.useId()},pn.useImperativeHandle=function(D,Y,ce){return me.current.useImperativeHandle(D,Y,ce)},pn.useInsertionEffect=function(D,Y){return me.current.useInsertionEffect(D,Y)},pn.useLayoutEffect=function(D,Y){return me.current.useLayoutEffect(D,Y)},pn.useMemo=function(D,Y){return me.current.useMemo(D,Y)},pn.useReducer=function(D,Y,ce){return me.current.useReducer(D,Y,ce)},pn.useRef=function(D){return me.current.useRef(D)},pn.useState=function(D){return me.current.useState(D)},pn.useSyncExternalStore=function(D,Y,ce){return me.current.useSyncExternalStore(D,Y,ce)},pn.useTransition=function(){return me.current.useTransition()},pn.version="18.3.1",pn}var c1;function m0(){return c1||(c1=1,Lv.exports=Gb()),Lv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function Wb(){if(f1)return Yd;f1=1;var r=m0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,d){var p,g={},v=null,y=null;d!==void 0&&(v=""+d),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(p in c)n.call(c,p)&&!s.hasOwnProperty(p)&&(g[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)g[p]===void 0&&(g[p]=c[p]);return{$$typeof:e,type:l,key:v,ref:y,props:g,_owner:i.current}}return Yd.Fragment=t,Yd.jsx=a,Yd.jsxs=a,Yd}var d1;function jb(){return d1||(d1=1,Iv.exports=Wb()),Iv.exports}var Z=jb(),We=m0();const Xb=Mx(We);var fm={},Dv={exports:{}},rs={},kv={exports:{}},Nv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1;function Yb(){return h1||(h1=1,function(r){function e(H,J){var j=H.length;H.push(J);e:for(;0<j;){var D=j-1>>>1,Y=H[D];if(0<i(Y,J))H[D]=J,H[j]=Y,j=D;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],j=H.pop();if(j!==J){H[0]=j;e:for(var D=0,Y=H.length,ce=Y>>>1;D<ce;){var Q=2*(D+1)-1,re=H[Q],pe=Q+1,$=H[pe];if(0>i(re,j))pe<Y&&0>i($,re)?(H[D]=$,H[pe]=j,D=pe):(H[D]=re,H[Q]=j,D=Q);else if(pe<Y&&0>i($,j))H[D]=$,H[pe]=j,D=pe;else break e}}return J}function i(H,J){var j=H.sortIndex-J.sortIndex;return j!==0?j:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();r.unstable_now=function(){return a.now()-l}}var c=[],d=[],p=1,g=null,v=3,y=!1,w=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var J=t(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=H)n(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=t(d)}}function R(H){if(E=!1,A(H),!w)if(t(c)!==null)w=!0,ae(F);else{var J=t(d);J!==null&&me(R,J.startTime-H)}}function F(H,J){w=!1,E&&(E=!1,S(z),z=-1),y=!0;var j=v;try{for(A(J),g=t(c);g!==null&&(!(g.expirationTime>J)||H&&!W());){var D=g.callback;if(typeof D=="function"){g.callback=null,v=g.priorityLevel;var Y=D(g.expirationTime<=J);J=r.unstable_now(),typeof Y=="function"?g.callback=Y:g===t(c)&&n(c),A(J)}else n(c);g=t(c)}if(g!==null)var ce=!0;else{var Q=t(d);Q!==null&&me(R,Q.startTime-J),ce=!1}return ce}finally{g=null,v=j,y=!1}}var N=!1,O=null,z=-1,k=5,L=-1;function W(){return!(r.unstable_now()-L<k)}function X(){if(O!==null){var H=r.unstable_now();L=H;var J=!0;try{J=O(!0,H)}finally{J?K():(N=!1,O=null)}}else N=!1}var K;if(typeof T=="function")K=function(){T(X)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,de=ne.port2;ne.port1.onmessage=X,K=function(){de.postMessage(null)}}else K=function(){M(X,0)};function ae(H){O=H,N||(N=!0,K())}function me(H,J){z=M(function(){H(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){w||y||(w=!0,ae(F))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(H){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var j=v;v=J;try{return H()}finally{v=j}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=v;v=H;try{return J()}finally{v=j}},r.unstable_scheduleCallback=function(H,J,j){var D=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?D+j:D):j=D,H){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=j+Y,H={id:p++,callback:J,priorityLevel:H,startTime:j,expirationTime:Y,sortIndex:-1},j>D?(H.sortIndex=j,e(d,H),t(c)===null&&H===t(d)&&(E?(S(z),z=-1):E=!0,me(R,j-D))):(H.sortIndex=Y,e(c,H),w||y||(w=!0,ae(F))),H},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(H){var J=v;return function(){var j=v;v=J;try{return H.apply(this,arguments)}finally{v=j}}}}(Nv)),Nv}var p1;function qb(){return p1||(p1=1,kv.exports=Yb()),kv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function Jb(){if(m1)return rs;m1=1;var r=m0(),e=qb();function t(o){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(o,u){a(o,u),a(o+"Capture",u)}function a(o,u){for(i[o]=u,o=0;o<u.length;o++)n.add(u[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(o){return c.call(g,o)?!0:c.call(p,o)?!1:d.test(o)?g[o]=!0:(p[o]=!0,!1)}function y(o,u,m,_){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return _?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,u,m,_){if(u===null||typeof u>"u"||y(o,u,m,_))return!0;if(_)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function E(o,u,m,_,C,I,G){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=o,this.type=u,this.sanitizeURL=I,this.removeEmptyString=G}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){M[o]=new E(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var u=o[0];M[u]=new E(u,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){M[o]=new E(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){M[o]=new E(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){M[o]=new E(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){M[o]=new E(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){M[o]=new E(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){M[o]=new E(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){M[o]=new E(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var u=o.replace(S,T);M[u]=new E(u,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var u=o.replace(S,T);M[u]=new E(u,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var u=o.replace(S,T);M[u]=new E(u,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){M[o]=new E(o,1,!1,o.toLowerCase(),null,!1,!1)}),M.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){M[o]=new E(o,1,!1,o.toLowerCase(),null,!0,!0)});function A(o,u,m,_){var C=M.hasOwnProperty(u)?M[u]:null;(C!==null?C.type!==0:_||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(w(u,m,C,_)&&(m=null),_||C===null?v(u)&&(m===null?o.removeAttribute(u):o.setAttribute(u,""+m)):C.mustUseProperty?o[C.propertyName]=m===null?C.type===3?!1:"":m:(u=C.attributeName,_=C.attributeNamespace,m===null?o.removeAttribute(u):(C=C.type,m=C===3||C===4&&m===!0?"":""+m,_?o.setAttributeNS(_,u,m):o.setAttribute(u,m))))}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),W=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),H=Symbol.iterator;function J(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var j=Object.assign,D;function Y(o){if(D===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);D=u&&u[1]||""}return`
`+D+o}var ce=!1;function Q(o,u){if(!o||ce)return"";ce=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Be){var _=Be}Reflect.construct(o,[],u)}else{try{u.call()}catch(Be){_=Be}o.call(u.prototype)}else{try{throw Error()}catch(Be){_=Be}o()}}catch(Be){if(Be&&_&&typeof Be.stack=="string"){for(var C=Be.stack.split(`
`),I=_.stack.split(`
`),G=C.length-1,le=I.length-1;1<=G&&0<=le&&C[G]!==I[le];)le--;for(;1<=G&&0<=le;G--,le--)if(C[G]!==I[le]){if(G!==1||le!==1)do if(G--,le--,0>le||C[G]!==I[le]){var ve=`
`+C[G].replace(" at new "," at ");return o.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",o.displayName)),ve}while(1<=G&&0<=le);break}}}finally{ce=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?Y(o):""}function re(o){switch(o.tag){case 5:return Y(o.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return o=Q(o.type,!1),o;case 11:return o=Q(o.type.render,!1),o;case 1:return o=Q(o.type,!0),o;default:return""}}function pe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case O:return"Fragment";case N:return"Portal";case k:return"Profiler";case z:return"StrictMode";case K:return"Suspense";case ne:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case W:return(o.displayName||"Context")+".Consumer";case L:return(o._context.displayName||"Context")+".Provider";case X:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case de:return u=o.displayName||null,u!==null?u:pe(o.type)||"Memo";case ae:u=o._payload,o=o._init;try{return pe(o(u))}catch{}}return null}function $(o){var u=o.type;switch(o.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=u.render,o=o.displayName||o.name||"",u.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(u);case 8:return u===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ie(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Te(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ce(o){var u=Te(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),_=""+o[u];if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,I=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return C.call(this)},set:function(G){_=""+G,I.call(this,G)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return _},setValue:function(G){_=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Pe(o){o._valueTracker||(o._valueTracker=Ce(o))}function Ie(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),_="";return o&&(_=Te(o)?o.checked?"true":"false":o.value),o=_,o!==m?(u.setValue(o),!0):!1}function Qe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ee(o,u){var m=u.checked;return j({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??o._wrapperState.initialChecked})}function lt(o,u){var m=u.defaultValue==null?"":u.defaultValue,_=u.checked!=null?u.checked:u.defaultChecked;m=ie(u.value!=null?u.value:m),o._wrapperState={initialChecked:_,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ae(o,u){u=u.checked,u!=null&&A(o,"checked",u,!1)}function Le(o,u){Ae(o,u);var m=ie(u.value),_=u.type;if(m!=null)_==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(_==="submit"||_==="reset"){o.removeAttribute("value");return}u.hasOwnProperty("value")?ze(o,u.type,m):u.hasOwnProperty("defaultValue")&&ze(o,u.type,ie(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(o.defaultChecked=!!u.defaultChecked)}function ge(o,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var _=u.type;if(!(_!=="submit"&&_!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+o._wrapperState.initialValue,m||u===o.value||(o.value=u),o.defaultValue=u}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function ze(o,u,m){(u!=="number"||Qe(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var _e=Array.isArray;function V(o,u,m,_){if(o=o.options,u){u={};for(var C=0;C<m.length;C++)u["$"+m[C]]=!0;for(m=0;m<o.length;m++)C=u.hasOwnProperty("$"+o[m].value),o[m].selected!==C&&(o[m].selected=C),C&&_&&(o[m].defaultSelected=!0)}else{for(m=""+ie(m),u=null,C=0;C<o.length;C++){if(o[C].value===m){o[C].selected=!0,_&&(o[C].defaultSelected=!0);return}u!==null||o[C].disabled||(u=o[C])}u!==null&&(u.selected=!0)}}function B(o,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},u,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function oe(o,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(t(92));if(_e(m)){if(1<m.length)throw Error(t(93));m=m[0]}u=m}u==null&&(u=""),m=u}o._wrapperState={initialValue:ie(m)}}function ye(o,u){var m=ie(u.value),_=ie(u.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),u.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),_!=null&&(o.defaultValue=""+_)}function Se(o){var u=o.textContent;u===o._wrapperState.initialValue&&u!==""&&u!==null&&(o.value=u)}function ke(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Je(o,u){return o==null||o==="http://www.w3.org/1999/xhtml"?ke(u):o==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var He,Ke=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,_,C){MSApp.execUnsafeLocalFunction(function(){return o(u,m,_,C)})}:o}(function(o,u){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=u;else{for(He=He||document.createElement("div"),He.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=He.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}});function gt(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(je).forEach(function(o){nt.forEach(function(u){u=u+o.charAt(0).toUpperCase()+o.substring(1),je[u]=je[o]})});function ot(o,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||je.hasOwnProperty(o)&&je[o]?(""+u).trim():u+"px"}function it(o,u){o=o.style;for(var m in u)if(u.hasOwnProperty(m)){var _=m.indexOf("--")===0,C=ot(m,u[m],_);m==="float"&&(m="cssFloat"),_?o.setProperty(m,C):o[m]=C}}var Xe=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fe(o,u){if(u){if(Xe[o]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Fe(o,u){if(o.indexOf("-")===-1)return typeof u.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ut=null;function ue(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ve=null,Re=null,Ye=null;function et(o){if(o=to(o)){if(typeof Ve!="function")throw Error(t(280));var u=o.stateNode;u&&(u=Wc(u),Ve(o.stateNode,o.type,u))}}function $e(o){Re?Ye?Ye.push(o):Ye=[o]:Re=o}function vt(){if(Re){var o=Re,u=Ye;if(Ye=Re=null,et(o),u)for(o=0;o<u.length;o++)et(u[o])}}function Dt(o,u){return o(u)}function Et(){}var Ct=!1;function dn(o,u,m){if(Ct)return o(u,m);Ct=!0;try{return Dt(o,u,m)}finally{Ct=!1,(Re!==null||Ye!==null)&&(Et(),vt())}}function hn(o,u){var m=o.stateNode;if(m===null)return null;var _=Wc(m);if(_===null)return null;m=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(t(231,u,typeof m));return m}var Rn=!1;if(l)try{var si={};Object.defineProperty(si,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{Rn=!1}function hi(o,u,m,_,C,I,G,le,ve){var Be=Array.prototype.slice.call(arguments,3);try{u.apply(m,Be)}catch(rt){this.onError(rt)}}var Jn=!1,ji=null,pi=!1,wi=null,oi={onError:function(o){Jn=!0,ji=o}};function hr(o,u,m,_,C,I,G,le,ve){Jn=!1,ji=null,hi.apply(oi,arguments)}function ra(o,u,m,_,C,I,G,le,ve){if(hr.apply(this,arguments),Jn){if(Jn){var Be=ji;Jn=!1,ji=null}else throw Error(t(198));pi||(pi=!0,wi=Be)}}function pr(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,u.flags&4098&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function nl(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function sa(o){if(pr(o)!==o)throw Error(t(188))}function Gs(o){var u=o.alternate;if(!u){if(u=pr(o),u===null)throw Error(t(188));return u!==o?null:o}for(var m=o,_=u;;){var C=m.return;if(C===null)break;var I=C.alternate;if(I===null){if(_=C.return,_!==null){m=_;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===m)return sa(C),o;if(I===_)return sa(C),u;I=I.sibling}throw Error(t(188))}if(m.return!==_.return)m=C,_=I;else{for(var G=!1,le=C.child;le;){if(le===m){G=!0,m=C,_=I;break}if(le===_){G=!0,_=C,m=I;break}le=le.sibling}if(!G){for(le=I.child;le;){if(le===m){G=!0,m=I,_=C;break}if(le===_){G=!0,_=I,m=C;break}le=le.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==_)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?o:u}function Po(o){return o=Gs(o),o!==null?il(o):null}function il(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var u=il(o);if(u!==null)return u;o=o.sibling}return null}var oa=e.unstable_scheduleCallback,q=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,Oe=e.unstable_requestPaint,he=e.unstable_now,Me=e.unstable_getCurrentPriorityLevel,st=e.unstable_ImmediatePriority,ht=e.unstable_UserBlockingPriority,yt=e.unstable_NormalPriority,Mt=e.unstable_LowPriority,Ot=e.unstable_IdlePriority,Pt=null,ct=null;function It(o){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Pt,o,void 0,(o.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Zt,sn=Math.log,tn=Math.LN2;function Zt(o){return o>>>=0,o===0?32:31-(sn(o)/tn|0)|0}var Tt=64,un=4194304;function jt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Zn(o,u){var m=o.pendingLanes;if(m===0)return 0;var _=0,C=o.suspendedLanes,I=o.pingedLanes,G=m&268435455;if(G!==0){var le=G&~C;le!==0?_=jt(le):(I&=G,I!==0&&(_=jt(I)))}else G=m&~C,G!==0?_=jt(G):I!==0&&(_=jt(I));if(_===0)return 0;if(u!==0&&u!==_&&!(u&C)&&(C=_&-_,I=u&-u,C>=I||C===16&&(I&4194240)!==0))return u;if(_&4&&(_|=m&16),u=o.entangledLanes,u!==0)for(o=o.entanglements,u&=_;0<u;)m=31-Bt(u),C=1<<m,_|=o[m],u&=~C;return _}function Cr(o,u){switch(o){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(o,u){for(var m=o.suspendedLanes,_=o.pingedLanes,C=o.expirationTimes,I=o.pendingLanes;0<I;){var G=31-Bt(I),le=1<<G,ve=C[G];ve===-1?(!(le&m)||le&_)&&(C[G]=Cr(le,u)):ve<=u&&(o.expiredLanes|=le),I&=~le}}function Kn(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function cn(){var o=Tt;return Tt<<=1,!(Tt&4194240)&&(Tt=64),o}function Qn(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function Fn(o,u,m){o.pendingLanes|=u,u!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,u=31-Bt(u),o[u]=m}function ai(o,u){var m=o.pendingLanes&~u;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=u,o.mutableReadLanes&=u,o.entangledLanes&=u,u=o.entanglements;var _=o.eventTimes;for(o=o.expirationTimes;0<m;){var C=31-Bt(m),I=1<<C;u[C]=0,_[C]=-1,o[C]=-1,m&=~I}}function Pn(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var _=31-Bt(m),C=1<<_;C&u|o[_]&u&&(o[_]|=u),m&=~C}}var nn=0;function Mi(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Io,rl,sl,Ts,aa,Xr=!1,fs=[],Ni=null,Xt=null,Yr=null,Rr=new Map,As=new Map,qr=[],xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function On(o,u){switch(o){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Rr.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(u.pointerId)}}function ds(o,u,m,_,C,I){return o===null||o.nativeEvent!==I?(o={blockedOn:u,domEventName:m,eventSystemFlags:_,nativeEvent:I,targetContainers:[C]},u!==null&&(u=to(u),u!==null&&rl(u)),o):(o.eventSystemFlags|=_,u=o.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),o)}function _c(o,u,m,_,C){switch(u){case"focusin":return Ni=ds(Ni,o,u,m,_,C),!0;case"dragenter":return Xt=ds(Xt,o,u,m,_,C),!0;case"mouseover":return Yr=ds(Yr,o,u,m,_,C),!0;case"pointerover":var I=C.pointerId;return Rr.set(I,ds(Rr.get(I)||null,o,u,m,_,C)),!0;case"gotpointercapture":return I=C.pointerId,As.set(I,ds(As.get(I)||null,o,u,m,_,C)),!0}return!1}function Xi(o){var u=Go(o.target);if(u!==null){var m=pr(u);if(m!==null){if(u=m.tag,u===13){if(u=nl(m),u!==null){o.blockedOn=u,aa(o.priority,function(){sl(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Lo(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=Yi(o.domEventName,o.eventSystemFlags,u[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var _=new m.constructor(m.type,m);ut=_,m.target.dispatchEvent(_),ut=null}else return u=to(m),u!==null&&rl(u),o.blockedOn=m,!1;u.shift()}return!0}function Do(o,u,m){Lo(o)&&m.delete(u)}function Pr(){Xr=!1,Ni!==null&&Lo(Ni)&&(Ni=null),Xt!==null&&Lo(Xt)&&(Xt=null),Yr!==null&&Lo(Yr)&&(Yr=null),Rr.forEach(Do),As.forEach(Do)}function Ws(o,u){o.blockedOn===u&&(o.blockedOn=null,Xr||(Xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pr)))}function ko(o){function u(C){return Ws(C,o)}if(0<fs.length){Ws(fs[0],o);for(var m=1;m<fs.length;m++){var _=fs[m];_.blockedOn===o&&(_.blockedOn=null)}}for(Ni!==null&&Ws(Ni,o),Xt!==null&&Ws(Xt,o),Yr!==null&&Ws(Yr,o),Rr.forEach(u),As.forEach(u),m=0;m<qr.length;m++)_=qr[m],_.blockedOn===o&&(_.blockedOn=null);for(;0<qr.length&&(m=qr[0],m.blockedOn===null);)Xi(m),m.blockedOn===null&&qr.shift()}var Ei=R.ReactCurrentBatchConfig,bi=!0;function Cs(o,u,m,_){var C=nn,I=Ei.transition;Ei.transition=null;try{nn=1,la(o,u,m,_)}finally{nn=C,Ei.transition=I}}function Jr(o,u,m,_){var C=nn,I=Ei.transition;Ei.transition=null;try{nn=4,la(o,u,m,_)}finally{nn=C,Ei.transition=I}}function la(o,u,m,_){if(bi){var C=Yi(o,u,m,_);if(C===null)Oc(o,u,_,No,m),On(o,_);else if(_c(C,o,u,m,_))_.stopPropagation();else if(On(o,_),u&4&&-1<xc.indexOf(o)){for(;C!==null;){var I=to(C);if(I!==null&&Io(I),I=Yi(o,u,m,_),I===null&&Oc(o,u,_,No,m),I===C)break;C=I}C!==null&&_.stopPropagation()}else Oc(o,u,_,null,m)}}var No=null;function Yi(o,u,m,_){if(No=null,o=ue(_),o=Go(o),o!==null)if(u=pr(o),u===null)o=null;else if(m=u.tag,m===13){if(o=nl(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null);return No=o,null}function Uo(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Me()){case st:return 1;case ht:return 4;case yt:case Mt:return 16;case Ot:return 536870912;default:return 16}default:return 16}}var mr=null,js=null,Ti=null;function mi(){if(Ti)return Ti;var o,u=js,m=u.length,_,C="value"in mr?mr.value:mr.textContent,I=C.length;for(o=0;o<m&&u[o]===C[o];o++);var G=m-o;for(_=1;_<=G&&u[m-_]===C[I-_];_++);return Ti=C.slice(o,1<_?1-_:void 0)}function Xs(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function gr(){return!0}function Ys(){return!1}function Ai(o){function u(m,_,C,I,G){this._reactName=m,this._targetInst=C,this.type=_,this.nativeEvent=I,this.target=G,this.currentTarget=null;for(var le in o)o.hasOwnProperty(le)&&(m=o[le],this[le]=m?m(I):I[le]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?gr:Ys,this.isPropagationStopped=Ys,this}return j(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),u}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=Ai(qs),gi=j({},qs,{view:0,detail:0}),$n=Ai(gi),Vn,er,Zr,ol=j({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Zr&&(Zr&&o.type==="mousemove"?(Vn=o.screenX-Zr.screenX,er=o.screenY-Zr.screenY):er=Vn=0,Zr=o),Vn)},movementY:function(o){return"movementY"in o?o.movementY:er}}),nd=Ai(ol),Js=j({},ol,{dataTransfer:0}),Fo=Ai(Js),Sc=j({},gi,{relatedTarget:0}),wc=Ai(Sc),Mc=j({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Sp=Ai(Mc),wp=j({},qs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),id=Ai(wp),Ec=j({},qs,{data:0}),rd=Ai(Ec),Mp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ep={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=sd[o])?!!u[o]:!1}function Oo(){return al}var bc=j({},gi,{key:function(o){if(o.key){var u=Mp[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Xs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ep[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(o){return o.type==="keypress"?Xs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Xs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Tc=Ai(bc),Kr=j({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ir=Ai(Kr),ua=j({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),Zs=Ai(ua),Ks=j({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ca=Ai(Ks),bp=j({},ol,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),od=Ai(bp),ad=[9,13,27,32],tr=l&&"CompositionEvent"in window,Ui=null;l&&"documentMode"in document&&(Ui=document.documentMode);var Bn=l&&"TextEvent"in window&&!Ui,ll=l&&(!tr||Ui&&8<Ui&&11>=Ui),Qr=" ",ld=!1;function ud(o,u){switch(o){case"keyup":return ad.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ac(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Bo=!1;function Tp(o,u){switch(o){case"compositionend":return Ac(u);case"keypress":return u.which!==32?null:(ld=!0,Qr);case"textInput":return o=u.data,o===Qr&&ld?null:o;default:return null}}function tu(o,u){if(Bo)return o==="compositionend"||!tr&&ud(o,u)?(o=mi(),Ti=js=mr=null,Bo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ll&&u.locale!=="ko"?null:u.data;default:return null}}var ul={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!ul[o.type]:u==="textarea"}function cl(o,u,m,_){$e(_),u=Bc(u,"onChange"),0<u.length&&(m=new li("onChange","change",null,m,_),o.push({event:m,listeners:u}))}var zo=null,fl=null;function Ap(o){ml(o,0)}function Qs(o){var u=ei(o);if(Ie(u))return o}function Cp(o,u){if(o==="change")return u}var dl=!1;if(l){var vr;if(l){var fa="oninput"in document;if(!fa){var da=document.createElement("div");da.setAttribute("oninput","return;"),fa=typeof da.oninput=="function"}vr=fa}else vr=!1;dl=vr&&(!document.documentMode||9<document.documentMode)}function hs(){zo&&(zo.detachEvent("onpropertychange",Rc),fl=zo=null)}function Rc(o){if(o.propertyName==="value"&&Qs(fl)){var u=[];cl(u,fl,o,ue(o)),dn(Ap,u)}}function hl(o,u,m){o==="focusin"?(hs(),zo=u,fl=m,zo.attachEvent("onpropertychange",Rc)):o==="focusout"&&hs()}function Rp(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Qs(fl)}function cd(o,u){if(o==="click")return Qs(u)}function Hn(o,u){if(o==="input"||o==="change")return Qs(u)}function Pc(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Lr=typeof Object.is=="function"?Object.is:Pc;function ha(o,u){if(Lr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var C=m[_];if(!c.call(u,C)||!Lr(o[C],u[C]))return!1}return!0}function nu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Dr(o,u){var m=nu(o);o=0;for(var _;m;){if(m.nodeType===3){if(_=o+m.textContent.length,o<=u&&_>=u)return{node:m,offset:u-o};o=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=nu(m)}}function pa(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?pa(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Gn(){for(var o=window,u=Qe();u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=Qe(o.document)}return u}function Ci(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function Ri(o){var u=Gn(),m=o.focusedElem,_=o.selectionRange;if(u!==m&&m&&m.ownerDocument&&pa(m.ownerDocument.documentElement,m)){if(_!==null&&Ci(m)){if(u=_.start,o=_.end,o===void 0&&(o=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(o,m.value.length);else if(o=(u=m.ownerDocument||document)&&u.defaultView||window,o.getSelection){o=o.getSelection();var C=m.textContent.length,I=Math.min(_.start,C);_=_.end===void 0?I:Math.min(_.end,C),!o.extend&&I>_&&(C=_,_=I,I=C),C=Dr(m,I);var G=Dr(m,_);C&&G&&(o.rangeCount!==1||o.anchorNode!==C.node||o.anchorOffset!==C.offset||o.focusNode!==G.node||o.focusOffset!==G.offset)&&(u=u.createRange(),u.setStart(C.node,C.offset),o.removeAllRanges(),I>_?(o.addRange(u),o.extend(G.node,G.offset)):(u.setEnd(G.node,G.offset),o.addRange(u)))}}for(u=[],o=m;o=o.parentNode;)o.nodeType===1&&u.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)o=u[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ic=l&&"documentMode"in document&&11>=document.documentMode,Rs=null,ma=null,iu=null,Pi=!1;function Lc(o,u,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Pi||Rs==null||Rs!==Qe(_)||(_=Rs,"selectionStart"in _&&Ci(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),iu&&ha(iu,_)||(iu=_,_=Bc(ma,"onSelect"),0<_.length&&(u=new li("onSelect","select",null,u,m),o.push({event:u,listeners:_}),u.target=Rs)))}function pl(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var Vo={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},ps={},ms={};l&&(ms=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Ps(o){if(ps[o])return ps[o];if(!Vo[o])return o;var u=Vo[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in ms)return ps[o]=u[m];return o}var ru=Ps("animationend"),su=Ps("animationiteration"),fd=Ps("animationstart"),dd=Ps("transitionend"),hd=new Map,pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(o,u){hd.set(o,u),s(u,[o])}for(var Dc=0;Dc<pd.length;Dc++){var ou=pd[Dc],au=ou.toLowerCase(),Pp=ou[0].toUpperCase()+ou.slice(1);$s(au,"on"+Pp)}$s(ru,"onAnimationEnd"),$s(su,"onAnimationIteration"),$s(fd,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(dd,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Nc(o,u,m){var _=o.type||"unknown-event";o.currentTarget=m,ra(_,u,void 0,o),o.currentTarget=null}function ml(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var _=o[m],C=_.event;_=_.listeners;e:{var I=void 0;if(u)for(var G=_.length-1;0<=G;G--){var le=_[G],ve=le.instance,Be=le.currentTarget;if(le=le.listener,ve!==I&&C.isPropagationStopped())break e;Nc(C,le,Be),I=ve}else for(G=0;G<_.length;G++){if(le=_[G],ve=le.instance,Be=le.currentTarget,le=le.listener,ve!==I&&C.isPropagationStopped())break e;Nc(C,le,Be),I=ve}}}if(pi)throw o=wi,pi=!1,wi=null,o}function In(o,u){var m=u[ya];m===void 0&&(m=u[ya]=new Set);var _=o+"__bubble";m.has(_)||(Fc(u,o,2,!1),m.add(_))}function Uc(o,u,m){var _=0;u&&(_|=4),Fc(m,o,_,u)}var lu="_reactListening"+Math.random().toString(36).slice(2);function gl(o){if(!o[lu]){o[lu]=!0,n.forEach(function(m){m!=="selectionchange"&&(kc.has(m)||Uc(m,!1,o),Uc(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[lu]||(u[lu]=!0,Uc("selectionchange",!1,u))}}function Fc(o,u,m,_){switch(Uo(u)){case 1:var C=Cs;break;case 4:C=Jr;break;default:C=la}m=C.bind(null,u,m,o),C=void 0,!Rn||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),_?C!==void 0?o.addEventListener(u,m,{capture:!0,passive:C}):o.addEventListener(u,m,!0):C!==void 0?o.addEventListener(u,m,{passive:C}):o.addEventListener(u,m,!1)}function Oc(o,u,m,_,C){var I=_;if(!(u&1)&&!(u&2)&&_!==null)e:for(;;){if(_===null)return;var G=_.tag;if(G===3||G===4){var le=_.stateNode.containerInfo;if(le===C||le.nodeType===8&&le.parentNode===C)break;if(G===4)for(G=_.return;G!==null;){var ve=G.tag;if((ve===3||ve===4)&&(ve=G.stateNode.containerInfo,ve===C||ve.nodeType===8&&ve.parentNode===C))return;G=G.return}for(;le!==null;){if(G=Go(le),G===null)return;if(ve=G.tag,ve===5||ve===6){_=I=G;continue e}le=le.parentNode}}_=_.return}dn(function(){var Be=I,rt=ue(m),at=[];e:{var tt=hd.get(o);if(tt!==void 0){var bt=li,Lt=o;switch(o){case"keypress":if(Xs(m)===0)break e;case"keydown":case"keyup":bt=Tc;break;case"focusin":Lt="focus",bt=wc;break;case"focusout":Lt="blur",bt=wc;break;case"beforeblur":case"afterblur":bt=wc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Fo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Zs;break;case ru:case su:case fd:bt=Sp;break;case dd:bt=ca;break;case"scroll":bt=$n;break;case"wheel":bt=od;break;case"copy":case"cut":case"paste":bt=id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Ir}var kt=(u&4)!==0,yi=!kt&&o==="scroll",De=kt?tt!==null?tt+"Capture":null:tt;kt=[];for(var xe=Be,Ne;xe!==null;){Ne=xe;var dt=Ne.stateNode;if(Ne.tag===5&&dt!==null&&(Ne=dt,De!==null&&(dt=hn(xe,De),dt!=null&&kt.push(vl(xe,dt,Ne)))),yi)break;xe=xe.return}0<kt.length&&(tt=new bt(tt,Lt,null,m,rt),at.push({event:tt,listeners:kt}))}}if(!(u&7)){e:{if(tt=o==="mouseover"||o==="pointerover",bt=o==="mouseout"||o==="pointerout",tt&&m!==ut&&(Lt=m.relatedTarget||m.fromElement)&&(Go(Lt)||Lt[kr]))break e;if((bt||tt)&&(tt=rt.window===rt?rt:(tt=rt.ownerDocument)?tt.defaultView||tt.parentWindow:window,bt?(Lt=m.relatedTarget||m.toElement,bt=Be,Lt=Lt?Go(Lt):null,Lt!==null&&(yi=pr(Lt),Lt!==yi||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(bt=null,Lt=Be),bt!==Lt)){if(kt=nd,dt="onMouseLeave",De="onMouseEnter",xe="mouse",(o==="pointerout"||o==="pointerover")&&(kt=Ir,dt="onPointerLeave",De="onPointerEnter",xe="pointer"),yi=bt==null?tt:ei(bt),Ne=Lt==null?tt:ei(Lt),tt=new kt(dt,xe+"leave",bt,m,rt),tt.target=yi,tt.relatedTarget=Ne,dt=null,Go(rt)===Be&&(kt=new kt(De,xe+"enter",Lt,m,rt),kt.target=Ne,kt.relatedTarget=yi,dt=kt),yi=dt,bt&&Lt)t:{for(kt=bt,De=Lt,xe=0,Ne=kt;Ne;Ne=ga(Ne))xe++;for(Ne=0,dt=De;dt;dt=ga(dt))Ne++;for(;0<xe-Ne;)kt=ga(kt),xe--;for(;0<Ne-xe;)De=ga(De),Ne--;for(;xe--;){if(kt===De||De!==null&&kt===De.alternate)break t;kt=ga(kt),De=ga(De)}kt=null}else kt=null;bt!==null&&Ip(at,tt,bt,kt,!1),Lt!==null&&yi!==null&&Ip(at,yi,Lt,kt,!0)}}e:{if(tt=Be?ei(Be):window,bt=tt.nodeName&&tt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&tt.type==="file")var Ft=Cp;else if(Cc(tt))if(dl)Ft=Hn;else{Ft=Rp;var Vt=hl}else(bt=tt.nodeName)&&bt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(Ft=cd);if(Ft&&(Ft=Ft(o,Be))){cl(at,Ft,m,rt);break e}Vt&&Vt(o,tt,Be),o==="focusout"&&(Vt=tt._wrapperState)&&Vt.controlled&&tt.type==="number"&&ze(tt,"number",tt.value)}switch(Vt=Be?ei(Be):window,o){case"focusin":(Cc(Vt)||Vt.contentEditable==="true")&&(Rs=Vt,ma=Be,iu=null);break;case"focusout":iu=ma=Rs=null;break;case"mousedown":Pi=!0;break;case"contextmenu":case"mouseup":case"dragend":Pi=!1,Lc(at,m,rt);break;case"selectionchange":if(Ic)break;case"keydown":case"keyup":Lc(at,m,rt)}var Ht;if(tr)e:{switch(o){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Bo?ud(o,m)&&(Yt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Yt="onCompositionStart");Yt&&(ll&&m.locale!=="ko"&&(Bo||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Bo&&(Ht=mi()):(mr=rt,js="value"in mr?mr.value:mr.textContent,Bo=!0)),Vt=Bc(Be,Yt),0<Vt.length&&(Yt=new rd(Yt,o,null,m,rt),at.push({event:Yt,listeners:Vt}),Ht?Yt.data=Ht:(Ht=Ac(m),Ht!==null&&(Yt.data=Ht)))),(Ht=Bn?Tp(o,m):tu(o,m))&&(Be=Bc(Be,"onBeforeInput"),0<Be.length&&(rt=new rd("onBeforeInput","beforeinput",null,m,rt),at.push({event:rt,listeners:Be}),rt.data=Ht))}ml(at,u)})}function vl(o,u,m){return{instance:o,listener:u,currentTarget:m}}function Bc(o,u){for(var m=u+"Capture",_=[];o!==null;){var C=o,I=C.stateNode;C.tag===5&&I!==null&&(C=I,I=hn(o,m),I!=null&&_.unshift(vl(o,I,C)),I=hn(o,u),I!=null&&_.push(vl(o,I,C))),o=o.return}return _}function ga(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Ip(o,u,m,_,C){for(var I=u._reactName,G=[];m!==null&&m!==_;){var le=m,ve=le.alternate,Be=le.stateNode;if(ve!==null&&ve===_)break;le.tag===5&&Be!==null&&(le=Be,C?(ve=hn(m,I),ve!=null&&G.unshift(vl(m,ve,le))):C||(ve=hn(m,I),ve!=null&&G.push(vl(m,ve,le)))),m=m.return}G.length!==0&&o.push({event:u,listeners:G})}var rv=/\r\n?/g,Lp=/\u0000|\uFFFD/g;function md(o){return(typeof o=="string"?o:""+o).replace(rv,`
`).replace(Lp,"")}function uu(o,u,m){if(u=md(u),md(o)!==u&&m)throw Error(t(425))}function cu(){}var yl=null,gd=null;function vd(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,xd=typeof clearTimeout=="function"?clearTimeout:void 0,zc=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof zc<"u"?function(o){return zc.resolve(null).then(o).catch(Dp)}:yd;function Dp(o){setTimeout(function(){throw o})}function Vc(o,u){var m=u,_=0;do{var C=m.nextSibling;if(o.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(_===0){o.removeChild(C),ko(u);return}_--}else m!=="$"&&m!=="$?"&&m!=="$!"||_++;m=C}while(m);ko(u)}function eo(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return o}function _d(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return o;u--}else m==="/$"&&u++}o=o.previousSibling}return null}var va=Math.random().toString(36).slice(2),vi="__reactFiber$"+va,xl="__reactProps$"+va,kr="__reactContainer$"+va,ya="__reactEvents$"+va,Hc="__reactListeners$"+va,Gc="__reactHandles$"+va;function Go(o){var u=o[vi];if(u)return u;for(var m=o.parentNode;m;){if(u=m[kr]||m[vi]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=_d(o);o!==null;){if(m=o[vi])return m;o=_d(o)}return u}o=m,m=o.parentNode}return null}function to(o){return o=o[vi]||o[kr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ei(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Wc(o){return o[xl]||null}var Sd=[],Ii=-1;function Xn(o){return{current:o}}function Ln(o){0>Ii||(o.current=Sd[Ii],Sd[Ii]=null,Ii--)}function An(o,u){Ii++,Sd[Ii]=o.current,o.current=u}var no={},Fi=Xn(no),nr=Xn(!1),io=no;function xa(o,u){var m=o.type.contextTypes;if(!m)return no;var _=o.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===u)return _.__reactInternalMemoizedMaskedChildContext;var C={},I;for(I in m)C[I]=u[I];return _&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=C),C}function qi(o){return o=o.childContextTypes,o!=null}function fu(){Ln(nr),Ln(Fi)}function wd(o,u,m){if(Fi.current!==no)throw Error(t(168));An(Fi,u),An(nr,m)}function du(o,u,m){var _=o.stateNode;if(u=u.childContextTypes,typeof _.getChildContext!="function")return m;_=_.getChildContext();for(var C in _)if(!(C in u))throw Error(t(108,$(o)||"Unknown",C));return j({},m,_)}function _a(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||no,io=Fi.current,An(Fi,o),An(nr,nr.current),!0}function Md(o,u,m){var _=o.stateNode;if(!_)throw Error(t(169));m?(o=du(o,u,io),_.__reactInternalMemoizedMergedChildContext=o,Ln(nr),Ln(Fi),An(Fi,o)):Ln(nr),An(nr,m)}var gs=null,hu=!1,jc=!1;function pu(o){gs===null?gs=[o]:gs.push(o)}function kp(o){hu=!0,pu(o)}function Is(){if(!jc&&gs!==null){jc=!0;var o=0,u=nn;try{var m=gs;for(nn=1;o<m.length;o++){var _=m[o];do _=_(!0);while(_!==null)}gs=null,hu=!1}catch(C){throw gs!==null&&(gs=gs.slice(o+1)),oa(st,Is),C}finally{nn=u,jc=!1}}return null}var Sa=[],yr=0,Xc=null,Yc=0,ir=[],Li=0,wa=null,pt=1,$r="";function ro(o,u){Sa[yr++]=Yc,Sa[yr++]=Xc,Xc=o,Yc=u}function Ed(o,u,m){ir[Li++]=pt,ir[Li++]=$r,ir[Li++]=wa,wa=o;var _=pt;o=$r;var C=32-Bt(_)-1;_&=~(1<<C),m+=1;var I=32-Bt(u)+C;if(30<I){var G=C-C%5;I=(_&(1<<G)-1).toString(32),_>>=G,C-=G,pt=1<<32-Bt(u)+C|m<<C|_,$r=I+o}else pt=1<<I|m<<C|_,$r=o}function bd(o){o.return!==null&&(ro(o,1),Ed(o,1,0))}function so(o){for(;o===Xc;)Xc=Sa[--yr],Sa[yr]=null,Yc=Sa[--yr],Sa[yr]=null;for(;o===wa;)wa=ir[--Li],ir[Li]=null,$r=ir[--Li],ir[Li]=null,pt=ir[--Li],ir[Li]=null}var Oi=null,rr=null,Nn=!1,es=null;function Td(o,u){var m=Us(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=o,u=o.deletions,u===null?(o.deletions=[m],o.flags|=16):u.push(m)}function Ad(o,u){switch(o.tag){case 5:var m=o.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(o.stateNode=u,Oi=o,rr=eo(u.firstChild),!0):!1;case 6:return u=o.pendingProps===""||u.nodeType!==3?null:u,u!==null?(o.stateNode=u,Oi=o,rr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=wa!==null?{id:pt,overflow:$r}:null,o.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=Us(18,null,null,0),m.stateNode=u,m.return=o,o.child=m,Oi=o,rr=null,!0):!1;default:return!1}}function qc(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Jc(o){if(Nn){var u=rr;if(u){var m=u;if(!Ad(o,u)){if(qc(o))throw Error(t(418));u=eo(m.nextSibling);var _=Oi;u&&Ad(o,u)?Td(_,m):(o.flags=o.flags&-4097|2,Nn=!1,Oi=o)}}else{if(qc(o))throw Error(t(418));o.flags=o.flags&-4097|2,Nn=!1,Oi=o}}}function Zc(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Oi=o}function _l(o){if(o!==Oi)return!1;if(!Nn)return Zc(o),Nn=!0,!1;var u;if((u=o.tag!==3)&&!(u=o.tag!==5)&&(u=o.type,u=u!=="head"&&u!=="body"&&!vd(o.type,o.memoizedProps)),u&&(u=rr)){if(qc(o))throw Cd(),Error(t(418));for(;u;)Td(o,u),u=eo(u.nextSibling)}if(Zc(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(u===0){rr=eo(o.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}o=o.nextSibling}rr=null}}else rr=Oi?eo(o.stateNode.nextSibling):null;return!0}function Cd(){for(var o=rr;o;)o=eo(o.nextSibling)}function Wo(){rr=Oi=null,Nn=!1}function Sl(o){es===null?es=[o]:es.push(o)}var ov=R.ReactCurrentBatchConfig;function mu(o,u,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var _=m.stateNode}if(!_)throw Error(t(147,o));var C=_,I=""+o;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===I?u.ref:(u=function(G){var le=C.refs;G===null?delete le[I]:le[I]=G},u._stringRef=I,u)}if(typeof o!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,o))}return o}function gu(o,u){throw o=Object.prototype.toString.call(u),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o))}function Rd(o){var u=o._init;return u(o._payload)}function Pd(o){function u(De,xe){if(o){var Ne=De.deletions;Ne===null?(De.deletions=[xe],De.flags|=16):Ne.push(xe)}}function m(De,xe){if(!o)return null;for(;xe!==null;)u(De,xe),xe=xe.sibling;return null}function _(De,xe){for(De=new Map;xe!==null;)xe.key!==null?De.set(xe.key,xe):De.set(xe.index,xe),xe=xe.sibling;return De}function C(De,xe){return De=Ll(De,xe),De.index=0,De.sibling=null,De}function I(De,xe,Ne){return De.index=Ne,o?(Ne=De.alternate,Ne!==null?(Ne=Ne.index,Ne<xe?(De.flags|=2,xe):Ne):(De.flags|=2,xe)):(De.flags|=1048576,xe)}function G(De){return o&&De.alternate===null&&(De.flags|=2),De}function le(De,xe,Ne,dt){return xe===null||xe.tag!==6?(xe=bv(Ne,De.mode,dt),xe.return=De,xe):(xe=C(xe,Ne),xe.return=De,xe)}function ve(De,xe,Ne,dt){var Ft=Ne.type;return Ft===O?rt(De,xe,Ne.props.children,dt,Ne.key):xe!==null&&(xe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===ae&&Rd(Ft)===xe.type)?(dt=C(xe,Ne.props),dt.ref=mu(De,xe,Ne),dt.return=De,dt):(dt=im(Ne.type,Ne.key,Ne.props,null,De.mode,dt),dt.ref=mu(De,xe,Ne),dt.return=De,dt)}function Be(De,xe,Ne,dt){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ne.containerInfo||xe.stateNode.implementation!==Ne.implementation?(xe=Tv(Ne,De.mode,dt),xe.return=De,xe):(xe=C(xe,Ne.children||[]),xe.return=De,xe)}function rt(De,xe,Ne,dt,Ft){return xe===null||xe.tag!==7?(xe=Du(Ne,De.mode,dt,Ft),xe.return=De,xe):(xe=C(xe,Ne),xe.return=De,xe)}function at(De,xe,Ne){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=bv(""+xe,De.mode,Ne),xe.return=De,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case F:return Ne=im(xe.type,xe.key,xe.props,null,De.mode,Ne),Ne.ref=mu(De,null,xe),Ne.return=De,Ne;case N:return xe=Tv(xe,De.mode,Ne),xe.return=De,xe;case ae:var dt=xe._init;return at(De,dt(xe._payload),Ne)}if(_e(xe)||J(xe))return xe=Du(xe,De.mode,Ne,null),xe.return=De,xe;gu(De,xe)}return null}function tt(De,xe,Ne,dt){var Ft=xe!==null?xe.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Ft!==null?null:le(De,xe,""+Ne,dt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case F:return Ne.key===Ft?ve(De,xe,Ne,dt):null;case N:return Ne.key===Ft?Be(De,xe,Ne,dt):null;case ae:return Ft=Ne._init,tt(De,xe,Ft(Ne._payload),dt)}if(_e(Ne)||J(Ne))return Ft!==null?null:rt(De,xe,Ne,dt,null);gu(De,Ne)}return null}function bt(De,xe,Ne,dt,Ft){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return De=De.get(Ne)||null,le(xe,De,""+dt,Ft);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case F:return De=De.get(dt.key===null?Ne:dt.key)||null,ve(xe,De,dt,Ft);case N:return De=De.get(dt.key===null?Ne:dt.key)||null,Be(xe,De,dt,Ft);case ae:var Vt=dt._init;return bt(De,xe,Ne,Vt(dt._payload),Ft)}if(_e(dt)||J(dt))return De=De.get(Ne)||null,rt(xe,De,dt,Ft,null);gu(xe,dt)}return null}function Lt(De,xe,Ne,dt){for(var Ft=null,Vt=null,Ht=xe,Yt=xe=0,Qi=null;Ht!==null&&Yt<Ne.length;Yt++){Ht.index>Yt?(Qi=Ht,Ht=null):Qi=Ht.sibling;var Mn=tt(De,Ht,Ne[Yt],dt);if(Mn===null){Ht===null&&(Ht=Qi);break}o&&Ht&&Mn.alternate===null&&u(De,Ht),xe=I(Mn,xe,Yt),Vt===null?Ft=Mn:Vt.sibling=Mn,Vt=Mn,Ht=Qi}if(Yt===Ne.length)return m(De,Ht),Nn&&ro(De,Yt),Ft;if(Ht===null){for(;Yt<Ne.length;Yt++)Ht=at(De,Ne[Yt],dt),Ht!==null&&(xe=I(Ht,xe,Yt),Vt===null?Ft=Ht:Vt.sibling=Ht,Vt=Ht);return Nn&&ro(De,Yt),Ft}for(Ht=_(De,Ht);Yt<Ne.length;Yt++)Qi=bt(Ht,De,Yt,Ne[Yt],dt),Qi!==null&&(o&&Qi.alternate!==null&&Ht.delete(Qi.key===null?Yt:Qi.key),xe=I(Qi,xe,Yt),Vt===null?Ft=Qi:Vt.sibling=Qi,Vt=Qi);return o&&Ht.forEach(function(Dl){return u(De,Dl)}),Nn&&ro(De,Yt),Ft}function kt(De,xe,Ne,dt){var Ft=J(Ne);if(typeof Ft!="function")throw Error(t(150));if(Ne=Ft.call(Ne),Ne==null)throw Error(t(151));for(var Vt=Ft=null,Ht=xe,Yt=xe=0,Qi=null,Mn=Ne.next();Ht!==null&&!Mn.done;Yt++,Mn=Ne.next()){Ht.index>Yt?(Qi=Ht,Ht=null):Qi=Ht.sibling;var Dl=tt(De,Ht,Mn.value,dt);if(Dl===null){Ht===null&&(Ht=Qi);break}o&&Ht&&Dl.alternate===null&&u(De,Ht),xe=I(Dl,xe,Yt),Vt===null?Ft=Dl:Vt.sibling=Dl,Vt=Dl,Ht=Qi}if(Mn.done)return m(De,Ht),Nn&&ro(De,Yt),Ft;if(Ht===null){for(;!Mn.done;Yt++,Mn=Ne.next())Mn=at(De,Mn.value,dt),Mn!==null&&(xe=I(Mn,xe,Yt),Vt===null?Ft=Mn:Vt.sibling=Mn,Vt=Mn);return Nn&&ro(De,Yt),Ft}for(Ht=_(De,Ht);!Mn.done;Yt++,Mn=Ne.next())Mn=bt(Ht,De,Yt,Mn.value,dt),Mn!==null&&(o&&Mn.alternate!==null&&Ht.delete(Mn.key===null?Yt:Mn.key),xe=I(Mn,xe,Yt),Vt===null?Ft=Mn:Vt.sibling=Mn,Vt=Mn);return o&&Ht.forEach(function(Hb){return u(De,Hb)}),Nn&&ro(De,Yt),Ft}function yi(De,xe,Ne,dt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===O&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case F:e:{for(var Ft=Ne.key,Vt=xe;Vt!==null;){if(Vt.key===Ft){if(Ft=Ne.type,Ft===O){if(Vt.tag===7){m(De,Vt.sibling),xe=C(Vt,Ne.props.children),xe.return=De,De=xe;break e}}else if(Vt.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===ae&&Rd(Ft)===Vt.type){m(De,Vt.sibling),xe=C(Vt,Ne.props),xe.ref=mu(De,Vt,Ne),xe.return=De,De=xe;break e}m(De,Vt);break}else u(De,Vt);Vt=Vt.sibling}Ne.type===O?(xe=Du(Ne.props.children,De.mode,dt,Ne.key),xe.return=De,De=xe):(dt=im(Ne.type,Ne.key,Ne.props,null,De.mode,dt),dt.ref=mu(De,xe,Ne),dt.return=De,De=dt)}return G(De);case N:e:{for(Vt=Ne.key;xe!==null;){if(xe.key===Vt)if(xe.tag===4&&xe.stateNode.containerInfo===Ne.containerInfo&&xe.stateNode.implementation===Ne.implementation){m(De,xe.sibling),xe=C(xe,Ne.children||[]),xe.return=De,De=xe;break e}else{m(De,xe);break}else u(De,xe);xe=xe.sibling}xe=Tv(Ne,De.mode,dt),xe.return=De,De=xe}return G(De);case ae:return Vt=Ne._init,yi(De,xe,Vt(Ne._payload),dt)}if(_e(Ne))return Lt(De,xe,Ne,dt);if(J(Ne))return kt(De,xe,Ne,dt);gu(De,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,xe!==null&&xe.tag===6?(m(De,xe.sibling),xe=C(xe,Ne),xe.return=De,De=xe):(m(De,xe),xe=bv(Ne,De.mode,dt),xe.return=De,De=xe),G(De)):m(De,xe)}return yi}var Ma=Pd(!0),vu=Pd(!1),Ea=Xn(null),ba=null,oo=null,wl=null;function Ta(){wl=oo=ba=null}function yu(o){var u=Ea.current;Ln(Ea),o._currentValue=u}function xu(o,u,m){for(;o!==null;){var _=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),o===m)break;o=o.return}}function jo(o,u){ba=o,wl=oo=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&u&&(on=!0),o.firstContext=null)}function Nr(o){var u=o._currentValue;if(wl!==o)if(o={context:o,memoizedValue:u,next:null},oo===null){if(ba===null)throw Error(t(308));oo=o,ba.dependencies={lanes:0,firstContext:o}}else oo=oo.next=o;return u}var ao=null;function Id(o){ao===null?ao=[o]:ao.push(o)}function _u(o,u,m,_){var C=u.interleaved;return C===null?(m.next=m,Id(u)):(m.next=C.next,C.next=m),u.interleaved=m,vs(o,_)}function vs(o,u){o.lanes|=u;var m=o.alternate;for(m!==null&&(m.lanes|=u),m=o,o=o.return;o!==null;)o.childLanes|=u,m=o.alternate,m!==null&&(m.childLanes|=u),m=o,o=o.return;return m.tag===3?m.stateNode:null}var En=!1;function rn(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ti(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function bn(o,u){return{eventTime:o,lane:u,tag:0,payload:null,callback:null,next:null}}function zn(o,u,m){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,_n&2){var C=_.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),_.pending=u,vs(o,m)}return C=_.interleaved,C===null?(u.next=u,Id(_)):(u.next=C.next,C.next=u),_.interleaved=u,vs(o,m)}function Ji(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var _=u.lanes;_&=o.pendingLanes,m|=_,u.lanes=m,Pn(o,m)}}function Aa(o,u){var m=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var C=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};I===null?C=I=G:I=I.next=G,m=m.next}while(m!==null);I===null?C=I=u:I=I.next=u}else C=I=u;m={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:_.shared,effects:_.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}function Yn(o,u,m,_){var C=o.updateQueue;En=!1;var I=C.firstBaseUpdate,G=C.lastBaseUpdate,le=C.shared.pending;if(le!==null){C.shared.pending=null;var ve=le,Be=ve.next;ve.next=null,G===null?I=Be:G.next=Be,G=ve;var rt=o.alternate;rt!==null&&(rt=rt.updateQueue,le=rt.lastBaseUpdate,le!==G&&(le===null?rt.firstBaseUpdate=Be:le.next=Be,rt.lastBaseUpdate=ve))}if(I!==null){var at=C.baseState;G=0,rt=Be=ve=null,le=I;do{var tt=le.lane,bt=le.eventTime;if((_&tt)===tt){rt!==null&&(rt=rt.next={eventTime:bt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var Lt=o,kt=le;switch(tt=u,bt=m,kt.tag){case 1:if(Lt=kt.payload,typeof Lt=="function"){at=Lt.call(bt,at,tt);break e}at=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=kt.payload,tt=typeof Lt=="function"?Lt.call(bt,at,tt):Lt,tt==null)break e;at=j({},at,tt);break e;case 2:En=!0}}le.callback!==null&&le.lane!==0&&(o.flags|=64,tt=C.effects,tt===null?C.effects=[le]:tt.push(le))}else bt={eventTime:bt,lane:tt,tag:le.tag,payload:le.payload,callback:le.callback,next:null},rt===null?(Be=rt=bt,ve=at):rt=rt.next=bt,G|=tt;if(le=le.next,le===null){if(le=C.shared.pending,le===null)break;tt=le,le=tt.next,tt.next=null,C.lastBaseUpdate=tt,C.shared.pending=null}}while(!0);if(rt===null&&(ve=at),C.baseState=ve,C.firstBaseUpdate=Be,C.lastBaseUpdate=rt,u=C.shared.interleaved,u!==null){C=u;do G|=C.lane,C=C.next;while(C!==u)}else I===null&&(C.shared.lanes=0);Ru|=G,o.lanes=G,o.memoizedState=at}}function Ml(o,u,m){if(o=u.effects,u.effects=null,o!==null)for(u=0;u<o.length;u++){var _=o[u],C=_.callback;if(C!==null){if(_.callback=null,_=m,typeof C!="function")throw Error(t(191,C));C.call(_)}}}var Ls={},Ur=Xn(Ls),Ca=Xn(Ls),lo=Xn(Ls);function ui(o){if(o===Ls)throw Error(t(174));return o}function Su(o,u){switch(An(lo,u),An(Ca,o),An(Ur,Ls),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Je(null,"");break;default:o=o===8?u.parentNode:u,u=o.namespaceURI||null,o=o.tagName,u=Je(u,o)}Ln(Ur),An(Ur,u)}function Xo(){Ln(Ur),Ln(Ca),Ln(lo)}function Ra(o){ui(lo.current);var u=ui(Ur.current),m=Je(u,o.type);u!==m&&(An(Ca,o),An(Ur,m))}function El(o){Ca.current===o&&(Ln(Ur),Ln(Ca))}var Un=Xn(0);function ys(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var bl=[];function Ds(){for(var o=0;o<bl.length;o++)bl[o]._workInProgressVersionPrimary=null;bl.length=0}var Pa=R.ReactCurrentDispatcher,Ia=R.ReactCurrentBatchConfig,uo=0,Dn=null,qn=null,yn=null,xs=!1,Zi=!1,Yo=0,xr=0;function Bi(){throw Error(t(321))}function wu(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!Lr(o[m],u[m]))return!1;return!0}function Mu(o,u,m,_,C,I){if(uo=I,Dn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Pa.current=o===null||o.memoizedState===null?Vp:Hp,o=m(_,C),Zi){I=0;do{if(Zi=!1,Yo=0,25<=I)throw Error(t(301));I+=1,yn=qn=null,u.updateQueue=null,Pa.current=Gp,o=m(_,C)}while(Zi)}if(Pa.current=rf,u=qn!==null&&qn.next!==null,uo=0,yn=qn=Dn=null,xs=!1,u)throw Error(t(300));return o}function Ld(){var o=Yo!==0;return Yo=0,o}function zi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Dn.memoizedState=yn=o:yn=yn.next=o,yn}function Fr(){if(qn===null){var o=Dn.alternate;o=o!==null?o.memoizedState:null}else o=qn.next;var u=yn===null?Dn.memoizedState:yn.next;if(u!==null)yn=u,qn=o;else{if(o===null)throw Error(t(310));qn=o,o={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},yn===null?Dn.memoizedState=yn=o:yn=yn.next=o}return yn}function Tl(o,u){return typeof u=="function"?u(o):u}function Eu(o){var u=Fr(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var _=qn,C=_.baseQueue,I=m.pending;if(I!==null){if(C!==null){var G=C.next;C.next=I.next,I.next=G}_.baseQueue=C=I,m.pending=null}if(C!==null){I=C.next,_=_.baseState;var le=G=null,ve=null,Be=I;do{var rt=Be.lane;if((uo&rt)===rt)ve!==null&&(ve=ve.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),_=Be.hasEagerState?Be.eagerState:o(_,Be.action);else{var at={lane:rt,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};ve===null?(le=ve=at,G=_):ve=ve.next=at,Dn.lanes|=rt,Ru|=rt}Be=Be.next}while(Be!==null&&Be!==I);ve===null?G=_:ve.next=le,Lr(_,u.memoizedState)||(on=!0),u.memoizedState=_,u.baseState=G,u.baseQueue=ve,m.lastRenderedState=_}if(o=m.interleaved,o!==null){C=o;do I=C.lane,Dn.lanes|=I,Ru|=I,C=C.next;while(C!==o)}else C===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function co(o){var u=Fr(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var _=m.dispatch,C=m.pending,I=u.memoizedState;if(C!==null){m.pending=null;var G=C=C.next;do I=o(I,G.action),G=G.next;while(G!==C);Lr(I,u.memoizedState)||(on=!0),u.memoizedState=I,u.baseQueue===null&&(u.baseState=I),m.lastRenderedState=I}return[I,_]}function Dd(){}function kd(o,u){var m=Dn,_=Fr(),C=u(),I=!Lr(_.memoizedState,C);if(I&&(_.memoizedState=C,on=!0),_=_.queue,Fd(Np.bind(null,m,_,o),[o]),_.getSnapshot!==u||I||yn!==null&&yn.memoizedState.tag&1){if(m.flags|=2048,_s(9,bu.bind(null,m,_,C,u),void 0,null),Ki===null)throw Error(t(349));uo&30||Kc(m,u,C)}return C}function Kc(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=Dn.updateQueue,u===null?(u={lastEffect:null,stores:null},Dn.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function bu(o,u,m,_){u.value=m,u.getSnapshot=_,Up(u)&&Nd(o)}function Np(o,u,m){return m(function(){Up(u)&&Nd(o)})}function Up(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!Lr(o,m)}catch{return!0}}function Nd(o){var u=vs(o,1);u!==null&&go(u,o,1,-1)}function Ud(o){var u=zi();return typeof o=="function"&&(o=o()),u.memoizedState=u.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:o},u.queue=o,o=o.dispatch=La.bind(null,Dn,o),[u.memoizedState,o]}function _s(o,u,m,_){return o={tag:o,create:u,destroy:m,deps:_,next:null},u=Dn.updateQueue,u===null?(u={lastEffect:null,stores:null},Dn.updateQueue=u,u.lastEffect=o.next=o):(m=u.lastEffect,m===null?u.lastEffect=o.next=o:(_=m.next,m.next=o,o.next=_,u.lastEffect=o)),o}function Fp(){return Fr().memoizedState}function ks(o,u,m,_){var C=zi();Dn.flags|=o,C.memoizedState=_s(1|u,m,void 0,_===void 0?null:_)}function Tu(o,u,m,_){var C=Fr();_=_===void 0?null:_;var I=void 0;if(qn!==null){var G=qn.memoizedState;if(I=G.destroy,_!==null&&wu(_,G.deps)){C.memoizedState=_s(u,m,I,_);return}}Dn.flags|=o,C.memoizedState=_s(1|u,m,I,_)}function sr(o,u){return ks(8390656,8,o,u)}function Fd(o,u){return Tu(2048,8,o,u)}function Od(o,u){return Tu(4,2,o,u)}function Op(o,u){return Tu(4,4,o,u)}function Bp(o,u){if(typeof u=="function")return o=o(),u(o),function(){u(null)};if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Bd(o,u,m){return m=m!=null?m.concat([o]):null,Tu(4,4,Bp.bind(null,u,o),m)}function Qc(){}function zp(o,u){var m=Fr();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&wu(u,_[1])?_[0]:(m.memoizedState=[o,u],o)}function Or(o,u){var m=Fr();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&wu(u,_[1])?_[0]:(o=o(),m.memoizedState=[o,u],o)}function $c(o,u,m){return uo&21?(Lr(m,u)||(m=cn(),Dn.lanes|=m,Ru|=m,o.baseState=!0),u):(o.baseState&&(o.baseState=!1,on=!0),o.memoizedState=m)}function av(o,u){var m=nn;nn=m!==0&&4>m?m:4,o(!0);var _=Ia.transition;Ia.transition={};try{o(!1),u()}finally{nn=m,Ia.transition=_}}function fo(){return Fr().memoizedState}function ef(o,u,m){var _=Pl(o);if(m={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null},Au(o))tf(u,m);else if(m=_u(o,u,m,_),m!==null){var C=zr();go(m,o,_,C),nf(m,u,_)}}function La(o,u,m){var _=Pl(o),C={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null};if(Au(o))tf(u,C);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=u.lastRenderedReducer,I!==null))try{var G=u.lastRenderedState,le=I(G,m);if(C.hasEagerState=!0,C.eagerState=le,Lr(le,G)){var ve=u.interleaved;ve===null?(C.next=C,Id(u)):(C.next=ve.next,ve.next=C),u.interleaved=C;return}}catch{}finally{}m=_u(o,u,C,_),m!==null&&(C=zr(),go(m,o,_,C),nf(m,u,_))}}function Au(o){var u=o.alternate;return o===Dn||u!==null&&u===Dn}function tf(o,u){Zi=xs=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function nf(o,u,m){if(m&4194240){var _=u.lanes;_&=o.pendingLanes,m|=_,u.lanes=m,Pn(o,m)}}var rf={readContext:Nr,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},Vp={readContext:Nr,useCallback:function(o,u){return zi().memoizedState=[o,u===void 0?null:u],o},useContext:Nr,useEffect:sr,useImperativeHandle:function(o,u,m){return m=m!=null?m.concat([o]):null,ks(4194308,4,Bp.bind(null,u,o),m)},useLayoutEffect:function(o,u){return ks(4194308,4,o,u)},useInsertionEffect:function(o,u){return ks(4,2,o,u)},useMemo:function(o,u){var m=zi();return u=u===void 0?null:u,o=o(),m.memoizedState=[o,u],o},useReducer:function(o,u,m){var _=zi();return u=m!==void 0?m(u):u,_.memoizedState=_.baseState=u,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:u},_.queue=o,o=o.dispatch=ef.bind(null,Dn,o),[_.memoizedState,o]},useRef:function(o){var u=zi();return o={current:o},u.memoizedState=o},useState:Ud,useDebugValue:Qc,useDeferredValue:function(o){return zi().memoizedState=o},useTransition:function(){var o=Ud(!1),u=o[0];return o=av.bind(null,o[1]),zi().memoizedState=o,[u,o]},useMutableSource:function(){},useSyncExternalStore:function(o,u,m){var _=Dn,C=zi();if(Nn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=u(),Ki===null)throw Error(t(349));uo&30||Kc(_,u,m)}C.memoizedState=m;var I={value:m,getSnapshot:u};return C.queue=I,sr(Np.bind(null,_,I,o),[o]),_.flags|=2048,_s(9,bu.bind(null,_,I,m,u),void 0,null),m},useId:function(){var o=zi(),u=Ki.identifierPrefix;if(Nn){var m=$r,_=pt;m=(_&~(1<<32-Bt(_)-1)).toString(32)+m,u=":"+u+"R"+m,m=Yo++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=xr++,u=":"+u+"r"+m.toString(32)+":";return o.memoizedState=u},unstable_isNewReconciler:!1},Hp={readContext:Nr,useCallback:zp,useContext:Nr,useEffect:Fd,useImperativeHandle:Bd,useInsertionEffect:Od,useLayoutEffect:Op,useMemo:Or,useReducer:Eu,useRef:Fp,useState:function(){return Eu(Tl)},useDebugValue:Qc,useDeferredValue:function(o){var u=Fr();return $c(u,qn.memoizedState,o)},useTransition:function(){var o=Eu(Tl)[0],u=Fr().memoizedState;return[o,u]},useMutableSource:Dd,useSyncExternalStore:kd,useId:fo,unstable_isNewReconciler:!1},Gp={readContext:Nr,useCallback:zp,useContext:Nr,useEffect:Fd,useImperativeHandle:Bd,useInsertionEffect:Od,useLayoutEffect:Op,useMemo:Or,useReducer:co,useRef:Fp,useState:function(){return co(Tl)},useDebugValue:Qc,useDeferredValue:function(o){var u=Fr();return qn===null?u.memoizedState=o:$c(u,qn.memoizedState,o)},useTransition:function(){var o=co(Tl)[0],u=Fr().memoizedState;return[o,u]},useMutableSource:Dd,useSyncExternalStore:kd,useId:fo,unstable_isNewReconciler:!1};function ts(o,u){if(o&&o.defaultProps){u=j({},u),o=o.defaultProps;for(var m in o)u[m]===void 0&&(u[m]=o[m]);return u}return u}function Cu(o,u,m,_){u=o.memoizedState,m=m(_,u),m=m==null?u:j({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var sf={isMounted:function(o){return(o=o._reactInternals)?pr(o)===o:!1},enqueueSetState:function(o,u,m){o=o._reactInternals;var _=zr(),C=Pl(o),I=bn(_,C);I.payload=u,m!=null&&(I.callback=m),u=zn(o,I,C),u!==null&&(go(u,o,C,_),Ji(u,o,C))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var _=zr(),C=Pl(o),I=bn(_,C);I.tag=1,I.payload=u,m!=null&&(I.callback=m),u=zn(o,I,C),u!==null&&(go(u,o,C,_),Ji(u,o,C))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=zr(),_=Pl(o),C=bn(m,_);C.tag=2,u!=null&&(C.callback=u),u=zn(o,C,_),u!==null&&(go(u,o,_,m),Ji(u,o,_))}};function Wp(o,u,m,_,C,I,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,I,G):u.prototype&&u.prototype.isPureReactComponent?!ha(m,_)||!ha(C,I):!0}function f(o,u,m){var _=!1,C=no,I=u.contextType;return typeof I=="object"&&I!==null?I=Nr(I):(C=qi(u)?io:Fi.current,_=u.contextTypes,I=(_=_!=null)?xa(o,C):no),u=new u(m,I),o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=sf,o.stateNode=u,u._reactInternals=o,_&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=C,o.__reactInternalMemoizedMaskedChildContext=I),u}function h(o,u,m,_){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==o&&sf.enqueueReplaceState(u,u.state,null)}function x(o,u,m,_){var C=o.stateNode;C.props=m,C.state=o.memoizedState,C.refs={},rn(o);var I=u.contextType;typeof I=="object"&&I!==null?C.context=Nr(I):(I=qi(u)?io:Fi.current,C.context=xa(o,I)),C.state=o.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(Cu(o,u,I,m),C.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&sf.enqueueReplaceState(C,C.state,null),Yn(o,m,C,_),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308)}function b(o,u){try{var m="",_=u;do m+=re(_),_=_.return;while(_);var C=m}catch(I){C=`
Error generating stack: `+I.message+`
`+I.stack}return{value:o,source:u,stack:C,digest:null}}function P(o,u,m){return{value:o,source:null,stack:m??null,digest:u??null}}function U(o,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var se=typeof WeakMap=="function"?WeakMap:Map;function we(o,u,m){m=bn(-1,m),m.tag=3,m.payload={element:null};var _=u.value;return m.callback=function(){Kp||(Kp=!0,vv=_),U(o,u)},m}function qe(o,u,m){m=bn(-1,m),m.tag=3;var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var C=u.value;m.payload=function(){return _(C)},m.callback=function(){U(o,u)}}var I=o.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(m.callback=function(){U(o,u),typeof _!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var G=u.stack;this.componentDidCatch(u.value,{componentStack:G!==null?G:""})}),m}function ft(o,u,m){var _=o.pingCache;if(_===null){_=o.pingCache=new se;var C=new Set;_.set(u,C)}else C=_.get(u),C===void 0&&(C=new Set,_.set(u,C));C.has(m)||(C.add(m),o=Lb.bind(null,o,u,m),u.then(o,o))}function At(o){do{var u;if((u=o.tag===13)&&(u=o.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return o;o=o.return}while(o!==null);return null}function qt(o,u,m,_,C){return o.mode&1?(o.flags|=65536,o.lanes=C,o):(o===u?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=bn(-1,1),u.tag=2,zn(m,u,1))),m.lanes|=1),o)}var zt=R.ReactCurrentOwner,on=!1;function St(o,u,m,_){u.child=o===null?vu(u,null,m,_):Ma(u,o.child,m,_)}function Vi(o,u,m,_,C){m=m.render;var I=u.ref;return jo(u,C),_=Mu(o,u,m,_,I,C),m=Ld(),o!==null&&!on?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~C,Da(o,u,C)):(Nn&&m&&bd(u),u.flags|=1,St(o,u,_,C),u.child)}function Br(o,u,m,_,C){if(o===null){var I=m.type;return typeof I=="function"&&!Ev(I)&&I.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=I,Ue(o,u,I,_,C)):(o=im(m.type,null,_,u,u.mode,C),o.ref=u.ref,o.return=u,u.child=o)}if(I=o.child,!(o.lanes&C)){var G=I.memoizedProps;if(m=m.compare,m=m!==null?m:ha,m(G,_)&&o.ref===u.ref)return Da(o,u,C)}return u.flags|=1,o=Ll(I,_),o.ref=u.ref,o.return=u,u.child=o}function Ue(o,u,m,_,C){if(o!==null){var I=o.memoizedProps;if(ha(I,_)&&o.ref===u.ref)if(on=!1,u.pendingProps=_=I,(o.lanes&C)!==0)o.flags&131072&&(on=!0);else return u.lanes=o.lanes,Da(o,u,C)}return xt(o,u,m,_,C)}function be(o,u,m){var _=u.pendingProps,C=_.children,I=o!==null?o.memoizedState:null;if(_.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},An(af,Ss),Ss|=m;else{if(!(m&1073741824))return o=I!==null?I.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:o,cachePool:null,transitions:null},u.updateQueue=null,An(af,Ss),Ss|=o,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=I!==null?I.baseLanes:m,An(af,Ss),Ss|=_}else I!==null?(_=I.baseLanes|m,u.memoizedState=null):_=m,An(af,Ss),Ss|=_;return St(o,u,C,m),u.child}function Ge(o,u){var m=u.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function xt(o,u,m,_,C){var I=qi(m)?io:Fi.current;return I=xa(u,I),jo(u,C),m=Mu(o,u,m,_,I,C),_=Ld(),o!==null&&!on?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~C,Da(o,u,C)):(Nn&&_&&bd(u),u.flags|=1,St(o,u,m,C),u.child)}function Nt(o,u,m,_,C){if(qi(m)){var I=!0;_a(u)}else I=!1;if(jo(u,C),u.stateNode===null)Xp(o,u),f(u,m,_),x(u,m,_,C),_=!0;else if(o===null){var G=u.stateNode,le=u.memoizedProps;G.props=le;var ve=G.context,Be=m.contextType;typeof Be=="object"&&Be!==null?Be=Nr(Be):(Be=qi(m)?io:Fi.current,Be=xa(u,Be));var rt=m.getDerivedStateFromProps,at=typeof rt=="function"||typeof G.getSnapshotBeforeUpdate=="function";at||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(le!==_||ve!==Be)&&h(u,G,_,Be),En=!1;var tt=u.memoizedState;G.state=tt,Yn(u,_,G,C),ve=u.memoizedState,le!==_||tt!==ve||nr.current||En?(typeof rt=="function"&&(Cu(u,m,rt,_),ve=u.memoizedState),(le=En||Wp(u,m,le,_,tt,ve,Be))?(at||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(u.flags|=4194308)):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=ve),G.props=_,G.state=ve,G.context=Be,_=le):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{G=u.stateNode,ti(o,u),le=u.memoizedProps,Be=u.type===u.elementType?le:ts(u.type,le),G.props=Be,at=u.pendingProps,tt=G.context,ve=m.contextType,typeof ve=="object"&&ve!==null?ve=Nr(ve):(ve=qi(m)?io:Fi.current,ve=xa(u,ve));var bt=m.getDerivedStateFromProps;(rt=typeof bt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(le!==at||tt!==ve)&&h(u,G,_,ve),En=!1,tt=u.memoizedState,G.state=tt,Yn(u,_,G,C);var Lt=u.memoizedState;le!==at||tt!==Lt||nr.current||En?(typeof bt=="function"&&(Cu(u,m,bt,_),Lt=u.memoizedState),(Be=En||Wp(u,m,Be,_,tt,Lt,ve)||!1)?(rt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(_,Lt,ve),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(_,Lt,ve)),typeof G.componentDidUpdate=="function"&&(u.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof G.componentDidUpdate!="function"||le===o.memoizedProps&&tt===o.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||le===o.memoizedProps&&tt===o.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Lt),G.props=_,G.state=Lt,G.context=ve,_=Be):(typeof G.componentDidUpdate!="function"||le===o.memoizedProps&&tt===o.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||le===o.memoizedProps&&tt===o.memoizedState||(u.flags|=1024),_=!1)}return Kt(o,u,m,_,I,C)}function Kt(o,u,m,_,C,I){Ge(o,u);var G=(u.flags&128)!==0;if(!_&&!G)return C&&Md(u,m,!1),Da(o,u,I);_=u.stateNode,zt.current=u;var le=G&&typeof m.getDerivedStateFromError!="function"?null:_.render();return u.flags|=1,o!==null&&G?(u.child=Ma(u,o.child,null,I),u.child=Ma(u,null,le,I)):St(o,u,le,I),u.memoizedState=_.state,C&&Md(u,m,!0),u.child}function Jt(o){var u=o.stateNode;u.pendingContext?wd(o,u.pendingContext,u.pendingContext!==u.context):u.context&&wd(o,u.context,!1),Su(o,u.containerInfo)}function gn(o,u,m,_,C){return Wo(),Sl(C),u.flags|=256,St(o,u,m,_),u.child}var ci={dehydrated:null,treeContext:null,retryLane:0};function mn(o){return{baseLanes:o,cachePool:null,transitions:null}}function ho(o,u,m){var _=u.pendingProps,C=Un.current,I=!1,G=(u.flags&128)!==0,le;if((le=G)||(le=o!==null&&o.memoizedState===null?!1:(C&2)!==0),le?(I=!0,u.flags&=-129):(o===null||o.memoizedState!==null)&&(C|=1),An(Un,C&1),o===null)return Jc(u),o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(u.mode&1?o.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(G=_.children,o=_.fallback,I?(_=u.mode,I=u.child,G={mode:"hidden",children:G},!(_&1)&&I!==null?(I.childLanes=0,I.pendingProps=G):I=rm(G,_,0,null),o=Du(o,_,m,null),I.return=u,o.return=u,I.sibling=o,u.child=I,u.child.memoizedState=mn(m),u.memoizedState=ci,o):zd(u,G));if(C=o.memoizedState,C!==null&&(le=C.dehydrated,le!==null))return _b(o,u,G,_,le,C,m);if(I){I=_.fallback,G=u.mode,C=o.child,le=C.sibling;var ve={mode:"hidden",children:_.children};return!(G&1)&&u.child!==C?(_=u.child,_.childLanes=0,_.pendingProps=ve,u.deletions=null):(_=Ll(C,ve),_.subtreeFlags=C.subtreeFlags&14680064),le!==null?I=Ll(le,I):(I=Du(I,G,m,null),I.flags|=2),I.return=u,_.return=u,_.sibling=I,u.child=_,_=I,I=u.child,G=o.child.memoizedState,G=G===null?mn(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},I.memoizedState=G,I.childLanes=o.childLanes&~m,u.memoizedState=ci,_}return I=o.child,o=I.sibling,_=Ll(I,{mode:"visible",children:_.children}),!(u.mode&1)&&(_.lanes=m),_.return=u,_.sibling=null,o!==null&&(m=u.deletions,m===null?(u.deletions=[o],u.flags|=16):m.push(o)),u.child=_,u.memoizedState=null,_}function zd(o,u){return u=rm({mode:"visible",children:u},o.mode,0,null),u.return=o,o.child=u}function jp(o,u,m,_){return _!==null&&Sl(_),Ma(u,o.child,null,m),o=zd(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function _b(o,u,m,_,C,I,G){if(m)return u.flags&256?(u.flags&=-257,_=P(Error(t(422))),jp(o,u,G,_)):u.memoizedState!==null?(u.child=o.child,u.flags|=128,null):(I=_.fallback,C=u.mode,_=rm({mode:"visible",children:_.children},C,0,null),I=Du(I,C,G,null),I.flags|=2,_.return=u,I.return=u,_.sibling=I,u.child=_,u.mode&1&&Ma(u,o.child,null,G),u.child.memoizedState=mn(G),u.memoizedState=ci,I);if(!(u.mode&1))return jp(o,u,G,null);if(C.data==="$!"){if(_=C.nextSibling&&C.nextSibling.dataset,_)var le=_.dgst;return _=le,I=Error(t(419)),_=P(I,_,void 0),jp(o,u,G,_)}if(le=(G&o.childLanes)!==0,on||le){if(_=Ki,_!==null){switch(G&-G){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(_.suspendedLanes|G)?0:C,C!==0&&C!==I.retryLane&&(I.retryLane=C,vs(o,C),go(_,o,C,-1))}return Mv(),_=P(Error(t(421))),jp(o,u,G,_)}return C.data==="$?"?(u.flags|=128,u.child=o.child,u=Db.bind(null,o),C._reactRetry=u,null):(o=I.treeContext,rr=eo(C.nextSibling),Oi=u,Nn=!0,es=null,o!==null&&(ir[Li++]=pt,ir[Li++]=$r,ir[Li++]=wa,pt=o.id,$r=o.overflow,wa=u),u=zd(u,_.children),u.flags|=4096,u)}function L_(o,u,m){o.lanes|=u;var _=o.alternate;_!==null&&(_.lanes|=u),xu(o.return,u,m)}function lv(o,u,m,_,C){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:C}:(I.isBackwards=u,I.rendering=null,I.renderingStartTime=0,I.last=_,I.tail=m,I.tailMode=C)}function D_(o,u,m){var _=u.pendingProps,C=_.revealOrder,I=_.tail;if(St(o,u,_.children,m),_=Un.current,_&2)_=_&1|2,u.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&L_(o,m,u);else if(o.tag===19)L_(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}if(An(Un,_),!(u.mode&1))u.memoizedState=null;else switch(C){case"forwards":for(m=u.child,C=null;m!==null;)o=m.alternate,o!==null&&ys(o)===null&&(C=m),m=m.sibling;m=C,m===null?(C=u.child,u.child=null):(C=m.sibling,m.sibling=null),lv(u,!1,C,m,I);break;case"backwards":for(m=null,C=u.child,u.child=null;C!==null;){if(o=C.alternate,o!==null&&ys(o)===null){u.child=C;break}o=C.sibling,C.sibling=m,m=C,C=o}lv(u,!0,m,null,I);break;case"together":lv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Xp(o,u){!(u.mode&1)&&o!==null&&(o.alternate=null,u.alternate=null,u.flags|=2)}function Da(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),Ru|=u.lanes,!(m&u.childLanes))return null;if(o!==null&&u.child!==o.child)throw Error(t(153));if(u.child!==null){for(o=u.child,m=Ll(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=Ll(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function Sb(o,u,m){switch(u.tag){case 3:Jt(u),Wo();break;case 5:Ra(u);break;case 1:qi(u.type)&&_a(u);break;case 4:Su(u,u.stateNode.containerInfo);break;case 10:var _=u.type._context,C=u.memoizedProps.value;An(Ea,_._currentValue),_._currentValue=C;break;case 13:if(_=u.memoizedState,_!==null)return _.dehydrated!==null?(An(Un,Un.current&1),u.flags|=128,null):m&u.child.childLanes?ho(o,u,m):(An(Un,Un.current&1),o=Da(o,u,m),o!==null?o.sibling:null);An(Un,Un.current&1);break;case 19:if(_=(m&u.childLanes)!==0,o.flags&128){if(_)return D_(o,u,m);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),An(Un,Un.current),_)break;return null;case 22:case 23:return u.lanes=0,be(o,u,m)}return Da(o,u,m)}var k_,uv,N_,U_;k_=function(o,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},uv=function(){},N_=function(o,u,m,_){var C=o.memoizedProps;if(C!==_){o=u.stateNode,ui(Ur.current);var I=null;switch(m){case"input":C=ee(o,C),_=ee(o,_),I=[];break;case"select":C=j({},C,{value:void 0}),_=j({},_,{value:void 0}),I=[];break;case"textarea":C=B(o,C),_=B(o,_),I=[];break;default:typeof C.onClick!="function"&&typeof _.onClick=="function"&&(o.onclick=cu)}fe(m,_);var G;m=null;for(Be in C)if(!_.hasOwnProperty(Be)&&C.hasOwnProperty(Be)&&C[Be]!=null)if(Be==="style"){var le=C[Be];for(G in le)le.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(i.hasOwnProperty(Be)?I||(I=[]):(I=I||[]).push(Be,null));for(Be in _){var ve=_[Be];if(le=C!=null?C[Be]:void 0,_.hasOwnProperty(Be)&&ve!==le&&(ve!=null||le!=null))if(Be==="style")if(le){for(G in le)!le.hasOwnProperty(G)||ve&&ve.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in ve)ve.hasOwnProperty(G)&&le[G]!==ve[G]&&(m||(m={}),m[G]=ve[G])}else m||(I||(I=[]),I.push(Be,m)),m=ve;else Be==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,le=le?le.__html:void 0,ve!=null&&le!==ve&&(I=I||[]).push(Be,ve)):Be==="children"?typeof ve!="string"&&typeof ve!="number"||(I=I||[]).push(Be,""+ve):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(i.hasOwnProperty(Be)?(ve!=null&&Be==="onScroll"&&In("scroll",o),I||le===ve||(I=[])):(I=I||[]).push(Be,ve))}m&&(I=I||[]).push("style",m);var Be=I;(u.updateQueue=Be)&&(u.flags|=4)}},U_=function(o,u,m,_){m!==_&&(u.flags|=4)};function Vd(o,u){if(!Nn)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function _r(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,_=0;if(u)for(var C=o.child;C!==null;)m|=C.lanes|C.childLanes,_|=C.subtreeFlags&14680064,_|=C.flags&14680064,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)m|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=_,o.childLanes=m,u}function wb(o,u,m){var _=u.pendingProps;switch(so(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(u),null;case 1:return qi(u.type)&&fu(),_r(u),null;case 3:return _=u.stateNode,Xo(),Ln(nr),Ln(Fi),Ds(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(o===null||o.child===null)&&(_l(u)?u.flags|=4:o===null||o.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,es!==null&&(_v(es),es=null))),uv(o,u),_r(u),null;case 5:El(u);var C=ui(lo.current);if(m=u.type,o!==null&&u.stateNode!=null)N_(o,u,m,_,C),o.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!_){if(u.stateNode===null)throw Error(t(166));return _r(u),null}if(o=ui(Ur.current),_l(u)){_=u.stateNode,m=u.type;var I=u.memoizedProps;switch(_[vi]=u,_[xl]=I,o=(u.mode&1)!==0,m){case"dialog":In("cancel",_),In("close",_);break;case"iframe":case"object":case"embed":In("load",_);break;case"video":case"audio":for(C=0;C<Ho.length;C++)In(Ho[C],_);break;case"source":In("error",_);break;case"img":case"image":case"link":In("error",_),In("load",_);break;case"details":In("toggle",_);break;case"input":lt(_,I),In("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!I.multiple},In("invalid",_);break;case"textarea":oe(_,I),In("invalid",_)}fe(m,I),C=null;for(var G in I)if(I.hasOwnProperty(G)){var le=I[G];G==="children"?typeof le=="string"?_.textContent!==le&&(I.suppressHydrationWarning!==!0&&uu(_.textContent,le,o),C=["children",le]):typeof le=="number"&&_.textContent!==""+le&&(I.suppressHydrationWarning!==!0&&uu(_.textContent,le,o),C=["children",""+le]):i.hasOwnProperty(G)&&le!=null&&G==="onScroll"&&In("scroll",_)}switch(m){case"input":Pe(_),ge(_,I,!0);break;case"textarea":Pe(_),Se(_);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(_.onclick=cu)}_=C,u.updateQueue=_,_!==null&&(u.flags|=4)}else{G=C.nodeType===9?C:C.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ke(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=G.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof _.is=="string"?o=G.createElement(m,{is:_.is}):(o=G.createElement(m),m==="select"&&(G=o,_.multiple?G.multiple=!0:_.size&&(G.size=_.size))):o=G.createElementNS(o,m),o[vi]=u,o[xl]=_,k_(o,u,!1,!1),u.stateNode=o;e:{switch(G=Fe(m,_),m){case"dialog":In("cancel",o),In("close",o),C=_;break;case"iframe":case"object":case"embed":In("load",o),C=_;break;case"video":case"audio":for(C=0;C<Ho.length;C++)In(Ho[C],o);C=_;break;case"source":In("error",o),C=_;break;case"img":case"image":case"link":In("error",o),In("load",o),C=_;break;case"details":In("toggle",o),C=_;break;case"input":lt(o,_),C=ee(o,_),In("invalid",o);break;case"option":C=_;break;case"select":o._wrapperState={wasMultiple:!!_.multiple},C=j({},_,{value:void 0}),In("invalid",o);break;case"textarea":oe(o,_),C=B(o,_),In("invalid",o);break;default:C=_}fe(m,C),le=C;for(I in le)if(le.hasOwnProperty(I)){var ve=le[I];I==="style"?it(o,ve):I==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&Ke(o,ve)):I==="children"?typeof ve=="string"?(m!=="textarea"||ve!=="")&&gt(o,ve):typeof ve=="number"&&gt(o,""+ve):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(i.hasOwnProperty(I)?ve!=null&&I==="onScroll"&&In("scroll",o):ve!=null&&A(o,I,ve,G))}switch(m){case"input":Pe(o),ge(o,_,!1);break;case"textarea":Pe(o),Se(o);break;case"option":_.value!=null&&o.setAttribute("value",""+ie(_.value));break;case"select":o.multiple=!!_.multiple,I=_.value,I!=null?V(o,!!_.multiple,I,!1):_.defaultValue!=null&&V(o,!!_.multiple,_.defaultValue,!0);break;default:typeof C.onClick=="function"&&(o.onclick=cu)}switch(m){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return _r(u),null;case 6:if(o&&u.stateNode!=null)U_(o,u,o.memoizedProps,_);else{if(typeof _!="string"&&u.stateNode===null)throw Error(t(166));if(m=ui(lo.current),ui(Ur.current),_l(u)){if(_=u.stateNode,m=u.memoizedProps,_[vi]=u,(I=_.nodeValue!==m)&&(o=Oi,o!==null))switch(o.tag){case 3:uu(_.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&uu(_.nodeValue,m,(o.mode&1)!==0)}I&&(u.flags|=4)}else _=(m.nodeType===9?m:m.ownerDocument).createTextNode(_),_[vi]=u,u.stateNode=_}return _r(u),null;case 13:if(Ln(Un),_=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Nn&&rr!==null&&u.mode&1&&!(u.flags&128))Cd(),Wo(),u.flags|=98560,I=!1;else if(I=_l(u),_!==null&&_.dehydrated!==null){if(o===null){if(!I)throw Error(t(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[vi]=u}else Wo(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;_r(u),I=!1}else es!==null&&(_v(es),es=null),I=!0;if(!I)return u.flags&65536?u:null}return u.flags&128?(u.lanes=m,u):(_=_!==null,_!==(o!==null&&o.memoizedState!==null)&&_&&(u.child.flags|=8192,u.mode&1&&(o===null||Un.current&1?Hi===0&&(Hi=3):Mv())),u.updateQueue!==null&&(u.flags|=4),_r(u),null);case 4:return Xo(),uv(o,u),o===null&&gl(u.stateNode.containerInfo),_r(u),null;case 10:return yu(u.type._context),_r(u),null;case 17:return qi(u.type)&&fu(),_r(u),null;case 19:if(Ln(Un),I=u.memoizedState,I===null)return _r(u),null;if(_=(u.flags&128)!==0,G=I.rendering,G===null)if(_)Vd(I,!1);else{if(Hi!==0||o!==null&&o.flags&128)for(o=u.child;o!==null;){if(G=ys(o),G!==null){for(u.flags|=128,Vd(I,!1),_=G.updateQueue,_!==null&&(u.updateQueue=_,u.flags|=4),u.subtreeFlags=0,_=m,m=u.child;m!==null;)I=m,o=_,I.flags&=14680066,G=I.alternate,G===null?(I.childLanes=0,I.lanes=o,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=G.childLanes,I.lanes=G.lanes,I.child=G.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=G.memoizedProps,I.memoizedState=G.memoizedState,I.updateQueue=G.updateQueue,I.type=G.type,o=G.dependencies,I.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return An(Un,Un.current&1|2),u.child}o=o.sibling}I.tail!==null&&he()>lf&&(u.flags|=128,_=!0,Vd(I,!1),u.lanes=4194304)}else{if(!_)if(o=ys(G),o!==null){if(u.flags|=128,_=!0,m=o.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),Vd(I,!0),I.tail===null&&I.tailMode==="hidden"&&!G.alternate&&!Nn)return _r(u),null}else 2*he()-I.renderingStartTime>lf&&m!==1073741824&&(u.flags|=128,_=!0,Vd(I,!1),u.lanes=4194304);I.isBackwards?(G.sibling=u.child,u.child=G):(m=I.last,m!==null?m.sibling=G:u.child=G,I.last=G)}return I.tail!==null?(u=I.tail,I.rendering=u,I.tail=u.sibling,I.renderingStartTime=he(),u.sibling=null,m=Un.current,An(Un,_?m&1|2:m&1),u):(_r(u),null);case 22:case 23:return wv(),_=u.memoizedState!==null,o!==null&&o.memoizedState!==null!==_&&(u.flags|=8192),_&&u.mode&1?Ss&1073741824&&(_r(u),u.subtreeFlags&6&&(u.flags|=8192)):_r(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function Mb(o,u){switch(so(u),u.tag){case 1:return qi(u.type)&&fu(),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Xo(),Ln(nr),Ln(Fi),Ds(),o=u.flags,o&65536&&!(o&128)?(u.flags=o&-65537|128,u):null;case 5:return El(u),null;case 13:if(Ln(Un),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Wo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Ln(Un),null;case 4:return Xo(),null;case 10:return yu(u.type._context),null;case 22:case 23:return wv(),null;case 24:return null;default:return null}}var Yp=!1,Sr=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function of(o,u){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(_){fi(o,u,_)}else m.current=null}function cv(o,u,m){try{m()}catch(_){fi(o,u,_)}}var F_=!1;function bb(o,u){if(yl=bi,o=Gn(),Ci(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var C=_.anchorOffset,I=_.focusNode;_=_.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var G=0,le=-1,ve=-1,Be=0,rt=0,at=o,tt=null;t:for(;;){for(var bt;at!==m||C!==0&&at.nodeType!==3||(le=G+C),at!==I||_!==0&&at.nodeType!==3||(ve=G+_),at.nodeType===3&&(G+=at.nodeValue.length),(bt=at.firstChild)!==null;)tt=at,at=bt;for(;;){if(at===o)break t;if(tt===m&&++Be===C&&(le=G),tt===I&&++rt===_&&(ve=G),(bt=at.nextSibling)!==null)break;at=tt,tt=at.parentNode}at=bt}m=le===-1||ve===-1?null:{start:le,end:ve}}else m=null}m=m||{start:0,end:0}}else m=null;for(gd={focusedElem:o,selectionRange:m},bi=!1,Rt=u;Rt!==null;)if(u=Rt,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Rt=o;else for(;Rt!==null;){u=Rt;try{var Lt=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var kt=Lt.memoizedProps,yi=Lt.memoizedState,De=u.stateNode,xe=De.getSnapshotBeforeUpdate(u.elementType===u.type?kt:ts(u.type,kt),yi);De.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:var Ne=u.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(dt){fi(u,u.return,dt)}if(o=u.sibling,o!==null){o.return=u.return,Rt=o;break}Rt=u.return}return Lt=F_,F_=!1,Lt}function Hd(o,u,m){var _=u.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&o)===o){var I=C.destroy;C.destroy=void 0,I!==void 0&&cv(u,m,I)}C=C.next}while(C!==_)}}function qp(o,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&o)===o){var _=m.create;m.destroy=_()}m=m.next}while(m!==u)}}function fv(o){var u=o.ref;if(u!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof u=="function"?u(o):u.current=o}}function O_(o){var u=o.alternate;u!==null&&(o.alternate=null,O_(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&(delete u[vi],delete u[xl],delete u[ya],delete u[Hc],delete u[Gc])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function B_(o){return o.tag===5||o.tag===3||o.tag===4}function z_(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||B_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function dv(o,u,m){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(o,u):m.insertBefore(o,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(o,m)):(u=m,u.appendChild(o)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=cu));else if(_!==4&&(o=o.child,o!==null))for(dv(o,u,m),o=o.sibling;o!==null;)dv(o,u,m),o=o.sibling}function hv(o,u,m){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(_!==4&&(o=o.child,o!==null))for(hv(o,u,m),o=o.sibling;o!==null;)hv(o,u,m),o=o.sibling}var or=null,po=!1;function Al(o,u,m){for(m=m.child;m!==null;)V_(o,u,m),m=m.sibling}function V_(o,u,m){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Pt,m)}catch{}switch(m.tag){case 5:Sr||of(m,u);case 6:var _=or,C=po;or=null,Al(o,u,m),or=_,po=C,or!==null&&(po?(o=or,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):or.removeChild(m.stateNode));break;case 18:or!==null&&(po?(o=or,m=m.stateNode,o.nodeType===8?Vc(o.parentNode,m):o.nodeType===1&&Vc(o,m),ko(o)):Vc(or,m.stateNode));break;case 4:_=or,C=po,or=m.stateNode.containerInfo,po=!0,Al(o,u,m),or=_,po=C;break;case 0:case 11:case 14:case 15:if(!Sr&&(_=m.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){C=_=_.next;do{var I=C,G=I.destroy;I=I.tag,G!==void 0&&(I&2||I&4)&&cv(m,u,G),C=C.next}while(C!==_)}Al(o,u,m);break;case 1:if(!Sr&&(of(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=m.memoizedProps,_.state=m.memoizedState,_.componentWillUnmount()}catch(le){fi(m,u,le)}Al(o,u,m);break;case 21:Al(o,u,m);break;case 22:m.mode&1?(Sr=(_=Sr)||m.memoizedState!==null,Al(o,u,m),Sr=_):Al(o,u,m);break;default:Al(o,u,m)}}function H_(o){var u=o.updateQueue;if(u!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new Eb),u.forEach(function(_){var C=kb.bind(null,o,_);m.has(_)||(m.add(_),_.then(C,C))})}}function mo(o,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var C=m[_];try{var I=o,G=u,le=G;e:for(;le!==null;){switch(le.tag){case 5:or=le.stateNode,po=!1;break e;case 3:or=le.stateNode.containerInfo,po=!0;break e;case 4:or=le.stateNode.containerInfo,po=!0;break e}le=le.return}if(or===null)throw Error(t(160));V_(I,G,C),or=null,po=!1;var ve=C.alternate;ve!==null&&(ve.return=null),C.return=null}catch(Be){fi(C,u,Be)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)G_(u,o),u=u.sibling}function G_(o,u){var m=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(mo(u,o),qo(o),_&4){try{Hd(3,o,o.return),qp(3,o)}catch(kt){fi(o,o.return,kt)}try{Hd(5,o,o.return)}catch(kt){fi(o,o.return,kt)}}break;case 1:mo(u,o),qo(o),_&512&&m!==null&&of(m,m.return);break;case 5:if(mo(u,o),qo(o),_&512&&m!==null&&of(m,m.return),o.flags&32){var C=o.stateNode;try{gt(C,"")}catch(kt){fi(o,o.return,kt)}}if(_&4&&(C=o.stateNode,C!=null)){var I=o.memoizedProps,G=m!==null?m.memoizedProps:I,le=o.type,ve=o.updateQueue;if(o.updateQueue=null,ve!==null)try{le==="input"&&I.type==="radio"&&I.name!=null&&Ae(C,I),Fe(le,G);var Be=Fe(le,I);for(G=0;G<ve.length;G+=2){var rt=ve[G],at=ve[G+1];rt==="style"?it(C,at):rt==="dangerouslySetInnerHTML"?Ke(C,at):rt==="children"?gt(C,at):A(C,rt,at,Be)}switch(le){case"input":Le(C,I);break;case"textarea":ye(C,I);break;case"select":var tt=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!I.multiple;var bt=I.value;bt!=null?V(C,!!I.multiple,bt,!1):tt!==!!I.multiple&&(I.defaultValue!=null?V(C,!!I.multiple,I.defaultValue,!0):V(C,!!I.multiple,I.multiple?[]:"",!1))}C[xl]=I}catch(kt){fi(o,o.return,kt)}}break;case 6:if(mo(u,o),qo(o),_&4){if(o.stateNode===null)throw Error(t(162));C=o.stateNode,I=o.memoizedProps;try{C.nodeValue=I}catch(kt){fi(o,o.return,kt)}}break;case 3:if(mo(u,o),qo(o),_&4&&m!==null&&m.memoizedState.isDehydrated)try{ko(u.containerInfo)}catch(kt){fi(o,o.return,kt)}break;case 4:mo(u,o),qo(o);break;case 13:mo(u,o),qo(o),C=o.child,C.flags&8192&&(I=C.memoizedState!==null,C.stateNode.isHidden=I,!I||C.alternate!==null&&C.alternate.memoizedState!==null||(gv=he())),_&4&&H_(o);break;case 22:if(rt=m!==null&&m.memoizedState!==null,o.mode&1?(Sr=(Be=Sr)||rt,mo(u,o),Sr=Be):mo(u,o),qo(o),_&8192){if(Be=o.memoizedState!==null,(o.stateNode.isHidden=Be)&&!rt&&o.mode&1)for(Rt=o,rt=o.child;rt!==null;){for(at=Rt=rt;Rt!==null;){switch(tt=Rt,bt=tt.child,tt.tag){case 0:case 11:case 14:case 15:Hd(4,tt,tt.return);break;case 1:of(tt,tt.return);var Lt=tt.stateNode;if(typeof Lt.componentWillUnmount=="function"){_=tt,m=tt.return;try{u=_,Lt.props=u.memoizedProps,Lt.state=u.memoizedState,Lt.componentWillUnmount()}catch(kt){fi(_,m,kt)}}break;case 5:of(tt,tt.return);break;case 22:if(tt.memoizedState!==null){X_(at);continue}}bt!==null?(bt.return=tt,Rt=bt):X_(at)}rt=rt.sibling}e:for(rt=null,at=o;;){if(at.tag===5){if(rt===null){rt=at;try{C=at.stateNode,Be?(I=C.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(le=at.stateNode,ve=at.memoizedProps.style,G=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,le.style.display=ot("display",G))}catch(kt){fi(o,o.return,kt)}}}else if(at.tag===6){if(rt===null)try{at.stateNode.nodeValue=Be?"":at.memoizedProps}catch(kt){fi(o,o.return,kt)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===o)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===o)break e;for(;at.sibling===null;){if(at.return===null||at.return===o)break e;rt===at&&(rt=null),at=at.return}rt===at&&(rt=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:mo(u,o),qo(o),_&4&&H_(o);break;case 21:break;default:mo(u,o),qo(o)}}function qo(o){var u=o.flags;if(u&2){try{e:{for(var m=o.return;m!==null;){if(B_(m)){var _=m;break e}m=m.return}throw Error(t(160))}switch(_.tag){case 5:var C=_.stateNode;_.flags&32&&(gt(C,""),_.flags&=-33);var I=z_(o);hv(o,I,C);break;case 3:case 4:var G=_.stateNode.containerInfo,le=z_(o);dv(o,le,G);break;default:throw Error(t(161))}}catch(ve){fi(o,o.return,ve)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Tb(o,u,m){Rt=o,W_(o)}function W_(o,u,m){for(var _=(o.mode&1)!==0;Rt!==null;){var C=Rt,I=C.child;if(C.tag===22&&_){var G=C.memoizedState!==null||Yp;if(!G){var le=C.alternate,ve=le!==null&&le.memoizedState!==null||Sr;le=Yp;var Be=Sr;if(Yp=G,(Sr=ve)&&!Be)for(Rt=C;Rt!==null;)G=Rt,ve=G.child,G.tag===22&&G.memoizedState!==null?Y_(C):ve!==null?(ve.return=G,Rt=ve):Y_(C);for(;I!==null;)Rt=I,W_(I),I=I.sibling;Rt=C,Yp=le,Sr=Be}j_(o)}else C.subtreeFlags&8772&&I!==null?(I.return=C,Rt=I):j_(o)}}function j_(o){for(;Rt!==null;){var u=Rt;if(u.flags&8772){var m=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:Sr||qp(5,u);break;case 1:var _=u.stateNode;if(u.flags&4&&!Sr)if(m===null)_.componentDidMount();else{var C=u.elementType===u.type?m.memoizedProps:ts(u.type,m.memoizedProps);_.componentDidUpdate(C,m.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var I=u.updateQueue;I!==null&&Ml(u,I,_);break;case 3:var G=u.updateQueue;if(G!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}Ml(u,G,m)}break;case 5:var le=u.stateNode;if(m===null&&u.flags&4){m=le;var ve=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&m.focus();break;case"img":ve.src&&(m.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Be=u.alternate;if(Be!==null){var rt=Be.memoizedState;if(rt!==null){var at=rt.dehydrated;at!==null&&ko(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Sr||u.flags&512&&fv(u)}catch(tt){fi(u,u.return,tt)}}if(u===o){Rt=null;break}if(m=u.sibling,m!==null){m.return=u.return,Rt=m;break}Rt=u.return}}function X_(o){for(;Rt!==null;){var u=Rt;if(u===o){Rt=null;break}var m=u.sibling;if(m!==null){m.return=u.return,Rt=m;break}Rt=u.return}}function Y_(o){for(;Rt!==null;){var u=Rt;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{qp(4,u)}catch(ve){fi(u,m,ve)}break;case 1:var _=u.stateNode;if(typeof _.componentDidMount=="function"){var C=u.return;try{_.componentDidMount()}catch(ve){fi(u,C,ve)}}var I=u.return;try{fv(u)}catch(ve){fi(u,I,ve)}break;case 5:var G=u.return;try{fv(u)}catch(ve){fi(u,G,ve)}}}catch(ve){fi(u,u.return,ve)}if(u===o){Rt=null;break}var le=u.sibling;if(le!==null){le.return=u.return,Rt=le;break}Rt=u.return}}var Ab=Math.ceil,Jp=R.ReactCurrentDispatcher,pv=R.ReactCurrentOwner,Ns=R.ReactCurrentBatchConfig,_n=0,Ki=null,Di=null,ar=0,Ss=0,af=Xn(0),Hi=0,Gd=null,Ru=0,Zp=0,mv=0,Wd=null,ns=null,gv=0,lf=1/0,ka=null,Kp=!1,vv=null,Cl=null,Qp=!1,Rl=null,$p=0,jd=0,yv=null,em=-1,tm=0;function zr(){return _n&6?he():em!==-1?em:em=he()}function Pl(o){return o.mode&1?_n&2&&ar!==0?ar&-ar:ov.transition!==null?(tm===0&&(tm=cn()),tm):(o=nn,o!==0||(o=window.event,o=o===void 0?16:Uo(o.type)),o):1}function go(o,u,m,_){if(50<jd)throw jd=0,yv=null,Error(t(185));Fn(o,m,_),(!(_n&2)||o!==Ki)&&(o===Ki&&(!(_n&2)&&(Zp|=m),Hi===4&&Il(o,ar)),is(o,_),m===1&&_n===0&&!(u.mode&1)&&(lf=he()+500,hu&&Is()))}function is(o,u){var m=o.callbackNode;jn(o,u);var _=Zn(o,o===Ki?ar:0);if(_===0)m!==null&&q(m),o.callbackNode=null,o.callbackPriority=0;else if(u=_&-_,o.callbackPriority!==u){if(m!=null&&q(m),u===1)o.tag===0?kp(J_.bind(null,o)):pu(J_.bind(null,o)),sv(function(){!(_n&6)&&Is()}),m=null;else{switch(Mi(_)){case 1:m=st;break;case 4:m=ht;break;case 16:m=yt;break;case 536870912:m=Ot;break;default:m=yt}m=i1(m,q_.bind(null,o))}o.callbackPriority=u,o.callbackNode=m}}function q_(o,u){if(em=-1,tm=0,_n&6)throw Error(t(327));var m=o.callbackNode;if(uf()&&o.callbackNode!==m)return null;var _=Zn(o,o===Ki?ar:0);if(_===0)return null;if(_&30||_&o.expiredLanes||u)u=nm(o,_);else{u=_;var C=_n;_n|=2;var I=K_();(Ki!==o||ar!==u)&&(ka=null,lf=he()+500,Iu(o,u));do try{Pb();break}catch(le){Z_(o,le)}while(!0);Ta(),Jp.current=I,_n=C,Di!==null?u=0:(Ki=null,ar=0,u=Hi)}if(u!==0){if(u===2&&(C=Kn(o),C!==0&&(_=C,u=xv(o,C))),u===1)throw m=Gd,Iu(o,0),Il(o,_),is(o,he()),m;if(u===6)Il(o,_);else{if(C=o.current.alternate,!(_&30)&&!Cb(C)&&(u=nm(o,_),u===2&&(I=Kn(o),I!==0&&(_=I,u=xv(o,I))),u===1))throw m=Gd,Iu(o,0),Il(o,_),is(o,he()),m;switch(o.finishedWork=C,o.finishedLanes=_,u){case 0:case 1:throw Error(t(345));case 2:Lu(o,ns,ka);break;case 3:if(Il(o,_),(_&130023424)===_&&(u=gv+500-he(),10<u)){if(Zn(o,0)!==0)break;if(C=o.suspendedLanes,(C&_)!==_){zr(),o.pingedLanes|=o.suspendedLanes&C;break}o.timeoutHandle=yd(Lu.bind(null,o,ns,ka),u);break}Lu(o,ns,ka);break;case 4:if(Il(o,_),(_&4194240)===_)break;for(u=o.eventTimes,C=-1;0<_;){var G=31-Bt(_);I=1<<G,G=u[G],G>C&&(C=G),_&=~I}if(_=C,_=he()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*Ab(_/1960))-_,10<_){o.timeoutHandle=yd(Lu.bind(null,o,ns,ka),_);break}Lu(o,ns,ka);break;case 5:Lu(o,ns,ka);break;default:throw Error(t(329))}}}return is(o,he()),o.callbackNode===m?q_.bind(null,o):null}function xv(o,u){var m=Wd;return o.current.memoizedState.isDehydrated&&(Iu(o,u).flags|=256),o=nm(o,u),o!==2&&(u=ns,ns=m,u!==null&&_v(u)),o}function _v(o){ns===null?ns=o:ns.push.apply(ns,o)}function Cb(o){for(var u=o;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var _=0;_<m.length;_++){var C=m[_],I=C.getSnapshot;C=C.value;try{if(!Lr(I(),C))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Il(o,u){for(u&=~mv,u&=~Zp,o.suspendedLanes|=u,o.pingedLanes&=~u,o=o.expirationTimes;0<u;){var m=31-Bt(u),_=1<<m;o[m]=-1,u&=~_}}function J_(o){if(_n&6)throw Error(t(327));uf();var u=Zn(o,0);if(!(u&1))return is(o,he()),null;var m=nm(o,u);if(o.tag!==0&&m===2){var _=Kn(o);_!==0&&(u=_,m=xv(o,_))}if(m===1)throw m=Gd,Iu(o,0),Il(o,u),is(o,he()),m;if(m===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=u,Lu(o,ns,ka),is(o,he()),null}function Sv(o,u){var m=_n;_n|=1;try{return o(u)}finally{_n=m,_n===0&&(lf=he()+500,hu&&Is())}}function Pu(o){Rl!==null&&Rl.tag===0&&!(_n&6)&&uf();var u=_n;_n|=1;var m=Ns.transition,_=nn;try{if(Ns.transition=null,nn=1,o)return o()}finally{nn=_,Ns.transition=m,_n=u,!(_n&6)&&Is()}}function wv(){Ss=af.current,Ln(af)}function Iu(o,u){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,xd(m)),Di!==null)for(m=Di.return;m!==null;){var _=m;switch(so(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&fu();break;case 3:Xo(),Ln(nr),Ln(Fi),Ds();break;case 5:El(_);break;case 4:Xo();break;case 13:Ln(Un);break;case 19:Ln(Un);break;case 10:yu(_.type._context);break;case 22:case 23:wv()}m=m.return}if(Ki=o,Di=o=Ll(o.current,null),ar=Ss=u,Hi=0,Gd=null,mv=Zp=Ru=0,ns=Wd=null,ao!==null){for(u=0;u<ao.length;u++)if(m=ao[u],_=m.interleaved,_!==null){m.interleaved=null;var C=_.next,I=m.pending;if(I!==null){var G=I.next;I.next=C,_.next=G}m.pending=_}ao=null}return o}function Z_(o,u){do{var m=Di;try{if(Ta(),Pa.current=rf,xs){for(var _=Dn.memoizedState;_!==null;){var C=_.queue;C!==null&&(C.pending=null),_=_.next}xs=!1}if(uo=0,yn=qn=Dn=null,Zi=!1,Yo=0,pv.current=null,m===null||m.return===null){Hi=1,Gd=u,Di=null;break}e:{var I=o,G=m.return,le=m,ve=u;if(u=ar,le.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Be=ve,rt=le,at=rt.tag;if(!(rt.mode&1)&&(at===0||at===11||at===15)){var tt=rt.alternate;tt?(rt.updateQueue=tt.updateQueue,rt.memoizedState=tt.memoizedState,rt.lanes=tt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var bt=At(G);if(bt!==null){bt.flags&=-257,qt(bt,G,le,I,u),bt.mode&1&&ft(I,Be,u),u=bt,ve=Be;var Lt=u.updateQueue;if(Lt===null){var kt=new Set;kt.add(ve),u.updateQueue=kt}else Lt.add(ve);break e}else{if(!(u&1)){ft(I,Be,u),Mv();break e}ve=Error(t(426))}}else if(Nn&&le.mode&1){var yi=At(G);if(yi!==null){!(yi.flags&65536)&&(yi.flags|=256),qt(yi,G,le,I,u),Sl(b(ve,le));break e}}I=ve=b(ve,le),Hi!==4&&(Hi=2),Wd===null?Wd=[I]:Wd.push(I),I=G;do{switch(I.tag){case 3:I.flags|=65536,u&=-u,I.lanes|=u;var De=we(I,ve,u);Aa(I,De);break e;case 1:le=ve;var xe=I.type,Ne=I.stateNode;if(!(I.flags&128)&&(typeof xe.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Cl===null||!Cl.has(Ne)))){I.flags|=65536,u&=-u,I.lanes|=u;var dt=qe(I,le,u);Aa(I,dt);break e}}I=I.return}while(I!==null)}$_(m)}catch(Ft){u=Ft,Di===m&&m!==null&&(Di=m=m.return);continue}break}while(!0)}function K_(){var o=Jp.current;return Jp.current=rf,o===null?rf:o}function Mv(){(Hi===0||Hi===3||Hi===2)&&(Hi=4),Ki===null||!(Ru&268435455)&&!(Zp&268435455)||Il(Ki,ar)}function nm(o,u){var m=_n;_n|=2;var _=K_();(Ki!==o||ar!==u)&&(ka=null,Iu(o,u));do try{Rb();break}catch(C){Z_(o,C)}while(!0);if(Ta(),_n=m,Jp.current=_,Di!==null)throw Error(t(261));return Ki=null,ar=0,Hi}function Rb(){for(;Di!==null;)Q_(Di)}function Pb(){for(;Di!==null&&!Ee();)Q_(Di)}function Q_(o){var u=n1(o.alternate,o,Ss);o.memoizedProps=o.pendingProps,u===null?$_(o):Di=u,pv.current=null}function $_(o){var u=o;do{var m=u.alternate;if(o=u.return,u.flags&32768){if(m=Mb(m,u),m!==null){m.flags&=32767,Di=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Hi=6,Di=null;return}}else if(m=wb(m,u,Ss),m!==null){Di=m;return}if(u=u.sibling,u!==null){Di=u;return}Di=u=o}while(u!==null);Hi===0&&(Hi=5)}function Lu(o,u,m){var _=nn,C=Ns.transition;try{Ns.transition=null,nn=1,Ib(o,u,m,_)}finally{Ns.transition=C,nn=_}return null}function Ib(o,u,m,_){do uf();while(Rl!==null);if(_n&6)throw Error(t(327));m=o.finishedWork;var C=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var I=m.lanes|m.childLanes;if(ai(o,I),o===Ki&&(Di=Ki=null,ar=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||Qp||(Qp=!0,i1(yt,function(){return uf(),null})),I=(m.flags&15990)!==0,m.subtreeFlags&15990||I){I=Ns.transition,Ns.transition=null;var G=nn;nn=1;var le=_n;_n|=4,pv.current=null,bb(o,m),G_(m,o),Ri(gd),bi=!!yl,gd=yl=null,o.current=m,Tb(m),Oe(),_n=le,nn=G,Ns.transition=I}else o.current=m;if(Qp&&(Qp=!1,Rl=o,$p=C),I=o.pendingLanes,I===0&&(Cl=null),It(m.stateNode),is(o,he()),u!==null)for(_=o.onRecoverableError,m=0;m<u.length;m++)C=u[m],_(C.value,{componentStack:C.stack,digest:C.digest});if(Kp)throw Kp=!1,o=vv,vv=null,o;return $p&1&&o.tag!==0&&uf(),I=o.pendingLanes,I&1?o===yv?jd++:(jd=0,yv=o):jd=0,Is(),null}function uf(){if(Rl!==null){var o=Mi($p),u=Ns.transition,m=nn;try{if(Ns.transition=null,nn=16>o?16:o,Rl===null)var _=!1;else{if(o=Rl,Rl=null,$p=0,_n&6)throw Error(t(331));var C=_n;for(_n|=4,Rt=o.current;Rt!==null;){var I=Rt,G=I.child;if(Rt.flags&16){var le=I.deletions;if(le!==null){for(var ve=0;ve<le.length;ve++){var Be=le[ve];for(Rt=Be;Rt!==null;){var rt=Rt;switch(rt.tag){case 0:case 11:case 15:Hd(8,rt,I)}var at=rt.child;if(at!==null)at.return=rt,Rt=at;else for(;Rt!==null;){rt=Rt;var tt=rt.sibling,bt=rt.return;if(O_(rt),rt===Be){Rt=null;break}if(tt!==null){tt.return=bt,Rt=tt;break}Rt=bt}}}var Lt=I.alternate;if(Lt!==null){var kt=Lt.child;if(kt!==null){Lt.child=null;do{var yi=kt.sibling;kt.sibling=null,kt=yi}while(kt!==null)}}Rt=I}}if(I.subtreeFlags&2064&&G!==null)G.return=I,Rt=G;else e:for(;Rt!==null;){if(I=Rt,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Hd(9,I,I.return)}var De=I.sibling;if(De!==null){De.return=I.return,Rt=De;break e}Rt=I.return}}var xe=o.current;for(Rt=xe;Rt!==null;){G=Rt;var Ne=G.child;if(G.subtreeFlags&2064&&Ne!==null)Ne.return=G,Rt=Ne;else e:for(G=xe;Rt!==null;){if(le=Rt,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:qp(9,le)}}catch(Ft){fi(le,le.return,Ft)}if(le===G){Rt=null;break e}var dt=le.sibling;if(dt!==null){dt.return=le.return,Rt=dt;break e}Rt=le.return}}if(_n=C,Is(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Pt,o)}catch{}_=!0}return _}finally{nn=m,Ns.transition=u}}return!1}function e1(o,u,m){u=b(m,u),u=we(o,u,1),o=zn(o,u,1),u=zr(),o!==null&&(Fn(o,1,u),is(o,u))}function fi(o,u,m){if(o.tag===3)e1(o,o,m);else for(;u!==null;){if(u.tag===3){e1(u,o,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Cl===null||!Cl.has(_))){o=b(m,o),o=qe(u,o,1),u=zn(u,o,1),o=zr(),u!==null&&(Fn(u,1,o),is(u,o));break}}u=u.return}}function Lb(o,u,m){var _=o.pingCache;_!==null&&_.delete(u),u=zr(),o.pingedLanes|=o.suspendedLanes&m,Ki===o&&(ar&m)===m&&(Hi===4||Hi===3&&(ar&130023424)===ar&&500>he()-gv?Iu(o,0):mv|=m),is(o,u)}function t1(o,u){u===0&&(o.mode&1?(u=un,un<<=1,!(un&130023424)&&(un=4194304)):u=1);var m=zr();o=vs(o,u),o!==null&&(Fn(o,u,m),is(o,m))}function Db(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),t1(o,m)}function kb(o,u){var m=0;switch(o.tag){case 13:var _=o.stateNode,C=o.memoizedState;C!==null&&(m=C.retryLane);break;case 19:_=o.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(u),t1(o,m)}var n1;n1=function(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps||nr.current)on=!0;else{if(!(o.lanes&m)&&!(u.flags&128))return on=!1,Sb(o,u,m);on=!!(o.flags&131072)}else on=!1,Nn&&u.flags&1048576&&Ed(u,Yc,u.index);switch(u.lanes=0,u.tag){case 2:var _=u.type;Xp(o,u),o=u.pendingProps;var C=xa(u,Fi.current);jo(u,m),C=Mu(null,u,_,o,C,m);var I=Ld();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,qi(_)?(I=!0,_a(u)):I=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,rn(u),C.updater=sf,u.stateNode=C,C._reactInternals=u,x(u,_,o,m),u=Kt(null,u,_,!0,I,m)):(u.tag=0,Nn&&I&&bd(u),St(null,u,C,m),u=u.child),u;case 16:_=u.elementType;e:{switch(Xp(o,u),o=u.pendingProps,C=_._init,_=C(_._payload),u.type=_,C=u.tag=Ub(_),o=ts(_,o),C){case 0:u=xt(null,u,_,o,m);break e;case 1:u=Nt(null,u,_,o,m);break e;case 11:u=Vi(null,u,_,o,m);break e;case 14:u=Br(null,u,_,ts(_.type,o),m);break e}throw Error(t(306,_,""))}return u;case 0:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:ts(_,C),xt(o,u,_,C,m);case 1:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:ts(_,C),Nt(o,u,_,C,m);case 3:e:{if(Jt(u),o===null)throw Error(t(387));_=u.pendingProps,I=u.memoizedState,C=I.element,ti(o,u),Yn(u,_,null,m);var G=u.memoizedState;if(_=G.element,I.isDehydrated)if(I={element:_,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},u.updateQueue.baseState=I,u.memoizedState=I,u.flags&256){C=b(Error(t(423)),u),u=gn(o,u,_,m,C);break e}else if(_!==C){C=b(Error(t(424)),u),u=gn(o,u,_,m,C);break e}else for(rr=eo(u.stateNode.containerInfo.firstChild),Oi=u,Nn=!0,es=null,m=vu(u,null,_,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Wo(),_===C){u=Da(o,u,m);break e}St(o,u,_,m)}u=u.child}return u;case 5:return Ra(u),o===null&&Jc(u),_=u.type,C=u.pendingProps,I=o!==null?o.memoizedProps:null,G=C.children,vd(_,C)?G=null:I!==null&&vd(_,I)&&(u.flags|=32),Ge(o,u),St(o,u,G,m),u.child;case 6:return o===null&&Jc(u),null;case 13:return ho(o,u,m);case 4:return Su(u,u.stateNode.containerInfo),_=u.pendingProps,o===null?u.child=Ma(u,null,_,m):St(o,u,_,m),u.child;case 11:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:ts(_,C),Vi(o,u,_,C,m);case 7:return St(o,u,u.pendingProps,m),u.child;case 8:return St(o,u,u.pendingProps.children,m),u.child;case 12:return St(o,u,u.pendingProps.children,m),u.child;case 10:e:{if(_=u.type._context,C=u.pendingProps,I=u.memoizedProps,G=C.value,An(Ea,_._currentValue),_._currentValue=G,I!==null)if(Lr(I.value,G)){if(I.children===C.children&&!nr.current){u=Da(o,u,m);break e}}else for(I=u.child,I!==null&&(I.return=u);I!==null;){var le=I.dependencies;if(le!==null){G=I.child;for(var ve=le.firstContext;ve!==null;){if(ve.context===_){if(I.tag===1){ve=bn(-1,m&-m),ve.tag=2;var Be=I.updateQueue;if(Be!==null){Be=Be.shared;var rt=Be.pending;rt===null?ve.next=ve:(ve.next=rt.next,rt.next=ve),Be.pending=ve}}I.lanes|=m,ve=I.alternate,ve!==null&&(ve.lanes|=m),xu(I.return,m,u),le.lanes|=m;break}ve=ve.next}}else if(I.tag===10)G=I.type===u.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(t(341));G.lanes|=m,le=G.alternate,le!==null&&(le.lanes|=m),xu(G,m,u),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===u){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}St(o,u,C.children,m),u=u.child}return u;case 9:return C=u.type,_=u.pendingProps.children,jo(u,m),C=Nr(C),_=_(C),u.flags|=1,St(o,u,_,m),u.child;case 14:return _=u.type,C=ts(_,u.pendingProps),C=ts(_.type,C),Br(o,u,_,C,m);case 15:return Ue(o,u,u.type,u.pendingProps,m);case 17:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:ts(_,C),Xp(o,u),u.tag=1,qi(_)?(o=!0,_a(u)):o=!1,jo(u,m),f(u,_,C),x(u,_,C,m),Kt(null,u,_,!0,o,m);case 19:return D_(o,u,m);case 22:return be(o,u,m)}throw Error(t(156,u.tag))};function i1(o,u){return oa(o,u)}function Nb(o,u,m,_){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(o,u,m,_){return new Nb(o,u,m,_)}function Ev(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ub(o){if(typeof o=="function")return Ev(o)?1:0;if(o!=null){if(o=o.$$typeof,o===X)return 11;if(o===de)return 14}return 2}function Ll(o,u){var m=o.alternate;return m===null?(m=Us(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function im(o,u,m,_,C,I){var G=2;if(_=o,typeof o=="function")Ev(o)&&(G=1);else if(typeof o=="string")G=5;else e:switch(o){case O:return Du(m.children,C,I,u);case z:G=8,C|=8;break;case k:return o=Us(12,m,u,C|2),o.elementType=k,o.lanes=I,o;case K:return o=Us(13,m,u,C),o.elementType=K,o.lanes=I,o;case ne:return o=Us(19,m,u,C),o.elementType=ne,o.lanes=I,o;case me:return rm(m,C,I,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:G=10;break e;case W:G=9;break e;case X:G=11;break e;case de:G=14;break e;case ae:G=16,_=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return u=Us(G,m,u,C),u.elementType=o,u.type=_,u.lanes=I,u}function Du(o,u,m,_){return o=Us(7,o,_,u),o.lanes=m,o}function rm(o,u,m,_){return o=Us(22,o,_,u),o.elementType=me,o.lanes=m,o.stateNode={isHidden:!1},o}function bv(o,u,m){return o=Us(6,o,null,u),o.lanes=m,o}function Tv(o,u,m){return u=Us(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function Fb(o,u,m,_,C){this.tag=u,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qn(0),this.expirationTimes=Qn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qn(0),this.identifierPrefix=_,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Av(o,u,m,_,C,I,G,le,ve){return o=new Fb(o,u,m,le,ve),u===1?(u=1,I===!0&&(u|=8)):u=0,I=Us(3,null,null,u),o.current=I,I.stateNode=o,I.memoizedState={element:_,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},rn(I),o}function Ob(o,u,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:_==null?null:""+_,children:o,containerInfo:u,implementation:m}}function r1(o){if(!o)return no;o=o._reactInternals;e:{if(pr(o)!==o||o.tag!==1)throw Error(t(170));var u=o;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(qi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(o.tag===1){var m=o.type;if(qi(m))return du(o,m,u)}return u}function s1(o,u,m,_,C,I,G,le,ve){return o=Av(m,_,!0,o,C,I,G,le,ve),o.context=r1(null),m=o.current,_=zr(),C=Pl(m),I=bn(_,C),I.callback=u??null,zn(m,I,C),o.current.lanes=C,Fn(o,C,_),is(o,_),o}function sm(o,u,m,_){var C=u.current,I=zr(),G=Pl(C);return m=r1(m),u.context===null?u.context=m:u.pendingContext=m,u=bn(I,G),u.payload={element:o},_=_===void 0?null:_,_!==null&&(u.callback=_),o=zn(C,u,G),o!==null&&(go(o,C,G,I),Ji(o,C,G)),G}function om(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function o1(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function Cv(o,u){o1(o,u),(o=o.alternate)&&o1(o,u)}var a1=typeof reportError=="function"?reportError:function(o){console.error(o)};function Rv(o){this._internalRoot=o}am.prototype.render=Rv.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(t(409));sm(o,u,null,null)},am.prototype.unmount=Rv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Pu(function(){sm(null,o,null,null)}),u[kr]=null}};function am(o){this._internalRoot=o}am.prototype.unstable_scheduleHydration=function(o){if(o){var u=Ts();o={blockedOn:null,target:o,priority:u};for(var m=0;m<qr.length&&u!==0&&u<qr[m].priority;m++);qr.splice(m,0,o),m===0&&Xi(o)}};function Pv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function lm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function l1(){}function Bb(o,u,m,_,C){if(C){if(typeof _=="function"){var I=_;_=function(){var Be=om(G);I.call(Be)}}var G=s1(u,_,o,0,null,!1,!1,"",l1);return o._reactRootContainer=G,o[kr]=G.current,gl(o.nodeType===8?o.parentNode:o),Pu(),G}for(;C=o.lastChild;)o.removeChild(C);if(typeof _=="function"){var le=_;_=function(){var Be=om(ve);le.call(Be)}}var ve=Av(o,0,!1,null,null,!1,!1,"",l1);return o._reactRootContainer=ve,o[kr]=ve.current,gl(o.nodeType===8?o.parentNode:o),Pu(function(){sm(u,ve,m,_)}),ve}function um(o,u,m,_,C){var I=m._reactRootContainer;if(I){var G=I;if(typeof C=="function"){var le=C;C=function(){var ve=om(G);le.call(ve)}}sm(u,G,o,C)}else G=Bb(m,u,o,C,_);return om(G)}Io=function(o){switch(o.tag){case 3:var u=o.stateNode;if(u.current.memoizedState.isDehydrated){var m=jt(u.pendingLanes);m!==0&&(Pn(u,m|1),is(u,he()),!(_n&6)&&(lf=he()+500,Is()))}break;case 13:Pu(function(){var _=vs(o,1);if(_!==null){var C=zr();go(_,o,1,C)}}),Cv(o,1)}},rl=function(o){if(o.tag===13){var u=vs(o,134217728);if(u!==null){var m=zr();go(u,o,134217728,m)}Cv(o,134217728)}},sl=function(o){if(o.tag===13){var u=Pl(o),m=vs(o,u);if(m!==null){var _=zr();go(m,o,u,_)}Cv(o,u)}},Ts=function(){return nn},aa=function(o,u){var m=nn;try{return nn=o,u()}finally{nn=m}},Ve=function(o,u,m){switch(u){case"input":if(Le(o,m),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var _=m[u];if(_!==o&&_.form===o.form){var C=Wc(_);if(!C)throw Error(t(90));Ie(_),Le(_,C)}}}break;case"textarea":ye(o,m);break;case"select":u=m.value,u!=null&&V(o,!!m.multiple,u,!1)}},Dt=Sv,Et=Pu;var zb={usingClientEntryPoint:!1,Events:[to,ei,Wc,$e,vt,Sv]},Xd={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vb={bundleType:Xd.bundleType,version:Xd.version,rendererPackageName:Xd.rendererPackageName,rendererConfig:Xd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Po(o),o===null?null:o.stateNode},findFiberByHostInstance:Xd.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{Pt=cm.inject(Vb),ct=cm}catch{}}return rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zb,rs.createPortal=function(o,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pv(u))throw Error(t(200));return Ob(o,u,null,m)},rs.createRoot=function(o,u){if(!Pv(o))throw Error(t(299));var m=!1,_="",C=a1;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=Av(o,1,!1,null,null,m,!1,_,C),o[kr]=u.current,gl(o.nodeType===8?o.parentNode:o),new Rv(u)},rs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Po(u),o=o===null?null:o.stateNode,o},rs.flushSync=function(o){return Pu(o)},rs.hydrate=function(o,u,m){if(!lm(u))throw Error(t(200));return um(null,o,u,!0,m)},rs.hydrateRoot=function(o,u,m){if(!Pv(o))throw Error(t(405));var _=m!=null&&m.hydratedSources||null,C=!1,I="",G=a1;if(m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),u=s1(u,null,o,1,m??null,C,!1,I,G),o[kr]=u.current,gl(o),_)for(o=0;o<_.length;o++)m=_[o],C=m._getVersion,C=C(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,C]:u.mutableSourceEagerHydrationData.push(m,C);return new am(u)},rs.render=function(o,u,m){if(!lm(u))throw Error(t(200));return um(null,o,u,!1,m)},rs.unmountComponentAtNode=function(o){if(!lm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){um(null,null,o,!1,function(){o._reactRootContainer=null,o[kr]=null})}),!0):!1},rs.unstable_batchedUpdates=Sv,rs.unstable_renderSubtreeIntoContainer=function(o,u,m,_){if(!lm(m))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return um(o,u,m,!1,_)},rs.version="18.3.1-next-f1338f8080-20240426",rs}var g1;function Zb(){if(g1)return Dv.exports;g1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Dv.exports=Jb(),Dv.exports}var v1;function Kb(){if(v1)return fm;v1=1;var r=Zb();return fm.createRoot=r.createRoot,fm.hydrateRoot=r.hydrateRoot,fm}var Qb=Kb();const $b=Mx(Qb),eT=({onComplete:r})=>{const e="Hey, I'm Deepak. I turn coffee into code and ideas into production-ready apps.",[t,n]=We.useState(""),[i,s]=We.useState(0),[a,l]=We.useState(!0);return We.useEffect(()=>{if(i<e.length){const c=setTimeout(()=>{n(d=>d+e[i]),s(d=>d+1)},60);return()=>clearTimeout(c)}else setTimeout(()=>{l(!1),setTimeout(()=>r(),1500)},1e3)},[i,r]),Z.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50",children:[Z.jsxs("div",{className:"text-2xl md:text-3xl font-bold text-white font-['Fira_Code'] mb-4 max-w-2xl text-center px-4",children:[t,Z.jsx("span",{className:"animate-pulse",children:"|"})]}),Z.jsx("div",{className:"mt-4",children:Z.jsx("div",{className:"w-[200px] h-[2px] bg-gray-800 rounded relative overflow-hidden",children:Z.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500 transition-all duration-300",style:{width:`${i/e.length*100}%`}})})})]})},tT=({menuOpen:r,setMenuOpen:e,isDarkMode:t})=>{const[n,i]=We.useState(!1);return We.useEffect(()=>{const s=()=>{const l=window.scrollY>50;l!==n&&i(l)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[n]),Z.jsx("header",{className:`fixed top-0 left-0 w-full z-20 transition-all duration-300 
        ${n?`${t?"bg-black/90 shadow-lg backdrop-blur-md":"bg-white/90 shadow-md backdrop-blur-md"}`:"bg-transparent"}`,children:Z.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-5 lg:px-6",children:Z.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[Z.jsx("div",{className:"flex-shrink-0 w-28",children:Z.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("toggle-terminal")),className:"flex items-center cursor-pointer",children:[Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:t?"rgb(129, 140, 248)":"rgb(79, 70, 229)",strokeWidth:2,children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Z.jsx("span",{className:"font-mono font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Terminal"})]})}),Z.jsxs("div",{className:"hidden md:flex items-center justify-end space-x-6 flex-grow ml-20",children:[Z.jsx("a",{href:"#home",className:`text-sm font-bold ${t?"text-gray-300 hover:text-white":"text-gray-700 hover:text-gray-900"} transition-colors`,children:"Home"}),Z.jsx("a",{href:"#about-me",className:`text-sm font-bold ${t?"text-gray-300 hover:text-white":"text-gray-700 hover:text-gray-900"} transition-colors`,children:"About Me"}),Z.jsx("a",{href:"#skills",className:`text-sm font-bold ${t?"text-gray-300 hover:text-white":"text-gray-700 hover:text-gray-900"} transition-colors`,children:"Skills"}),Z.jsx("a",{href:"#experience",className:`text-sm font-bold ${t?"text-gray-300 hover:text-white":"text-gray-700 hover:text-gray-900"} transition-colors`,children:"Experience"}),Z.jsx("a",{href:"#projects",className:`text-sm font-bold ${t?"text-gray-300 hover:text-white":"text-gray-700 hover:text-gray-900"} transition-colors`,children:"Projects"}),Z.jsx("a",{href:"#contact",className:`text-sm font-bold ${t?"text-gray-300 hover:text-white":"text-gray-700 hover:text-gray-900"} transition-colors`,children:"Contact"}),Z.jsxs("a",{href:"#",onClick:s=>(s.preventDefault(),window.open("https://drive.google.com/file/d/1IyTVLQiJhc2-Z3C78y2diijVFG5_LiVV/view?usp=drive_link","_blank"),!1),className:"flex items-center space-x-1 text-sm font-medium px-4 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-purple-600 text-white transition-all hover:shadow-md",children:[Z.jsx("span",{children:"Resume"}),Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]})]}),Z.jsx("button",{className:`md:hidden p-2 rounded-md ${t?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-200"} transition-colors focus:outline-none flex-shrink-0`,onClick:()=>e(!r),"aria-label":"Toggle menu",children:r?Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})})},nT=({menuOpen:r,setMenuOpen:e,isDarkMode:t})=>Z.jsx("div",{className:`fixed top-0 left-0 w-full h-full z-30 ${t?"bg-black":"bg-white"} transform transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:Z.jsxs("div",{className:"flex flex-col items-center pt-24 space-y-7 text-lg font-['Fira_Code'] relative z-10",children:[Z.jsx("a",{href:"#home",className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 transition-colors",onClick:()=>e(!1),children:"Home"}),Z.jsx("a",{href:"#about-me",className:`font-bold ${t?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-indigo-600 hover:to-purple-600 transition-colors`,onClick:()=>e(!1),children:"About Me"}),Z.jsx("a",{href:"#skills",className:`font-bold ${t?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-indigo-600 hover:to-purple-600 transition-colors`,onClick:()=>e(!1),children:"Skills"}),Z.jsx("a",{href:"#experience",className:`font-bold ${t?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-indigo-600 hover:to-purple-600 transition-colors`,onClick:()=>e(!1),children:"Experience"}),Z.jsx("a",{href:"#projects",className:`font-bold ${t?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-indigo-600 hover:to-purple-600 transition-colors`,onClick:()=>e(!1),children:"Projects"}),Z.jsx("a",{href:"#contact",className:`font-bold ${t?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-indigo-600 hover:to-purple-600 transition-colors`,onClick:()=>e(!1),children:"Contact"}),Z.jsx("a",{href:"#",onClick:n=>(n.preventDefault(),window.open("https://drive.google.com/file/d/1IyTVLQiJhc2-Z3C78y2diijVFG5_LiVV/view?usp=drive_link","_blank"),!1),className:"px-4 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-md hover:shadow-lg transition-all font-bold",children:"Resume"})]})}),Jl=({children:r,threshold:e=.2,delay:t=0,direction:n="up",duration:i=.7})=>{const s=We.useRef(null);We.useEffect(()=>{const d=new IntersectionObserver(([p])=>{p.isIntersecting&&setTimeout(()=>{s.current.classList.add("visible")},t)},{threshold:e,rootMargin:"0px 0px -50px 0px"});return s.current&&d.observe(s.current),()=>d.disconnect()},[e,t]);let a="translateY(20px)";n==="down"&&(a="translateY(-20px)"),n==="left"&&(a="translateX(20px)"),n==="right"&&(a="translateX(-20px)");const l={opacity:0,transform:a,transition:`opacity ${i}s ease, transform ${i}s ease`},c={opacity:1,transform:"translate(0)"};return Z.jsx("div",{ref:s,className:"reveal",style:l,"data-visible-style":JSON.stringify(c),children:r})},iT="/deepak-portfolio/assets/profile-Dq_zxwtK.jpeg",rT=({isDarkMode:r})=>{const e=[{text:"Simplicity is the soul of efficiency.",author:"Austin Freeman"},{text:"The best way to predict the future is to implement it.",author:"David Heinemeier Hansson"},{text:"Code is like humor. When you have to explain it, it's bad.",author:"Cory House"},{text:"Make it work, make it right, make it fast.",author:"Kent Beck"},{text:"Every great developer you know got there by solving problems they were unqualified to solve until they actually did it.",author:"Patrick McKenzie"},{text:"Programming isn't about what you know; it's about what you can figure out.",author:"Chris Pine"}],[t,n]=We.useState(0),[i,s]=We.useState(!0);return We.useEffect(()=>{const a=setInterval(()=>{s(!1),setTimeout(()=>{n(l=>(l+1)%e.length),s(!0)},500)},6e3);return()=>clearInterval(a)},[e.length]),Z.jsx("section",{className:`py-6 ${r?"bg-black":"bg-gray-50"} px-4 w-full`,children:Z.jsx("div",{className:"max-w-4xl mx-auto w-full",children:Z.jsxs(Jl,{children:[Z.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-center",children:Z.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Words of Wisdom"})}),Z.jsx("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl p-8 md:p-10 shadow-lg border relative overflow-hidden min-h-[200px] flex items-center justify-center w-full`,children:Z.jsxs("div",{className:`transition-opacity duration-500 ease-in-out ${i?"opacity-100":"opacity-0"} text-center max-w-3xl mx-auto w-full`,children:[Z.jsxs("p",{className:`text-xl md:text-2xl italic mb-4 ${r?"text-gray-300":"text-gray-700"}`,children:['"',e[t].text,'"']}),Z.jsxs("p",{className:`text-right text-lg ${r?"text-gray-400":"text-gray-500"}`,children:[" ",e[t].author]})]})})]})})})},sT=({isDarkMode:r})=>Z.jsx("section",{id:"home",className:`pt-16 md:pt-20 pb-16 md:pb-20 ${r?"bg-black text-gray-200":"bg-white text-gray-800"} px-4 relative overflow-hidden min-h-screen`,children:Z.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center relative z-10",children:[Z.jsx(Jl,{children:Z.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-10 mb-8",children:[Z.jsx("div",{className:"flex-shrink-0",children:Z.jsx("div",{className:"p-1 rounded-full bg-gradient-to-r from-blue-500 via-purple-500 to-indigo-500",children:Z.jsx("img",{src:iT,alt:"Profile",className:`w-32 h-32 sm:w-40 sm:h-40 md:w-48 md:h-48 rounded-full object-cover border-4 ${r?"border-gray-800":"border-white"}`})})}),Z.jsxs("div",{className:"mt-4 md:mt-2 text-center md:text-left",children:[Z.jsx("p",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 text-xl sm:text-2xl mb-1 font-medium",children:"Hey, I am"}),Z.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-bold mb-2 md:mb-4 ${r?"text-gray-200":"text-gray-800"}`,children:"Deepak Reddy"}),Z.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 font-semibold mb-1 md:mb-2",children:"Software Developer"}),Z.jsx("p",{className:`${r?"text-gray-400":"text-gray-600"} text-base sm:text-lg`,children:"Chicago, IL, USA"})]})]})}),Z.jsx(rT,{isDarkMode:r})]})}),oT=({isDarkMode:r})=>Z.jsx("section",{id:"about-me",className:`pt-16 md:pt-20 pb-16 md:pb-20 ${r?"bg-black text-gray-200":"bg-white text-gray-800"} px-4 relative overflow-hidden min-h-screen`,children:Z.jsx("div",{className:"max-w-4xl mx-auto relative z-10",children:Z.jsxs(Jl,{children:[Z.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-8 text-center",children:Z.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"About Me"})}),Z.jsx("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl p-6 md:p-8 shadow-xl border`,children:Z.jsx("div",{className:"space-y-6",children:Z.jsxs("div",{className:"space-y-4",children:[Z.jsx("p",{className:`${r?"text-gray-300":"text-gray-700"} text-base md:text-lg leading-relaxed`,children:"I'm a Results-Driven Java Full Stack Developer with over 4 years of hands-on experience building scalable web applications and cloud-native solutions. I specialize in designing robust backend architectures with Java, Spring Boot, and Microservices, and creating dynamic frontends using ReactJS, Angular, and TypeScript."}),Z.jsx("p",{className:`${r?"text-gray-300":"text-gray-700"} text-base md:text-lg leading-relaxed`,children:"Throughout my career, I've engineered CI/CD pipelines, implemented RESTful APIs, and built cloud-deployed applications on AWS, Azure, and GCP. I have strong expertise in containerization with Docker, orchestration with Kubernetes, and infrastructure automation using Terraform and Ansible."}),Z.jsx("p",{className:`${r?"text-gray-300":"text-gray-700"} text-base md:text-lg leading-relaxed`,children:"I earned my Master's in Information Technology and Management from the Illinois Institute of Technology, Chicago. I thrive in Agile teams, prioritize writing clean and testable code, and enjoy solving complex problems through innovation and technology."})]})})})]})})}),aT=({isDarkMode:r})=>{const e=[{company:"AbbVie",period:"Feb 2024 - Present",position:"Java Full Stack Developer",gradient:"from-purple-500 to-indigo-500",logo:"https://1000logos.net/wp-content/uploads/2021/08/AbbVie-Logo.png",details:["Developing and maintaining enterprise Java applications with Spring Boot","Building responsive front-end interfaces using modern JavaScript frameworks","Collaborating with cross-functional teams to deliver high-quality software solutions"]},{company:"BMO Harris Bank",period:"May 2023 - Jan 2024",position:"Java Full Stack Developer",gradient:"from-cyan-500 to-blue-500",logo:"https://logos-world.net/wp-content/uploads/2021/02/BMO-Logo-700x394.png",details:["Developed and maintained banking applications using Java, Spring, and Angular","Implemented RESTful APIs for financial data processing and transaction management","Collaborated with business stakeholders to translate requirements into technical solutions"]},{company:"Airtel",period:"Sep 2021 - Dec 2022",position:"Java Full Stack Developer",gradient:"from-amber-500 to-orange-500",logo:"https://s.yimg.com/fz/api/res/1.2/mdwR.yOzGC7DpYT5WlRCzQ--~C/YXBwaWQ9c3JjaGRkO2ZpPWZpdDtoPTI0MDtxPTgwO3c9MjM4/https://s.yimg.com/zb/imgv1/4b6c4320-7846-39f4-8b72-13a3348db670/t_500x300",details:["Built and maintained telecommunications applications using Java and related technologies","Implemented front-end interfaces with React for customer-facing applications","Optimized database queries and enhanced application performance for high-traffic services"]},{company:"CIBC Bank",period:"Jun 2020 - Jun 2021",position:"Java Developer",gradient:"from-emerald-500 to-teal-500",logo:"https://upload.wikimedia.org/wikipedia/en/thumb/c/cf/CIBC_logo.svg/1200px-CIBC_logo.svg.png",details:["Developed banking software solutions using Java and Spring framework","Created and maintained database schemas, stored procedures, and queries","Implemented unit and integration tests to ensure application reliability"]}];return Z.jsxs("section",{id:"experience",className:`pt-1 pb-12 md:pt-1 md:pb-16 px-4 relative ${r?"bg-black":"bg-white"}`,children:[Z.jsx("div",{className:`absolute inset-0 ${r?"bg-black":"bg-white"} opacity-100`}),Z.jsx("div",{className:"max-w-4xl mx-auto relative z-10",children:Z.jsxs(Jl,{children:[Z.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-3 text-center",children:Z.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600",children:"Experience"})}),Z.jsx("p",{className:`text-center ${r?"text-gray-300":"text-gray-600"} text-lg mb-10 max-w-3xl mx-auto`,children:"Professional journey and accomplishments"}),Z.jsx("div",{className:"space-y-8",children:e.map((t,n)=>Z.jsx(Jl,{children:Z.jsxs("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg p-6 shadow-lg border transition-all duration-300 hover:shadow-xl`,children:[Z.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[Z.jsxs("div",{className:"flex items-center",children:[Z.jsx("div",{className:"mr-4 flex-shrink-0 bg-white rounded p-1 shadow-sm w-14 h-14 flex items-center justify-center overflow-hidden",children:Z.jsx("img",{src:t.logo,alt:`${t.company} logo`,className:"max-h-[85%] max-w-[85%] object-contain",onError:i=>{i.target.onerror=null,i.target.src="https://via.placeholder.com/100x100?text="+t.company}})}),Z.jsxs("div",{children:[Z.jsx("h3",{className:`text-xl md:text-2xl font-bold ${t.company==="AbbVie"?"text-black":t.company==="Airtel"?"text-red-600":t.company==="CIBC Bank"?"text-yellow-500":`text-transparent bg-clip-text bg-gradient-to-r ${t.gradient}`}`,children:t.company}),Z.jsx("h4",{className:`text-lg font-medium ${r?"text-gray-300":"text-gray-700"}`,children:t.position})]})]}),Z.jsx("div",{className:`mt-2 md:mt-0 text-sm ${r?"text-gray-400":"text-gray-500"} font-medium`,children:t.period})]}),Z.jsx("ul",{className:"list-disc pl-5 space-y-2 ml-12",children:t.details.map((i,s)=>Z.jsx("li",{className:`${r?"text-gray-300":"text-gray-700"}`,children:i},s))})]})},n))})]})})]})},lT=({isDarkMode:r})=>{const e=[{title:"Pharma Cloud Platform",description:"Developed a cloud-based platform for pharmaceutical data management and analytics.",technologies:["Java","Spring Boot","AWS"],gradient:"from-blue-500 to-cyan-500",bgGradient:"from-blue-50 to-cyan-50"},{title:"Banking Microservices App",description:"Built a microservices-based banking application with a scalable architecture",technologies:["React","Node.js","Docker"],gradient:"from-emerald-500 to-teal-500",bgGradient:"from-emerald-50 to-teal-50"},{title:"Retail Analytics Dashboard",description:"Created an analytics dashboard for retail data visualization and reporting",technologies:["Python","Flask","Javascript"],gradient:"from-purple-500 to-violet-500",bgGradient:"from-purple-50 to-violet-50"},{title:"Personal Portfolio Website",description:"Designed and developed this responsive portfolio website with modern UI/UX principles and animations",technologies:["React","TailwindCSS","Vite"],gradient:"from-indigo-500 to-purple-500",bgGradient:"from-indigo-50 to-purple-50"},{title:"AI-Powered Image Generator",description:"Created a web application that uses machine learning to generate custom images based on text prompts",technologies:["Python","TensorFlow","React","Flask"],gradient:"from-rose-500 to-pink-500",bgGradient:"from-rose-50 to-pink-50"},{title:"Smart Home IoT Dashboard",description:"Developed a real-time dashboard for monitoring and controlling smart home devices with secure authentication",technologies:["React","Node.js","MQTT","MongoDB"],gradient:"from-amber-500 to-orange-500",bgGradient:"from-amber-50 to-orange-50"}];return Z.jsxs("section",{id:"projects",className:`pt-1 pb-12 md:pt-1 md:pb-16 px-4 relative ${r?"bg-black":"bg-white"}`,children:[Z.jsx("div",{className:`absolute inset-0 ${r?"bg-black":"bg-white"} opacity-100`}),Z.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:Z.jsxs(Jl,{children:[Z.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-3 text-center",children:Z.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-emerald-600",children:"Projects"})}),Z.jsx("p",{className:`text-center ${r?"text-gray-300":"text-gray-600"} text-lg mb-10 max-w-3xl mx-auto`,children:"Showcasing innovative solutions and technical implementations"}),Z.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((t,n)=>Z.jsxs("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg overflow-hidden border shadow-md transform transition-all duration-300 hover:scale-105 hover:shadow-xl`,children:[Z.jsx("div",{className:`h-3 bg-gradient-to-r ${t.gradient}`}),Z.jsxs("div",{className:"p-6",children:[Z.jsx("h3",{className:`text-xl md:text-2xl font-bold mb-3 text-transparent bg-clip-text bg-gradient-to-r ${t.gradient}`,children:t.title}),Z.jsx("p",{className:`${r?"text-gray-300":"text-gray-700"} text-sm md:text-base mb-4`,children:t.description}),Z.jsx("div",{className:"flex flex-wrap gap-2 mt-auto pt-2",children:t.technologies.map((i,s)=>Z.jsx("span",{className:`${r?"bg-gray-700 border-gray-600":"bg-white border-gray-200"} py-1 px-3 text-xs md:text-sm rounded-full border shadow-sm`,children:Z.jsx("span",{className:`text-transparent bg-clip-text bg-gradient-to-r ${t.gradient} font-medium`,children:i})},s))})]})]},n))})]})})]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const g0="175",qu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ju={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sM=0,Xy=1,oM=2,uT=3,aM=0,v0=1,yh=2,_o=3,Ja=0,Wr=1,Mo=2,Ya=0,rc=1,Yy=2,qy=3,Jy=4,lM=5,Gl=100,uM=101,cM=102,fM=103,dM=104,hM=200,pM=201,mM=202,gM=203,_g=204,Sg=205,vM=206,yM=207,xM=208,_M=209,SM=210,wM=211,MM=212,EM=213,bM=214,wg=0,Mg=1,Eg=2,uc=3,bg=4,Tg=5,Ag=6,Cg=7,rp=0,TM=1,AM=2,Qo=0,CM=1,RM=2,PM=3,Ex=4,IM=5,LM=6,DM=7,Zy="attached",kM="detached",y0=300,Za=301,Zl=302,Dh=303,kh=304,Kf=306,Nh=1e3,zs=1001,Uh=1002,cr=1003,bx=1004,cT=1004,Nf=1005,fT=1005,Si=1006,xh=1007,dT=1007,Ko=1008,hT=1008,To=1009,Tx=1010,Ax=1011,Hf=1012,x0=1013,Ka=1014,us=1015,Qf=1016,_0=1017,S0=1018,Gf=1020,Cx=35902,Rx=1021,Px=1022,br=1023,Ix=1024,Lx=1025,Wf=1026,jf=1027,w0=1028,sp=1029,Dx=1030,M0=1031,pT=1032,E0=1033,_h=33776,Sh=33777,wh=33778,Mh=33779,Rg=35840,Pg=35841,Ig=35842,Lg=35843,Dg=36196,kg=37492,Ng=37496,Ug=37808,Fg=37809,Og=37810,Bg=37811,zg=37812,Vg=37813,Hg=37814,Gg=37815,Wg=37816,jg=37817,Xg=37818,Yg=37819,qg=37820,Jg=37821,Eh=36492,Zg=36494,Kg=36495,kx=36283,Qg=36284,$g=36285,e0=36286,NM=2200,UM=2201,FM=2202,Fh=2300,t0=2301,dg=2302,tc=2400,nc=2401,Oh=2402,b0=2500,Nx=2501,mT=0,gT=1,vT=2,OM=3200,Ux=3201,yT=3202,xT=3203,Ql=0,BM=1,Wa="",as="srgb",cc="srgb-linear",Bh="linear",Cn="srgb",_T=0,Zu=7680,ST=7681,wT=7682,MT=7683,ET=34055,bT=34056,TT=5386,AT=512,CT=513,RT=514,PT=515,IT=516,LT=517,DT=518,Ky=519,zM=512,VM=513,HM=514,Fx=515,GM=516,WM=517,jM=518,XM=519,zh=35044,kT=35048,NT=35040,UT=35045,FT=35049,OT=35041,BT=35046,zT=35050,VT=35042,HT="100",Qy="300 es",Eo=2e3,Vh=2001,GT={COMPUTE:"compute",RENDER:"render"};let na=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const wr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let y1=1234567;const sc=Math.PI/180,Xf=180/Math.PI;function Es(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(wr[r&255]+wr[r>>8&255]+wr[r>>16&255]+wr[r>>24&255]+"-"+wr[e&255]+wr[e>>8&255]+"-"+wr[e>>16&15|64]+wr[e>>24&255]+"-"+wr[t&63|128]+wr[t>>8&255]+"-"+wr[t>>16&255]+wr[t>>24&255]+wr[n&255]+wr[n>>8&255]+wr[n>>16&255]+wr[n>>24&255]).toLowerCase()}function $t(r,e,t){return Math.max(e,Math.min(t,r))}function Ox(r,e){return(r%e+e)%e}function WT(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function jT(r,e,t){return r!==e?(t-r)/(e-r):0}function bh(r,e,t){return(1-t)*r+t*e}function XT(r,e,t,n){return bh(r,e,1-Math.exp(-t*n))}function YT(r,e=1){return e-Math.abs(Ox(r,e*2)-e)}function qT(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function JT(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function ZT(r,e){return r+Math.floor(Math.random()*(e-r+1))}function KT(r,e){return r+Math.random()*(e-r)}function QT(r){return r*(.5-Math.random())}function $T(r){r!==void 0&&(y1=r);let e=y1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function eA(r){return r*sc}function tA(r){return r*Xf}function nA(r){return(r&r-1)===0&&r!==0}function iA(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function rA(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function sA(r,e,t,n,i){const s=Math.cos,a=Math.sin,l=s(t/2),c=a(t/2),d=s((e+n)/2),p=a((e+n)/2),g=s((e-n)/2),v=a((e-n)/2),y=s((n-e)/2),w=a((n-e)/2);switch(i){case"XYX":r.set(l*p,c*g,c*v,l*d);break;case"YZY":r.set(c*v,l*p,c*g,l*d);break;case"ZXZ":r.set(c*g,c*v,l*p,l*d);break;case"XZX":r.set(l*p,c*w,c*y,l*d);break;case"YXY":r.set(c*y,l*p,c*w,l*d);break;case"ZYZ":r.set(c*w,c*y,l*p,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Gr(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function ln(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const oA={DEG2RAD:sc,RAD2DEG:Xf,generateUUID:Es,clamp:$t,euclideanModulo:Ox,mapLinear:WT,inverseLerp:jT,lerp:bh,damp:XT,pingpong:YT,smoothstep:qT,smootherstep:JT,randInt:ZT,randFloat:KT,randFloatSpread:QT,seededRandom:$T,degToRad:eA,radToDeg:tA,isPowerOfTwo:nA,ceilPowerOfTwo:iA,floorPowerOfTwo:rA,setQuaternionFromProperEuler:sA,normalize:ln,denormalize:Gr};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar($t(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos($t(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qt{constructor(e,t,n,i,s,a,l,c,d){Qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,l,c,d)}set(e,t,n,i,s,a,l,c,d){const p=this.elements;return p[0]=e,p[1]=i,p[2]=l,p[3]=t,p[4]=s,p[5]=c,p[6]=n,p[7]=a,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],l=n[3],c=n[6],d=n[1],p=n[4],g=n[7],v=n[2],y=n[5],w=n[8],E=i[0],M=i[3],S=i[6],T=i[1],A=i[4],R=i[7],F=i[2],N=i[5],O=i[8];return s[0]=a*E+l*T+c*F,s[3]=a*M+l*A+c*N,s[6]=a*S+l*R+c*O,s[1]=d*E+p*T+g*F,s[4]=d*M+p*A+g*N,s[7]=d*S+p*R+g*O,s[2]=v*E+y*T+w*F,s[5]=v*M+y*A+w*N,s[8]=v*S+y*R+w*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],d=e[7],p=e[8];return t*a*p-t*l*d-n*s*p+n*l*c+i*s*d-i*a*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],d=e[7],p=e[8],g=p*a-l*d,v=l*c-p*s,y=d*s-a*c,w=t*g+n*v+i*y;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/w;return e[0]=g*E,e[1]=(i*d-p*n)*E,e[2]=(l*n-i*a)*E,e[3]=v*E,e[4]=(p*t-i*c)*E,e[5]=(i*s-l*t)*E,e[6]=y*E,e[7]=(n*c-d*t)*E,e[8]=(a*t-n*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,a,l){const c=Math.cos(s),d=Math.sin(s);return this.set(n*c,n*d,-n*(c*a+d*l)+a+e,-i*d,i*c,-i*(-d*a+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Uv.makeScale(e,t)),this}rotate(e){return this.premultiply(Uv.makeRotation(-e)),this}translate(e,t){return this.premultiply(Uv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Uv=new Qt;function YM(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const aA={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Uf(r,e){return new aA[r](e)}function Hh(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function qM(){const r=Hh("canvas");return r.style.display="block",r}const x1={};function hg(r){r in x1||(x1[r]=!0,console.warn(r))}function lA(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function uA(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function cA(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const _1=new Qt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),S1=new Qt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function fA(){const r={enabled:!0,workingColorSpace:cc,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Cn&&(i.r=qa(i.r),i.g=qa(i.g),i.b=qa(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Cn&&(i.r=Bf(i.r),i.g=Bf(i.g),i.b=Bf(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Wa?Bh:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[cc]:{primaries:e,whitePoint:n,transfer:Bh,toXYZ:_1,fromXYZ:S1,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:as},outputColorSpaceConfig:{drawingBufferColorSpace:as}},[as]:{primaries:e,whitePoint:n,transfer:Cn,toXYZ:_1,fromXYZ:S1,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:as}}}),r}const xn=fA();function qa(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Bf(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let cf;class JM{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{cf===void 0&&(cf=Hh("canvas")),cf.width=e.width,cf.height=e.height;const i=cf.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=cf}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Hh("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=qa(s[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(qa(t[n]/255)*255):t[n]=qa(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let dA=0;class Wl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:dA++}),this.uuid=Es(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,l=i.length;a<l;a++)i[a].isDataTexture?s.push(Fv(i[a].image)):s.push(Fv(i[a]))}else s=Fv(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Fv(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?JM.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hA=0;class ri extends na{constructor(e=ri.DEFAULT_IMAGE,t=ri.DEFAULT_MAPPING,n=zs,i=zs,s=Si,a=Ko,l=br,c=To,d=ri.DEFAULT_ANISOTROPY,p=Wa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hA++}),this.uuid=Es(),this.name="",this.source=new Wl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==y0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nh:e.x=e.x-Math.floor(e.x);break;case zs:e.x=e.x<0?0:1;break;case Uh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nh:e.y=e.y-Math.floor(e.y);break;case zs:e.y=e.y<0?0:1;break;case Uh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ri.DEFAULT_IMAGE=null;ri.DEFAULT_MAPPING=y0;ri.DEFAULT_ANISOTROPY=1;class vn{constructor(e=0,t=0,n=0,i=1){vn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const c=e.elements,d=c[0],p=c[4],g=c[8],v=c[1],y=c[5],w=c[9],E=c[2],M=c[6],S=c[10];if(Math.abs(p-v)<.01&&Math.abs(g-E)<.01&&Math.abs(w-M)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+E)<.1&&Math.abs(w+M)<.1&&Math.abs(d+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(d+1)/2,R=(y+1)/2,F=(S+1)/2,N=(p+v)/4,O=(g+E)/4,z=(w+M)/4;return A>R&&A>F?A<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(A),i=N/n,s=O/n):R>F?R<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),n=N/i,s=z/i):F<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(F),n=O/s,i=z/s),this.set(n,i,s,t),this}let T=Math.sqrt((M-w)*(M-w)+(g-E)*(g-E)+(v-p)*(v-p));return Math.abs(T)<.001&&(T=1),this.x=(M-w)/T,this.y=(g-E)/T,this.z=(v-p)/T,this.w=Math.acos((d+y+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this.z=$t(this.z,e.z,t.z),this.w=$t(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this.z=$t(this.z,e,t),this.w=$t(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar($t(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class T0 extends na{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new vn(0,0,e,t),this.scissorTest=!1,this.viewport=new vn(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Si,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new ri(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new Wl(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ta extends T0{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class op extends ri{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=cr,this.minFilter=cr,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class pA extends ta{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new op(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class A0 extends ri{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=cr,this.minFilter=cr,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mA extends ta{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new A0(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Tr{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,a,l){let c=n[i+0],d=n[i+1],p=n[i+2],g=n[i+3];const v=s[a+0],y=s[a+1],w=s[a+2],E=s[a+3];if(l===0){e[t+0]=c,e[t+1]=d,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=w,e[t+3]=E;return}if(g!==E||c!==v||d!==y||p!==w){let M=1-l;const S=c*v+d*y+p*w+g*E,T=S>=0?1:-1,A=1-S*S;if(A>Number.EPSILON){const F=Math.sqrt(A),N=Math.atan2(F,S*T);M=Math.sin(M*N)/F,l=Math.sin(l*N)/F}const R=l*T;if(c=c*M+v*R,d=d*M+y*R,p=p*M+w*R,g=g*M+E*R,M===1-l){const F=1/Math.sqrt(c*c+d*d+p*p+g*g);c*=F,d*=F,p*=F,g*=F}}e[t]=c,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,i,s,a){const l=n[i],c=n[i+1],d=n[i+2],p=n[i+3],g=s[a],v=s[a+1],y=s[a+2],w=s[a+3];return e[t]=l*w+p*g+c*y-d*v,e[t+1]=c*w+p*v+d*g-l*y,e[t+2]=d*w+p*y+l*v-c*g,e[t+3]=p*w-l*g-c*v-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,d=l(n/2),p=l(i/2),g=l(s/2),v=c(n/2),y=c(i/2),w=c(s/2);switch(a){case"XYZ":this._x=v*p*g+d*y*w,this._y=d*y*g-v*p*w,this._z=d*p*w+v*y*g,this._w=d*p*g-v*y*w;break;case"YXZ":this._x=v*p*g+d*y*w,this._y=d*y*g-v*p*w,this._z=d*p*w-v*y*g,this._w=d*p*g+v*y*w;break;case"ZXY":this._x=v*p*g-d*y*w,this._y=d*y*g+v*p*w,this._z=d*p*w+v*y*g,this._w=d*p*g-v*y*w;break;case"ZYX":this._x=v*p*g-d*y*w,this._y=d*y*g+v*p*w,this._z=d*p*w-v*y*g,this._w=d*p*g+v*y*w;break;case"YZX":this._x=v*p*g+d*y*w,this._y=d*y*g+v*p*w,this._z=d*p*w-v*y*g,this._w=d*p*g-v*y*w;break;case"XZY":this._x=v*p*g-d*y*w,this._y=d*y*g-v*p*w,this._z=d*p*w+v*y*g,this._w=d*p*g+v*y*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],a=t[1],l=t[5],c=t[9],d=t[2],p=t[6],g=t[10],v=n+l+g;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-c)*y,this._y=(s-d)*y,this._z=(a-i)*y}else if(n>l&&n>g){const y=2*Math.sqrt(1+n-l-g);this._w=(p-c)/y,this._x=.25*y,this._y=(i+a)/y,this._z=(s+d)/y}else if(l>g){const y=2*Math.sqrt(1+l-n-g);this._w=(s-d)/y,this._x=(i+a)/y,this._y=.25*y,this._z=(c+p)/y}else{const y=2*Math.sqrt(1+g-n-l);this._w=(a-i)/y,this._x=(s+d)/y,this._y=(c+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($t(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,a=e._w,l=t._x,c=t._y,d=t._z,p=t._w;return this._x=n*p+a*l+i*d-s*c,this._y=i*p+a*c+s*l-n*d,this._z=s*p+a*d+n*c-i*l,this._w=a*p-n*l-i*c-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let l=a*e._w+n*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const y=1-t;return this._w=y*a+t*this._w,this._x=y*n+t*this._x,this._y=y*i+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const d=Math.sqrt(c),p=Math.atan2(d,l),g=Math.sin((1-t)*p)/d,v=Math.sin(t*p)/d;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=i*g+this._y*v,this._z=s*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,t=0,n=0){te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(w1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(w1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,a=e.y,l=e.z,c=e.w,d=2*(a*i-l*n),p=2*(l*t-s*i),g=2*(s*n-a*t);return this.x=t+c*d+a*g-l*p,this.y=n+c*p+l*d-s*g,this.z=i+c*g+s*p-a*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this.z=$t(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this.z=$t(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar($t(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,a=t.x,l=t.y,c=t.z;return this.x=i*c-s*l,this.y=s*a-n*c,this.z=n*l-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Ov.copy(this).projectOnVector(e),this.sub(Ov)}reflect(e){return this.sub(Ov.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos($t(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ov=new te,w1=new Tr;class fr{constructor(e=new te(1/0,1/0,1/0),t=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,vo):vo.fromBufferAttribute(s,a),vo.applyMatrix4(e.matrixWorld),this.expandByPoint(vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),dm.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),dm.copy(n.boundingBox)),dm.applyMatrix4(e.matrixWorld),this.union(dm)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(qd),hm.subVectors(this.max,qd),ff.subVectors(e.a,qd),df.subVectors(e.b,qd),hf.subVectors(e.c,qd),kl.subVectors(df,ff),Nl.subVectors(hf,df),ku.subVectors(ff,hf);let t=[0,-kl.z,kl.y,0,-Nl.z,Nl.y,0,-ku.z,ku.y,kl.z,0,-kl.x,Nl.z,0,-Nl.x,ku.z,0,-ku.x,-kl.y,kl.x,0,-Nl.y,Nl.x,0,-ku.y,ku.x,0];return!Bv(t,ff,df,hf,hm)||(t=[1,0,0,0,1,0,0,0,1],!Bv(t,ff,df,hf,hm))?!1:(pm.crossVectors(kl,Nl),t=[pm.x,pm.y,pm.z],Bv(t,ff,df,hf,hm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Na[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Na[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Na[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Na[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Na[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Na[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Na[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Na[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Na),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Na=[new te,new te,new te,new te,new te,new te,new te,new te],vo=new te,dm=new fr,ff=new te,df=new te,hf=new te,kl=new te,Nl=new te,ku=new te,qd=new te,hm=new te,pm=new te,Nu=new te;function Bv(r,e,t,n,i){for(let s=0,a=r.length-3;s<=a;s+=3){Nu.fromArray(r,s);const l=i.x*Math.abs(Nu.x)+i.y*Math.abs(Nu.y)+i.z*Math.abs(Nu.z),c=e.dot(Nu),d=t.dot(Nu),p=n.dot(Nu);if(Math.max(-Math.max(c,d,p),Math.min(c,d,p))>l)return!1}return!0}const gA=new fr,Jd=new te,zv=new te;class dr{constructor(e=new te,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):gA.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jd.subVectors(e,this.center);const t=Jd.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Jd,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jd.copy(e.center).add(zv)),this.expandByPoint(Jd.copy(e.center).sub(zv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ua=new te,Vv=new te,mm=new te,Ul=new te,Hv=new te,gm=new te,Gv=new te;class mc{constructor(e=new te,t=new te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ua)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ua.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ua.copy(this.origin).addScaledVector(this.direction,t),Ua.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Vv.copy(e).add(t).multiplyScalar(.5),mm.copy(t).sub(e).normalize(),Ul.copy(this.origin).sub(Vv);const s=e.distanceTo(t)*.5,a=-this.direction.dot(mm),l=Ul.dot(this.direction),c=-Ul.dot(mm),d=Ul.lengthSq(),p=Math.abs(1-a*a);let g,v,y,w;if(p>0)if(g=a*c-l,v=a*l-c,w=s*p,g>=0)if(v>=-w)if(v<=w){const E=1/p;g*=E,v*=E,y=g*(g+a*v+2*l)+v*(a*g+v+2*c)+d}else v=s,g=Math.max(0,-(a*v+l)),y=-g*g+v*(v+2*c)+d;else v=-s,g=Math.max(0,-(a*v+l)),y=-g*g+v*(v+2*c)+d;else v<=-w?(g=Math.max(0,-(-a*s+l)),v=g>0?-s:Math.min(Math.max(-s,-c),s),y=-g*g+v*(v+2*c)+d):v<=w?(g=0,v=Math.min(Math.max(-s,-c),s),y=v*(v+2*c)+d):(g=Math.max(0,-(a*s+l)),v=g>0?s:Math.min(Math.max(-s,-c),s),y=-g*g+v*(v+2*c)+d);else v=a>0?-s:s,g=Math.max(0,-(a*v+l)),y=-g*g+v*(v+2*c)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(Vv).addScaledVector(mm,v),y}intersectSphere(e,t){Ua.subVectors(e.center,this.origin);const n=Ua.dot(this.direction),i=Ua.dot(Ua)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),l=n-a,c=n+a;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,a,l,c;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return d>=0?(n=(e.min.x-v.x)*d,i=(e.max.x-v.x)*d):(n=(e.max.x-v.x)*d,i=(e.min.x-v.x)*d),p>=0?(s=(e.min.y-v.y)*p,a=(e.max.y-v.y)*p):(s=(e.max.y-v.y)*p,a=(e.min.y-v.y)*p),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),n>c||l>i)||((l>n||n!==n)&&(n=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Ua)!==null}intersectTriangle(e,t,n,i,s){Hv.subVectors(t,e),gm.subVectors(n,e),Gv.crossVectors(Hv,gm);let a=this.direction.dot(Gv),l;if(a>0){if(i)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Ul.subVectors(this.origin,e);const c=l*this.direction.dot(gm.crossVectors(Ul,gm));if(c<0)return null;const d=l*this.direction.dot(Hv.cross(Ul));if(d<0||c+d>a)return null;const p=-l*Ul.dot(Gv);return p<0?null:this.at(p/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wt{constructor(e,t,n,i,s,a,l,c,d,p,g,v,y,w,E,M){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,l,c,d,p,g,v,y,w,E,M)}set(e,t,n,i,s,a,l,c,d,p,g,v,y,w,E,M){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=i,S[1]=s,S[5]=a,S[9]=l,S[13]=c,S[2]=d,S[6]=p,S[10]=g,S[14]=v,S[3]=y,S[7]=w,S[11]=E,S[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/pf.setFromMatrixColumn(e,0).length(),s=1/pf.setFromMatrixColumn(e,1).length(),a=1/pf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),l=Math.sin(n),c=Math.cos(i),d=Math.sin(i),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const v=a*p,y=a*g,w=l*p,E=l*g;t[0]=c*p,t[4]=-c*g,t[8]=d,t[1]=y+w*d,t[5]=v-E*d,t[9]=-l*c,t[2]=E-v*d,t[6]=w+y*d,t[10]=a*c}else if(e.order==="YXZ"){const v=c*p,y=c*g,w=d*p,E=d*g;t[0]=v+E*l,t[4]=w*l-y,t[8]=a*d,t[1]=a*g,t[5]=a*p,t[9]=-l,t[2]=y*l-w,t[6]=E+v*l,t[10]=a*c}else if(e.order==="ZXY"){const v=c*p,y=c*g,w=d*p,E=d*g;t[0]=v-E*l,t[4]=-a*g,t[8]=w+y*l,t[1]=y+w*l,t[5]=a*p,t[9]=E-v*l,t[2]=-a*d,t[6]=l,t[10]=a*c}else if(e.order==="ZYX"){const v=a*p,y=a*g,w=l*p,E=l*g;t[0]=c*p,t[4]=w*d-y,t[8]=v*d+E,t[1]=c*g,t[5]=E*d+v,t[9]=y*d-w,t[2]=-d,t[6]=l*c,t[10]=a*c}else if(e.order==="YZX"){const v=a*c,y=a*d,w=l*c,E=l*d;t[0]=c*p,t[4]=E-v*g,t[8]=w*g+y,t[1]=g,t[5]=a*p,t[9]=-l*p,t[2]=-d*p,t[6]=y*g+w,t[10]=v-E*g}else if(e.order==="XZY"){const v=a*c,y=a*d,w=l*c,E=l*d;t[0]=c*p,t[4]=-g,t[8]=d*p,t[1]=v*g+E,t[5]=a*p,t[9]=y*g-w,t[2]=w*g-y,t[6]=l*p,t[10]=E*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vA,e,yA)}lookAt(e,t,n){const i=this.elements;return ws.subVectors(e,t),ws.lengthSq()===0&&(ws.z=1),ws.normalize(),Fl.crossVectors(n,ws),Fl.lengthSq()===0&&(Math.abs(n.z)===1?ws.x+=1e-4:ws.z+=1e-4,ws.normalize(),Fl.crossVectors(n,ws)),Fl.normalize(),vm.crossVectors(ws,Fl),i[0]=Fl.x,i[4]=vm.x,i[8]=ws.x,i[1]=Fl.y,i[5]=vm.y,i[9]=ws.y,i[2]=Fl.z,i[6]=vm.z,i[10]=ws.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],l=n[4],c=n[8],d=n[12],p=n[1],g=n[5],v=n[9],y=n[13],w=n[2],E=n[6],M=n[10],S=n[14],T=n[3],A=n[7],R=n[11],F=n[15],N=i[0],O=i[4],z=i[8],k=i[12],L=i[1],W=i[5],X=i[9],K=i[13],ne=i[2],de=i[6],ae=i[10],me=i[14],H=i[3],J=i[7],j=i[11],D=i[15];return s[0]=a*N+l*L+c*ne+d*H,s[4]=a*O+l*W+c*de+d*J,s[8]=a*z+l*X+c*ae+d*j,s[12]=a*k+l*K+c*me+d*D,s[1]=p*N+g*L+v*ne+y*H,s[5]=p*O+g*W+v*de+y*J,s[9]=p*z+g*X+v*ae+y*j,s[13]=p*k+g*K+v*me+y*D,s[2]=w*N+E*L+M*ne+S*H,s[6]=w*O+E*W+M*de+S*J,s[10]=w*z+E*X+M*ae+S*j,s[14]=w*k+E*K+M*me+S*D,s[3]=T*N+A*L+R*ne+F*H,s[7]=T*O+A*W+R*de+F*J,s[11]=T*z+A*X+R*ae+F*j,s[15]=T*k+A*K+R*me+F*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],a=e[1],l=e[5],c=e[9],d=e[13],p=e[2],g=e[6],v=e[10],y=e[14],w=e[3],E=e[7],M=e[11],S=e[15];return w*(+s*c*g-i*d*g-s*l*v+n*d*v+i*l*y-n*c*y)+E*(+t*c*y-t*d*v+s*a*v-i*a*y+i*d*p-s*c*p)+M*(+t*d*g-t*l*y-s*a*g+n*a*y+s*l*p-n*d*p)+S*(-i*l*p-t*c*g+t*l*v+i*a*g-n*a*v+n*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],d=e[7],p=e[8],g=e[9],v=e[10],y=e[11],w=e[12],E=e[13],M=e[14],S=e[15],T=g*M*d-E*v*d+E*c*y-l*M*y-g*c*S+l*v*S,A=w*v*d-p*M*d-w*c*y+a*M*y+p*c*S-a*v*S,R=p*E*d-w*g*d+w*l*y-a*E*y-p*l*S+a*g*S,F=w*g*c-p*E*c-w*l*v+a*E*v+p*l*M-a*g*M,N=t*T+n*A+i*R+s*F;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/N;return e[0]=T*O,e[1]=(E*v*s-g*M*s-E*i*y+n*M*y+g*i*S-n*v*S)*O,e[2]=(l*M*s-E*c*s+E*i*d-n*M*d-l*i*S+n*c*S)*O,e[3]=(g*c*s-l*v*s-g*i*d+n*v*d+l*i*y-n*c*y)*O,e[4]=A*O,e[5]=(p*M*s-w*v*s+w*i*y-t*M*y-p*i*S+t*v*S)*O,e[6]=(w*c*s-a*M*s-w*i*d+t*M*d+a*i*S-t*c*S)*O,e[7]=(a*v*s-p*c*s+p*i*d-t*v*d-a*i*y+t*c*y)*O,e[8]=R*O,e[9]=(w*g*s-p*E*s-w*n*y+t*E*y+p*n*S-t*g*S)*O,e[10]=(a*E*s-w*l*s+w*n*d-t*E*d-a*n*S+t*l*S)*O,e[11]=(p*l*s-a*g*s-p*n*d+t*g*d+a*n*y-t*l*y)*O,e[12]=F*O,e[13]=(p*E*i-w*g*i+w*n*v-t*E*v-p*n*M+t*g*M)*O,e[14]=(w*l*i-a*E*i-w*n*c+t*E*c+a*n*M-t*l*M)*O,e[15]=(a*g*i-p*l*i+p*n*c-t*g*c-a*n*v+t*l*v)*O,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,a=e.x,l=e.y,c=e.z,d=s*a,p=s*l;return this.set(d*a+n,d*l-i*c,d*c+i*l,0,d*l+i*c,p*l+n,p*c-i*a,0,d*c-i*l,p*c+i*a,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,a=t._y,l=t._z,c=t._w,d=s+s,p=a+a,g=l+l,v=s*d,y=s*p,w=s*g,E=a*p,M=a*g,S=l*g,T=c*d,A=c*p,R=c*g,F=n.x,N=n.y,O=n.z;return i[0]=(1-(E+S))*F,i[1]=(y+R)*F,i[2]=(w-A)*F,i[3]=0,i[4]=(y-R)*N,i[5]=(1-(v+S))*N,i[6]=(M+T)*N,i[7]=0,i[8]=(w+A)*O,i[9]=(M-T)*O,i[10]=(1-(v+E))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=pf.set(i[0],i[1],i[2]).length();const a=pf.set(i[4],i[5],i[6]).length(),l=pf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],yo.copy(this);const d=1/s,p=1/a,g=1/l;return yo.elements[0]*=d,yo.elements[1]*=d,yo.elements[2]*=d,yo.elements[4]*=p,yo.elements[5]*=p,yo.elements[6]*=p,yo.elements[8]*=g,yo.elements[9]*=g,yo.elements[10]*=g,t.setFromRotationMatrix(yo),n.x=s,n.y=a,n.z=l,this}makePerspective(e,t,n,i,s,a,l=Eo){const c=this.elements,d=2*s/(t-e),p=2*s/(n-i),g=(t+e)/(t-e),v=(n+i)/(n-i);let y,w;if(l===Eo)y=-(a+s)/(a-s),w=-2*a*s/(a-s);else if(l===Vh)y=-a/(a-s),w=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=d,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=p,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=w,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,i,s,a,l=Eo){const c=this.elements,d=1/(t-e),p=1/(n-i),g=1/(a-s),v=(t+e)*d,y=(n+i)*p;let w,E;if(l===Eo)w=(a+s)*g,E=-2*g;else if(l===Vh)w=s*g,E=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=E,c[14]=-w,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const pf=new te,yo=new Wt,vA=new te(0,0,0),yA=new te(1,1,1),Fl=new te,vm=new te,ws=new te,M1=new Wt,E1=new Tr;class bs{constructor(e=0,t=0,n=0,i=bs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],l=i[8],c=i[1],d=i[5],p=i[9],g=i[2],v=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin($t(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-$t(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin($t(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-$t(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin($t(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-$t(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return M1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(M1,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return E1.setFromEuler(this),this.setFromQuaternion(E1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bs.DEFAULT_ORDER="XYZ";class oc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xA=0;const b1=new te,mf=new Tr,Fa=new Wt,ym=new te,Zd=new te,_A=new te,SA=new Tr,T1=new te(1,0,0),A1=new te(0,1,0),C1=new te(0,0,1),R1={type:"added"},wA={type:"removed"},gf={type:"childadded",child:null},Wv={type:"childremoved",child:null};class wn extends na{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xA++}),this.uuid=Es(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wn.DEFAULT_UP.clone();const e=new te,t=new bs,n=new Tr,i=new te(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Wt},normalMatrix:{value:new Qt}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=wn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new oc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return mf.setFromAxisAngle(e,t),this.quaternion.multiply(mf),this}rotateOnWorldAxis(e,t){return mf.setFromAxisAngle(e,t),this.quaternion.premultiply(mf),this}rotateX(e){return this.rotateOnAxis(T1,e)}rotateY(e){return this.rotateOnAxis(A1,e)}rotateZ(e){return this.rotateOnAxis(C1,e)}translateOnAxis(e,t){return b1.copy(e).applyQuaternion(this.quaternion),this.position.add(b1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(T1,e)}translateY(e){return this.translateOnAxis(A1,e)}translateZ(e){return this.translateOnAxis(C1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fa.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ym.copy(e):ym.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Zd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fa.lookAt(Zd,ym,this.up):Fa.lookAt(ym,Zd,this.up),this.quaternion.setFromRotationMatrix(Fa),i&&(Fa.extractRotation(i.matrixWorld),mf.setFromRotationMatrix(Fa),this.quaternion.premultiply(mf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(R1),gf.child=e,this.dispatchEvent(gf),gf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wA),Wv.child=e,this.dispatchEvent(Wv),Wv.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(R1),gf.child=e,this.dispatchEvent(gf),gf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zd,e,_A),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zd,SA,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let d=0,p=c.length;d<p;d++){const g=c[d];s(e.shapes,g)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(e.materials,this.material[c]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(s(e.animations,c))}}if(t){const l=a(e.geometries),c=a(e.materials),d=a(e.textures),p=a(e.images),g=a(e.shapes),v=a(e.skeletons),y=a(e.animations),w=a(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),w.length>0&&(n.nodes=w)}return n.object=i,n;function a(l){const c=[];for(const d in l){const p=l[d];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}wn.DEFAULT_UP=new te(0,1,0);wn.DEFAULT_MATRIX_AUTO_UPDATE=!0;wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xo=new te,Oa=new te,jv=new te,Ba=new te,vf=new te,yf=new te,P1=new te,Xv=new te,Yv=new te,qv=new te,Jv=new vn,Zv=new vn,Kv=new vn;class ls{constructor(e=new te,t=new te,n=new te){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),xo.subVectors(e,t),i.cross(xo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){xo.subVectors(i,t),Oa.subVectors(n,t),jv.subVectors(e,t);const a=xo.dot(xo),l=xo.dot(Oa),c=xo.dot(jv),d=Oa.dot(Oa),p=Oa.dot(jv),g=a*d-l*l;if(g===0)return s.set(0,0,0),null;const v=1/g,y=(d*c-l*p)*v,w=(a*p-l*c)*v;return s.set(1-y-w,w,y)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Ba)===null?!1:Ba.x>=0&&Ba.y>=0&&Ba.x+Ba.y<=1}static getInterpolation(e,t,n,i,s,a,l,c){return this.getBarycoord(e,t,n,i,Ba)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Ba.x),c.addScaledVector(a,Ba.y),c.addScaledVector(l,Ba.z),c)}static getInterpolatedAttribute(e,t,n,i,s,a){return Jv.setScalar(0),Zv.setScalar(0),Kv.setScalar(0),Jv.fromBufferAttribute(e,t),Zv.fromBufferAttribute(e,n),Kv.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(Jv,s.x),a.addScaledVector(Zv,s.y),a.addScaledVector(Kv,s.z),a}static isFrontFacing(e,t,n,i){return xo.subVectors(n,t),Oa.subVectors(e,t),xo.cross(Oa).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xo.subVectors(this.c,this.b),Oa.subVectors(this.a,this.b),xo.cross(Oa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ls.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ls.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return ls.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return ls.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ls.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let a,l;vf.subVectors(i,n),yf.subVectors(s,n),Xv.subVectors(e,n);const c=vf.dot(Xv),d=yf.dot(Xv);if(c<=0&&d<=0)return t.copy(n);Yv.subVectors(e,i);const p=vf.dot(Yv),g=yf.dot(Yv);if(p>=0&&g<=p)return t.copy(i);const v=c*g-p*d;if(v<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(n).addScaledVector(vf,a);qv.subVectors(e,s);const y=vf.dot(qv),w=yf.dot(qv);if(w>=0&&y<=w)return t.copy(s);const E=y*d-c*w;if(E<=0&&d>=0&&w<=0)return l=d/(d-w),t.copy(n).addScaledVector(yf,l);const M=p*w-y*g;if(M<=0&&g-p>=0&&y-w>=0)return P1.subVectors(s,i),l=(g-p)/(g-p+(y-w)),t.copy(i).addScaledVector(P1,l);const S=1/(M+E+v);return a=E*S,l=v*S,t.copy(n).addScaledVector(vf,a).addScaledVector(yf,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ZM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ol={h:0,s:0,l:0},xm={h:0,s:0,l:0};function Qv(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class wt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=as){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=xn.workingColorSpace){return this.r=e,this.g=t,this.b=n,xn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=xn.workingColorSpace){if(e=Ox(e,1),t=$t(t,0,1),n=$t(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=Qv(a,s,e+1/3),this.g=Qv(a,s,e),this.b=Qv(a,s,e-1/3)}return xn.toWorkingColorSpace(this,i),this}setStyle(e,t=as){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],l=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=as){const n=ZM[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qa(e.r),this.g=qa(e.g),this.b=qa(e.b),this}copyLinearToSRGB(e){return this.r=Bf(e.r),this.g=Bf(e.g),this.b=Bf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=as){return xn.fromWorkingColorSpace(Mr.copy(this),e),Math.round($t(Mr.r*255,0,255))*65536+Math.round($t(Mr.g*255,0,255))*256+Math.round($t(Mr.b*255,0,255))}getHexString(e=as){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xn.workingColorSpace){xn.fromWorkingColorSpace(Mr.copy(this),t);const n=Mr.r,i=Mr.g,s=Mr.b,a=Math.max(n,i,s),l=Math.min(n,i,s);let c,d;const p=(l+a)/2;if(l===a)c=0,d=0;else{const g=a-l;switch(d=p<=.5?g/(a+l):g/(2-a-l),a){case n:c=(i-s)/g+(i<s?6:0);break;case i:c=(s-n)/g+2;break;case s:c=(n-i)/g+4;break}c/=6}return e.h=c,e.s=d,e.l=p,e}getRGB(e,t=xn.workingColorSpace){return xn.fromWorkingColorSpace(Mr.copy(this),t),e.r=Mr.r,e.g=Mr.g,e.b=Mr.b,e}getStyle(e=as){xn.fromWorkingColorSpace(Mr.copy(this),e);const t=Mr.r,n=Mr.g,i=Mr.b;return e!==as?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Ol),this.setHSL(Ol.h+e,Ol.s+t,Ol.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ol),e.getHSL(xm);const n=bh(Ol.h,xm.h,t),i=bh(Ol.s,xm.s,t),s=bh(Ol.l,xm.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Mr=new wt;wt.NAMES=ZM;let MA=0;class Ar extends na{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:MA++}),this.uuid=Es(),this.name="",this.type="Material",this.blending=rc,this.side=Ja,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_g,this.blendDst=Sg,this.blendEquation=Gl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wt(0,0,0),this.blendAlpha=0,this.depthFunc=uc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ky,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zu,this.stencilZFail=Zu,this.stencilZPass=Zu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==rc&&(n.blending=this.blending),this.side!==Ja&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==_g&&(n.blendSrc=this.blendSrc),this.blendDst!==Sg&&(n.blendDst=this.blendDst),this.blendEquation!==Gl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==uc&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ky&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Zu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Zu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class el extends Ar{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ja=EA();function EA(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const d=c-127;d<-27?(n[c]=0,n[c|256]=32768,i[c]=24,i[c|256]=24):d<-14?(n[c]=1024>>-d-14,n[c|256]=1024>>-d-14|32768,i[c]=-d-1,i[c|256]=-d-1):d<=15?(n[c]=d+15<<10,n[c|256]=d+15<<10|32768,i[c]=13,i[c|256]=13):d<128?(n[c]=31744,n[c|256]=64512,i[c]=24,i[c|256]=24):(n[c]=31744,n[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let d=c<<13,p=0;for(;!(d&8388608);)d<<=1,p-=8388608;d&=-8388609,p+=947912704,s[c]=d|p}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:l}}function os(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=$t(r,-65504,65504),ja.floatView[0]=r;const e=ja.uint32View[0],t=e>>23&511;return ja.baseTable[t]+((e&8388607)>>ja.shiftTable[t])}function hh(r){const e=r>>10;return ja.uint32View[0]=ja.mantissaTable[ja.offsetTable[e]+(r&1023)]+ja.exponentTable[e],ja.floatView[0]}class bA{static toHalfFloat(e){return os(e)}static fromHalfFloat(e){return hh(e)}}const ki=new te,_m=new Ze;let TA=0;class kn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:TA++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=zh,this.updateRanges=[],this.gpuType=us,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)_m.fromBufferAttribute(this,t),_m.applyMatrix3(e),this.setXY(t,_m.x,_m.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ki.fromBufferAttribute(this,t),ki.applyMatrix3(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ki.fromBufferAttribute(this,t),ki.applyMatrix4(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ki.fromBufferAttribute(this,t),ki.applyNormalMatrix(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ki.fromBufferAttribute(this,t),ki.transformDirection(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Gr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ln(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Gr(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Gr(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Gr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Gr(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zh&&(e.usage=this.usage),e}}class AA extends kn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class CA extends kn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class RA extends kn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class PA extends kn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Bx extends kn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class IA extends kn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class zx extends kn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class LA extends kn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=hh(this.array[e*this.itemSize]);return this.normalized&&(t=Gr(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=os(t),this}getY(e){let t=hh(this.array[e*this.itemSize+1]);return this.normalized&&(t=Gr(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=os(t),this}getZ(e){let t=hh(this.array[e*this.itemSize+2]);return this.normalized&&(t=Gr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=os(t),this}getW(e){let t=hh(this.array[e*this.itemSize+3]);return this.normalized&&(t=Gr(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=os(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.array[e+0]=os(t),this.array[e+1]=os(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array)),this.array[e+0]=os(t),this.array[e+1]=os(n),this.array[e+2]=os(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=os(t),this.array[e+1]=os(n),this.array[e+2]=os(i),this.array[e+3]=os(s),this}}class Ut extends kn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let DA=0;const Fs=new Wt,$v=new wn,xf=new te,Ms=new fr,Kd=new fr,$i=new te;class fn extends na{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:DA++}),this.uuid=Es(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YM(e)?zx:Bx)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Qt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Fs.makeRotationFromQuaternion(e),this.applyMatrix4(Fs),this}rotateX(e){return Fs.makeRotationX(e),this.applyMatrix4(Fs),this}rotateY(e){return Fs.makeRotationY(e),this.applyMatrix4(Fs),this}rotateZ(e){return Fs.makeRotationZ(e),this.applyMatrix4(Fs),this}translate(e,t,n){return Fs.makeTranslation(e,t,n),this.applyMatrix4(Fs),this}scale(e,t,n){return Fs.makeScale(e,t,n),this.applyMatrix4(Fs),this}lookAt(e){return $v.lookAt(e),$v.updateMatrix(),this.applyMatrix4($v.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xf).negate(),this.translate(xf.x,xf.y,xf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Ut(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Ms.setFromBufferAttribute(s),this.morphTargetsRelative?($i.addVectors(this.boundingBox.min,Ms.min),this.boundingBox.expandByPoint($i),$i.addVectors(this.boundingBox.max,Ms.max),this.boundingBox.expandByPoint($i)):(this.boundingBox.expandByPoint(Ms.min),this.boundingBox.expandByPoint(Ms.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new te,1/0);return}if(e){const n=this.boundingSphere.center;if(Ms.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const l=t[s];Kd.setFromBufferAttribute(l),this.morphTargetsRelative?($i.addVectors(Ms.min,Kd.min),Ms.expandByPoint($i),$i.addVectors(Ms.max,Kd.max),Ms.expandByPoint($i)):(Ms.expandByPoint(Kd.min),Ms.expandByPoint(Kd.max))}Ms.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)$i.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared($i));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],c=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)$i.fromBufferAttribute(l,d),c&&(xf.fromBufferAttribute(e,d),$i.add(xf)),i=Math.max(i,n.distanceToSquared($i))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let z=0;z<n.count;z++)l[z]=new te,c[z]=new te;const d=new te,p=new te,g=new te,v=new Ze,y=new Ze,w=new Ze,E=new te,M=new te;function S(z,k,L){d.fromBufferAttribute(n,z),p.fromBufferAttribute(n,k),g.fromBufferAttribute(n,L),v.fromBufferAttribute(s,z),y.fromBufferAttribute(s,k),w.fromBufferAttribute(s,L),p.sub(d),g.sub(d),y.sub(v),w.sub(v);const W=1/(y.x*w.y-w.x*y.y);isFinite(W)&&(E.copy(p).multiplyScalar(w.y).addScaledVector(g,-y.y).multiplyScalar(W),M.copy(g).multiplyScalar(y.x).addScaledVector(p,-w.x).multiplyScalar(W),l[z].add(E),l[k].add(E),l[L].add(E),c[z].add(M),c[k].add(M),c[L].add(M))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let z=0,k=T.length;z<k;++z){const L=T[z],W=L.start,X=L.count;for(let K=W,ne=W+X;K<ne;K+=3)S(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const A=new te,R=new te,F=new te,N=new te;function O(z){F.fromBufferAttribute(i,z),N.copy(F);const k=l[z];A.copy(k),A.sub(F.multiplyScalar(F.dot(k))).normalize(),R.crossVectors(N,k);const W=R.dot(c[z])<0?-1:1;a.setXYZW(z,A.x,A.y,A.z,W)}for(let z=0,k=T.length;z<k;++z){const L=T[z],W=L.start,X=L.count;for(let K=W,ne=W+X;K<ne;K+=3)O(e.getX(K+0)),O(e.getX(K+1)),O(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new kn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const i=new te,s=new te,a=new te,l=new te,c=new te,d=new te,p=new te,g=new te;if(e)for(let v=0,y=e.count;v<y;v+=3){const w=e.getX(v+0),E=e.getX(v+1),M=e.getX(v+2);i.fromBufferAttribute(t,w),s.fromBufferAttribute(t,E),a.fromBufferAttribute(t,M),p.subVectors(a,s),g.subVectors(i,s),p.cross(g),l.fromBufferAttribute(n,w),c.fromBufferAttribute(n,E),d.fromBufferAttribute(n,M),l.add(p),c.add(p),d.add(p),n.setXYZ(w,l.x,l.y,l.z),n.setXYZ(E,c.x,c.y,c.z),n.setXYZ(M,d.x,d.y,d.z)}else for(let v=0,y=t.count;v<y;v+=3)i.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),p.subVectors(a,s),g.subVectors(i,s),p.cross(g),n.setXYZ(v+0,p.x,p.y,p.z),n.setXYZ(v+1,p.x,p.y,p.z),n.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)$i.fromBufferAttribute(e,t),$i.normalize(),e.setXYZ(t,$i.x,$i.y,$i.z)}toNonIndexed(){function e(l,c){const d=l.array,p=l.itemSize,g=l.normalized,v=new d.constructor(c.length*p);let y=0,w=0;for(let E=0,M=c.length;E<M;E++){l.isInterleavedBufferAttribute?y=c[E]*l.data.stride+l.offset:y=c[E]*p;for(let S=0;S<p;S++)v[w++]=d[y++]}return new kn(v,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new fn,n=this.index.array,i=this.attributes;for(const l in i){const c=i[l],d=e(c,n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const c=[],d=s[l];for(let p=0,g=d.length;p<g;p++){const v=d[p],y=e(v,n);c.push(y)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const d=a[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const d in c)c[d]!==void 0&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const d=n[c];e.data.attributes[c]=d.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],p=[];for(let g=0,v=d.length;g<v;g++){const y=d[g];p.push(y.toJSON(e.data))}p.length>0&&(i[c]=p,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const d in i){const p=i[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],g=s[d];for(let v=0,y=g.length;v<y;v++)p.push(g[v].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let d=0,p=a.length;d<p;d++){const g=a[d];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const I1=new Wt,Uu=new mc,Sm=new dr,L1=new te,wm=new te,Mm=new te,Em=new te,ey=new te,bm=new te,D1=new te,Tm=new te;class ii extends wn{constructor(e=new fn,t=new el){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){bm.set(0,0,0);for(let c=0,d=s.length;c<d;c++){const p=l[c],g=s[c];p!==0&&(ey.fromBufferAttribute(g,e),a?bm.addScaledVector(ey,p):bm.addScaledVector(ey.sub(t),p))}t.add(bm)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Sm.copy(n.boundingSphere),Sm.applyMatrix4(s),Uu.copy(e.ray).recast(e.near),!(Sm.containsPoint(Uu.origin)===!1&&(Uu.intersectSphere(Sm,L1)===null||Uu.origin.distanceToSquared(L1)>(e.far-e.near)**2))&&(I1.copy(s).invert(),Uu.copy(e.ray).applyMatrix4(I1),!(n.boundingBox!==null&&Uu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Uu)))}_computeIntersections(e,t,n){let i;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,v=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(a))for(let w=0,E=v.length;w<E;w++){const M=v[w],S=a[M.materialIndex],T=Math.max(M.start,y.start),A=Math.min(l.count,Math.min(M.start+M.count,y.start+y.count));for(let R=T,F=A;R<F;R+=3){const N=l.getX(R),O=l.getX(R+1),z=l.getX(R+2);i=Am(this,S,e,n,d,p,g,N,O,z),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const w=Math.max(0,y.start),E=Math.min(l.count,y.start+y.count);for(let M=w,S=E;M<S;M+=3){const T=l.getX(M),A=l.getX(M+1),R=l.getX(M+2);i=Am(this,a,e,n,d,p,g,T,A,R),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(a))for(let w=0,E=v.length;w<E;w++){const M=v[w],S=a[M.materialIndex],T=Math.max(M.start,y.start),A=Math.min(c.count,Math.min(M.start+M.count,y.start+y.count));for(let R=T,F=A;R<F;R+=3){const N=R,O=R+1,z=R+2;i=Am(this,S,e,n,d,p,g,N,O,z),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const w=Math.max(0,y.start),E=Math.min(c.count,y.start+y.count);for(let M=w,S=E;M<S;M+=3){const T=M,A=M+1,R=M+2;i=Am(this,a,e,n,d,p,g,T,A,R),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}}}function kA(r,e,t,n,i,s,a,l){let c;if(e.side===Wr?c=n.intersectTriangle(a,s,i,!0,l):c=n.intersectTriangle(i,s,a,e.side===Ja,l),c===null)return null;Tm.copy(l),Tm.applyMatrix4(r.matrixWorld);const d=t.ray.origin.distanceTo(Tm);return d<t.near||d>t.far?null:{distance:d,point:Tm.clone(),object:r}}function Am(r,e,t,n,i,s,a,l,c,d){r.getVertexPosition(l,wm),r.getVertexPosition(c,Mm),r.getVertexPosition(d,Em);const p=kA(r,e,t,n,wm,Mm,Em,D1);if(p){const g=new te;ls.getBarycoord(D1,wm,Mm,Em,g),i&&(p.uv=ls.getInterpolatedAttribute(i,l,c,d,g,new Ze)),s&&(p.uv1=ls.getInterpolatedAttribute(s,l,c,d,g,new Ze)),a&&(p.normal=ls.getInterpolatedAttribute(a,l,c,d,g,new te),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:c,c:d,normal:new te,materialIndex:0};ls.getNormal(wm,Mm,Em,v.normal),p.face=v,p.barycoord=g}return p}class gc extends fn{constructor(e=1,t=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const l=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const c=[],d=[],p=[],g=[];let v=0,y=0;w("z","y","x",-1,-1,n,t,e,a,s,0),w("z","y","x",1,-1,n,t,-e,a,s,1),w("x","z","y",1,1,e,n,t,i,a,2),w("x","z","y",1,-1,e,n,-t,i,a,3),w("x","y","z",1,-1,e,t,n,i,s,4),w("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new Ut(d,3)),this.setAttribute("normal",new Ut(p,3)),this.setAttribute("uv",new Ut(g,2));function w(E,M,S,T,A,R,F,N,O,z,k){const L=R/O,W=F/z,X=R/2,K=F/2,ne=N/2,de=O+1,ae=z+1;let me=0,H=0;const J=new te;for(let j=0;j<ae;j++){const D=j*W-K;for(let Y=0;Y<de;Y++){const ce=Y*L-X;J[E]=ce*T,J[M]=D*A,J[S]=ne,d.push(J.x,J.y,J.z),J[E]=0,J[M]=0,J[S]=N>0?1:-1,p.push(J.x,J.y,J.z),g.push(Y/O),g.push(1-j/z),me+=1}}for(let j=0;j<z;j++)for(let D=0;D<O;D++){const Y=v+D+de*j,ce=v+D+de*(j+1),Q=v+(D+1)+de*(j+1),re=v+(D+1)+de*j;c.push(Y,ce,re),c.push(ce,Q,re),H+=6}l.addGroup(y,H,k),y+=H,v+=me}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Yf(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Hr(r){const e={};for(let t=0;t<r.length;t++){const n=Yf(r[t]);for(const i in n)e[i]=n[i]}return e}function NA(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function KM(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:xn.workingColorSpace}const Vx={clone:Yf,merge:Hr};var UA=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,FA=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ao extends Ar{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=UA,this.fragmentShader=FA,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yf(e.uniforms),this.uniformsGroups=NA(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ap extends wn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=Eo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Bl=new te,k1=new Ze,N1=new Ze;class _i extends ap{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Xf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(sc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xf*2*Math.atan(Math.tan(sc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Bl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Bl.x,Bl.y).multiplyScalar(-e/Bl.z),Bl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Bl.x,Bl.y).multiplyScalar(-e/Bl.z)}getViewSize(e,t){return this.getViewBounds(e,k1,N1),t.subVectors(N1,k1)}setViewOffset(e,t,n,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(sc*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,d=a.fullHeight;s+=a.offsetX*i/c,t-=a.offsetY*n/d,i*=a.width/c,n*=a.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const _f=-90,Sf=1;class QM extends wn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new _i(_f,Sf,e,t);i.layers=this.layers,this.add(i);const s=new _i(_f,Sf,e,t);s.layers=this.layers,this.add(s);const a=new _i(_f,Sf,e,t);a.layers=this.layers,this.add(a);const l=new _i(_f,Sf,e,t);l.layers=this.layers,this.add(l);const c=new _i(_f,Sf,e,t);c.layers=this.layers,this.add(c);const d=new _i(_f,Sf,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,a,l,c]=t;for(const d of t)this.remove(d);if(e===Eo)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Vh)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,c,d,p]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),w=e.xr.enabled;e.xr.enabled=!1;const E=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,l),e.setRenderTarget(n,3,i),e.render(t,c),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=E,e.setRenderTarget(n,5,i),e.render(t,p),e.setRenderTarget(g,v,y),e.xr.enabled=w,n.texture.needsPMREMUpdate=!0}}class lp extends ri{constructor(e=[],t=Za,n,i,s,a,l,c,d,p){super(e,t,n,i,s,a,l,c,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $M extends ta{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new lp(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Si}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new gc(5,5,5),s=new Ao({name:"CubemapFromEquirect",uniforms:Yf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Wr,blending:Ya});s.uniforms.tEquirect.value=t;const a=new ii(i,s),l=t.minFilter;return t.minFilter===Ko&&(t.minFilter=Si),new QM(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(s)}}class Ff extends wn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OA={type:"move"};class pg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ff,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ff,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ff,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,a=null;const l=this._targetRay,c=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){a=!0;for(const E of e.hand.values()){const M=t.getJointPose(E,n),S=this._getHandJoint(d,E);M!==null&&(S.matrix.fromArray(M.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=M.radius),S.visible=M!==null}const p=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],v=p.position.distanceTo(g.position),y=.02,w=.005;d.inputState.pinching&&v>y+w?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=y-w&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(OA)))}return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=s!==null),d!==null&&(d.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Ff;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class C0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new wt(e),this.density=t}clone(){return new C0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class R0{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new wt(e),this.near=t,this.far=n}clone(){return new R0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Hx extends wn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new bs,this.environmentIntensity=1,this.environmentRotation=new bs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class P0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=zh,this.updateRanges=[],this.version=0,this.uuid=Es()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Es()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Es()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Vr=new te;class fc{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Vr.fromBufferAttribute(this,t),Vr.applyMatrix4(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Vr.fromBufferAttribute(this,t),Vr.applyNormalMatrix(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Vr.fromBufferAttribute(this,t),Vr.transformDirection(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Gr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Gr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Gr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Gr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Gr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Gx extends Ar{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let wf;const Qd=new te,Mf=new te,Ef=new te,bf=new Ze,$d=new Ze,e2=new Wt,Cm=new te,eh=new te,Rm=new te,U1=new Ze,ty=new Ze,F1=new Ze;class t2 extends wn{constructor(e=new Gx){if(super(),this.isSprite=!0,this.type="Sprite",wf===void 0){wf=new fn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new P0(t,5);wf.setIndex([0,1,2,0,2,3]),wf.setAttribute("position",new fc(n,3,0,!1)),wf.setAttribute("uv",new fc(n,2,3,!1))}this.geometry=wf,this.material=e,this.center=new Ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Mf.setFromMatrixScale(this.matrixWorld),e2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ef.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Mf.multiplyScalar(-Ef.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const a=this.center;Pm(Cm.set(-.5,-.5,0),Ef,a,Mf,i,s),Pm(eh.set(.5,-.5,0),Ef,a,Mf,i,s),Pm(Rm.set(.5,.5,0),Ef,a,Mf,i,s),U1.set(0,0),ty.set(1,0),F1.set(1,1);let l=e.ray.intersectTriangle(Cm,eh,Rm,!1,Qd);if(l===null&&(Pm(eh.set(-.5,.5,0),Ef,a,Mf,i,s),ty.set(0,1),l=e.ray.intersectTriangle(Cm,Rm,eh,!1,Qd),l===null))return;const c=e.ray.origin.distanceTo(Qd);c<e.near||c>e.far||t.push({distance:c,point:Qd.clone(),uv:ls.getInterpolation(Qd,Cm,eh,Rm,U1,ty,F1,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Pm(r,e,t,n,i,s){bf.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?($d.x=s*bf.x-i*bf.y,$d.y=i*bf.x+s*bf.y):$d.copy(bf),r.copy(e),r.x+=$d.x,r.y+=$d.y,r.applyMatrix4(e2)}const Im=new te,O1=new te;class n2 extends wn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Im.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Im);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Im.setFromMatrixPosition(e.matrixWorld),O1.setFromMatrixPosition(this.matrixWorld);const n=Im.distanceTo(O1)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const B1=new te,z1=new vn,V1=new vn,BA=new te,H1=new Wt,Lm=new te,ny=new dr,G1=new Wt,iy=new mc;class i2 extends ii{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Zy,this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new fr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Lm),this.boundingBox.expandByPoint(Lm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new dr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Lm),this.boundingSphere.expandByPoint(Lm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ny.copy(this.boundingSphere),ny.applyMatrix4(i),e.ray.intersectsSphere(ny)!==!1&&(G1.copy(i).invert(),iy.copy(e.ray).applyMatrix4(G1),!(this.boundingBox!==null&&iy.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,iy)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Zy?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===kM?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;z1.fromBufferAttribute(i.attributes.skinIndex,e),V1.fromBufferAttribute(i.attributes.skinWeight,e),B1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=V1.getComponent(s);if(a!==0){const l=z1.getComponent(s);H1.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(BA.copy(B1).applyMatrix4(H1),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Wx extends wn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class $o extends ri{constructor(e=null,t=1,n=1,i,s,a,l,c,d=cr,p=cr,g,v){super(null,a,l,c,d,p,i,s,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const W1=new Wt,zA=new Wt;class I0{constructor(e=[],t=[]){this.uuid=Es(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Wt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:zA;W1.multiplyMatrices(l,t[s]),W1.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new I0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new $o(t,e,e,br,us);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Wx),this.bones.push(a),this.boneInverses.push(new Wt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class dc extends kn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Tf=new Wt,j1=new Wt,Dm=[],X1=new fr,VA=new Wt,th=new ii,nh=new dr;class r2 extends ii{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new dc(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,VA)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new fr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Tf),X1.copy(e.boundingBox).applyMatrix4(Tf),this.boundingBox.union(X1)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new dr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Tf),nh.copy(e.boundingSphere).applyMatrix4(Tf),this.boundingSphere.union(nh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let l=0;l<n.length;l++)n[l]=i[a+l]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(th.geometry=this.geometry,th.material=this.material,th.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nh.copy(this.boundingSphere),nh.applyMatrix4(n),e.ray.intersectsSphere(nh)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Tf),j1.multiplyMatrices(n,Tf),th.matrixWorld=j1,th.raycast(e,Dm);for(let a=0,l=Dm.length;a<l;a++){const c=Dm[a];c.instanceId=s,c.object=this,t.push(c)}Dm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new dc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new $o(new Float32Array(i*this.count),i,this.count,w0,us));const s=this.morphTexture.source.data.data;let a=0;for(let d=0;d<n.length;d++)a+=n[d];const l=this.geometry.morphTargetsRelative?1:1-a,c=i*e;s[c]=l,s.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ry=new te,HA=new te,GA=new Qt;class Ga{constructor(e=new te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=ry.subVectors(n,t).cross(HA.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ry),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||GA.getNormalMatrix(e),i=this.coplanarPoint(ry).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Fu=new dr,km=new te;class up{constructor(e=new Ga,t=new Ga,n=new Ga,i=new Ga,s=new Ga,a=new Ga){this.planes=[e,t,n,i,s,a]}set(e,t,n,i,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Eo){const n=this.planes,i=e.elements,s=i[0],a=i[1],l=i[2],c=i[3],d=i[4],p=i[5],g=i[6],v=i[7],y=i[8],w=i[9],E=i[10],M=i[11],S=i[12],T=i[13],A=i[14],R=i[15];if(n[0].setComponents(c-s,v-d,M-y,R-S).normalize(),n[1].setComponents(c+s,v+d,M+y,R+S).normalize(),n[2].setComponents(c+a,v+p,M+w,R+T).normalize(),n[3].setComponents(c-a,v-p,M-w,R-T).normalize(),n[4].setComponents(c-l,v-g,M-E,R-A).normalize(),t===Eo)n[5].setComponents(c+l,v+g,M+E,R+A).normalize();else if(t===Vh)n[5].setComponents(l,g,E,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Fu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Fu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Fu)}intersectsSprite(e){return Fu.center.set(0,0,0),Fu.radius=.7071067811865476,Fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fu)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(km.x=i.normal.x>0?e.max.x:e.min.x,km.y=i.normal.y>0?e.max.y:e.min.y,km.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(km)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function sy(r,e){return r-e}function WA(r,e){return r.z-e.z}function jA(r,e){return e.z-r.z}class XA{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];a.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=i}reset(){this.list.length=0,this.index=0}}const ss=new Wt,YA=new wt(1,1,1),oy=new up,Nm=new fr,Ou=new dr,ih=new te,Y1=new te,qA=new te,ay=new XA,Er=new ii,Um=[];function JA(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,r.getComponent(s,a))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function Bu(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class s2 extends ii{constructor(e,t,n=t*2,i){super(new fn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new $o(t,e,e,br,us);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new $o(t,e,e,sp,Ka);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new $o(t,e,e,br,us);n.colorSpace=xn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:l,itemSize:c,normalized:d}=a,p=new l.constructor(n*c),g=new kn(p,c,d);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new kn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ss),this.getBoundingBoxAt(s,Nm).applyMatrix4(ss),e.union(Nm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ss),this.getBoundingSphereAt(s,Ou).applyMatrix4(ss),e.union(Ou)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(sy),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;ss.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(YA.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?a.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(sy),c=this._availableGeometryIds.shift(),s[c]=i):(c=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(c,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),l=this._geometryInfo[e];if(i&&a.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,d=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in n.attributes){const g=t.getAttribute(p),v=n.getAttribute(p);JA(g,v,c);const y=g.itemSize;for(let w=g.count,E=d;w<E;w++){const M=c+w;for(let S=0;S<y;S++)v.setComponent(M,S,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,d*y)}if(i){const p=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)s.setX(p+v,c+a.getX(v));for(let v=a.count,y=g;v<y;v++)s.setX(p+v,c);s.needsUpdate=!0,s.addUpdateRange(p,l.reservedIndexCount)}return l.start=i?l.indexStart:l.vertexStart,l.count=i?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((a,l)=>l).sort((a,l)=>n[a].vertexStart-n[l].vertexStart),s=this.geometry;for(let a=0,l=n.length;a<l;a++){const c=i[a],d=n[c];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:v}=d,y=s.index,w=y.array,E=e-g;for(let M=p;M<p+v;M++)w[M]=w[M]+E;y.array.copyWithin(t,p,p+v),y.addUpdateRange(t,v),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=d,v=s.attributes;for(const y in v){const w=v[y],{array:E,itemSize:M}=w;E.copyWithin(e*M,p*M,(p+g)*M),w.addUpdateRange(e*M,g*M)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new fr,a=n.index,l=n.attributes.position;for(let c=i.start,d=i.start+i.count;c<d;c++){let p=c;a&&(p=a.getX(p)),s.expandByPoint(ih.fromBufferAttribute(l,p))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new dr;this.getBoundingBoxAt(e,Nm),Nm.getCenter(s.center);const a=n.index,l=n.attributes.position;let c=0;for(let d=i.start,p=i.start+i.count;d<p;d++){let g=d;a&&(g=a.getX(g)),ih.fromBufferAttribute(l,g),c=Math.max(c,s.center.distanceToSquared(ih))}s.radius=Math.sqrt(c),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(sy);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Bu(this._multiDrawCounts,i),Bu(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Bu(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Bu(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Bu(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new fn,this._initializeGeometry(s));const a=this.geometry;s.index&&Bu(s.index.array,a.index.array);for(const l in s.attributes)Bu(s.attributes[l].array,a.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Er.material=this.material,Er.geometry.index=a.index,Er.geometry.attributes=a.attributes,Er.geometry.boundingBox===null&&(Er.geometry.boundingBox=new fr),Er.geometry.boundingSphere===null&&(Er.geometry.boundingSphere=new dr);for(let l=0,c=n.length;l<c;l++){if(!n[l].visible||!n[l].active)continue;const d=n[l].geometryIndex,p=i[d];Er.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,Er.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,Er.geometry.boundingBox),this.getBoundingSphereAt(d,Er.geometry.boundingSphere),Er.raycast(e,Um);for(let g=0,v=Um.length;g<v;g++){const y=Um[g];y.object=this,y.batchId=l,t.push(y)}Um.length=0}Er.material=null,Er.geometry.index=null,Er.geometry.attributes={},Er.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,d=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,w=y.image.data;v&&(ss.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),oy.setFromProjectionMatrix(ss,e.coordinateSystem));let E=0;if(this.sortObjects){ss.copy(this.matrixWorld).invert(),ih.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ss),Y1.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ss);for(let T=0,A=c.length;T<A;T++)if(c[T].visible&&c[T].active){const R=c[T].geometryIndex;this.getMatrixAt(T,ss),this.getBoundingSphereAt(R,Ou).applyMatrix4(ss);let F=!1;if(v&&(F=!oy.intersectsSphere(Ou)),!F){const N=g[R],O=qA.subVectors(Ou.center,ih).dot(Y1);ay.push(N.start,N.count,O,T)}}const M=ay.list,S=this.customSort;S===null?M.sort(s.transparent?jA:WA):S.call(this,M,n);for(let T=0,A=M.length;T<A;T++){const R=M[T];d[E]=R.start*l,p[E]=R.count,w[E]=R.index,E++}ay.reset()}else for(let M=0,S=c.length;M<S;M++)if(c[M].visible&&c[M].active){const T=c[M].geometryIndex;let A=!1;if(v&&(this.getMatrixAt(M,ss),this.getBoundingSphereAt(T,Ou).applyMatrix4(ss),A=!oy.intersectsSphere(Ou)),!A){const R=g[T];d[E]=R.start*l,p[E]=R.count,w[E]=M,E++}}y.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class jr extends Ar{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const n0=new te,i0=new te,q1=new Wt,rh=new mc,Fm=new dr,ly=new te,J1=new te;class Kl extends wn{constructor(e=new fn,t=new jr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)n0.fromBufferAttribute(t,i-1),i0.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=n0.distanceTo(i0);e.setAttribute("lineDistance",new Ut(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Fm.copy(n.boundingSphere),Fm.applyMatrix4(i),Fm.radius+=s,e.ray.intersectsSphere(Fm)===!1)return;q1.copy(i).invert(),rh.copy(e.ray).applyMatrix4(q1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=this.isLineSegments?2:1,p=n.index,v=n.attributes.position;if(p!==null){const y=Math.max(0,a.start),w=Math.min(p.count,a.start+a.count);for(let E=y,M=w-1;E<M;E+=d){const S=p.getX(E),T=p.getX(E+1),A=Om(this,e,rh,c,S,T,E);A&&t.push(A)}if(this.isLineLoop){const E=p.getX(w-1),M=p.getX(y),S=Om(this,e,rh,c,E,M,w-1);S&&t.push(S)}}else{const y=Math.max(0,a.start),w=Math.min(v.count,a.start+a.count);for(let E=y,M=w-1;E<M;E+=d){const S=Om(this,e,rh,c,E,E+1,E);S&&t.push(S)}if(this.isLineLoop){const E=Om(this,e,rh,c,w-1,y,w-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Om(r,e,t,n,i,s,a){const l=r.geometry.attributes.position;if(n0.fromBufferAttribute(l,i),i0.fromBufferAttribute(l,s),t.distanceSqToSegment(n0,i0,ly,J1)>n)return;ly.applyMatrix4(r.matrixWorld);const d=e.ray.origin.distanceTo(ly);if(!(d<e.near||d>e.far))return{distance:d,point:J1.clone().applyMatrix4(r.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:r}}const Z1=new te,K1=new te;class ia extends Kl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)Z1.fromBufferAttribute(t,i),K1.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Z1.distanceTo(K1);e.setAttribute("lineDistance",new Ut(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class o2 extends Kl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class jx extends Ar{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Q1=new Wt,$y=new mc,Bm=new dr,zm=new te;class a2 extends wn{constructor(e=new fn,t=new jx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Bm.copy(n.boundingSphere),Bm.applyMatrix4(i),Bm.radius+=s,e.ray.intersectsSphere(Bm)===!1)return;Q1.copy(i).invert(),$y.copy(e.ray).applyMatrix4(Q1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=n.index,g=n.attributes.position;if(d!==null){const v=Math.max(0,a.start),y=Math.min(d.count,a.start+a.count);for(let w=v,E=y;w<E;w++){const M=d.getX(w);zm.fromBufferAttribute(g,M),$1(zm,M,c,i,e,t,this)}}else{const v=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let w=v,E=y;w<E;w++)zm.fromBufferAttribute(g,w),$1(zm,w,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function $1(r,e,t,n,i,s,a){const l=$y.distanceSqToPoint(r);if(l<t){const c=new te;$y.closestPointToPoint(r,c),c.applyMatrix4(n);const d=i.ray.origin.distanceTo(c);if(d<i.near||d>i.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class l2 extends ri{constructor(e,t,n,i,s=Si,a=Si,l,c,d){super(e,t,n,i,s,a,l,c,d),this.isVideoTexture=!0,this.generateMipmaps=!1;const p=this;function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ZA extends l2{constructor(e,t,n,i,s,a,l,c){super({},e,t,n,i,s,a,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class KA extends ri{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=cr,this.minFilter=cr,this.generateMipmaps=!1,this.needsUpdate=!0}}class L0 extends ri{constructor(e,t,n,i,s,a,l,c,d,p,g,v){super(null,a,l,c,d,p,i,s,g,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class QA extends L0{constructor(e,t,n,i,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=zs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $A extends L0{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Za),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class eC extends ri{constructor(e,t,n,i,s,a,l,c,d){super(e,t,n,i,s,a,l,c,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xx extends ri{constructor(e,t,n=Ka,i,s,a,l=cr,c=cr,d,p=Wf){if(p!==Wf&&p!==jf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,s,a,l,c,p,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Wl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Ro{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let l=0,c=s-1,d;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),d=n[i]-a,d<0)l=i+1;else if(d>0)c=i-1;else{c=i;break}if(i=c,n[i]===a)return i/(s-1);const p=n[i],v=n[i+1]-p,y=(a-p)/v;return(i+y)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),l=this.getPoint(s),c=t||(a.isVector2?new Ze:new te);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new te,i=[],s=[],a=[],l=new te,c=new Wt;for(let y=0;y<=e;y++){const w=y/e;i[y]=this.getTangentAt(w,new te)}s[0]=new te,a[0]=new te;let d=Number.MAX_VALUE;const p=Math.abs(i[0].x),g=Math.abs(i[0].y),v=Math.abs(i[0].z);p<=d&&(d=p,n.set(1,0,0)),g<=d&&(d=g,n.set(0,1,0)),v<=d&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],l),a[0].crossVectors(i[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),a[y]=a[y-1].clone(),l.crossVectors(i[y-1],i[y]),l.length()>Number.EPSILON){l.normalize();const w=Math.acos($t(i[y-1].dot(i[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(l,w))}a[y].crossVectors(i[y],s[y])}if(t===!0){let y=Math.acos($t(s[0].dot(s[e]),-1,1));y/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let w=1;w<=e;w++)s[w].applyMatrix4(c.makeRotationAxis(i[w],y*w)),a[w].crossVectors(i[w],s[w])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class D0 extends Ro{constructor(e=0,t=0,n=1,i=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new Ze){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,y=d-this.aY;c=v*p-y*g+this.aX,d=v*g+y*p+this.aY}return n.set(c,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class u2 extends D0{constructor(e,t,n,i,s,a){super(e,t,n,n,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Yx(){let r=0,e=0,t=0,n=0;function i(s,a,l,c){r=s,e=l,t=-3*s+3*a-2*l-c,n=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,d){i(a,l,d*(l-s),d*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,d,p,g){let v=(a-s)/d-(l-s)/(d+p)+(l-a)/p,y=(l-a)/p-(c-a)/(p+g)+(c-l)/g;v*=p,y*=p,i(a,l,v,y)},calc:function(s){const a=s*s,l=a*s;return r+e*s+t*a+n*l}}}const Vm=new te,uy=new Yx,cy=new Yx,fy=new Yx;class c2 extends Ro{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new te){const n=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let d,p;this.closed||l>0?d=i[(l-1)%s]:(Vm.subVectors(i[0],i[1]).add(i[0]),d=Vm);const g=i[l%s],v=i[(l+1)%s];if(this.closed||l+2<s?p=i[(l+2)%s]:(Vm.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=Vm),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let w=Math.pow(d.distanceToSquared(g),y),E=Math.pow(g.distanceToSquared(v),y),M=Math.pow(v.distanceToSquared(p),y);E<1e-4&&(E=1),w<1e-4&&(w=E),M<1e-4&&(M=E),uy.initNonuniformCatmullRom(d.x,g.x,v.x,p.x,w,E,M),cy.initNonuniformCatmullRom(d.y,g.y,v.y,p.y,w,E,M),fy.initNonuniformCatmullRom(d.z,g.z,v.z,p.z,w,E,M)}else this.curveType==="catmullrom"&&(uy.initCatmullRom(d.x,g.x,v.x,p.x,this.tension),cy.initCatmullRom(d.y,g.y,v.y,p.y,this.tension),fy.initCatmullRom(d.z,g.z,v.z,p.z,this.tension));return n.set(uy.calc(c),cy.calc(c),fy.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new te().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eS(r,e,t,n,i){const s=(n-e)*.5,a=(i-t)*.5,l=r*r,c=r*l;return(2*t-2*n+s+a)*c+(-3*t+3*n-2*s-a)*l+s*r+t}function tC(r,e){const t=1-r;return t*t*e}function nC(r,e){return 2*(1-r)*r*e}function iC(r,e){return r*r*e}function Th(r,e,t,n){return tC(r,e)+nC(r,t)+iC(r,n)}function rC(r,e){const t=1-r;return t*t*t*e}function sC(r,e){const t=1-r;return 3*t*t*r*e}function oC(r,e){return 3*(1-r)*r*r*e}function aC(r,e){return r*r*r*e}function Ah(r,e,t,n,i){return rC(r,e)+sC(r,t)+oC(r,n)+aC(r,i)}class qx extends Ro{constructor(e=new Ze,t=new Ze,n=new Ze,i=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ze){const n=t,i=this.v0,s=this.v1,a=this.v2,l=this.v3;return n.set(Ah(e,i.x,s.x,a.x,l.x),Ah(e,i.y,s.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class f2 extends Ro{constructor(e=new te,t=new te,n=new te,i=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new te){const n=t,i=this.v0,s=this.v1,a=this.v2,l=this.v3;return n.set(Ah(e,i.x,s.x,a.x,l.x),Ah(e,i.y,s.y,a.y,l.y),Ah(e,i.z,s.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Jx extends Ro{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d2 extends Ro{constructor(e=new te,t=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new te){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new te){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Zx extends Ro{constructor(e=new Ze,t=new Ze,n=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ze){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(Th(e,i.x,s.x,a.x),Th(e,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Kx extends Ro{constructor(e=new te,t=new te,n=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new te){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(Th(e,i.x,s.x,a.x),Th(e,i.y,s.y,a.y),Th(e,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Qx extends Ro{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const n=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),l=s-a,c=i[a===0?a:a-1],d=i[a],p=i[a>i.length-2?i.length-1:a+1],g=i[a>i.length-3?i.length-1:a+2];return n.set(eS(l,c.x,d.x,p.x,g.x),eS(l,c.y,d.y,p.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ze().fromArray(i))}return this}}var r0=Object.freeze({__proto__:null,ArcCurve:u2,CatmullRomCurve3:c2,CubicBezierCurve:qx,CubicBezierCurve3:f2,EllipseCurve:D0,LineCurve:Jx,LineCurve3:d2,QuadraticBezierCurve:Zx,QuadraticBezierCurve3:Kx,SplineCurve:Qx});class h2 extends Ro{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new r0[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const a=i[s]-n,l=this.curves[s],c=l.getLength(),d=c===0?0:1-a/c;return l.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(l);for(let d=0;d<c.length;d++){const p=c[d];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new r0[i.type]().fromJSON(i))}return this}}class Gh extends h2{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Jx(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new Zx(this.currentPoint.clone(),new Ze(e,t),new Ze(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,a){const l=new qx(this.currentPoint.clone(),new Ze(e,t),new Ze(n,i),new Ze(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Qx(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,i,s,a),this}absarc(e,t,n,i,s,a){return this.absellipse(e,t,n,n,i,s,a),this}ellipse(e,t,n,i,s,a,l,c){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,n,i,s,a,l,c),this}absellipse(e,t,n,i,s,a,l,c){const d=new D0(e,t,n,i,s,a,l,c);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class cp extends fn{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=$t(i,0,Math.PI*2);const s=[],a=[],l=[],c=[],d=[],p=1/t,g=new te,v=new Ze,y=new te,w=new te,E=new te;let M=0,S=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:M=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-M,y.z=S*0,E.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(E.x,E.y,E.z);break;default:M=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-M,y.z=S*0,w.copy(y),y.x+=E.x,y.y+=E.y,y.z+=E.z,y.normalize(),c.push(y.x,y.y,y.z),E.copy(w)}for(let T=0;T<=t;T++){const A=n+T*p*i,R=Math.sin(A),F=Math.cos(A);for(let N=0;N<=e.length-1;N++){g.x=e[N].x*R,g.y=e[N].y,g.z=e[N].x*F,a.push(g.x,g.y,g.z),v.x=T/t,v.y=N/(e.length-1),l.push(v.x,v.y);const O=c[3*N+0]*R,z=c[3*N+1],k=c[3*N+0]*F;d.push(O,z,k)}}for(let T=0;T<t;T++)for(let A=0;A<e.length-1;A++){const R=A+T*e.length,F=R,N=R+e.length,O=R+e.length+1,z=R+1;s.push(F,N,z),s.push(O,z,N)}this.setIndex(s),this.setAttribute("position",new Ut(a,3)),this.setAttribute("uv",new Ut(l,2)),this.setAttribute("normal",new Ut(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cp(e.points,e.segments,e.phiStart,e.phiLength)}}class k0 extends cp{constructor(e=1,t=1,n=4,i=8){const s=new Gh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new k0(e.radius,e.length,e.capSegments,e.radialSegments)}}class N0 extends fn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],a=[],l=[],c=[],d=new te,p=new Ze;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const y=n+g/t*i;d.x=e*Math.cos(y),d.y=e*Math.sin(y),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(a[v]/e+1)/2,p.y=(a[v+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Ut(a,3)),this.setAttribute("normal",new Ut(l,3)),this.setAttribute("uv",new Ut(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class $f extends fn{constructor(e=1,t=1,n=1,i=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const d=this;i=Math.floor(i),s=Math.floor(s);const p=[],g=[],v=[],y=[];let w=0;const E=[],M=n/2;let S=0;T(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(p),this.setAttribute("position",new Ut(g,3)),this.setAttribute("normal",new Ut(v,3)),this.setAttribute("uv",new Ut(y,2));function T(){const R=new te,F=new te;let N=0;const O=(t-e)/n;for(let z=0;z<=s;z++){const k=[],L=z/s,W=L*(t-e)+e;for(let X=0;X<=i;X++){const K=X/i,ne=K*c+l,de=Math.sin(ne),ae=Math.cos(ne);F.x=W*de,F.y=-L*n+M,F.z=W*ae,g.push(F.x,F.y,F.z),R.set(de,O,ae).normalize(),v.push(R.x,R.y,R.z),y.push(K,1-L),k.push(w++)}E.push(k)}for(let z=0;z<i;z++)for(let k=0;k<s;k++){const L=E[k][z],W=E[k+1][z],X=E[k+1][z+1],K=E[k][z+1];(e>0||k!==0)&&(p.push(L,W,K),N+=3),(t>0||k!==s-1)&&(p.push(W,X,K),N+=3)}d.addGroup(S,N,0),S+=N}function A(R){const F=w,N=new Ze,O=new te;let z=0;const k=R===!0?e:t,L=R===!0?1:-1;for(let X=1;X<=i;X++)g.push(0,M*L,0),v.push(0,L,0),y.push(.5,.5),w++;const W=w;for(let X=0;X<=i;X++){const ne=X/i*c+l,de=Math.cos(ne),ae=Math.sin(ne);O.x=k*ae,O.y=M*L,O.z=k*de,g.push(O.x,O.y,O.z),v.push(0,L,0),N.x=de*.5+.5,N.y=ae*.5*L+.5,y.push(N.x,N.y),w++}for(let X=0;X<i;X++){const K=F+X,ne=W+X;R===!0?p.push(ne,ne+1,K):p.push(ne+1,ne,K),z+=3}d.addGroup(S,z,R===!0?1:2),S+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $f(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class U0 extends $f{constructor(e=1,t=1,n=32,i=1,s=!1,a=0,l=Math.PI*2){super(0,e,t,n,i,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new U0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $l extends fn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],a=[];l(i),d(n),p(),this.setAttribute("position",new Ut(s,3)),this.setAttribute("normal",new Ut(s.slice(),3)),this.setAttribute("uv",new Ut(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const A=new te,R=new te,F=new te;for(let N=0;N<t.length;N+=3)y(t[N+0],A),y(t[N+1],R),y(t[N+2],F),c(A,R,F,T)}function c(T,A,R,F){const N=F+1,O=[];for(let z=0;z<=N;z++){O[z]=[];const k=T.clone().lerp(R,z/N),L=A.clone().lerp(R,z/N),W=N-z;for(let X=0;X<=W;X++)X===0&&z===N?O[z][X]=k:O[z][X]=k.clone().lerp(L,X/W)}for(let z=0;z<N;z++)for(let k=0;k<2*(N-z)-1;k++){const L=Math.floor(k/2);k%2===0?(v(O[z][L+1]),v(O[z+1][L]),v(O[z][L])):(v(O[z][L+1]),v(O[z+1][L+1]),v(O[z+1][L]))}}function d(T){const A=new te;for(let R=0;R<s.length;R+=3)A.x=s[R+0],A.y=s[R+1],A.z=s[R+2],A.normalize().multiplyScalar(T),s[R+0]=A.x,s[R+1]=A.y,s[R+2]=A.z}function p(){const T=new te;for(let A=0;A<s.length;A+=3){T.x=s[A+0],T.y=s[A+1],T.z=s[A+2];const R=M(T)/2/Math.PI+.5,F=S(T)/Math.PI+.5;a.push(R,1-F)}w(),g()}function g(){for(let T=0;T<a.length;T+=6){const A=a[T+0],R=a[T+2],F=a[T+4],N=Math.max(A,R,F),O=Math.min(A,R,F);N>.9&&O<.1&&(A<.2&&(a[T+0]+=1),R<.2&&(a[T+2]+=1),F<.2&&(a[T+4]+=1))}}function v(T){s.push(T.x,T.y,T.z)}function y(T,A){const R=T*3;A.x=e[R+0],A.y=e[R+1],A.z=e[R+2]}function w(){const T=new te,A=new te,R=new te,F=new te,N=new Ze,O=new Ze,z=new Ze;for(let k=0,L=0;k<s.length;k+=9,L+=6){T.set(s[k+0],s[k+1],s[k+2]),A.set(s[k+3],s[k+4],s[k+5]),R.set(s[k+6],s[k+7],s[k+8]),N.set(a[L+0],a[L+1]),O.set(a[L+2],a[L+3]),z.set(a[L+4],a[L+5]),F.copy(T).add(A).add(R).divideScalar(3);const W=M(F);E(N,L+0,T,W),E(O,L+2,A,W),E(z,L+4,R,W)}}function E(T,A,R,F){F<0&&T.x===1&&(a[A]=T.x-1),R.x===0&&R.z===0&&(a[A]=F/2/Math.PI+.5)}function M(T){return Math.atan2(T.z,-T.x)}function S(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $l(e.vertices,e.indices,e.radius,e.details)}}class F0 extends $l{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new F0(e.radius,e.detail)}}const Hm=new te,Gm=new te,dy=new te,Wm=new ls;class p2 extends fn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(sc*t),a=e.getIndex(),l=e.getAttribute("position"),c=a?a.count:l.count,d=[0,0,0],p=["a","b","c"],g=new Array(3),v={},y=[];for(let w=0;w<c;w+=3){a?(d[0]=a.getX(w),d[1]=a.getX(w+1),d[2]=a.getX(w+2)):(d[0]=w,d[1]=w+1,d[2]=w+2);const{a:E,b:M,c:S}=Wm;if(E.fromBufferAttribute(l,d[0]),M.fromBufferAttribute(l,d[1]),S.fromBufferAttribute(l,d[2]),Wm.getNormal(dy),g[0]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,g[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,g[2]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let T=0;T<3;T++){const A=(T+1)%3,R=g[T],F=g[A],N=Wm[p[T]],O=Wm[p[A]],z=`${R}_${F}`,k=`${F}_${R}`;k in v&&v[k]?(dy.dot(v[k].normal)<=s&&(y.push(N.x,N.y,N.z),y.push(O.x,O.y,O.z)),v[k]=null):z in v||(v[z]={index0:d[T],index1:d[A],normal:dy.clone()})}}for(const w in v)if(v[w]){const{index0:E,index1:M}=v[w];Hm.fromBufferAttribute(l,E),Gm.fromBufferAttribute(l,M),y.push(Hm.x,Hm.y,Hm.z),y.push(Gm.x,Gm.y,Gm.z)}this.setAttribute("position",new Ut(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ac extends Gh{constructor(e){super(e),this.uuid=Es(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Gh().fromJSON(i))}return this}}function lC(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=m2(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,c,d;if(n&&(s=hC(r,e,s,t)),r.length>80*t){l=1/0,c=1/0;let p=-1/0,g=-1/0;for(let v=t;v<i;v+=t){const y=r[v],w=r[v+1];y<l&&(l=y),w<c&&(c=w),y>p&&(p=y),w>g&&(g=w)}d=Math.max(p-l,g-c),d=d!==0?32767/d:0}return Wh(s,a,t,l,c,d,0),a}function m2(r,e,t,n,i){let s;if(i===EC(r,e,t,n)>0)for(let a=e;a<t;a+=n)s=tS(a/n|0,r[a],r[a+1],s);else for(let a=t-n;a>=e;a-=n)s=tS(a/n|0,r[a],r[a+1],s);return s&&qf(s,s.next)&&(Xh(s),s=s.next),s}function hc(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(qf(t,t.next)||ni(t.prev,t,t.next)===0)){if(Xh(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Wh(r,e,t,n,i,s,a){if(!r)return;!a&&s&&yC(r,n,i,s);let l=r;for(;r.prev!==r.next;){const c=r.prev,d=r.next;if(s?cC(r,n,i,s):uC(r)){e.push(c.i,r.i,d.i),Xh(r),r=d.next,l=d.next;continue}if(r=d,r===l){a?a===1?(r=fC(hc(r),e),Wh(r,e,t,n,i,s,2)):a===2&&dC(r,e,t,n,i,s):Wh(hc(r),e,t,n,i,s,1);break}}}function uC(r){const e=r.prev,t=r,n=r.next;if(ni(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,l=e.y,c=t.y,d=n.y,p=Math.min(i,s,a),g=Math.min(l,c,d),v=Math.max(i,s,a),y=Math.max(l,c,d);let w=n.next;for(;w!==e;){if(w.x>=p&&w.x<=v&&w.y>=g&&w.y<=y&&ph(i,l,s,c,a,d,w.x,w.y)&&ni(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function cC(r,e,t,n){const i=r.prev,s=r,a=r.next;if(ni(i,s,a)>=0)return!1;const l=i.x,c=s.x,d=a.x,p=i.y,g=s.y,v=a.y,y=Math.min(l,c,d),w=Math.min(p,g,v),E=Math.max(l,c,d),M=Math.max(p,g,v),S=ex(y,w,e,t,n),T=ex(E,M,e,t,n);let A=r.prevZ,R=r.nextZ;for(;A&&A.z>=S&&R&&R.z<=T;){if(A.x>=y&&A.x<=E&&A.y>=w&&A.y<=M&&A!==i&&A!==a&&ph(l,p,c,g,d,v,A.x,A.y)&&ni(A.prev,A,A.next)>=0||(A=A.prevZ,R.x>=y&&R.x<=E&&R.y>=w&&R.y<=M&&R!==i&&R!==a&&ph(l,p,c,g,d,v,R.x,R.y)&&ni(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;A&&A.z>=S;){if(A.x>=y&&A.x<=E&&A.y>=w&&A.y<=M&&A!==i&&A!==a&&ph(l,p,c,g,d,v,A.x,A.y)&&ni(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;R&&R.z<=T;){if(R.x>=y&&R.x<=E&&R.y>=w&&R.y<=M&&R!==i&&R!==a&&ph(l,p,c,g,d,v,R.x,R.y)&&ni(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function fC(r,e){let t=r;do{const n=t.prev,i=t.next.next;!qf(n,i)&&v2(n,t,t.next,i)&&jh(n,i)&&jh(i,n)&&(e.push(n.i,t.i,i.i),Xh(t),Xh(t.next),t=r=i),t=t.next}while(t!==r);return hc(t)}function dC(r,e,t,n,i,s){let a=r;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&SC(a,l)){let c=y2(a,l);a=hc(a,a.next),c=hc(c,c.next),Wh(a,e,t,n,i,s,0),Wh(c,e,t,n,i,s,0);return}l=l.next}a=a.next}while(a!==r)}function hC(r,e,t,n){const i=[];for(let s=0,a=e.length;s<a;s++){const l=e[s]*n,c=s<a-1?e[s+1]*n:r.length,d=m2(r,l,c,n,!1);d===d.next&&(d.steiner=!0),i.push(_C(d))}i.sort(pC);for(let s=0;s<i.length;s++)t=mC(i[s],t);return t}function pC(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function mC(r,e){const t=gC(r,e);if(!t)return e;const n=y2(t,r);return hc(n,n.next),hc(t,t.next)}function gC(r,e){let t=e;const n=r.x,i=r.y;let s=-1/0,a;if(qf(r,t))return t;do{if(qf(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const g=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>s&&(s=g,a=t.x<t.next.x?t:t.next,g===n))return a}t=t.next}while(t!==e);if(!a)return null;const l=a,c=a.x,d=a.y;let p=1/0;t=a;do{if(n>=t.x&&t.x>=c&&n!==t.x&&g2(i<d?n:s,i,c,d,i<d?s:n,i,t.x,t.y)){const g=Math.abs(i-t.y)/(n-t.x);jh(t,r)&&(g<p||g===p&&(t.x>a.x||t.x===a.x&&vC(a,t)))&&(a=t,p=g)}t=t.next}while(t!==l);return a}function vC(r,e){return ni(r.prev,r,e.prev)<0&&ni(e.next,r,r.next)<0}function yC(r,e,t,n){let i=r;do i.z===0&&(i.z=ex(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,xC(i)}function xC(r){let e,t=1;do{let n=r,i;r=null;let s=null;for(e=0;n;){e++;let a=n,l=0;for(let d=0;d<t&&(l++,a=a.nextZ,!!a);d++);let c=t;for(;l>0||c>0&&a;)l!==0&&(c===0||!a||n.z<=a.z)?(i=n,n=n.nextZ,l--):(i=a,a=a.nextZ,c--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;n=a}s.nextZ=null,t*=2}while(e>1);return r}function ex(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function _C(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function g2(r,e,t,n,i,s,a,l){return(i-a)*(e-l)>=(r-a)*(s-l)&&(r-a)*(n-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(i-a)*(n-l)}function ph(r,e,t,n,i,s,a,l){return!(r===a&&e===l)&&g2(r,e,t,n,i,s,a,l)}function SC(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!wC(r,e)&&(jh(r,e)&&jh(e,r)&&MC(r,e)&&(ni(r.prev,r,e.prev)||ni(r,e.prev,e))||qf(r,e)&&ni(r.prev,r,r.next)>0&&ni(e.prev,e,e.next)>0)}function ni(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function qf(r,e){return r.x===e.x&&r.y===e.y}function v2(r,e,t,n){const i=Xm(ni(r,e,t)),s=Xm(ni(r,e,n)),a=Xm(ni(t,n,r)),l=Xm(ni(t,n,e));return!!(i!==s&&a!==l||i===0&&jm(r,t,e)||s===0&&jm(r,n,e)||a===0&&jm(t,r,n)||l===0&&jm(t,e,n))}function jm(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Xm(r){return r>0?1:r<0?-1:0}function wC(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&v2(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function jh(r,e){return ni(r.prev,r,r.next)<0?ni(r,e,r.next)>=0&&ni(r,r.prev,e)>=0:ni(r,e,r.prev)<0||ni(r,r.next,e)<0}function MC(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function y2(r,e){const t=tx(r.i,r.x,r.y),n=tx(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function tS(r,e,t,n){const i=tx(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Xh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function tx(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function EC(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}class bC{static triangulate(e,t,n=2){return lC(e,t,n)}}class ea{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return ea.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];nS(e),iS(n,e);let a=e.length;t.forEach(nS);for(let c=0;c<t.length;c++)i.push(a),a+=t[c].length,iS(n,t[c]);const l=bC.triangulate(n,i);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function nS(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function iS(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class O0 extends fn{constructor(e=new ac([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let l=0,c=e.length;l<c;l++){const d=e[l];a(d)}this.setAttribute("position",new Ut(i,3)),this.setAttribute("uv",new Ut(s,2)),this.computeVertexNormals();function a(l){const c=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,w=t.bevelSize!==void 0?t.bevelSize:y-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:TC;let A,R=!1,F,N,O,z;S&&(A=S.getSpacedPoints(p),R=!0,v=!1,F=S.computeFrenetFrames(p,!1),N=new te,O=new te,z=new te),v||(M=0,y=0,w=0,E=0);const k=l.extractPoints(d);let L=k.shape;const W=k.holes;if(!ea.isClockWise(L)){L=L.reverse();for(let Ae=0,Le=W.length;Ae<Le;Ae++){const ge=W[Ae];ea.isClockWise(ge)&&(W[Ae]=ge.reverse())}}function K(Ae){const ge=10000000000000001e-36;let ze=Ae[0];for(let _e=1;_e<=Ae.length;_e++){const V=_e%Ae.length,B=Ae[V],oe=B.x-ze.x,ye=B.y-ze.y,Se=oe*oe+ye*ye,ke=Math.max(Math.abs(B.x),Math.abs(B.y),Math.abs(ze.x),Math.abs(ze.y)),Je=ge*ke*ke;if(Se<=Je){Ae.splice(V,1),_e--;continue}ze=B}}K(L),W.forEach(K);const ne=W.length,de=L;for(let Ae=0;Ae<ne;Ae++){const Le=W[Ae];L=L.concat(Le)}function ae(Ae,Le,ge){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ae.clone().addScaledVector(Le,ge)}const me=L.length;function H(Ae,Le,ge){let ze,_e,V;const B=Ae.x-Le.x,oe=Ae.y-Le.y,ye=ge.x-Ae.x,Se=ge.y-Ae.y,ke=B*B+oe*oe,Je=B*Se-oe*ye;if(Math.abs(Je)>Number.EPSILON){const He=Math.sqrt(ke),Ke=Math.sqrt(ye*ye+Se*Se),gt=Le.x-oe/He,je=Le.y+B/He,nt=ge.x-Se/Ke,ot=ge.y+ye/Ke,it=((nt-gt)*Se-(ot-je)*ye)/(B*Se-oe*ye);ze=gt+B*it-Ae.x,_e=je+oe*it-Ae.y;const Xe=ze*ze+_e*_e;if(Xe<=2)return new Ze(ze,_e);V=Math.sqrt(Xe/2)}else{let He=!1;B>Number.EPSILON?ye>Number.EPSILON&&(He=!0):B<-Number.EPSILON?ye<-Number.EPSILON&&(He=!0):Math.sign(oe)===Math.sign(Se)&&(He=!0),He?(ze=-oe,_e=B,V=Math.sqrt(ke)):(ze=B,_e=oe,V=Math.sqrt(ke/2))}return new Ze(ze/V,_e/V)}const J=[];for(let Ae=0,Le=de.length,ge=Le-1,ze=Ae+1;Ae<Le;Ae++,ge++,ze++)ge===Le&&(ge=0),ze===Le&&(ze=0),J[Ae]=H(de[Ae],de[ge],de[ze]);const j=[];let D,Y=J.concat();for(let Ae=0,Le=ne;Ae<Le;Ae++){const ge=W[Ae];D=[];for(let ze=0,_e=ge.length,V=_e-1,B=ze+1;ze<_e;ze++,V++,B++)V===_e&&(V=0),B===_e&&(B=0),D[ze]=H(ge[ze],ge[V],ge[B]);j.push(D),Y=Y.concat(D)}const ce=[],Q=[];for(let Ae=0;Ae<M;Ae++){const Le=Ae/M,ge=y*Math.cos(Le*Math.PI/2),ze=w*Math.sin(Le*Math.PI/2)+E;for(let _e=0,V=de.length;_e<V;_e++){const B=ae(de[_e],J[_e],ze);Pe(B.x,B.y,-ge),Le==0&&ce.push(B)}for(let _e=0,V=ne;_e<V;_e++){const B=W[_e];D=j[_e];const oe=[];for(let ye=0,Se=B.length;ye<Se;ye++){const ke=ae(B[ye],D[ye],ze);Pe(ke.x,ke.y,-ge),Le==0&&oe.push(ke)}Le==0&&Q.push(oe)}}const re=ea.triangulateShape(ce,Q),pe=re.length,$=w+E;for(let Ae=0;Ae<me;Ae++){const Le=v?ae(L[Ae],Y[Ae],$):L[Ae];R?(O.copy(F.normals[0]).multiplyScalar(Le.x),N.copy(F.binormals[0]).multiplyScalar(Le.y),z.copy(A[0]).add(O).add(N),Pe(z.x,z.y,z.z)):Pe(Le.x,Le.y,0)}for(let Ae=1;Ae<=p;Ae++)for(let Le=0;Le<me;Le++){const ge=v?ae(L[Le],Y[Le],$):L[Le];R?(O.copy(F.normals[Ae]).multiplyScalar(ge.x),N.copy(F.binormals[Ae]).multiplyScalar(ge.y),z.copy(A[Ae]).add(O).add(N),Pe(z.x,z.y,z.z)):Pe(ge.x,ge.y,g/p*Ae)}for(let Ae=M-1;Ae>=0;Ae--){const Le=Ae/M,ge=y*Math.cos(Le*Math.PI/2),ze=w*Math.sin(Le*Math.PI/2)+E;for(let _e=0,V=de.length;_e<V;_e++){const B=ae(de[_e],J[_e],ze);Pe(B.x,B.y,g+ge)}for(let _e=0,V=W.length;_e<V;_e++){const B=W[_e];D=j[_e];for(let oe=0,ye=B.length;oe<ye;oe++){const Se=ae(B[oe],D[oe],ze);R?Pe(Se.x,Se.y+A[p-1].y,A[p-1].x+ge):Pe(Se.x,Se.y,g+ge)}}}ie(),Te();function ie(){const Ae=i.length/3;if(v){let Le=0,ge=me*Le;for(let ze=0;ze<pe;ze++){const _e=re[ze];Ie(_e[2]+ge,_e[1]+ge,_e[0]+ge)}Le=p+M*2,ge=me*Le;for(let ze=0;ze<pe;ze++){const _e=re[ze];Ie(_e[0]+ge,_e[1]+ge,_e[2]+ge)}}else{for(let Le=0;Le<pe;Le++){const ge=re[Le];Ie(ge[2],ge[1],ge[0])}for(let Le=0;Le<pe;Le++){const ge=re[Le];Ie(ge[0]+me*p,ge[1]+me*p,ge[2]+me*p)}}n.addGroup(Ae,i.length/3-Ae,0)}function Te(){const Ae=i.length/3;let Le=0;Ce(de,Le),Le+=de.length;for(let ge=0,ze=W.length;ge<ze;ge++){const _e=W[ge];Ce(_e,Le),Le+=_e.length}n.addGroup(Ae,i.length/3-Ae,1)}function Ce(Ae,Le){let ge=Ae.length;for(;--ge>=0;){const ze=ge;let _e=ge-1;_e<0&&(_e=Ae.length-1);for(let V=0,B=p+M*2;V<B;V++){const oe=me*V,ye=me*(V+1),Se=Le+ze+oe,ke=Le+_e+oe,Je=Le+_e+ye,He=Le+ze+ye;Qe(Se,ke,Je,He)}}}function Pe(Ae,Le,ge){c.push(Ae),c.push(Le),c.push(ge)}function Ie(Ae,Le,ge){ee(Ae),ee(Le),ee(ge);const ze=i.length/3,_e=T.generateTopUV(n,i,ze-3,ze-2,ze-1);lt(_e[0]),lt(_e[1]),lt(_e[2])}function Qe(Ae,Le,ge,ze){ee(Ae),ee(Le),ee(ze),ee(Le),ee(ge),ee(ze);const _e=i.length/3,V=T.generateSideWallUV(n,i,_e-6,_e-3,_e-2,_e-1);lt(V[0]),lt(V[1]),lt(V[3]),lt(V[1]),lt(V[2]),lt(V[3])}function ee(Ae){i.push(c[Ae*3+0]),i.push(c[Ae*3+1]),i.push(c[Ae*3+2])}function lt(Ae){s.push(Ae.x),s.push(Ae.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return AC(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new r0[i.type]().fromJSON(i)),new O0(n,e.options)}}const TC={generateTopUV:function(r,e,t,n,i){const s=e[t*3],a=e[t*3+1],l=e[n*3],c=e[n*3+1],d=e[i*3],p=e[i*3+1];return[new Ze(s,a),new Ze(l,c),new Ze(d,p)]},generateSideWallUV:function(r,e,t,n,i,s){const a=e[t*3],l=e[t*3+1],c=e[t*3+2],d=e[n*3],p=e[n*3+1],g=e[n*3+2],v=e[i*3],y=e[i*3+1],w=e[i*3+2],E=e[s*3],M=e[s*3+1],S=e[s*3+2];return Math.abs(l-p)<Math.abs(a-d)?[new Ze(a,1-c),new Ze(d,1-g),new Ze(v,1-w),new Ze(E,1-S)]:[new Ze(l,1-c),new Ze(p,1-g),new Ze(y,1-w),new Ze(M,1-S)]}};function AC(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class B0 extends $l{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B0(e.radius,e.detail)}}class fp extends $l{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fp(e.radius,e.detail)}}class tl extends fn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,a=t/2,l=Math.floor(n),c=Math.floor(i),d=l+1,p=c+1,g=e/l,v=t/c,y=[],w=[],E=[],M=[];for(let S=0;S<p;S++){const T=S*v-a;for(let A=0;A<d;A++){const R=A*g-s;w.push(R,-T,0),E.push(0,0,1),M.push(A/l),M.push(1-S/c)}}for(let S=0;S<c;S++)for(let T=0;T<l;T++){const A=T+d*S,R=T+d*(S+1),F=T+1+d*(S+1),N=T+1+d*S;y.push(A,R,N),y.push(R,F,N)}this.setIndex(y),this.setAttribute("position",new Ut(w,3)),this.setAttribute("normal",new Ut(E,3)),this.setAttribute("uv",new Ut(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tl(e.width,e.height,e.widthSegments,e.heightSegments)}}class z0 extends fn{constructor(e=.5,t=1,n=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const l=[],c=[],d=[],p=[];let g=e;const v=(t-e)/i,y=new te,w=new Ze;for(let E=0;E<=i;E++){for(let M=0;M<=n;M++){const S=s+M/n*a;y.x=g*Math.cos(S),y.y=g*Math.sin(S),c.push(y.x,y.y,y.z),d.push(0,0,1),w.x=(y.x/t+1)/2,w.y=(y.y/t+1)/2,p.push(w.x,w.y)}g+=v}for(let E=0;E<i;E++){const M=E*(n+1);for(let S=0;S<n;S++){const T=S+M,A=T,R=T+n+1,F=T+n+2,N=T+1;l.push(A,R,N),l.push(R,F,N)}}this.setIndex(l),this.setAttribute("position",new Ut(c,3)),this.setAttribute("normal",new Ut(d,3)),this.setAttribute("uv",new Ut(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class V0 extends fn{constructor(e=new ac([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],a=[];let l=0,c=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new Ut(i,3)),this.setAttribute("normal",new Ut(s,3)),this.setAttribute("uv",new Ut(a,2));function d(p){const g=i.length/3,v=p.extractPoints(t);let y=v.shape;const w=v.holes;ea.isClockWise(y)===!1&&(y=y.reverse());for(let M=0,S=w.length;M<S;M++){const T=w[M];ea.isClockWise(T)===!0&&(w[M]=T.reverse())}const E=ea.triangulateShape(y,w);for(let M=0,S=w.length;M<S;M++){const T=w[M];y=y.concat(T)}for(let M=0,S=y.length;M<S;M++){const T=y[M];i.push(T.x,T.y,0),s.push(0,0,1),a.push(T.x,T.y)}for(let M=0,S=E.length;M<S;M++){const T=E[M],A=T[0]+g,R=T[1]+g,F=T[2]+g;n.push(A,R,F),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return CC(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];n.push(a)}return new V0(n,e.curveSegments)}}function CC(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class dp extends fn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(a+l,Math.PI);let d=0;const p=[],g=new te,v=new te,y=[],w=[],E=[],M=[];for(let S=0;S<=n;S++){const T=[],A=S/n;let R=0;S===0&&a===0?R=.5/t:S===n&&c===Math.PI&&(R=-.5/t);for(let F=0;F<=t;F++){const N=F/t;g.x=-e*Math.cos(i+N*s)*Math.sin(a+A*l),g.y=e*Math.cos(a+A*l),g.z=e*Math.sin(i+N*s)*Math.sin(a+A*l),w.push(g.x,g.y,g.z),v.copy(g).normalize(),E.push(v.x,v.y,v.z),M.push(N+R,1-A),T.push(d++)}p.push(T)}for(let S=0;S<n;S++)for(let T=0;T<t;T++){const A=p[S][T+1],R=p[S][T],F=p[S+1][T],N=p[S+1][T+1];(S!==0||a>0)&&y.push(A,R,N),(S!==n-1||c<Math.PI)&&y.push(R,F,N)}this.setIndex(y),this.setAttribute("position",new Ut(w,3)),this.setAttribute("normal",new Ut(E,3)),this.setAttribute("uv",new Ut(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class H0 extends $l{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new H0(e.radius,e.detail)}}class G0 extends fn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const a=[],l=[],c=[],d=[],p=new te,g=new te,v=new te;for(let y=0;y<=n;y++)for(let w=0;w<=i;w++){const E=w/i*s,M=y/n*Math.PI*2;g.x=(e+t*Math.cos(M))*Math.cos(E),g.y=(e+t*Math.cos(M))*Math.sin(E),g.z=t*Math.sin(M),l.push(g.x,g.y,g.z),p.x=e*Math.cos(E),p.y=e*Math.sin(E),v.subVectors(g,p).normalize(),c.push(v.x,v.y,v.z),d.push(w/i),d.push(y/n)}for(let y=1;y<=n;y++)for(let w=1;w<=i;w++){const E=(i+1)*y+w-1,M=(i+1)*(y-1)+w-1,S=(i+1)*(y-1)+w,T=(i+1)*y+w;a.push(E,M,T),a.push(M,S,T)}this.setIndex(a),this.setAttribute("position",new Ut(l,3)),this.setAttribute("normal",new Ut(c,3)),this.setAttribute("uv",new Ut(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class W0 extends fn{constructor(e=1,t=.4,n=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:a},n=Math.floor(n),i=Math.floor(i);const l=[],c=[],d=[],p=[],g=new te,v=new te,y=new te,w=new te,E=new te,M=new te,S=new te;for(let A=0;A<=n;++A){const R=A/n*s*Math.PI*2;T(R,s,a,e,y),T(R+.01,s,a,e,w),M.subVectors(w,y),S.addVectors(w,y),E.crossVectors(M,S),S.crossVectors(E,M),E.normalize(),S.normalize();for(let F=0;F<=i;++F){const N=F/i*Math.PI*2,O=-t*Math.cos(N),z=t*Math.sin(N);g.x=y.x+(O*S.x+z*E.x),g.y=y.y+(O*S.y+z*E.y),g.z=y.z+(O*S.z+z*E.z),c.push(g.x,g.y,g.z),v.subVectors(g,y).normalize(),d.push(v.x,v.y,v.z),p.push(A/n),p.push(F/i)}}for(let A=1;A<=n;A++)for(let R=1;R<=i;R++){const F=(i+1)*(A-1)+(R-1),N=(i+1)*A+(R-1),O=(i+1)*A+R,z=(i+1)*(A-1)+R;l.push(F,N,z),l.push(N,O,z)}this.setIndex(l),this.setAttribute("position",new Ut(c,3)),this.setAttribute("normal",new Ut(d,3)),this.setAttribute("uv",new Ut(p,2));function T(A,R,F,N,O){const z=Math.cos(A),k=Math.sin(A),L=F/R*A,W=Math.cos(L);O.x=N*(2+W)*.5*z,O.y=N*(2+W)*k*.5,O.z=N*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class j0 extends fn{constructor(e=new Kx(new te(-1,-1,0),new te(-1,1,0),new te(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new te,c=new te,d=new Ze;let p=new te;const g=[],v=[],y=[],w=[];E(),this.setIndex(w),this.setAttribute("position",new Ut(g,3)),this.setAttribute("normal",new Ut(v,3)),this.setAttribute("uv",new Ut(y,2));function E(){for(let A=0;A<t;A++)M(A);M(s===!1?t:0),T(),S()}function M(A){p=e.getPointAt(A/t,p);const R=a.normals[A],F=a.binormals[A];for(let N=0;N<=i;N++){const O=N/i*Math.PI*2,z=Math.sin(O),k=-Math.cos(O);c.x=k*R.x+z*F.x,c.y=k*R.y+z*F.y,c.z=k*R.z+z*F.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+n*c.x,l.y=p.y+n*c.y,l.z=p.z+n*c.z,g.push(l.x,l.y,l.z)}}function S(){for(let A=1;A<=t;A++)for(let R=1;R<=i;R++){const F=(i+1)*(A-1)+(R-1),N=(i+1)*A+(R-1),O=(i+1)*A+R,z=(i+1)*(A-1)+R;w.push(F,N,z),w.push(N,O,z)}}function T(){for(let A=0;A<=t;A++)for(let R=0;R<=i;R++)d.x=A/t,d.y=R/i,y.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new j0(new r0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class x2 extends fn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new te,s=new te;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,p=c.length;d<p;++d){const g=c[d],v=g.start,y=g.count;for(let w=v,E=v+y;w<E;w+=3)for(let M=0;M<3;M++){const S=l.getX(w+M),T=l.getX(w+(M+1)%3);i.fromBufferAttribute(a,S),s.fromBufferAttribute(a,T),rS(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let d=0;d<3;d++){const p=3*l+d,g=3*l+(d+1)%3;i.fromBufferAttribute(a,p),s.fromBufferAttribute(a,g),rS(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ut(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function rS(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var sS=Object.freeze({__proto__:null,BoxGeometry:gc,CapsuleGeometry:k0,CircleGeometry:N0,ConeGeometry:U0,CylinderGeometry:$f,DodecahedronGeometry:F0,EdgesGeometry:p2,ExtrudeGeometry:O0,IcosahedronGeometry:B0,LatheGeometry:cp,OctahedronGeometry:fp,PlaneGeometry:tl,PolyhedronGeometry:$l,RingGeometry:z0,ShapeGeometry:V0,SphereGeometry:dp,TetrahedronGeometry:H0,TorusGeometry:G0,TorusKnotGeometry:W0,TubeGeometry:j0,WireframeGeometry:x2});class _2 extends Ar{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class S2 extends Ao{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $x extends Ar{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ql,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class w2 extends $x{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $t(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new wt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class M2 extends Ar{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wt(16777215),this.specular=new wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ql,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class E2 extends Ar{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ql,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class b2 extends Ar{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ql,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class T2 extends Ar{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ql,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X0 extends Ar{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Y0 extends Ar{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class A2 extends Ar{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ql,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class C2 extends jr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ic(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function R2(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function P2(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function nx(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,a=0;a!==n;++s){const l=t[s]*e;for(let c=0;c!==e;++c)i[a++]=r[l+c]}return i}function e_(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push(...a)),s=r[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=r[i++];while(s!==void 0)}function RC(r,e,t,n,i=30){const s=r.clone();s.name=e;const a=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],p=d.getValueSize(),g=[],v=[];for(let y=0;y<d.times.length;++y){const w=d.times[y]*i;if(!(w<t||w>=n)){g.push(d.times[y]);for(let E=0;E<p;++E)v.push(d.values[y*p+E])}}g.length!==0&&(d.times=ic(g,d.times.constructor),d.values=ic(v,d.values.constructor),a.push(d))}s.tracks=a;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function PC(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let a=0;a<i;++a){const l=t.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const d=r.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===c});if(d===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const w=l.times.length-1;let E;if(s<=l.times[0]){const S=p,T=g-p;E=l.values.slice(S,T)}else if(s>=l.times[w]){const S=w*g+p,T=S+g-p;E=l.values.slice(S,T)}else{const S=l.createInterpolant(),T=p,A=g-p;S.evaluate(s),E=S.resultBuffer.slice(T,A)}c==="quaternion"&&new Tr().fromArray(E).normalize().conjugate().toArray(E);const M=d.times.length;for(let S=0;S<M;++S){const T=S*y+v;if(c==="quaternion")Tr.multiplyQuaternionsFlat(d.values,T,E,0,d.values,T);else{const A=y-v*2;for(let R=0;R<A;++R)d.values[T+R]-=E[R]}}}return r.blendMode=Nx,r}class IC{static convertArray(e,t){return ic(e,t)}static isTypedArray(e){return R2(e)}static getKeyframeOrder(e){return P2(e)}static sortedArray(e,t,n){return nx(e,t,n)}static flattenJSON(e,t,n,i){e_(e,t,n,i)}static subclip(e,t,n,i,s=30){return RC(e,t,n,i,s)}static makeClipAdditive(e,t=0,n=e,i=30){return PC(e,t,n,i)}}class hp{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(i=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class I2 extends hp{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tc,endingEnd:tc}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,a=e+1,l=i[s],c=i[a];if(l===void 0)switch(this.getSettings_().endingStart){case nc:s=e,l=2*t-n;break;case Oh:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case nc:a=e,c=2*n-t;break;case Oh:a=1,c=n+i[1]-i[0];break;default:a=e-1,c=t}const d=(n-t)*.5,p=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(c-n),this._offsetPrev=s*p,this._offsetNext=a*p}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,y=this._weightNext,w=(n-t)/(i-t),E=w*w,M=E*w,S=-v*M+2*v*E-v*w,T=(1+v)*M+(-1.5-2*v)*E+(-.5+v)*w+1,A=(-1-y)*M+(1.5+y)*E+.5*w,R=y*M-y*E;for(let F=0;F!==l;++F)s[F]=S*a[p+F]+T*a[d+F]+A*a[c+F]+R*a[g+F];return s}}class t_ extends hp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,p=(n-t)/(i-t),g=1-p;for(let v=0;v!==l;++v)s[v]=a[d+v]*g+a[c+v]*p;return s}}class L2 extends hp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Hs{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ic(t,this.TimeBufferType),this.values=ic(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ic(e.times,Array),values:ic(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new L2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new t_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new I2(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Fh:t=this.InterpolantFactoryMethodDiscrete;break;case t0:t=this.InterpolantFactoryMethodLinear;break;case dg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fh;case this.InterpolantFactoryMethodLinear:return t0;case this.InterpolantFactoryMethodSmooth:return dg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),e=!1;break}a=c}if(i!==void 0&&R2(i))for(let l=0,c=i.length;l!==c;++l){const d=i[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===dg,s=e.length-1;let a=1;for(let l=1;l<s;++l){let c=!1;const d=e[l],p=e[l+1];if(d!==p&&(l!==1||d!==e[0]))if(i)c=!0;else{const g=l*n,v=g-n,y=g+n;for(let w=0;w!==n;++w){const E=t[g+w];if(E!==t[v+w]||E!==t[y+w]){c=!0;break}}}if(c){if(l!==a){e[a]=e[l];const g=l*n,v=a*n;for(let y=0;y!==n;++y)t[v+y]=t[g+y]}++a}}if(s>0){e[a]=e[s];for(let l=s*n,c=a*n,d=0;d!==n;++d)t[c+d]=t[l+d];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Hs.prototype.ValueTypeName="";Hs.prototype.TimeBufferType=Float32Array;Hs.prototype.ValueBufferType=Float32Array;Hs.prototype.DefaultInterpolation=t0;class vc extends Hs{constructor(e,t,n){super(e,t,n)}}vc.prototype.ValueTypeName="bool";vc.prototype.ValueBufferType=Array;vc.prototype.DefaultInterpolation=Fh;vc.prototype.InterpolantFactoryMethodLinear=void 0;vc.prototype.InterpolantFactoryMethodSmooth=void 0;class n_ extends Hs{constructor(e,t,n,i){super(e,t,n,i)}}n_.prototype.ValueTypeName="color";class Yh extends Hs{constructor(e,t,n,i){super(e,t,n,i)}}Yh.prototype.ValueTypeName="number";class D2 extends hp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(n-t)/(i-t);let d=e*l;for(let p=d+l;d!==p;d+=4)Tr.slerpFlat(s,0,a,d-l,a,d,c);return s}}class pp extends Hs{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new D2(this.times,this.values,this.getValueSize(),e)}}pp.prototype.ValueTypeName="quaternion";pp.prototype.InterpolantFactoryMethodSmooth=void 0;class yc extends Hs{constructor(e,t,n){super(e,t,n)}}yc.prototype.ValueTypeName="string";yc.prototype.ValueBufferType=Array;yc.prototype.DefaultInterpolation=Fh;yc.prototype.InterpolantFactoryMethodLinear=void 0;yc.prototype.InterpolantFactoryMethodSmooth=void 0;class qh extends Hs{constructor(e,t,n,i){super(e,t,n,i)}}qh.prototype.ValueTypeName="vector";class Jh{constructor(e="",t=-1,n=[],i=b0){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Es(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,l=n.length;a!==l;++a)t.push(DC(n[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(Hs.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,a=[];for(let l=0;l<s;l++){let c=[],d=[];c.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const p=P2(c);c=nx(c,1,p),d=nx(d,1,p),!i&&c[0]===0&&(c.push(s),d.push(d[0])),a.push(new Yh(".morphTargetInfluences["+t[l].name+"]",c,d).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const d=e[l],p=d.name.match(s);if(p&&p.length>1){const g=p[1];let v=i[g];v||(i[g]=v=[]),v.push(d)}}const a=[];for(const l in i)a.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,y,w,E){if(y.length!==0){const M=[],S=[];e_(y,M,S,w),M.length!==0&&E.push(new g(v,M,S))}},i=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let c=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const v=d[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let w;for(w=0;w<v.length;w++)if(v[w].morphTargets)for(let E=0;E<v[w].morphTargets.length;E++)y[v[w].morphTargets[E]]=-1;for(const E in y){const M=[],S=[];for(let T=0;T!==v[w].morphTargets.length;++T){const A=v[w];M.push(A.time),S.push(A.morphTarget===E?1:0)}i.push(new Yh(".morphTargetInfluence["+E+"]",M,S))}c=y.length*a}else{const y=".bones["+t[g].name+"]";n(qh,y+".position",v,"pos",i),n(pp,y+".quaternion",v,"rot",i),n(qh,y+".scale",v,"scl",i)}}return i.length===0?null:new this(s,c,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function LC(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yh;case"vector":case"vector2":case"vector3":case"vector4":return qh;case"color":return n_;case"quaternion":return pp;case"bool":case"boolean":return vc;case"string":return yc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function DC(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=LC(r.type);if(r.times===void 0){const t=[],n=[];e_(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Xa={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class i_{constructor(e,t,n){const i=this;let s=!1,a=0,l=0,c;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&i.onStart!==void 0&&i.onStart(p,a,l),s=!0},this.itemEnd=function(p){a++,i.onProgress!==void 0&&i.onProgress(p,a,l),a===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return d.push(p,g),this},this.removeHandler=function(p){const g=d.indexOf(p);return g!==-1&&d.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=d.length;g<v;g+=2){const y=d[g],w=d[g+1];if(y.global&&(y.lastIndex=0),y.test(p))return w}return null}}}const k2=new i_;class cs{constructor(e){this.manager=e!==void 0?e:k2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}cs.DEFAULT_MATERIAL_NAME="__DEFAULT";const za={};class kC extends Error{constructor(e,t){super(e),this.response=t}}class Qa extends cs{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(za[e]!==void 0){za[e].push({onLoad:t,onProgress:n,onError:i});return}za[e]=[],za[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=za[e],g=d.body.getReader(),v=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),y=v?parseInt(v):0,w=y!==0;let E=0;const M=new ReadableStream({start(S){T();function T(){g.read().then(({done:A,value:R})=>{if(A)S.close();else{E+=R.byteLength;const F=new ProgressEvent("progress",{lengthComputable:w,loaded:E,total:y});for(let N=0,O=p.length;N<O;N++){const z=p[N];z.onProgress&&z.onProgress(F)}S.enqueue(R),T()}},A=>{S.error(A)})}}});return new Response(M)}else throw new kC(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(c){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return d.json();default:if(l==="")return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,y=new TextDecoder(v);return d.arrayBuffer().then(w=>y.decode(w))}}}).then(d=>{Xa.add(e,d);const p=za[e];delete za[e];for(let g=0,v=p.length;g<v;g++){const y=p[g];y.onLoad&&y.onLoad(d)}}).catch(d=>{const p=za[e];if(p===void 0)throw this.manager.itemError(e),d;delete za[e];for(let g=0,v=p.length;g<v;g++){const y=p[g];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class NC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Qa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Jh.parse(e[n]);t.push(i)}return t}}class UC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=this,a=[],l=new L0,c=new Qa(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let d=0;function p(g){c.load(e[g],function(v){const y=s.parse(v,!0);a[g]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},d+=1,d===6&&(y.mipmapCount===1&&(l.minFilter=Si),l.image=a,l.format=y.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else c.load(e,function(g){const v=s.parse(g,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let w=0;w<y;w++){a[w]={mipmaps:[]};for(let E=0;E<v.mipmapCount;E++)a[w].mipmaps.push(v.mipmaps[w*v.mipmapCount+E]),a[w].format=v.format,a[w].width=v.width,a[w].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Si),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}class Zh extends cs{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Xa.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l=Hh("img");function c(){p(),Xa.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(g){p(),i&&i(g),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class FC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=new lp;s.colorSpace=as;const a=new Zh(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(d){a.load(e[d],function(p){s.images[d]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let d=0;d<e.length;++d)c(d);return s}}class OC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new $o,l=new Qa(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let d;try{d=s.parse(c)}catch(p){if(i!==void 0)i(p);else{console.error(p);return}}d.image!==void 0?a.image=d.image:d.data!==void 0&&(a.image.width=d.width,a.image.height=d.height,a.image.data=d.data),a.wrapS=d.wrapS!==void 0?d.wrapS:zs,a.wrapT=d.wrapT!==void 0?d.wrapT:zs,a.magFilter=d.magFilter!==void 0?d.magFilter:Si,a.minFilter=d.minFilter!==void 0?d.minFilter:Si,a.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(a.colorSpace=d.colorSpace),d.flipY!==void 0&&(a.flipY=d.flipY),d.format!==void 0&&(a.format=d.format),d.type!==void 0&&(a.type=d.type),d.mipmaps!==void 0&&(a.mipmaps=d.mipmaps,a.minFilter=Ko),d.mipmapCount===1&&(a.minFilter=Si),d.generateMipmaps!==void 0&&(a.generateMipmaps=d.generateMipmaps),a.needsUpdate=!0,t&&t(a,d)},n,i),a}}class BC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=new ri,a=new Zh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class eu extends wn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class N2 extends eu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new wt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const hy=new Wt,oS=new te,aS=new te;class r_{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new up,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new vn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;oS.setFromMatrixPosition(e.matrixWorld),t.position.copy(oS),aS.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(aS),t.updateMatrixWorld(),hy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hy),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(hy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zC extends r_{constructor(){super(new _i(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Xf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class U2 extends eu{constructor(e,t,n=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.target=new wn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new zC}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lS=new Wt,sh=new te,py=new te;class VC extends r_{constructor(){super(new _i(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new vn(2,1,1,1),new vn(0,1,1,1),new vn(3,1,1,1),new vn(1,1,1,1),new vn(3,0,1,1),new vn(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),sh.setFromMatrixPosition(e.matrixWorld),n.position.copy(sh),py.copy(n.position),py.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(py),n.updateMatrixWorld(),i.makeTranslation(-sh.x,-sh.y,-sh.z),lS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lS)}}class F2 extends eu{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new VC}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Yl extends ap{constructor(e=-1,t=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,l=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,a=s+d*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class HC extends r_{constructor(){super(new Yl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class O2 extends eu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.target=new wn,this.shadow=new HC}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class B2 extends eu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class z2 extends eu{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class V2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class H2 extends eu{constructor(e=new V2,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class q0 extends cs{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,a=new Qa(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new wt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=n(a.value);break;case"c":i.uniforms[s].value=new wt().setHex(a.value);break;case"v2":i.uniforms[s].value=new Ze().fromArray(a.value);break;case"v3":i.uniforms[s].value=new te().fromArray(a.value);break;case"v4":i.uniforms[s].value=new vn().fromArray(a.value);break;case"m3":i.uniforms[s].value=new Qt().fromArray(a.value);break;case"m4":i.uniforms[s].value=new Wt().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return q0.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:_2,SpriteMaterial:Gx,RawShaderMaterial:S2,ShaderMaterial:Ao,PointsMaterial:jx,MeshPhysicalMaterial:w2,MeshStandardMaterial:$x,MeshPhongMaterial:M2,MeshToonMaterial:E2,MeshNormalMaterial:b2,MeshLambertMaterial:T2,MeshDepthMaterial:X0,MeshDistanceMaterial:Y0,MeshBasicMaterial:el,MeshMatcapMaterial:A2,LineDashedMaterial:C2,LineBasicMaterial:jr,Material:Ar};return new t[e]}}class ix{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class s_ extends fn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class G2 extends cs{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Qa(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(y,w){if(t[w]!==void 0)return t[w];const M=y.interleavedBuffers[w],S=s(y,M.buffer),T=Uf(M.type,S),A=new P0(T,M.stride);return A.uuid=M.uuid,t[w]=A,A}function s(y,w){if(n[w]!==void 0)return n[w];const M=y.arrayBuffers[w],S=new Uint32Array(M).buffer;return n[w]=S,S}const a=e.isInstancedBufferGeometry?new s_:new fn,l=e.data.index;if(l!==void 0){const y=Uf(l.type,l.array);a.setIndex(new kn(y,1))}const c=e.data.attributes;for(const y in c){const w=c[y];let E;if(w.isInterleavedBufferAttribute){const M=i(e.data,w.data);E=new fc(M,w.itemSize,w.offset,w.normalized)}else{const M=Uf(w.type,w.array),S=w.isInstancedBufferAttribute?dc:kn;E=new S(M,w.itemSize,w.normalized)}w.name!==void 0&&(E.name=w.name),w.usage!==void 0&&E.setUsage(w.usage),a.setAttribute(y,E)}const d=e.data.morphAttributes;if(d)for(const y in d){const w=d[y],E=[];for(let M=0,S=w.length;M<S;M++){const T=w[M];let A;if(T.isInterleavedBufferAttribute){const R=i(e.data,T.data);A=new fc(R,T.itemSize,T.offset,T.normalized)}else{const R=Uf(T.type,T.array);A=new kn(R,T.itemSize,T.normalized)}T.name!==void 0&&(A.name=T.name),E.push(A)}a.morphAttributes[y]=E}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let y=0,w=g.length;y!==w;++y){const E=g[y];a.addGroup(E.start,E.count,E.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new te;v.center!==void 0&&y.fromArray(v.center),a.boundingSphere=new dr(y,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class GC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=this,a=this.path===""?ix.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new Qa(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let d=null;try{d=JSON.parse(c)}catch(g){i!==void 0&&i(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?ix.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Qa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,c,l,n),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),this.bindLightTargets(d),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,i,l,a,t),d=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,d),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new ac().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new I0().fromJSON(e[s],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new G2;for(let s=0,a=e.length;s<a;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(c);break;default:c.type in sS?l=sS[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new q0;s.setTextures(t);for(let a=0,l=e.length;a<l;a++){const c=e[a];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),i[c.uuid]=n[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Jh.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function a(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const d=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return a(p)}else return c.data?{data:Uf(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new i_(t);s=new Zh(c),s.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const g=e[d],v=g.url;if(Array.isArray(v)){const y=[];for(let w=0,E=v.length;w<E;w++){const M=v[w],S=l(M);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new $o(S.data,S.width,S.height)))}i[g.uuid]=new Wl(y)}else{const y=l(g.url);i[g.uuid]=new Wl(y)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(c)}else return a.data?{data:Uf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new Zh(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.url;if(Array.isArray(d)){const p=[];for(let g=0,v=d.length;g<v;g++){const y=d[g],w=await s(y);w!==null&&(w instanceof HTMLImageElement?p.push(w):p.push(new $o(w.data,w.width,w.height)))}n[c.uuid]=new Wl(p)}else{const p=await s(c.url);n[c.uuid]=new Wl(p)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],d=c.data;let p;Array.isArray(d)?(p=new lp,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new $o:p=new ri,d&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,WC)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],uS),p.wrapT=n(l.wrap[1],uS)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,cS)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,cS)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),i[l.uuid]=p}return i}parseObject(e,t,n,i,s){let a;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let w=0,E=v.length;w<E;w++){const M=v[w];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),y.push(n[M])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function d(v){return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),i[v]}let p,g;switch(e.type){case"Scene":a=new Hx,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new wt(e.background):a.background=d(e.background)),e.environment!==void 0&&(a.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new R0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new C0(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new _i(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Yl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new B2(e.color,e.intensity);break;case"DirectionalLight":a=new O2(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new F2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new z2(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new U2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new N2(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new H2().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),a=new i2(p,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),a=new ii(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const v=e.count,y=e.instanceMatrix,w=e.instanceColor;a=new r2(p,g,v),a.instanceMatrix=new dc(new Float32Array(y.array),16),w!==void 0&&(a.instanceColor=new dc(new Float32Array(w.array),w.itemSize));break;case"BatchedMesh":p=l(e.geometry),g=c(e.material),a=new s2(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),a.geometry=p,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(E=>{const M=new fr;M.min.fromArray(E.boxMin),M.max.fromArray(E.boxMax);const S=new dr;return S.radius=E.sphereRadius,S.center.fromArray(E.sphereCenter),{boxInitialized:E.boxInitialized,box:M,sphereInitialized:E.sphereInitialized,sphere:S}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=d(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":a=new n2;break;case"Line":a=new Kl(l(e.geometry),c(e.material));break;case"LineLoop":a=new o2(l(e.geometry),c(e.material));break;case"LineSegments":a=new ia(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new a2(l(e.geometry),c(e.material));break;case"Sprite":a=new t2(c(e.material));break;case"Group":a=new Ff;break;case"Bone":a=new Wx;break;default:a=new wn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)a.add(this.parseObject(v[y],t,n,i,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const w=v[y];a.animations.push(s[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const w=v[y],E=a.getObjectByProperty("uuid",w.object);E!==void 0&&a.addLevel(E,w.distance,w.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new wn}})}}const WC={UVMapping:y0,CubeReflectionMapping:Za,CubeRefractionMapping:Zl,EquirectangularReflectionMapping:Dh,EquirectangularRefractionMapping:kh,CubeUVReflectionMapping:Kf},uS={RepeatWrapping:Nh,ClampToEdgeWrapping:zs,MirroredRepeatWrapping:Uh},cS={NearestFilter:cr,NearestMipmapNearestFilter:bx,NearestMipmapLinearFilter:Nf,LinearFilter:Si,LinearMipmapNearestFilter:xh,LinearMipmapLinearFilter:Ko};class jC extends cs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Xa.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(d=>{t&&t(d),s.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Xa.add(e,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){i&&i(d),Xa.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Xa.add(e,c),s.manager.itemStart(e)}}let Ym;class o_{static getContext(){return Ym===void 0&&(Ym=new(window.AudioContext||window.webkitAudioContext)),Ym}static setContext(e){Ym=e}}class XC extends cs{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Qa(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const d=c.slice(0);o_.getContext().decodeAudioData(d,function(g){t(g)}).catch(l)}catch(d){l(d)}},n,i);function l(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const fS=new Wt,dS=new Wt,zu=new Wt;class YC{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _i,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _i,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,zu.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(sc*t.fov*.5)/t.zoom;let l,c;dS.elements[12]=-i,fS.elements[12]=i,l=-a*t.aspect+s,c=a*t.aspect+s,zu.elements[0]=2*t.near/(c-l),zu.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(zu),l=-a*t.aspect-s,c=a*t.aspect-s,zu.elements[0]=2*t.near/(c-l),zu.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(zu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(dS),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(fS)}}class W2 extends _i{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class a_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hS(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=hS();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hS(){return performance.now()}const Vu=new te,pS=new Tr,qC=new te,Hu=new te;class JC extends wn{constructor(){super(),this.type="AudioListener",this.context=o_.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new a_}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vu,pS,qC),Hu.set(0,0,-1).applyQuaternion(pS),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Vu.x,i),t.positionY.linearRampToValueAtTime(Vu.y,i),t.positionZ.linearRampToValueAtTime(Vu.z,i),t.forwardX.linearRampToValueAtTime(Hu.x,i),t.forwardY.linearRampToValueAtTime(Hu.y,i),t.forwardZ.linearRampToValueAtTime(Hu.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Vu.x,Vu.y,Vu.z),t.setOrientation(Hu.x,Hu.y,Hu.z,n.x,n.y,n.z)}}class j2 extends wn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Gu=new te,mS=new Tr,ZC=new te,Wu=new te;class KC extends j2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Gu,mS,ZC),Wu.set(0,0,1).applyQuaternion(mS);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Gu.x,n),t.positionY.linearRampToValueAtTime(Gu.y,n),t.positionZ.linearRampToValueAtTime(Gu.z,n),t.orientationX.linearRampToValueAtTime(Wu.x,n),t.orientationY.linearRampToValueAtTime(Wu.y,n),t.orientationZ.linearRampToValueAtTime(Wu.z,n)}else t.setPosition(Gu.x,Gu.y,Gu.z),t.setOrientation(Wu.x,Wu.y,Wu.z)}}class QC{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class X2{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==i;++l)n[s+l]=n[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(n,s,0,l,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,d=t+t;c!==d;++c)if(n[c]!==n[c+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,a=i;s!==a;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){Tr.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const a=this._workIndex*s;Tr.multiplyQuaternionsFlat(e,a,e,t,e,n),Tr.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,s){const a=1-i;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*a+e[n+l]*i}}_lerpAdditive(e,t,n,i,s){for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]+e[n+a]*i}}}const l_="\\[\\]\\.:\\/",$C=new RegExp("["+l_+"]","g"),u_="[^"+l_+"]",e3="[^"+l_.replace("\\.","")+"]",t3=/((?:WC+[\/:])*)/.source.replace("WC",u_),n3=/(WCOD+)?/.source.replace("WCOD",e3),i3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",u_),r3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",u_),s3=new RegExp("^"+t3+n3+i3+r3+"$"),o3=["material","materials","bones","map"];class a3{constructor(e,t,n){const i=n||Sn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Sn{constructor(e,t,n){this.path=t,this.parsedPath=n||Sn.parseTrackName(t),this.node=Sn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Sn.Composite(e,t,n):new Sn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($C,"")}static parseTrackName(e){const t=s3.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);o3.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Sn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const a=e[i];if(a===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Sn.Composite=a3;Sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Sn.prototype.GetterByBindingType=[Sn.prototype._getValue_direct,Sn.prototype._getValue_array,Sn.prototype._getValue_arrayElement,Sn.prototype._getValue_toArray];Sn.prototype.SetterByBindingTypeAndVersioning=[[Sn.prototype._setValue_direct,Sn.prototype._setValue_direct_setNeedsUpdate,Sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_array,Sn.prototype._setValue_array_setNeedsUpdate,Sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_arrayElement,Sn.prototype._setValue_arrayElement_setNeedsUpdate,Sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_fromArray,Sn.prototype._setValue_fromArray_setNeedsUpdate,Sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class l3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Es(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let l,c=e.length,d=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],y=v.uuid;let w=t[y];if(w===void 0){w=c++,t[y]=w,e.push(v);for(let E=0,M=a;E!==M;++E)s[E].push(new Sn(v,n[E],i[E]))}else if(w<d){l=e[w];const E=--d,M=e[E];t[M.uuid]=w,e[w]=M,t[y]=E,e[E]=v;for(let S=0,T=a;S!==T;++S){const A=s[S],R=A[E];let F=A[w];A[w]=R,F===void 0&&(F=new Sn(v,n[S],i[S])),A[E]=F}}else e[w]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,p=t[d];if(p!==void 0&&p>=s){const g=s++,v=e[g];t[v.uuid]=p,e[p]=v,t[d]=g,e[g]=c;for(let y=0,w=i;y!==w;++y){const E=n[y],M=E[g],S=E[p];E[p]=M,E[g]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<s){const v=--s,y=e[v],w=--a,E=e[w];t[y.uuid]=g,e[g]=y,t[E.uuid]=v,e[v]=E,e.pop();for(let M=0,S=i;M!==S;++M){const T=n[M],A=T[v],R=T[w];T[g]=A,T[v]=R,T.pop()}}else{const v=--a,y=e[v];v>0&&(t[y.uuid]=g),e[g]=y,e.pop();for(let w=0,E=i;w!==E;++w){const M=n[w];M[g]=M[v],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,l=this._parsedPaths,c=this._objects,d=c.length,p=this.nCachedObjects_,g=new Array(d);i=s.length,n[e]=i,a.push(e),l.push(t),s.push(g);for(let v=p,y=c.length;v!==y;++v){const w=c[v];g[v]=new Sn(w,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],d=e[l];t[d]=n,a[n]=c,a.pop(),s[n]=s[l],s.pop(),i[n]=i[l],i.pop()}}}class Y2{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,a=s.length,l=new Array(a),c={endingStart:tc,endingEnd:tc};for(let d=0;d!==a;++d){const p=s[d].createInterpolant(null);l[d]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=UM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,s=e._clip.duration,a=s/i,l=i/s;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=s,c[1]=s+n,d[0]=e/a,d[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Nx:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(a),d[p].accumulateAdditive(l);break;case b0:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(a),d[p].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===FM;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(n===NM){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const d=e<0;this._setEndings(d,!d,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=nc,i.endingEnd=nc):(e?i.endingStart=this.zeroSlopeAtStart?nc:tc:i.endingStart=Oh,t?i.endingEnd=this.zeroSlopeAtEnd?nc:tc:i.endingEnd=Oh)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=n,this}}const u3=new Float32Array(1);class c3 extends na{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,l=e._interpolants,c=n.uuid,d=this._bindingsByRootAndName;let p=d[c];p===void 0&&(p={},d[c]=p);for(let g=0;g!==s;++g){const v=i[g],y=v.name;let w=p[y];if(w!==void 0)++w.referenceCount,a[g]=w;else{if(w=a[g],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,c,y));continue}const E=t&&t._propertyBindings[g].binding.parsedPath;w=new X2(Sn.create(n,y,E),v.ValueTypeName,v.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,c,y),a[g]=w}l[g].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],c=l.knownActions,d=c[c.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,c[p]=d,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,l=a[i],c=t[t.length-1],d=e._cacheIndex;c._cacheIndex=d,t[d]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new t_(new Float32Array(2),new Float32Array(2),1,u3),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?Jh.findByName(i,e):e;const l=a!==null?a.uuid:e,c=this._actionsByClip[l];let d=null;if(n===void 0&&(a!==null?n=a.blendMode:n=b0),c!==void 0){const g=c.actionByRoot[s];if(g!==void 0&&g.blendMode===n)return g;d=c.knownActions[0],a===null&&(a=d._clip)}if(a===null)return null;const p=new Y2(this,a,t,n);return this._bindAction(p,d),this._addInactiveAction(p,l,s),p}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Jh.findByName(n,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(i,e,s,a);const l=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)l[d].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let l=0,c=a.length;l!==c;++l){const d=a[l];this._deactivateAction(d);const p=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class f3 extends T0{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new A0(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class d3 extends T0{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=n,this.texture=new op(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class c_{constructor(e){this.value=e}clone(){return new c_(this.value.clone===void 0?this.value:this.value.clone())}}let h3=0;class p3 extends na{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:h3++}),this.name="",this.usage=zh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class m3 extends P0{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class g3{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const gS=new Wt;class q2{constructor(e,t,n=0,i=1/0){this.ray=new mc(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new oc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return gS.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gS),this}intersectObject(e,t=!0,n=[]){return rx(e,this,n,t),n.sort(vS),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)rx(e[i],this,n,t);return n.sort(vS),n}}function vS(r,e){return r.distance-e.distance}function rx(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let a=0,l=s.length;a<l;a++)rx(s[a],e,t,!0)}}class sx{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=$t(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos($t(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class v3{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class f_{constructor(e,t,n,i){f_.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const yS=new Ze;class y3{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yS.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yS).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xS=new te,qm=new te;class x3{constructor(e=new te,t=new te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){xS.subVectors(e,this.start),qm.subVectors(this.end,this.start);const n=qm.dot(qm);let s=qm.dot(xS)/n;return t&&(s=$t(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _S=new te;class _3 extends wn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new fn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const d=a/c*Math.PI*2,p=l/c*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Ut(i,3));const s=new jr({fog:!1,toneMapped:!1});this.cone=new ia(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_S.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_S),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const zl=new te,Jm=new Wt,my=new Wt;class S3 extends ia{constructor(e){const t=J2(e),n=new fn,i=[],s=[],a=new wt(0,0,1),l=new wt(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new Ut(i,3)),n.setAttribute("color",new Ut(s,3));const c=new jr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");my.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Jm.multiplyMatrices(my,l.matrixWorld),zl.setFromMatrixPosition(Jm),i.setXYZ(a,zl.x,zl.y,zl.z),Jm.multiplyMatrices(my,l.parent.matrixWorld),zl.setFromMatrixPosition(Jm),i.setXYZ(a+1,zl.x,zl.y,zl.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function J2(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...J2(r.children[t]));return e}class w3 extends ii{constructor(e,t,n){const i=new dp(t,4,2),s=new el({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const M3=new te,SS=new wt,wS=new wt;class E3 extends wn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new fp(t);i.rotateY(Math.PI*.5),this.material=new el({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new kn(a,3)),this.add(new ii(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");SS.copy(this.light.color),wS.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?SS:wS;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(M3.setFromMatrixPosition(this.light.matrixWorld).negate())}}class b3 extends ia{constructor(e=10,t=10,n=4473924,i=8947848){n=new wt(n),i=new wt(i);const s=t/2,a=e/t,l=e/2,c=[],d=[];for(let v=0,y=0,w=-l;v<=t;v++,w+=a){c.push(-l,0,w,l,0,w),c.push(w,0,-l,w,0,l);const E=v===s?n:i;E.toArray(d,y),y+=3,E.toArray(d,y),y+=3,E.toArray(d,y),y+=3,E.toArray(d,y),y+=3}const p=new fn;p.setAttribute("position",new Ut(c,3)),p.setAttribute("color",new Ut(d,3));const g=new jr({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class T3 extends ia{constructor(e=10,t=16,n=8,i=64,s=4473924,a=8947848){s=new wt(s),a=new wt(a);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),y=Math.sin(v)*e,w=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,w);const E=g&1?s:a;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let g=0;g<n;g++){const v=g&1?s:a,y=e-e/n*g;for(let w=0;w<i;w++){let E=w/i*(Math.PI*2),M=Math.sin(E)*y,S=Math.cos(E)*y;l.push(M,0,S),c.push(v.r,v.g,v.b),E=(w+1)/i*(Math.PI*2),M=Math.sin(E)*y,S=Math.cos(E)*y,l.push(M,0,S),c.push(v.r,v.g,v.b)}}const d=new fn;d.setAttribute("position",new Ut(l,3)),d.setAttribute("color",new Ut(c,3));const p=new jr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const MS=new te,Zm=new te,ES=new te;class A3 extends wn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new fn;i.setAttribute("position",new Ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new jr({fog:!1,toneMapped:!1});this.lightPlane=new Kl(i,s),this.add(this.lightPlane),i=new fn,i.setAttribute("position",new Ut([0,0,0,0,0,1],3)),this.targetLine=new Kl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),MS.setFromMatrixPosition(this.light.matrixWorld),Zm.setFromMatrixPosition(this.light.target.matrixWorld),ES.subVectors(Zm,MS),this.lightPlane.lookAt(Zm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Zm),this.targetLine.scale.z=ES.length()}}const Km=new te,di=new ap;class C3 extends ia{constructor(e){const t=new fn,n=new jr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(w,E){c(w),c(E)}function c(w){i.push(0,0,0),s.push(0,0,0),a[w]===void 0&&(a[w]=[]),a[w].push(i.length/3-1)}t.setAttribute("position",new Ut(i,3)),t.setAttribute("color",new Ut(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const d=new wt(16755200),p=new wt(16711680),g=new wt(43775),v=new wt(16777215),y=new wt(3355443);this.setColors(d,p,g,v,y)}setColors(e,t,n,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;di.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Eo?-1:0;xi("c",t,e,di,0,0,s),xi("t",t,e,di,0,0,1),xi("n1",t,e,di,-1,-1,s),xi("n2",t,e,di,n,-1,s),xi("n3",t,e,di,-1,i,s),xi("n4",t,e,di,n,i,s),xi("f1",t,e,di,-1,-1,1),xi("f2",t,e,di,n,-1,1),xi("f3",t,e,di,-1,i,1),xi("f4",t,e,di,n,i,1),xi("u1",t,e,di,n*.7,i*1.1,s),xi("u2",t,e,di,-1*.7,i*1.1,s),xi("u3",t,e,di,0,i*2,s),xi("cf1",t,e,di,-1,0,1),xi("cf2",t,e,di,n,0,1),xi("cf3",t,e,di,0,-1,1),xi("cf4",t,e,di,0,i,1),xi("cn1",t,e,di,-1,0,s),xi("cn2",t,e,di,n,0,s),xi("cn3",t,e,di,0,-1,s),xi("cn4",t,e,di,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function xi(r,e,t,n,i,s,a){Km.set(i,s,a).unproject(n);const l=e[r];if(l!==void 0){const c=t.getAttribute("position");for(let d=0,p=l.length;d<p;d++)c.setXYZ(l[d],Km.x,Km.y,Km.z)}}const Qm=new fr;class R3 extends ia{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new fn;s.setIndex(new kn(n,1)),s.setAttribute("position",new kn(i,3)),super(s,new jr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Qm.setFromObject(this.object),Qm.isEmpty())return;const e=Qm.min,t=Qm.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class P3 extends ia{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new fn;s.setIndex(new kn(n,1)),s.setAttribute("position",new Ut(i,3)),super(s,new jr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class I3 extends Kl{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new fn;a.setAttribute("position",new Ut(s,3)),a.computeBoundingSphere(),super(a,new jr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new fn;c.setAttribute("position",new Ut(l,3)),c.computeBoundingSphere(),this.add(new ii(c,new el({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const bS=new te;let $m,gy;class L3 extends wn{constructor(e=new te(0,0,1),t=new te(0,0,0),n=1,i=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",$m===void 0&&($m=new fn,$m.setAttribute("position",new Ut([0,0,0,0,1,0],3)),gy=new $f(0,.5,1,5,1),gy.translate(0,-.5,0)),this.position.copy(t),this.line=new Kl($m,new jr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ii(gy,new el({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{bS.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(bS,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class D3 extends ia{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new fn;i.setAttribute("position",new Ut(t,3)),i.setAttribute("color",new Ut(n,3));const s=new jr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new wt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class k3{constructor(){this.type="ShapePath",this.color=new wt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Gh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,a){return this.currentPath.bezierCurveTo(e,t,n,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const T=[];for(let A=0,R=S.length;A<R;A++){const F=S[A],N=new ac;N.curves=F.curves,T.push(N)}return T}function n(S,T){const A=T.length;let R=!1;for(let F=A-1,N=0;N<A;F=N++){let O=T[F],z=T[N],k=z.x-O.x,L=z.y-O.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(O=T[N],k=-k,z=T[F],L=-L),S.y<O.y||S.y>z.y)continue;if(S.y===O.y){if(S.x===O.x)return!0}else{const W=L*(S.x-O.x)-k*(S.y-O.y);if(W===0)return!0;if(W<0)continue;R=!R}}else{if(S.y!==O.y)continue;if(z.x<=S.x&&S.x<=O.x||O.x<=S.x&&S.x<=z.x)return!0}}return R}const i=ea.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,c;const d=[];if(s.length===1)return l=s[0],c=new ac,c.curves=l.curves,d.push(c),d;let p=!i(s[0].getPoints());p=e?!p:p;const g=[],v=[];let y=[],w=0,E;v[w]=void 0,y[w]=[];for(let S=0,T=s.length;S<T;S++)l=s[S],E=l.getPoints(),a=i(E),a=e?!a:a,a?(!p&&v[w]&&w++,v[w]={s:new ac,p:E},v[w].s.curves=l.curves,p&&w++,y[w]=[]):y[w].push({h:l,p:E[0]});if(!v[0])return t(s);if(v.length>1){let S=!1,T=0;for(let A=0,R=v.length;A<R;A++)g[A]=[];for(let A=0,R=v.length;A<R;A++){const F=y[A];for(let N=0;N<F.length;N++){const O=F[N];let z=!0;for(let k=0;k<v.length;k++)n(O.p,v[k].p)&&(A!==k&&T++,z?(z=!1,g[k].push(O)):S=!0);z&&g[A].push(O)}}T>0&&S===!1&&(y=g)}let M;for(let S=0,T=v.length;S<T;S++){c=v[S].s,d.push(c),M=y[S];for(let A=0,R=M.length;A<R;A++)c.holes.push(M[A].h)}return d}}class N3 extends na{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function U3(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function F3(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function O3(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function ox(r,e,t,n){const i=B3(n);switch(t){case Rx:return r*e;case Ix:return r*e;case Lx:return r*e*2;case w0:return r*e/i.components*i.byteLength;case sp:return r*e/i.components*i.byteLength;case Dx:return r*e*2/i.components*i.byteLength;case M0:return r*e*2/i.components*i.byteLength;case Px:return r*e*3/i.components*i.byteLength;case br:return r*e*4/i.components*i.byteLength;case E0:return r*e*4/i.components*i.byteLength;case _h:case Sh:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case wh:case Mh:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Pg:case Lg:return Math.max(r,16)*Math.max(e,8)/4;case Rg:case Ig:return Math.max(r,8)*Math.max(e,8)/2;case Dg:case kg:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Ng:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Ug:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Fg:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case Og:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case Bg:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case zg:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case Vg:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case Hg:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case Gg:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case Wg:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case jg:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Xg:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case Yg:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case qg:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Jg:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case Eh:case Zg:case Kg:return Math.ceil(r/4)*Math.ceil(e/4)*16;case kx:case Qg:return Math.ceil(r/4)*Math.ceil(e/4)*8;case $g:case e0:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function B3(r){switch(r){case To:case Tx:return{byteLength:1,components:1};case Hf:case Ax:case Qf:return{byteLength:2,components:1};case _0:case S0:return{byteLength:2,components:4};case Ka:case x0:case us:return{byteLength:4,components:1};case Cx:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class z3{static contain(e,t){return U3(e,t)}static cover(e,t){return F3(e,t)}static fill(e){return O3(e)}static getByteLength(e,t,n,i){return ox(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:g0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=g0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Z2(){let r=null,e=!1,t=null,n=null;function i(s,a){t(s,a),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function V3(r){const e=new WeakMap;function t(l,c){const d=l.array,p=l.usage,g=d.byteLength,v=r.createBuffer();r.bindBuffer(c,v),r.bufferData(c,d,p),l.onUploadCallback();let y;if(d instanceof Float32Array)y=r.FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?y=r.HALF_FLOAT:y=r.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=r.SHORT;else if(d instanceof Uint32Array)y=r.UNSIGNED_INT;else if(d instanceof Int32Array)y=r.INT;else if(d instanceof Int8Array)y=r.BYTE;else if(d instanceof Uint8Array)y=r.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,c,d){const p=c.array,g=c.updateRanges;if(r.bindBuffer(d,l),g.length===0)r.bufferSubData(d,0,p);else{g.sort((y,w)=>y.start-w.start);let v=0;for(let y=1;y<g.length;y++){const w=g[v],E=g[y];E.start<=w.start+w.count+1?w.count=Math.max(w.count,E.start+E.count-w.start):(++v,g[v]=E)}g.length=v+1;for(let y=0,w=g.length;y<w;y++){const E=g[y];r.bufferSubData(d,E.start*p.BYTES_PER_ELEMENT,p,E.start,E.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(r.deleteBuffer(c.buffer),e.delete(l))}function a(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,c));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,l,c),d.version=l.version}}return{get:i,remove:s,update:a}}var H3=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,G3=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,W3=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,j3=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,X3=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Y3=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,q3=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,J3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Z3=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,K3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Q3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,$3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,eR=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tR=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nR=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iR=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,rR=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sR=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oR=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aR=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,lR=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,uR=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,cR=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,fR=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,dR=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hR=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pR=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,mR=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gR=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vR=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yR="gl_FragColor = linearToOutputTexel( gl_FragColor );",xR=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,_R=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,SR=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,wR=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MR=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ER=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,bR=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,TR=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,AR=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,CR=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,RR=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PR=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IR=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,LR=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,DR=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kR=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,NR=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,UR=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,FR=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,OR=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BR=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,zR=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,VR=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,HR=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,GR=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,WR=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jR=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,XR=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,YR=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,qR=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,JR=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ZR=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,KR=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,QR=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$R=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,eP=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,tP=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nP=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,iP=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,rP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,sP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,oP=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,fP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,dP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,pP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,vP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,xP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_P=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,SP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,MP=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,EP=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,bP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,TP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,AP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,CP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,RP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,PP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,LP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,DP=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,kP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,NP=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,UP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,FP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,OP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,BP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,zP=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const VP=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,HP=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WP=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,XP=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qP=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,JP=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ZP=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,KP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,QP=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$P=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tI=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iI=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rI=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vI=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xI=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_I=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,an={alphahash_fragment:H3,alphahash_pars_fragment:G3,alphamap_fragment:W3,alphamap_pars_fragment:j3,alphatest_fragment:X3,alphatest_pars_fragment:Y3,aomap_fragment:q3,aomap_pars_fragment:J3,batching_pars_vertex:Z3,batching_vertex:K3,begin_vertex:Q3,beginnormal_vertex:$3,bsdfs:eR,iridescence_fragment:tR,bumpmap_pars_fragment:nR,clipping_planes_fragment:iR,clipping_planes_pars_fragment:rR,clipping_planes_pars_vertex:sR,clipping_planes_vertex:oR,color_fragment:aR,color_pars_fragment:lR,color_pars_vertex:uR,color_vertex:cR,common:fR,cube_uv_reflection_fragment:dR,defaultnormal_vertex:hR,displacementmap_pars_vertex:pR,displacementmap_vertex:mR,emissivemap_fragment:gR,emissivemap_pars_fragment:vR,colorspace_fragment:yR,colorspace_pars_fragment:xR,envmap_fragment:_R,envmap_common_pars_fragment:SR,envmap_pars_fragment:wR,envmap_pars_vertex:MR,envmap_physical_pars_fragment:kR,envmap_vertex:ER,fog_vertex:bR,fog_pars_vertex:TR,fog_fragment:AR,fog_pars_fragment:CR,gradientmap_pars_fragment:RR,lightmap_pars_fragment:PR,lights_lambert_fragment:IR,lights_lambert_pars_fragment:LR,lights_pars_begin:DR,lights_toon_fragment:NR,lights_toon_pars_fragment:UR,lights_phong_fragment:FR,lights_phong_pars_fragment:OR,lights_physical_fragment:BR,lights_physical_pars_fragment:zR,lights_fragment_begin:VR,lights_fragment_maps:HR,lights_fragment_end:GR,logdepthbuf_fragment:WR,logdepthbuf_pars_fragment:jR,logdepthbuf_pars_vertex:XR,logdepthbuf_vertex:YR,map_fragment:qR,map_pars_fragment:JR,map_particle_fragment:ZR,map_particle_pars_fragment:KR,metalnessmap_fragment:QR,metalnessmap_pars_fragment:$R,morphinstance_vertex:eP,morphcolor_vertex:tP,morphnormal_vertex:nP,morphtarget_pars_vertex:iP,morphtarget_vertex:rP,normal_fragment_begin:sP,normal_fragment_maps:oP,normal_pars_fragment:aP,normal_pars_vertex:lP,normal_vertex:uP,normalmap_pars_fragment:cP,clearcoat_normal_fragment_begin:fP,clearcoat_normal_fragment_maps:dP,clearcoat_pars_fragment:hP,iridescence_pars_fragment:pP,opaque_fragment:mP,packing:gP,premultiplied_alpha_fragment:vP,project_vertex:yP,dithering_fragment:xP,dithering_pars_fragment:_P,roughnessmap_fragment:SP,roughnessmap_pars_fragment:wP,shadowmap_pars_fragment:MP,shadowmap_pars_vertex:EP,shadowmap_vertex:bP,shadowmask_pars_fragment:TP,skinbase_vertex:AP,skinning_pars_vertex:CP,skinning_vertex:RP,skinnormal_vertex:PP,specularmap_fragment:IP,specularmap_pars_fragment:LP,tonemapping_fragment:DP,tonemapping_pars_fragment:kP,transmission_fragment:NP,transmission_pars_fragment:UP,uv_pars_fragment:FP,uv_pars_vertex:OP,uv_vertex:BP,worldpos_vertex:zP,background_vert:VP,background_frag:HP,backgroundCube_vert:GP,backgroundCube_frag:WP,cube_vert:jP,cube_frag:XP,depth_vert:YP,depth_frag:qP,distanceRGBA_vert:JP,distanceRGBA_frag:ZP,equirect_vert:KP,equirect_frag:QP,linedashed_vert:$P,linedashed_frag:eI,meshbasic_vert:tI,meshbasic_frag:nI,meshlambert_vert:iI,meshlambert_frag:rI,meshmatcap_vert:sI,meshmatcap_frag:oI,meshnormal_vert:aI,meshnormal_frag:lI,meshphong_vert:uI,meshphong_frag:cI,meshphysical_vert:fI,meshphysical_frag:dI,meshtoon_vert:hI,meshtoon_frag:pI,points_vert:mI,points_frag:gI,shadow_vert:vI,shadow_frag:yI,sprite_vert:xI,sprite_frag:_I},_t={common:{diffuse:{value:new wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new wt(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},So={basic:{uniforms:Hr([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:Hr([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new wt(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:Hr([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new wt(0)},specular:{value:new wt(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:Hr([_t.common,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.roughnessmap,_t.metalnessmap,_t.fog,_t.lights,{emissive:{value:new wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:Hr([_t.common,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.gradientmap,_t.fog,_t.lights,{emissive:{value:new wt(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:Hr([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:Hr([_t.points,_t.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:Hr([_t.common,_t.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:Hr([_t.common,_t.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:Hr([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:Hr([_t.sprite,_t.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:an.background_vert,fragmentShader:an.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:an.backgroundCube_vert,fragmentShader:an.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:Hr([_t.common,_t.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:Hr([_t.lights,_t.fog,{color:{value:new wt(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};So.physical={uniforms:Hr([So.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new wt(0)},specularColor:{value:new wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};const eg={r:0,b:0,g:0},ju=new bs,SI=new Wt;function wI(r,e,t,n,i,s,a){const l=new wt(0);let c=s===!0?0:1,d,p,g=null,v=0,y=null;function w(A){let R=A.isScene===!0?A.background:null;return R&&R.isTexture&&(R=(A.backgroundBlurriness>0?t:e).get(R)),R}function E(A){let R=!1;const F=w(A);F===null?S(l,c):F&&F.isColor&&(S(F,1),R=!0);const N=r.xr.getEnvironmentBlendMode();N==="additive"?n.buffers.color.setClear(0,0,0,1,a):N==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||R)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function M(A,R){const F=w(R);F&&(F.isCubeTexture||F.mapping===Kf)?(p===void 0&&(p=new ii(new gc(1,1,1),new Ao({name:"BackgroundCubeMaterial",uniforms:Yf(So.backgroundCube.uniforms),vertexShader:So.backgroundCube.vertexShader,fragmentShader:So.backgroundCube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(N,O,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),ju.copy(R.backgroundRotation),ju.x*=-1,ju.y*=-1,ju.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(ju.y*=-1,ju.z*=-1),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(SI.makeRotationFromEuler(ju)),p.material.toneMapped=xn.getTransfer(F.colorSpace)!==Cn,(g!==F||v!==F.version||y!==r.toneMapping)&&(p.material.needsUpdate=!0,g=F,v=F.version,y=r.toneMapping),p.layers.enableAll(),A.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new ii(new tl(2,2),new Ao({name:"BackgroundMaterial",uniforms:Yf(So.background.uniforms),vertexShader:So.background.vertexShader,fragmentShader:So.background.fragmentShader,side:Ja,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,d.material.toneMapped=xn.getTransfer(F.colorSpace)!==Cn,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(g!==F||v!==F.version||y!==r.toneMapping)&&(d.material.needsUpdate=!0,g=F,v=F.version,y=r.toneMapping),d.layers.enableAll(),A.unshift(d,d.geometry,d.material,0,0,null))}function S(A,R){A.getRGB(eg,KM(r)),n.buffers.color.setClear(eg.r,eg.g,eg.b,R,a)}function T(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return l},setClearColor:function(A,R=1){l.set(A),c=R,S(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(A){c=A,S(l,c)},render:E,addToRenderList:M,dispose:T}}function MI(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=v(null);let s=i,a=!1;function l(L,W,X,K,ne){let de=!1;const ae=g(K,X,W);s!==ae&&(s=ae,d(s.object)),de=y(L,K,X,ne),de&&w(L,K,X,ne),ne!==null&&e.update(ne,r.ELEMENT_ARRAY_BUFFER),(de||a)&&(a=!1,R(L,W,X,K),ne!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(ne).buffer))}function c(){return r.createVertexArray()}function d(L){return r.bindVertexArray(L)}function p(L){return r.deleteVertexArray(L)}function g(L,W,X){const K=X.wireframe===!0;let ne=n[L.id];ne===void 0&&(ne={},n[L.id]=ne);let de=ne[W.id];de===void 0&&(de={},ne[W.id]=de);let ae=de[K];return ae===void 0&&(ae=v(c()),de[K]=ae),ae}function v(L){const W=[],X=[],K=[];for(let ne=0;ne<t;ne++)W[ne]=0,X[ne]=0,K[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:X,attributeDivisors:K,object:L,attributes:{},index:null}}function y(L,W,X,K){const ne=s.attributes,de=W.attributes;let ae=0;const me=X.getAttributes();for(const H in me)if(me[H].location>=0){const j=ne[H];let D=de[H];if(D===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(D=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(D=L.instanceColor)),j===void 0||j.attribute!==D||D&&j.data!==D.data)return!0;ae++}return s.attributesNum!==ae||s.index!==K}function w(L,W,X,K){const ne={},de=W.attributes;let ae=0;const me=X.getAttributes();for(const H in me)if(me[H].location>=0){let j=de[H];j===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(j=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(j=L.instanceColor));const D={};D.attribute=j,j&&j.data&&(D.data=j.data),ne[H]=D,ae++}s.attributes=ne,s.attributesNum=ae,s.index=K}function E(){const L=s.newAttributes;for(let W=0,X=L.length;W<X;W++)L[W]=0}function M(L){S(L,0)}function S(L,W){const X=s.newAttributes,K=s.enabledAttributes,ne=s.attributeDivisors;X[L]=1,K[L]===0&&(r.enableVertexAttribArray(L),K[L]=1),ne[L]!==W&&(r.vertexAttribDivisor(L,W),ne[L]=W)}function T(){const L=s.newAttributes,W=s.enabledAttributes;for(let X=0,K=W.length;X<K;X++)W[X]!==L[X]&&(r.disableVertexAttribArray(X),W[X]=0)}function A(L,W,X,K,ne,de,ae){ae===!0?r.vertexAttribIPointer(L,W,X,ne,de):r.vertexAttribPointer(L,W,X,K,ne,de)}function R(L,W,X,K){E();const ne=K.attributes,de=X.getAttributes(),ae=W.defaultAttributeValues;for(const me in de){const H=de[me];if(H.location>=0){let J=ne[me];if(J===void 0&&(me==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),me==="instanceColor"&&L.instanceColor&&(J=L.instanceColor)),J!==void 0){const j=J.normalized,D=J.itemSize,Y=e.get(J);if(Y===void 0)continue;const ce=Y.buffer,Q=Y.type,re=Y.bytesPerElement,pe=Q===r.INT||Q===r.UNSIGNED_INT||J.gpuType===x0;if(J.isInterleavedBufferAttribute){const $=J.data,ie=$.stride,Te=J.offset;if($.isInstancedInterleavedBuffer){for(let Ce=0;Ce<H.locationSize;Ce++)S(H.location+Ce,$.meshPerAttribute);L.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let Ce=0;Ce<H.locationSize;Ce++)M(H.location+Ce);r.bindBuffer(r.ARRAY_BUFFER,ce);for(let Ce=0;Ce<H.locationSize;Ce++)A(H.location+Ce,D/H.locationSize,Q,j,ie*re,(Te+D/H.locationSize*Ce)*re,pe)}else{if(J.isInstancedBufferAttribute){for(let $=0;$<H.locationSize;$++)S(H.location+$,J.meshPerAttribute);L.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let $=0;$<H.locationSize;$++)M(H.location+$);r.bindBuffer(r.ARRAY_BUFFER,ce);for(let $=0;$<H.locationSize;$++)A(H.location+$,D/H.locationSize,Q,j,D*re,D/H.locationSize*$*re,pe)}}else if(ae!==void 0){const j=ae[me];if(j!==void 0)switch(j.length){case 2:r.vertexAttrib2fv(H.location,j);break;case 3:r.vertexAttrib3fv(H.location,j);break;case 4:r.vertexAttrib4fv(H.location,j);break;default:r.vertexAttrib1fv(H.location,j)}}}}T()}function F(){z();for(const L in n){const W=n[L];for(const X in W){const K=W[X];for(const ne in K)p(K[ne].object),delete K[ne];delete W[X]}delete n[L]}}function N(L){if(n[L.id]===void 0)return;const W=n[L.id];for(const X in W){const K=W[X];for(const ne in K)p(K[ne].object),delete K[ne];delete W[X]}delete n[L.id]}function O(L){for(const W in n){const X=n[W];if(X[L.id]===void 0)continue;const K=X[L.id];for(const ne in K)p(K[ne].object),delete K[ne];delete X[L.id]}}function z(){k(),a=!0,s!==i&&(s=i,d(s.object))}function k(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:l,reset:z,resetDefaultState:k,dispose:F,releaseStatesOfGeometry:N,releaseStatesOfProgram:O,initAttributes:E,enableAttribute:M,disableUnusedAttributes:T}}function EI(r,e,t){let n;function i(d){n=d}function s(d,p){r.drawArrays(n,d,p),t.update(p,n,1)}function a(d,p,g){g!==0&&(r.drawArraysInstanced(n,d,p,g),t.update(p,n,g))}function l(d,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,p,0,g);let y=0;for(let w=0;w<g;w++)y+=p[w];t.update(y,n,1)}function c(d,p,g,v){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let w=0;w<d.length;w++)a(d[w],p[w],v[w]);else{y.multiDrawArraysInstancedWEBGL(n,d,0,p,0,v,0,g);let w=0;for(let E=0;E<g;E++)w+=p[E]*v[E];t.update(w,n,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function bI(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(O){return!(O!==br&&n.convert(O)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(O){const z=O===Qf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==To&&n.convert(O)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==us&&!z)}function c(O){if(O==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const p=c(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),w=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=r.getParameter(r.MAX_TEXTURE_SIZE),M=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),S=r.getParameter(r.MAX_VERTEX_ATTRIBS),T=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),A=r.getParameter(r.MAX_VARYING_VECTORS),R=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),F=w>0,N=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:w,maxTextureSize:E,maxCubemapSize:M,maxAttributes:S,maxVertexUniforms:T,maxVaryings:A,maxFragmentUniforms:R,vertexTextures:F,maxSamples:N}}function TI(r){const e=this;let t=null,n=0,i=!1,s=!1;const a=new Ga,l=new Qt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const y=g.length!==0||v||n!==0||i;return i=v,n=g.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,y){const w=g.clippingPlanes,E=g.clipIntersection,M=g.clipShadows,S=r.get(g);if(!i||w===null||w.length===0||s&&!M)s?p(null):d();else{const T=s?0:n,A=T*4;let R=S.clippingState||null;c.value=R,R=p(w,v,A,y);for(let F=0;F!==A;++F)R[F]=t[F];S.clippingState=R,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=T}};function d(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(g,v,y,w){const E=g!==null?g.length:0;let M=null;if(E!==0){if(M=c.value,w!==!0||M===null){const S=y+E*4,T=v.matrixWorldInverse;l.getNormalMatrix(T),(M===null||M.length<S)&&(M=new Float32Array(S));for(let A=0,R=y;A!==E;++A,R+=4)a.copy(g[A]).applyMatrix4(T,l),a.normal.toArray(M,R),M[R+3]=a.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,M}}function AI(r){let e=new WeakMap;function t(a,l){return l===Dh?a.mapping=Za:l===kh&&(a.mapping=Zl),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===Dh||l===kh)if(e.has(a)){const c=e.get(a).texture;return t(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const d=new $M(c.height);return d.fromEquirectangularTexture(r,a),e.set(a,d),a.addEventListener("dispose",i),t(d.texture,a.mapping)}else return null}}return a}function i(a){const l=a.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const Of=4,TS=[.125,.215,.35,.446,.526,.582],$u=20,vy=new Yl,AS=new wt;let yy=null,xy=0,_y=0,Sy=!1;const Ku=(1+Math.sqrt(5))/2,Af=1/Ku,CS=[new te(-Ku,Af,0),new te(Ku,Af,0),new te(-Af,0,Ku),new te(Af,0,Ku),new te(0,Ku,-Af),new te(0,Ku,Af),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)],CI=new te;class ax{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100,s={}){const{size:a=256,position:l=CI}=s;yy=this._renderer.getRenderTarget(),xy=this._renderer.getActiveCubeFace(),_y=this._renderer.getActiveMipmapLevel(),Sy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,i,c,l),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=IS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=PS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yy,xy,_y),this._renderer.xr.enabled=Sy,e.scissorTest=!1,tg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Za||e.mapping===Zl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yy=this._renderer.getRenderTarget(),xy=this._renderer.getActiveCubeFace(),_y=this._renderer.getActiveMipmapLevel(),Sy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Si,minFilter:Si,generateMipmaps:!1,type:Qf,format:br,colorSpace:cc,depthBuffer:!1},i=RS(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=RS(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=RI(s)),this._blurMaterial=PI(s,e,t)}return i}_compileMaterial(e){const t=new ii(this._lodPlanes[0],e);this._renderer.compile(t,vy)}_sceneToCubeUV(e,t,n,i,s){const c=new _i(90,1,t,n),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,y=g.toneMapping;g.getClearColor(AS),g.toneMapping=Qo,g.autoClear=!1;const w=new el({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),E=new ii(new gc,w);let M=!1;const S=e.background;S?S.isColor&&(w.color.copy(S),e.background=null,M=!0):(w.color.copy(AS),M=!0);for(let T=0;T<6;T++){const A=T%3;A===0?(c.up.set(0,d[T],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+p[T],s.y,s.z)):A===1?(c.up.set(0,0,d[T]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+p[T],s.z)):(c.up.set(0,d[T],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+p[T]));const R=this._cubeSize;tg(i,A*R,T>2?R:0,R,R),g.setRenderTarget(i),M&&g.render(E,c),g.render(e,c)}E.geometry.dispose(),E.material.dispose(),g.toneMapping=y,g.autoClear=v,e.background=S}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Za||e.mapping===Zl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=IS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=PS());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new ii(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;tg(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(a,vy)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=CS[(i-s-1)%CS.length];this._blur(e,s-1,s,a,l)}t.autoClear=n}_blur(e,t,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,a,l){const c=this._renderer,d=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new ii(this._lodPlanes[i],d),v=d.uniforms,y=this._sizeLods[n]-1,w=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*$u-1),E=s/w,M=isFinite(s)?1+Math.floor(p*E):$u;M>$u&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${$u}`);const S=[];let T=0;for(let O=0;O<$u;++O){const z=O/E,k=Math.exp(-z*z/2);S.push(k),O===0?T+=k:O<M&&(T+=2*k)}for(let O=0;O<S.length;O++)S[O]=S[O]/T;v.envMap.value=e.texture,v.samples.value=M,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:A}=this;v.dTheta.value=w,v.mipInt.value=A-n;const R=this._sizeLods[i],F=3*R*(i>A-Of?i-A+Of:0),N=4*(this._cubeSize-R);tg(t,F,N,3*R,2*R),c.setRenderTarget(t),c.render(g,vy)}}function RI(r){const e=[],t=[],n=[];let i=r;const s=r-Of+1+TS.length;for(let a=0;a<s;a++){const l=Math.pow(2,i);t.push(l);let c=1/l;a>r-Of?c=TS[a-r+Of-1]:a===0&&(c=0),n.push(c);const d=1/(l-2),p=-d,g=1+d,v=[p,p,g,p,g,g,p,p,g,g,p,g],y=6,w=6,E=3,M=2,S=1,T=new Float32Array(E*w*y),A=new Float32Array(M*w*y),R=new Float32Array(S*w*y);for(let N=0;N<y;N++){const O=N%3*2/3-1,z=N>2?0:-1,k=[O,z,0,O+2/3,z,0,O+2/3,z+1,0,O,z,0,O+2/3,z+1,0,O,z+1,0];T.set(k,E*w*N),A.set(v,M*w*N);const L=[N,N,N,N,N,N];R.set(L,S*w*N)}const F=new fn;F.setAttribute("position",new kn(T,E)),F.setAttribute("uv",new kn(A,M)),F.setAttribute("faceIndex",new kn(R,S)),e.push(F),i>Of&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function RS(r,e,t){const n=new ta(r,e,t);return n.texture.mapping=Kf,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function tg(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function PI(r,e,t){const n=new Float32Array($u),i=new te(0,1,0);return new Ao({name:"SphericalGaussianBlur",defines:{n:$u,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:d_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ya,depthTest:!1,depthWrite:!1})}function PS(){return new Ao({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:d_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ya,depthTest:!1,depthWrite:!1})}function IS(){return new Ao({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:d_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ya,depthTest:!1,depthWrite:!1})}function d_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function II(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const c=l.mapping,d=c===Dh||c===kh,p=c===Za||c===Zl;if(d||p){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new ax(r)),g=d?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const y=l.image;return d&&y&&y.height>0||p&&y&&i(y)?(t===null&&(t=new ax(r)),g=d?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",s),g.texture):null}}}return l}function i(l){let c=0;const d=6;for(let p=0;p<d;p++)l[p]!==void 0&&c++;return c===d}function s(l){const c=l.target;c.removeEventListener("dispose",s);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function LI(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&hg("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function DI(r,e,t,n){const i={},s=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const w in v.attributes)e.remove(v.attributes[w]);v.removeEventListener("dispose",a),delete i[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return i[v.id]===!0||(v.addEventListener("dispose",a),i[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const y in v)e.update(v[y],r.ARRAY_BUFFER)}function d(g){const v=[],y=g.index,w=g.attributes.position;let E=0;if(y!==null){const T=y.array;E=y.version;for(let A=0,R=T.length;A<R;A+=3){const F=T[A+0],N=T[A+1],O=T[A+2];v.push(F,N,N,O,O,F)}}else if(w!==void 0){const T=w.array;E=w.version;for(let A=0,R=T.length/3-1;A<R;A+=3){const F=A+0,N=A+1,O=A+2;v.push(F,N,N,O,O,F)}}else return;const M=new(YM(v)?zx:Bx)(v,1);M.version=E;const S=s.get(g);S&&e.remove(S),s.set(g,M)}function p(g){const v=s.get(g);if(v){const y=g.index;y!==null&&v.version<y.version&&d(g)}else d(g);return s.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function kI(r,e,t){let n;function i(v){n=v}let s,a;function l(v){s=v.type,a=v.bytesPerElement}function c(v,y){r.drawElements(n,y,s,v*a),t.update(y,n,1)}function d(v,y,w){w!==0&&(r.drawElementsInstanced(n,y,s,v*a,w),t.update(y,n,w))}function p(v,y,w){if(w===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,s,v,0,w);let M=0;for(let S=0;S<w;S++)M+=y[S];t.update(M,n,1)}function g(v,y,w,E){if(w===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let S=0;S<v.length;S++)d(v[S]/a,y[S],E[S]);else{M.multiDrawElementsInstancedWEBGL(n,y,0,s,v,0,E,0,w);let S=0;for(let T=0;T<w;T++)S+=y[T]*E[T];t.update(S,n,1)}}this.setMode=i,this.setIndex=l,this.render=c,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function NI(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,l){switch(t.calls++,a){case r.TRIANGLES:t.triangles+=l*(s/3);break;case r.LINES:t.lines+=l*(s/2);break;case r.LINE_STRIP:t.lines+=l*(s-1);break;case r.LINE_LOOP:t.lines+=l*s;break;case r.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function UI(r,e,t){const n=new WeakMap,i=new vn;function s(a,l,c){const d=a.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let L=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const w=l.morphAttributes.position!==void 0,E=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],A=l.morphAttributes.color||[];let R=0;w===!0&&(R=1),E===!0&&(R=2),M===!0&&(R=3);let F=l.attributes.position.count*R,N=1;F>e.maxTextureSize&&(N=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const O=new Float32Array(F*N*4*g),z=new op(O,F,N,g);z.type=us,z.needsUpdate=!0;const k=R*4;for(let W=0;W<g;W++){const X=S[W],K=T[W],ne=A[W],de=F*N*4*W;for(let ae=0;ae<X.count;ae++){const me=ae*k;w===!0&&(i.fromBufferAttribute(X,ae),O[de+me+0]=i.x,O[de+me+1]=i.y,O[de+me+2]=i.z,O[de+me+3]=0),E===!0&&(i.fromBufferAttribute(K,ae),O[de+me+4]=i.x,O[de+me+5]=i.y,O[de+me+6]=i.z,O[de+me+7]=0),M===!0&&(i.fromBufferAttribute(ne,ae),O[de+me+8]=i.x,O[de+me+9]=i.y,O[de+me+10]=i.z,O[de+me+11]=ne.itemSize===4?i.w:1)}}v={count:g,texture:z,size:new Ze(F,N)},n.set(l,v),l.addEventListener("dispose",L)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(r,"morphTexture",a.morphTexture,t);else{let w=0;for(let M=0;M<d.length;M++)w+=d[M];const E=l.morphTargetsRelative?1:1-w;c.getUniforms().setValue(r,"morphTargetBaseInfluence",E),c.getUniforms().setValue(r,"morphTargetInfluences",d)}c.getUniforms().setValue(r,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(r,"morphTargetsTextureSize",v.size)}return{update:s}}function FI(r,e,t,n){let i=new WeakMap;function s(c){const d=n.render.frame,p=c.geometry,g=e.get(c,p);if(i.get(g)!==d&&(e.update(g),i.set(g,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),i.get(c)!==d&&(t.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,r.ARRAY_BUFFER),i.set(c,d))),c.isSkinnedMesh){const v=c.skeleton;i.get(v)!==d&&(v.update(),i.set(v,d))}return g}function a(){i=new WeakMap}function l(c){const d=c.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:a}}const K2=new ri,LS=new Xx(1,1),Q2=new op,$2=new A0,eE=new lp,DS=[],kS=[],NS=new Float32Array(16),US=new Float32Array(9),FS=new Float32Array(4);function ed(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=DS[i];if(s===void 0&&(s=new Float32Array(i),DS[i]=s),e!==0){n.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,r[a].toArray(s,l)}return s}function Gi(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Wi(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function J0(r,e){let t=kS[e];t===void 0&&(t=new Int32Array(e),kS[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function OI(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function BI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gi(t,e))return;r.uniform2fv(this.addr,e),Wi(t,e)}}function zI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Gi(t,e))return;r.uniform3fv(this.addr,e),Wi(t,e)}}function VI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gi(t,e))return;r.uniform4fv(this.addr,e),Wi(t,e)}}function HI(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Gi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Wi(t,e)}else{if(Gi(t,n))return;FS.set(n),r.uniformMatrix2fv(this.addr,!1,FS),Wi(t,n)}}function GI(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Gi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Wi(t,e)}else{if(Gi(t,n))return;US.set(n),r.uniformMatrix3fv(this.addr,!1,US),Wi(t,n)}}function WI(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Gi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Wi(t,e)}else{if(Gi(t,n))return;NS.set(n),r.uniformMatrix4fv(this.addr,!1,NS),Wi(t,n)}}function jI(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function XI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gi(t,e))return;r.uniform2iv(this.addr,e),Wi(t,e)}}function YI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gi(t,e))return;r.uniform3iv(this.addr,e),Wi(t,e)}}function qI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gi(t,e))return;r.uniform4iv(this.addr,e),Wi(t,e)}}function JI(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function ZI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gi(t,e))return;r.uniform2uiv(this.addr,e),Wi(t,e)}}function KI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gi(t,e))return;r.uniform3uiv(this.addr,e),Wi(t,e)}}function QI(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gi(t,e))return;r.uniform4uiv(this.addr,e),Wi(t,e)}}function $I(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(LS.compareFunction=Fx,s=LS):s=K2,t.setTexture2D(e||s,i)}function eL(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||$2,i)}function tL(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||eE,i)}function nL(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Q2,i)}function iL(r){switch(r){case 5126:return OI;case 35664:return BI;case 35665:return zI;case 35666:return VI;case 35674:return HI;case 35675:return GI;case 35676:return WI;case 5124:case 35670:return jI;case 35667:case 35671:return XI;case 35668:case 35672:return YI;case 35669:case 35673:return qI;case 5125:return JI;case 36294:return ZI;case 36295:return KI;case 36296:return QI;case 35678:case 36198:case 36298:case 36306:case 35682:return $I;case 35679:case 36299:case 36307:return eL;case 35680:case 36300:case 36308:case 36293:return tL;case 36289:case 36303:case 36311:case 36292:return nL}}function rL(r,e){r.uniform1fv(this.addr,e)}function sL(r,e){const t=ed(e,this.size,2);r.uniform2fv(this.addr,t)}function oL(r,e){const t=ed(e,this.size,3);r.uniform3fv(this.addr,t)}function aL(r,e){const t=ed(e,this.size,4);r.uniform4fv(this.addr,t)}function lL(r,e){const t=ed(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function uL(r,e){const t=ed(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function cL(r,e){const t=ed(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function fL(r,e){r.uniform1iv(this.addr,e)}function dL(r,e){r.uniform2iv(this.addr,e)}function hL(r,e){r.uniform3iv(this.addr,e)}function pL(r,e){r.uniform4iv(this.addr,e)}function mL(r,e){r.uniform1uiv(this.addr,e)}function gL(r,e){r.uniform2uiv(this.addr,e)}function vL(r,e){r.uniform3uiv(this.addr,e)}function yL(r,e){r.uniform4uiv(this.addr,e)}function xL(r,e,t){const n=this.cache,i=e.length,s=J0(t,i);Gi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||K2,s[a])}function _L(r,e,t){const n=this.cache,i=e.length,s=J0(t,i);Gi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||$2,s[a])}function SL(r,e,t){const n=this.cache,i=e.length,s=J0(t,i);Gi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||eE,s[a])}function wL(r,e,t){const n=this.cache,i=e.length,s=J0(t,i);Gi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||Q2,s[a])}function ML(r){switch(r){case 5126:return rL;case 35664:return sL;case 35665:return oL;case 35666:return aL;case 35674:return lL;case 35675:return uL;case 35676:return cL;case 5124:case 35670:return fL;case 35667:case 35671:return dL;case 35668:case 35672:return hL;case 35669:case 35673:return pL;case 5125:return mL;case 36294:return gL;case 36295:return vL;case 36296:return yL;case 35678:case 36198:case 36298:case 36306:case 35682:return xL;case 35679:case 36299:case 36307:return _L;case 35680:case 36300:case 36308:case 36293:return SL;case 36289:case 36303:case 36311:case 36292:return wL}}class EL{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=iL(t.type)}}class bL{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ML(t.type)}}class TL{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const l=i[s];l.setValue(e,t[l.id],n)}}}const wy=/(\w+)(\])?(\[|\.)?/g;function OS(r,e){r.seq.push(e),r.map[e.id]=e}function AL(r,e,t){const n=r.name,i=n.length;for(wy.lastIndex=0;;){const s=wy.exec(n),a=wy.lastIndex;let l=s[1];const c=s[2]==="]",d=s[3];if(c&&(l=l|0),d===void 0||d==="["&&a+2===i){OS(t,d===void 0?new EL(l,r,e):new bL(l,r,e));break}else{let g=t.map[l];g===void 0&&(g=new TL(l),OS(t,g)),t=g}}}class mg{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);AL(s,a,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,a=t.length;s!==a;++s){const l=t[s],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function BS(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const CL=37297;let RL=0;function PL(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const l=a+1;n.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return n.join(`
`)}const zS=new Qt;function IL(r){xn._getMatrix(zS,xn.workingColorSpace,r);const e=`mat3( ${zS.elements.map(t=>t.toFixed(4))} )`;switch(xn.getTransfer(r)){case Bh:return[e,"LinearTransferOETF"];case Cn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function VS(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+PL(r.getShaderSource(e),a)}else return i}function LL(r,e){const t=IL(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function DL(r,e){let t;switch(e){case CM:t="Linear";break;case RM:t="Reinhard";break;case PM:t="Cineon";break;case Ex:t="ACESFilmic";break;case LM:t="AgX";break;case DM:t="Neutral";break;case IM:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const ng=new te;function kL(){xn.getLuminanceCoefficients(ng);const r=ng.x.toFixed(4),e=ng.y.toFixed(4),t=ng.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function NL(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(mh).join(`
`)}function UL(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function FL(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),a=s.name;let l=1;s.type===r.FLOAT_MAT2&&(l=2),s.type===r.FLOAT_MAT3&&(l=3),s.type===r.FLOAT_MAT4&&(l=4),t[a]={type:s.type,location:r.getAttribLocation(e,a),locationSize:l}}return t}function mh(r){return r!==""}function HS(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function GS(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const OL=/^[ \t]*#include +<([\w\d./]+)>/gm;function lx(r){return r.replace(OL,zL)}const BL=new Map;function zL(r,e){let t=an[e];if(t===void 0){const n=BL.get(e);if(n!==void 0)t=an[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return lx(t)}const VL=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WS(r){return r.replace(VL,HL)}function HL(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function jS(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function GL(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===v0?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===yh?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===_o&&(e="SHADOWMAP_TYPE_VSM"),e}function WL(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Za:case Zl:e="ENVMAP_TYPE_CUBE";break;case Kf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jL(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Zl:e="ENVMAP_MODE_REFRACTION";break}return e}function XL(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case rp:e="ENVMAP_BLENDING_MULTIPLY";break;case TM:e="ENVMAP_BLENDING_MIX";break;case AM:e="ENVMAP_BLENDING_ADD";break}return e}function YL(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function qL(r,e,t,n){const i=r.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const c=GL(t),d=WL(t),p=jL(t),g=XL(t),v=YL(t),y=NL(t),w=UL(s),E=i.createProgram();let M,S,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(mh).join(`
`),M.length>0&&(M+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(mh).join(`
`),S.length>0&&(S+=`
`)):(M=[jS(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(mh).join(`
`),S=[jS(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qo?"#define TONE_MAPPING":"",t.toneMapping!==Qo?an.tonemapping_pars_fragment:"",t.toneMapping!==Qo?DL("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",an.colorspace_pars_fragment,LL("linearToOutputTexel",t.outputColorSpace),kL(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(mh).join(`
`)),a=lx(a),a=HS(a,t),a=GS(a,t),l=lx(l),l=HS(l,t),l=GS(l,t),a=WS(a),l=WS(l),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,M=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,S=["#define varying in",t.glslVersion===Qy?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Qy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const A=T+M+a,R=T+S+l,F=BS(i,i.VERTEX_SHADER,A),N=BS(i,i.FRAGMENT_SHADER,R);i.attachShader(E,F),i.attachShader(E,N),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);function O(W){if(r.debug.checkShaderErrors){const X=i.getProgramInfoLog(E).trim(),K=i.getShaderInfoLog(F).trim(),ne=i.getShaderInfoLog(N).trim();let de=!0,ae=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if(de=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,E,F,N);else{const me=VS(i,F,"vertex"),H=VS(i,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+X+`
`+me+`
`+H)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(K===""||ne==="")&&(ae=!1);ae&&(W.diagnostics={runnable:de,programLog:X,vertexShader:{log:K,prefix:M},fragmentShader:{log:ne,prefix:S}})}i.deleteShader(F),i.deleteShader(N),z=new mg(i,E),k=FL(i,E)}let z;this.getUniforms=function(){return z===void 0&&O(this),z};let k;this.getAttributes=function(){return k===void 0&&O(this),k};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(E,CL)),L},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=RL++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=F,this.fragmentShader=N,this}let JL=0;class ZL{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new KL(e),t.set(e,n)),n}}class KL{constructor(e){this.id=JL++,this.code=e,this.usedTimes=0}}function QL(r,e,t,n,i,s,a){const l=new oc,c=new ZL,d=new Set,p=[],g=i.logarithmicDepthBuffer,v=i.vertexTextures;let y=i.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(k){return d.add(k),k===0?"uv":`uv${k}`}function M(k,L,W,X,K){const ne=X.fog,de=K.geometry,ae=k.isMeshStandardMaterial?X.environment:null,me=(k.isMeshStandardMaterial?t:e).get(k.envMap||ae),H=me&&me.mapping===Kf?me.image.height:null,J=w[k.type];k.precision!==null&&(y=i.getMaxPrecision(k.precision),y!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",y,"instead."));const j=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,D=j!==void 0?j.length:0;let Y=0;de.morphAttributes.position!==void 0&&(Y=1),de.morphAttributes.normal!==void 0&&(Y=2),de.morphAttributes.color!==void 0&&(Y=3);let ce,Q,re,pe;if(J){const Ct=So[J];ce=Ct.vertexShader,Q=Ct.fragmentShader}else ce=k.vertexShader,Q=k.fragmentShader,c.update(k),re=c.getVertexShaderID(k),pe=c.getFragmentShaderID(k);const $=r.getRenderTarget(),ie=r.state.buffers.depth.getReversed(),Te=K.isInstancedMesh===!0,Ce=K.isBatchedMesh===!0,Pe=!!k.map,Ie=!!k.matcap,Qe=!!me,ee=!!k.aoMap,lt=!!k.lightMap,Ae=!!k.bumpMap,Le=!!k.normalMap,ge=!!k.displacementMap,ze=!!k.emissiveMap,_e=!!k.metalnessMap,V=!!k.roughnessMap,B=k.anisotropy>0,oe=k.clearcoat>0,ye=k.dispersion>0,Se=k.iridescence>0,ke=k.sheen>0,Je=k.transmission>0,He=B&&!!k.anisotropyMap,Ke=oe&&!!k.clearcoatMap,gt=oe&&!!k.clearcoatNormalMap,je=oe&&!!k.clearcoatRoughnessMap,nt=Se&&!!k.iridescenceMap,ot=Se&&!!k.iridescenceThicknessMap,it=ke&&!!k.sheenColorMap,Xe=ke&&!!k.sheenRoughnessMap,fe=!!k.specularMap,Fe=!!k.specularColorMap,ut=!!k.specularIntensityMap,ue=Je&&!!k.transmissionMap,Ve=Je&&!!k.thicknessMap,Re=!!k.gradientMap,Ye=!!k.alphaMap,et=k.alphaTest>0,$e=!!k.alphaHash,vt=!!k.extensions;let Dt=Qo;k.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(Dt=r.toneMapping);const Et={shaderID:J,shaderType:k.type,shaderName:k.name,vertexShader:ce,fragmentShader:Q,defines:k.defines,customVertexShaderID:re,customFragmentShaderID:pe,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:y,batching:Ce,batchingColor:Ce&&K._colorsTexture!==null,instancing:Te,instancingColor:Te&&K.instanceColor!==null,instancingMorph:Te&&K.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:$===null?r.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:cc,alphaToCoverage:!!k.alphaToCoverage,map:Pe,matcap:Ie,envMap:Qe,envMapMode:Qe&&me.mapping,envMapCubeUVHeight:H,aoMap:ee,lightMap:lt,bumpMap:Ae,normalMap:Le,displacementMap:v&&ge,emissiveMap:ze,normalMapObjectSpace:Le&&k.normalMapType===BM,normalMapTangentSpace:Le&&k.normalMapType===Ql,metalnessMap:_e,roughnessMap:V,anisotropy:B,anisotropyMap:He,clearcoat:oe,clearcoatMap:Ke,clearcoatNormalMap:gt,clearcoatRoughnessMap:je,dispersion:ye,iridescence:Se,iridescenceMap:nt,iridescenceThicknessMap:ot,sheen:ke,sheenColorMap:it,sheenRoughnessMap:Xe,specularMap:fe,specularColorMap:Fe,specularIntensityMap:ut,transmission:Je,transmissionMap:ue,thicknessMap:Ve,gradientMap:Re,opaque:k.transparent===!1&&k.blending===rc&&k.alphaToCoverage===!1,alphaMap:Ye,alphaTest:et,alphaHash:$e,combine:k.combine,mapUv:Pe&&E(k.map.channel),aoMapUv:ee&&E(k.aoMap.channel),lightMapUv:lt&&E(k.lightMap.channel),bumpMapUv:Ae&&E(k.bumpMap.channel),normalMapUv:Le&&E(k.normalMap.channel),displacementMapUv:ge&&E(k.displacementMap.channel),emissiveMapUv:ze&&E(k.emissiveMap.channel),metalnessMapUv:_e&&E(k.metalnessMap.channel),roughnessMapUv:V&&E(k.roughnessMap.channel),anisotropyMapUv:He&&E(k.anisotropyMap.channel),clearcoatMapUv:Ke&&E(k.clearcoatMap.channel),clearcoatNormalMapUv:gt&&E(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&&E(k.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&E(k.iridescenceMap.channel),iridescenceThicknessMapUv:ot&&E(k.iridescenceThicknessMap.channel),sheenColorMapUv:it&&E(k.sheenColorMap.channel),sheenRoughnessMapUv:Xe&&E(k.sheenRoughnessMap.channel),specularMapUv:fe&&E(k.specularMap.channel),specularColorMapUv:Fe&&E(k.specularColorMap.channel),specularIntensityMapUv:ut&&E(k.specularIntensityMap.channel),transmissionMapUv:ue&&E(k.transmissionMap.channel),thicknessMapUv:Ve&&E(k.thicknessMap.channel),alphaMapUv:Ye&&E(k.alphaMap.channel),vertexTangents:!!de.attributes.tangent&&(Le||B),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!de.attributes.uv&&(Pe||Ye),fog:!!ne,useFog:k.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:ie,skinning:K.isSkinnedMesh===!0,morphTargets:de.morphAttributes.position!==void 0,morphNormals:de.morphAttributes.normal!==void 0,morphColors:de.morphAttributes.color!==void 0,morphTargetsCount:D,morphTextureStride:Y,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:k.dithering,shadowMapEnabled:r.shadowMap.enabled&&W.length>0,shadowMapType:r.shadowMap.type,toneMapping:Dt,decodeVideoTexture:Pe&&k.map.isVideoTexture===!0&&xn.getTransfer(k.map.colorSpace)===Cn,decodeVideoTextureEmissive:ze&&k.emissiveMap.isVideoTexture===!0&&xn.getTransfer(k.emissiveMap.colorSpace)===Cn,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Mo,flipSided:k.side===Wr,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:vt&&k.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&k.extensions.multiDraw===!0||Ce)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return Et.vertexUv1s=d.has(1),Et.vertexUv2s=d.has(2),Et.vertexUv3s=d.has(3),d.clear(),Et}function S(k){const L=[];if(k.shaderID?L.push(k.shaderID):(L.push(k.customVertexShaderID),L.push(k.customFragmentShaderID)),k.defines!==void 0)for(const W in k.defines)L.push(W),L.push(k.defines[W]);return k.isRawShaderMaterial===!1&&(T(L,k),A(L,k),L.push(r.outputColorSpace)),L.push(k.customProgramCacheKey),L.join()}function T(k,L){k.push(L.precision),k.push(L.outputColorSpace),k.push(L.envMapMode),k.push(L.envMapCubeUVHeight),k.push(L.mapUv),k.push(L.alphaMapUv),k.push(L.lightMapUv),k.push(L.aoMapUv),k.push(L.bumpMapUv),k.push(L.normalMapUv),k.push(L.displacementMapUv),k.push(L.emissiveMapUv),k.push(L.metalnessMapUv),k.push(L.roughnessMapUv),k.push(L.anisotropyMapUv),k.push(L.clearcoatMapUv),k.push(L.clearcoatNormalMapUv),k.push(L.clearcoatRoughnessMapUv),k.push(L.iridescenceMapUv),k.push(L.iridescenceThicknessMapUv),k.push(L.sheenColorMapUv),k.push(L.sheenRoughnessMapUv),k.push(L.specularMapUv),k.push(L.specularColorMapUv),k.push(L.specularIntensityMapUv),k.push(L.transmissionMapUv),k.push(L.thicknessMapUv),k.push(L.combine),k.push(L.fogExp2),k.push(L.sizeAttenuation),k.push(L.morphTargetsCount),k.push(L.morphAttributeCount),k.push(L.numDirLights),k.push(L.numPointLights),k.push(L.numSpotLights),k.push(L.numSpotLightMaps),k.push(L.numHemiLights),k.push(L.numRectAreaLights),k.push(L.numDirLightShadows),k.push(L.numPointLightShadows),k.push(L.numSpotLightShadows),k.push(L.numSpotLightShadowsWithMaps),k.push(L.numLightProbes),k.push(L.shadowMapType),k.push(L.toneMapping),k.push(L.numClippingPlanes),k.push(L.numClipIntersection),k.push(L.depthPacking)}function A(k,L){l.disableAll(),L.supportsVertexTextures&&l.enable(0),L.instancing&&l.enable(1),L.instancingColor&&l.enable(2),L.instancingMorph&&l.enable(3),L.matcap&&l.enable(4),L.envMap&&l.enable(5),L.normalMapObjectSpace&&l.enable(6),L.normalMapTangentSpace&&l.enable(7),L.clearcoat&&l.enable(8),L.iridescence&&l.enable(9),L.alphaTest&&l.enable(10),L.vertexColors&&l.enable(11),L.vertexAlphas&&l.enable(12),L.vertexUv1s&&l.enable(13),L.vertexUv2s&&l.enable(14),L.vertexUv3s&&l.enable(15),L.vertexTangents&&l.enable(16),L.anisotropy&&l.enable(17),L.alphaHash&&l.enable(18),L.batching&&l.enable(19),L.dispersion&&l.enable(20),L.batchingColor&&l.enable(21),k.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reverseDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.decodeVideoTextureEmissive&&l.enable(20),L.alphaToCoverage&&l.enable(21),k.push(l.mask)}function R(k){const L=w[k.type];let W;if(L){const X=So[L];W=Vx.clone(X.uniforms)}else W=k.uniforms;return W}function F(k,L){let W;for(let X=0,K=p.length;X<K;X++){const ne=p[X];if(ne.cacheKey===L){W=ne,++W.usedTimes;break}}return W===void 0&&(W=new qL(r,L,k,s),p.push(W)),W}function N(k){if(--k.usedTimes===0){const L=p.indexOf(k);p[L]=p[p.length-1],p.pop(),k.destroy()}}function O(k){c.remove(k)}function z(){c.dispose()}return{getParameters:M,getProgramCacheKey:S,getUniforms:R,acquireProgram:F,releaseProgram:N,releaseShaderCache:O,programs:p,dispose:z}}function $L(){let r=new WeakMap;function e(a){return r.has(a)}function t(a){let l=r.get(a);return l===void 0&&(l={},r.set(a,l)),l}function n(a){r.delete(a)}function i(a,l,c){r.get(a)[l]=c}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function eD(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function XS(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function YS(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function a(g,v,y,w,E,M){let S=r[e];return S===void 0?(S={id:g.id,object:g,geometry:v,material:y,groupOrder:w,renderOrder:g.renderOrder,z:E,group:M},r[e]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=y,S.groupOrder=w,S.renderOrder=g.renderOrder,S.z=E,S.group=M),e++,S}function l(g,v,y,w,E,M){const S=a(g,v,y,w,E,M);y.transmission>0?n.push(S):y.transparent===!0?i.push(S):t.push(S)}function c(g,v,y,w,E,M){const S=a(g,v,y,w,E,M);y.transmission>0?n.unshift(S):y.transparent===!0?i.unshift(S):t.unshift(S)}function d(g,v){t.length>1&&t.sort(g||eD),n.length>1&&n.sort(v||XS),i.length>1&&i.sort(v||XS)}function p(){for(let g=e,v=r.length;g<v;g++){const y=r[g];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:l,unshift:c,finish:p,sort:d}}function tD(){let r=new WeakMap;function e(n,i){const s=r.get(n);let a;return s===void 0?(a=new YS,r.set(n,[a])):i>=s.length?(a=new YS,s.push(a)):a=s[i],a}function t(){r=new WeakMap}return{get:e,dispose:t}}function nD(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new te,color:new wt};break;case"SpotLight":t={position:new te,direction:new te,color:new wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new te,color:new wt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new te,skyColor:new wt,groundColor:new wt};break;case"RectAreaLight":t={color:new wt,position:new te,halfWidth:new te,halfHeight:new te};break}return r[e.id]=t,t}}}function iD(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let rD=0;function sD(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function oD(r){const e=new nD,t=iD(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new te);const i=new te,s=new Wt,a=new Wt;function l(d){let p=0,g=0,v=0;for(let k=0;k<9;k++)n.probe[k].set(0,0,0);let y=0,w=0,E=0,M=0,S=0,T=0,A=0,R=0,F=0,N=0,O=0;d.sort(sD);for(let k=0,L=d.length;k<L;k++){const W=d[k],X=W.color,K=W.intensity,ne=W.distance,de=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)p+=X.r*K,g+=X.g*K,v+=X.b*K;else if(W.isLightProbe){for(let ae=0;ae<9;ae++)n.probe[ae].addScaledVector(W.sh.coefficients[ae],K);O++}else if(W.isDirectionalLight){const ae=e.get(W);if(ae.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const me=W.shadow,H=t.get(W);H.shadowIntensity=me.intensity,H.shadowBias=me.bias,H.shadowNormalBias=me.normalBias,H.shadowRadius=me.radius,H.shadowMapSize=me.mapSize,n.directionalShadow[y]=H,n.directionalShadowMap[y]=de,n.directionalShadowMatrix[y]=W.shadow.matrix,T++}n.directional[y]=ae,y++}else if(W.isSpotLight){const ae=e.get(W);ae.position.setFromMatrixPosition(W.matrixWorld),ae.color.copy(X).multiplyScalar(K),ae.distance=ne,ae.coneCos=Math.cos(W.angle),ae.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),ae.decay=W.decay,n.spot[E]=ae;const me=W.shadow;if(W.map&&(n.spotLightMap[F]=W.map,F++,me.updateMatrices(W),W.castShadow&&N++),n.spotLightMatrix[E]=me.matrix,W.castShadow){const H=t.get(W);H.shadowIntensity=me.intensity,H.shadowBias=me.bias,H.shadowNormalBias=me.normalBias,H.shadowRadius=me.radius,H.shadowMapSize=me.mapSize,n.spotShadow[E]=H,n.spotShadowMap[E]=de,R++}E++}else if(W.isRectAreaLight){const ae=e.get(W);ae.color.copy(X).multiplyScalar(K),ae.halfWidth.set(W.width*.5,0,0),ae.halfHeight.set(0,W.height*.5,0),n.rectArea[M]=ae,M++}else if(W.isPointLight){const ae=e.get(W);if(ae.color.copy(W.color).multiplyScalar(W.intensity),ae.distance=W.distance,ae.decay=W.decay,W.castShadow){const me=W.shadow,H=t.get(W);H.shadowIntensity=me.intensity,H.shadowBias=me.bias,H.shadowNormalBias=me.normalBias,H.shadowRadius=me.radius,H.shadowMapSize=me.mapSize,H.shadowCameraNear=me.camera.near,H.shadowCameraFar=me.camera.far,n.pointShadow[w]=H,n.pointShadowMap[w]=de,n.pointShadowMatrix[w]=W.shadow.matrix,A++}n.point[w]=ae,w++}else if(W.isHemisphereLight){const ae=e.get(W);ae.skyColor.copy(W.color).multiplyScalar(K),ae.groundColor.copy(W.groundColor).multiplyScalar(K),n.hemi[S]=ae,S++}}M>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=_t.LTC_FLOAT_1,n.rectAreaLTC2=_t.LTC_FLOAT_2):(n.rectAreaLTC1=_t.LTC_HALF_1,n.rectAreaLTC2=_t.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=g,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==y||z.pointLength!==w||z.spotLength!==E||z.rectAreaLength!==M||z.hemiLength!==S||z.numDirectionalShadows!==T||z.numPointShadows!==A||z.numSpotShadows!==R||z.numSpotMaps!==F||z.numLightProbes!==O)&&(n.directional.length=y,n.spot.length=E,n.rectArea.length=M,n.point.length=w,n.hemi.length=S,n.directionalShadow.length=T,n.directionalShadowMap.length=T,n.pointShadow.length=A,n.pointShadowMap.length=A,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=T,n.pointShadowMatrix.length=A,n.spotLightMatrix.length=R+F-N,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=N,n.numLightProbes=O,z.directionalLength=y,z.pointLength=w,z.spotLength=E,z.rectAreaLength=M,z.hemiLength=S,z.numDirectionalShadows=T,z.numPointShadows=A,z.numSpotShadows=R,z.numSpotMaps=F,z.numLightProbes=O,n.version=rD++)}function c(d,p){let g=0,v=0,y=0,w=0,E=0;const M=p.matrixWorldInverse;for(let S=0,T=d.length;S<T;S++){const A=d[S];if(A.isDirectionalLight){const R=n.directional[g];R.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(i),R.direction.transformDirection(M),g++}else if(A.isSpotLight){const R=n.spot[y];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(M),R.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(i),R.direction.transformDirection(M),y++}else if(A.isRectAreaLight){const R=n.rectArea[w];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(M),a.identity(),s.copy(A.matrixWorld),s.premultiply(M),a.extractRotation(s),R.halfWidth.set(A.width*.5,0,0),R.halfHeight.set(0,A.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),w++}else if(A.isPointLight){const R=n.point[v];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(M),v++}else if(A.isHemisphereLight){const R=n.hemi[E];R.direction.setFromMatrixPosition(A.matrixWorld),R.direction.transformDirection(M),E++}}}return{setup:l,setupView:c,state:n}}function qS(r){const e=new oD(r),t=[],n=[];function i(p){d.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function a(p){n.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:d,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function aD(r){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let l;return a===void 0?(l=new qS(r),e.set(i,[l])):s>=a.length?(l=new qS(r),a.push(l)):l=a[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const lD=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uD=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cD(r,e,t){let n=new up;const i=new Ze,s=new Ze,a=new vn,l=new X0({depthPacking:Ux}),c=new Y0,d={},p=t.maxTextureSize,g={[Ja]:Wr,[Wr]:Ja,[Mo]:Mo},v=new Ao({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:lD,fragmentShader:uD}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const w=new fn;w.setAttribute("position",new kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ii(w,v),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v0;let S=this.type;this.render=function(N,O,z){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||N.length===0)return;const k=r.getRenderTarget(),L=r.getActiveCubeFace(),W=r.getActiveMipmapLevel(),X=r.state;X.setBlending(Ya),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);const K=S!==_o&&this.type===_o,ne=S===_o&&this.type!==_o;for(let de=0,ae=N.length;de<ae;de++){const me=N[de],H=me.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;i.copy(H.mapSize);const J=H.getFrameExtents();if(i.multiply(J),s.copy(H.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/J.x),i.x=s.x*J.x,H.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/J.y),i.y=s.y*J.y,H.mapSize.y=s.y)),H.map===null||K===!0||ne===!0){const D=this.type!==_o?{minFilter:cr,magFilter:cr}:{};H.map!==null&&H.map.dispose(),H.map=new ta(i.x,i.y,D),H.map.texture.name=me.name+".shadowMap",H.camera.updateProjectionMatrix()}r.setRenderTarget(H.map),r.clear();const j=H.getViewportCount();for(let D=0;D<j;D++){const Y=H.getViewport(D);a.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),X.viewport(a),H.updateMatrices(me,D),n=H.getFrustum(),R(O,z,H.camera,me,this.type)}H.isPointLightShadow!==!0&&this.type===_o&&T(H,z),H.needsUpdate=!1}S=this.type,M.needsUpdate=!1,r.setRenderTarget(k,L,W)};function T(N,O){const z=e.update(E);v.defines.VSM_SAMPLES!==N.blurSamples&&(v.defines.VSM_SAMPLES=N.blurSamples,y.defines.VSM_SAMPLES=N.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new ta(i.x,i.y)),v.uniforms.shadow_pass.value=N.map.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,r.setRenderTarget(N.mapPass),r.clear(),r.renderBufferDirect(O,null,z,v,E,null),y.uniforms.shadow_pass.value=N.mapPass.texture,y.uniforms.resolution.value=N.mapSize,y.uniforms.radius.value=N.radius,r.setRenderTarget(N.map),r.clear(),r.renderBufferDirect(O,null,z,y,E,null)}function A(N,O,z,k){let L=null;const W=z.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(W!==void 0)L=W;else if(L=z.isPointLight===!0?c:l,r.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0){const X=L.uuid,K=O.uuid;let ne=d[X];ne===void 0&&(ne={},d[X]=ne);let de=ne[K];de===void 0&&(de=L.clone(),ne[K]=de,O.addEventListener("dispose",F)),L=de}if(L.visible=O.visible,L.wireframe=O.wireframe,k===_o?L.side=O.shadowSide!==null?O.shadowSide:O.side:L.side=O.shadowSide!==null?O.shadowSide:g[O.side],L.alphaMap=O.alphaMap,L.alphaTest=O.alphaTest,L.map=O.map,L.clipShadows=O.clipShadows,L.clippingPlanes=O.clippingPlanes,L.clipIntersection=O.clipIntersection,L.displacementMap=O.displacementMap,L.displacementScale=O.displacementScale,L.displacementBias=O.displacementBias,L.wireframeLinewidth=O.wireframeLinewidth,L.linewidth=O.linewidth,z.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const X=r.properties.get(L);X.light=z}return L}function R(N,O,z,k,L){if(N.visible===!1)return;if(N.layers.test(O.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&L===_o)&&(!N.frustumCulled||n.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,N.matrixWorld);const K=e.update(N),ne=N.material;if(Array.isArray(ne)){const de=K.groups;for(let ae=0,me=de.length;ae<me;ae++){const H=de[ae],J=ne[H.materialIndex];if(J&&J.visible){const j=A(N,J,k,L);N.onBeforeShadow(r,N,O,z,K,j,H),r.renderBufferDirect(z,null,K,j,N,H),N.onAfterShadow(r,N,O,z,K,j,H)}}}else if(ne.visible){const de=A(N,ne,k,L);N.onBeforeShadow(r,N,O,z,K,de,null),r.renderBufferDirect(z,null,K,de,N,null),N.onAfterShadow(r,N,O,z,K,de,null)}}const X=N.children;for(let K=0,ne=X.length;K<ne;K++)R(X[K],O,z,k,L)}function F(N){N.target.removeEventListener("dispose",F);for(const z in d){const k=d[z],L=N.target.uuid;L in k&&(k[L].dispose(),delete k[L])}}}const fD={[wg]:Mg,[Eg]:Ag,[bg]:Cg,[uc]:Tg,[Mg]:wg,[Ag]:Eg,[Cg]:bg,[Tg]:uc};function dD(r,e){function t(){let ue=!1;const Ve=new vn;let Re=null;const Ye=new vn(0,0,0,0);return{setMask:function(et){Re!==et&&!ue&&(r.colorMask(et,et,et,et),Re=et)},setLocked:function(et){ue=et},setClear:function(et,$e,vt,Dt,Et){Et===!0&&(et*=Dt,$e*=Dt,vt*=Dt),Ve.set(et,$e,vt,Dt),Ye.equals(Ve)===!1&&(r.clearColor(et,$e,vt,Dt),Ye.copy(Ve))},reset:function(){ue=!1,Re=null,Ye.set(-1,0,0,0)}}}function n(){let ue=!1,Ve=!1,Re=null,Ye=null,et=null;return{setReversed:function($e){if(Ve!==$e){const vt=e.get("EXT_clip_control");$e?vt.clipControlEXT(vt.LOWER_LEFT_EXT,vt.ZERO_TO_ONE_EXT):vt.clipControlEXT(vt.LOWER_LEFT_EXT,vt.NEGATIVE_ONE_TO_ONE_EXT),Ve=$e;const Dt=et;et=null,this.setClear(Dt)}},getReversed:function(){return Ve},setTest:function($e){$e?$(r.DEPTH_TEST):ie(r.DEPTH_TEST)},setMask:function($e){Re!==$e&&!ue&&(r.depthMask($e),Re=$e)},setFunc:function($e){if(Ve&&($e=fD[$e]),Ye!==$e){switch($e){case wg:r.depthFunc(r.NEVER);break;case Mg:r.depthFunc(r.ALWAYS);break;case Eg:r.depthFunc(r.LESS);break;case uc:r.depthFunc(r.LEQUAL);break;case bg:r.depthFunc(r.EQUAL);break;case Tg:r.depthFunc(r.GEQUAL);break;case Ag:r.depthFunc(r.GREATER);break;case Cg:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ye=$e}},setLocked:function($e){ue=$e},setClear:function($e){et!==$e&&(Ve&&($e=1-$e),r.clearDepth($e),et=$e)},reset:function(){ue=!1,Re=null,Ye=null,et=null,Ve=!1}}}function i(){let ue=!1,Ve=null,Re=null,Ye=null,et=null,$e=null,vt=null,Dt=null,Et=null;return{setTest:function(Ct){ue||(Ct?$(r.STENCIL_TEST):ie(r.STENCIL_TEST))},setMask:function(Ct){Ve!==Ct&&!ue&&(r.stencilMask(Ct),Ve=Ct)},setFunc:function(Ct,dn,hn){(Re!==Ct||Ye!==dn||et!==hn)&&(r.stencilFunc(Ct,dn,hn),Re=Ct,Ye=dn,et=hn)},setOp:function(Ct,dn,hn){($e!==Ct||vt!==dn||Dt!==hn)&&(r.stencilOp(Ct,dn,hn),$e=Ct,vt=dn,Dt=hn)},setLocked:function(Ct){ue=Ct},setClear:function(Ct){Et!==Ct&&(r.clearStencil(Ct),Et=Ct)},reset:function(){ue=!1,Ve=null,Re=null,Ye=null,et=null,$e=null,vt=null,Dt=null,Et=null}}}const s=new t,a=new n,l=new i,c=new WeakMap,d=new WeakMap;let p={},g={},v=new WeakMap,y=[],w=null,E=!1,M=null,S=null,T=null,A=null,R=null,F=null,N=null,O=new wt(0,0,0),z=0,k=!1,L=null,W=null,X=null,K=null,ne=null;const de=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,me=0;const H=r.getParameter(r.VERSION);H.indexOf("WebGL")!==-1?(me=parseFloat(/^WebGL (\d)/.exec(H)[1]),ae=me>=1):H.indexOf("OpenGL ES")!==-1&&(me=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),ae=me>=2);let J=null,j={};const D=r.getParameter(r.SCISSOR_BOX),Y=r.getParameter(r.VIEWPORT),ce=new vn().fromArray(D),Q=new vn().fromArray(Y);function re(ue,Ve,Re,Ye){const et=new Uint8Array(4),$e=r.createTexture();r.bindTexture(ue,$e),r.texParameteri(ue,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ue,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let vt=0;vt<Re;vt++)ue===r.TEXTURE_3D||ue===r.TEXTURE_2D_ARRAY?r.texImage3D(Ve,0,r.RGBA,1,1,Ye,0,r.RGBA,r.UNSIGNED_BYTE,et):r.texImage2D(Ve+vt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,et);return $e}const pe={};pe[r.TEXTURE_2D]=re(r.TEXTURE_2D,r.TEXTURE_2D,1),pe[r.TEXTURE_CUBE_MAP]=re(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[r.TEXTURE_2D_ARRAY]=re(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),pe[r.TEXTURE_3D]=re(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),$(r.DEPTH_TEST),a.setFunc(uc),Ae(!1),Le(Xy),$(r.CULL_FACE),ee(Ya);function $(ue){p[ue]!==!0&&(r.enable(ue),p[ue]=!0)}function ie(ue){p[ue]!==!1&&(r.disable(ue),p[ue]=!1)}function Te(ue,Ve){return g[ue]!==Ve?(r.bindFramebuffer(ue,Ve),g[ue]=Ve,ue===r.DRAW_FRAMEBUFFER&&(g[r.FRAMEBUFFER]=Ve),ue===r.FRAMEBUFFER&&(g[r.DRAW_FRAMEBUFFER]=Ve),!0):!1}function Ce(ue,Ve){let Re=y,Ye=!1;if(ue){Re=v.get(Ve),Re===void 0&&(Re=[],v.set(Ve,Re));const et=ue.textures;if(Re.length!==et.length||Re[0]!==r.COLOR_ATTACHMENT0){for(let $e=0,vt=et.length;$e<vt;$e++)Re[$e]=r.COLOR_ATTACHMENT0+$e;Re.length=et.length,Ye=!0}}else Re[0]!==r.BACK&&(Re[0]=r.BACK,Ye=!0);Ye&&r.drawBuffers(Re)}function Pe(ue){return w!==ue?(r.useProgram(ue),w=ue,!0):!1}const Ie={[Gl]:r.FUNC_ADD,[uM]:r.FUNC_SUBTRACT,[cM]:r.FUNC_REVERSE_SUBTRACT};Ie[fM]=r.MIN,Ie[dM]=r.MAX;const Qe={[hM]:r.ZERO,[pM]:r.ONE,[mM]:r.SRC_COLOR,[_g]:r.SRC_ALPHA,[SM]:r.SRC_ALPHA_SATURATE,[xM]:r.DST_COLOR,[vM]:r.DST_ALPHA,[gM]:r.ONE_MINUS_SRC_COLOR,[Sg]:r.ONE_MINUS_SRC_ALPHA,[_M]:r.ONE_MINUS_DST_COLOR,[yM]:r.ONE_MINUS_DST_ALPHA,[wM]:r.CONSTANT_COLOR,[MM]:r.ONE_MINUS_CONSTANT_COLOR,[EM]:r.CONSTANT_ALPHA,[bM]:r.ONE_MINUS_CONSTANT_ALPHA};function ee(ue,Ve,Re,Ye,et,$e,vt,Dt,Et,Ct){if(ue===Ya){E===!0&&(ie(r.BLEND),E=!1);return}if(E===!1&&($(r.BLEND),E=!0),ue!==lM){if(ue!==M||Ct!==k){if((S!==Gl||R!==Gl)&&(r.blendEquation(r.FUNC_ADD),S=Gl,R=Gl),Ct)switch(ue){case rc:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Yy:r.blendFunc(r.ONE,r.ONE);break;case qy:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Jy:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case rc:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Yy:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case qy:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Jy:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}T=null,A=null,F=null,N=null,O.set(0,0,0),z=0,M=ue,k=Ct}return}et=et||Ve,$e=$e||Re,vt=vt||Ye,(Ve!==S||et!==R)&&(r.blendEquationSeparate(Ie[Ve],Ie[et]),S=Ve,R=et),(Re!==T||Ye!==A||$e!==F||vt!==N)&&(r.blendFuncSeparate(Qe[Re],Qe[Ye],Qe[$e],Qe[vt]),T=Re,A=Ye,F=$e,N=vt),(Dt.equals(O)===!1||Et!==z)&&(r.blendColor(Dt.r,Dt.g,Dt.b,Et),O.copy(Dt),z=Et),M=ue,k=!1}function lt(ue,Ve){ue.side===Mo?ie(r.CULL_FACE):$(r.CULL_FACE);let Re=ue.side===Wr;Ve&&(Re=!Re),Ae(Re),ue.blending===rc&&ue.transparent===!1?ee(Ya):ee(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),a.setFunc(ue.depthFunc),a.setTest(ue.depthTest),a.setMask(ue.depthWrite),s.setMask(ue.colorWrite);const Ye=ue.stencilWrite;l.setTest(Ye),Ye&&(l.setMask(ue.stencilWriteMask),l.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),l.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),ze(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?$(r.SAMPLE_ALPHA_TO_COVERAGE):ie(r.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(ue){L!==ue&&(ue?r.frontFace(r.CW):r.frontFace(r.CCW),L=ue)}function Le(ue){ue!==sM?($(r.CULL_FACE),ue!==W&&(ue===Xy?r.cullFace(r.BACK):ue===oM?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):ie(r.CULL_FACE),W=ue}function ge(ue){ue!==X&&(ae&&r.lineWidth(ue),X=ue)}function ze(ue,Ve,Re){ue?($(r.POLYGON_OFFSET_FILL),(K!==Ve||ne!==Re)&&(r.polygonOffset(Ve,Re),K=Ve,ne=Re)):ie(r.POLYGON_OFFSET_FILL)}function _e(ue){ue?$(r.SCISSOR_TEST):ie(r.SCISSOR_TEST)}function V(ue){ue===void 0&&(ue=r.TEXTURE0+de-1),J!==ue&&(r.activeTexture(ue),J=ue)}function B(ue,Ve,Re){Re===void 0&&(J===null?Re=r.TEXTURE0+de-1:Re=J);let Ye=j[Re];Ye===void 0&&(Ye={type:void 0,texture:void 0},j[Re]=Ye),(Ye.type!==ue||Ye.texture!==Ve)&&(J!==Re&&(r.activeTexture(Re),J=Re),r.bindTexture(ue,Ve||pe[ue]),Ye.type=ue,Ye.texture=Ve)}function oe(){const ue=j[J];ue!==void 0&&ue.type!==void 0&&(r.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function ye(){try{r.compressedTexImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Se(){try{r.compressedTexImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ke(){try{r.texSubImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Je(){try{r.texSubImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function He(){try{r.compressedTexSubImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ke(){try{r.compressedTexSubImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function gt(){try{r.texStorage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function je(){try{r.texStorage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function nt(){try{r.texImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ot(){try{r.texImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function it(ue){ce.equals(ue)===!1&&(r.scissor(ue.x,ue.y,ue.z,ue.w),ce.copy(ue))}function Xe(ue){Q.equals(ue)===!1&&(r.viewport(ue.x,ue.y,ue.z,ue.w),Q.copy(ue))}function fe(ue,Ve){let Re=d.get(Ve);Re===void 0&&(Re=new WeakMap,d.set(Ve,Re));let Ye=Re.get(ue);Ye===void 0&&(Ye=r.getUniformBlockIndex(Ve,ue.name),Re.set(ue,Ye))}function Fe(ue,Ve){const Ye=d.get(Ve).get(ue);c.get(Ve)!==Ye&&(r.uniformBlockBinding(Ve,Ye,ue.__bindingPointIndex),c.set(Ve,Ye))}function ut(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),a.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),p={},J=null,j={},g={},v=new WeakMap,y=[],w=null,E=!1,M=null,S=null,T=null,A=null,R=null,F=null,N=null,O=new wt(0,0,0),z=0,k=!1,L=null,W=null,X=null,K=null,ne=null,ce.set(0,0,r.canvas.width,r.canvas.height),Q.set(0,0,r.canvas.width,r.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:$,disable:ie,bindFramebuffer:Te,drawBuffers:Ce,useProgram:Pe,setBlending:ee,setMaterial:lt,setFlipSided:Ae,setCullFace:Le,setLineWidth:ge,setPolygonOffset:ze,setScissorTest:_e,activeTexture:V,bindTexture:B,unbindTexture:oe,compressedTexImage2D:ye,compressedTexImage3D:Se,texImage2D:nt,texImage3D:ot,updateUBOMapping:fe,uniformBlockBinding:Fe,texStorage2D:gt,texStorage3D:je,texSubImage2D:ke,texSubImage3D:Je,compressedTexSubImage2D:He,compressedTexSubImage3D:Ke,scissor:it,viewport:Xe,reset:ut}}function hD(r,e,t,n,i,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Ze,p=new WeakMap;let g;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(V,B){return y?new OffscreenCanvas(V,B):Hh("canvas")}function E(V,B,oe){let ye=1;const Se=_e(V);if((Se.width>oe||Se.height>oe)&&(ye=oe/Math.max(Se.width,Se.height)),ye<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const ke=Math.floor(ye*Se.width),Je=Math.floor(ye*Se.height);g===void 0&&(g=w(ke,Je));const He=B?w(ke,Je):g;return He.width=ke,He.height=Je,He.getContext("2d").drawImage(V,0,0,ke,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+ke+"x"+Je+")."),He}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),V;return V}function M(V){return V.generateMipmaps}function S(V){r.generateMipmap(V)}function T(V){return V.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:V.isWebGL3DRenderTarget?r.TEXTURE_3D:V.isWebGLArrayRenderTarget||V.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function A(V,B,oe,ye,Se=!1){if(V!==null){if(r[V]!==void 0)return r[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let ke=B;if(B===r.RED&&(oe===r.FLOAT&&(ke=r.R32F),oe===r.HALF_FLOAT&&(ke=r.R16F),oe===r.UNSIGNED_BYTE&&(ke=r.R8)),B===r.RED_INTEGER&&(oe===r.UNSIGNED_BYTE&&(ke=r.R8UI),oe===r.UNSIGNED_SHORT&&(ke=r.R16UI),oe===r.UNSIGNED_INT&&(ke=r.R32UI),oe===r.BYTE&&(ke=r.R8I),oe===r.SHORT&&(ke=r.R16I),oe===r.INT&&(ke=r.R32I)),B===r.RG&&(oe===r.FLOAT&&(ke=r.RG32F),oe===r.HALF_FLOAT&&(ke=r.RG16F),oe===r.UNSIGNED_BYTE&&(ke=r.RG8)),B===r.RG_INTEGER&&(oe===r.UNSIGNED_BYTE&&(ke=r.RG8UI),oe===r.UNSIGNED_SHORT&&(ke=r.RG16UI),oe===r.UNSIGNED_INT&&(ke=r.RG32UI),oe===r.BYTE&&(ke=r.RG8I),oe===r.SHORT&&(ke=r.RG16I),oe===r.INT&&(ke=r.RG32I)),B===r.RGB_INTEGER&&(oe===r.UNSIGNED_BYTE&&(ke=r.RGB8UI),oe===r.UNSIGNED_SHORT&&(ke=r.RGB16UI),oe===r.UNSIGNED_INT&&(ke=r.RGB32UI),oe===r.BYTE&&(ke=r.RGB8I),oe===r.SHORT&&(ke=r.RGB16I),oe===r.INT&&(ke=r.RGB32I)),B===r.RGBA_INTEGER&&(oe===r.UNSIGNED_BYTE&&(ke=r.RGBA8UI),oe===r.UNSIGNED_SHORT&&(ke=r.RGBA16UI),oe===r.UNSIGNED_INT&&(ke=r.RGBA32UI),oe===r.BYTE&&(ke=r.RGBA8I),oe===r.SHORT&&(ke=r.RGBA16I),oe===r.INT&&(ke=r.RGBA32I)),B===r.RGB&&oe===r.UNSIGNED_INT_5_9_9_9_REV&&(ke=r.RGB9_E5),B===r.RGBA){const Je=Se?Bh:xn.getTransfer(ye);oe===r.FLOAT&&(ke=r.RGBA32F),oe===r.HALF_FLOAT&&(ke=r.RGBA16F),oe===r.UNSIGNED_BYTE&&(ke=Je===Cn?r.SRGB8_ALPHA8:r.RGBA8),oe===r.UNSIGNED_SHORT_4_4_4_4&&(ke=r.RGBA4),oe===r.UNSIGNED_SHORT_5_5_5_1&&(ke=r.RGB5_A1)}return(ke===r.R16F||ke===r.R32F||ke===r.RG16F||ke===r.RG32F||ke===r.RGBA16F||ke===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function R(V,B){let oe;return V?B===null||B===Ka||B===Gf?oe=r.DEPTH24_STENCIL8:B===us?oe=r.DEPTH32F_STENCIL8:B===Hf&&(oe=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===Ka||B===Gf?oe=r.DEPTH_COMPONENT24:B===us?oe=r.DEPTH_COMPONENT32F:B===Hf&&(oe=r.DEPTH_COMPONENT16),oe}function F(V,B){return M(V)===!0||V.isFramebufferTexture&&V.minFilter!==cr&&V.minFilter!==Si?Math.log2(Math.max(B.width,B.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?B.mipmaps.length:1}function N(V){const B=V.target;B.removeEventListener("dispose",N),z(B),B.isVideoTexture&&p.delete(B)}function O(V){const B=V.target;B.removeEventListener("dispose",O),L(B)}function z(V){const B=n.get(V);if(B.__webglInit===void 0)return;const oe=V.source,ye=v.get(oe);if(ye){const Se=ye[B.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&k(V),Object.keys(ye).length===0&&v.delete(oe)}n.remove(V)}function k(V){const B=n.get(V);r.deleteTexture(B.__webglTexture);const oe=V.source,ye=v.get(oe);delete ye[B.__cacheKey],a.memory.textures--}function L(V){const B=n.get(V);if(V.depthTexture&&(V.depthTexture.dispose(),n.remove(V.depthTexture)),V.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(B.__webglFramebuffer[ye]))for(let Se=0;Se<B.__webglFramebuffer[ye].length;Se++)r.deleteFramebuffer(B.__webglFramebuffer[ye][Se]);else r.deleteFramebuffer(B.__webglFramebuffer[ye]);B.__webglDepthbuffer&&r.deleteRenderbuffer(B.__webglDepthbuffer[ye])}else{if(Array.isArray(B.__webglFramebuffer))for(let ye=0;ye<B.__webglFramebuffer.length;ye++)r.deleteFramebuffer(B.__webglFramebuffer[ye]);else r.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&r.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&r.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let ye=0;ye<B.__webglColorRenderbuffer.length;ye++)B.__webglColorRenderbuffer[ye]&&r.deleteRenderbuffer(B.__webglColorRenderbuffer[ye]);B.__webglDepthRenderbuffer&&r.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const oe=V.textures;for(let ye=0,Se=oe.length;ye<Se;ye++){const ke=n.get(oe[ye]);ke.__webglTexture&&(r.deleteTexture(ke.__webglTexture),a.memory.textures--),n.remove(oe[ye])}n.remove(V)}let W=0;function X(){W=0}function K(){const V=W;return V>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+i.maxTextures),W+=1,V}function ne(V){const B=[];return B.push(V.wrapS),B.push(V.wrapT),B.push(V.wrapR||0),B.push(V.magFilter),B.push(V.minFilter),B.push(V.anisotropy),B.push(V.internalFormat),B.push(V.format),B.push(V.type),B.push(V.generateMipmaps),B.push(V.premultiplyAlpha),B.push(V.flipY),B.push(V.unpackAlignment),B.push(V.colorSpace),B.join()}function de(V,B){const oe=n.get(V);if(V.isVideoTexture&&ge(V),V.isRenderTargetTexture===!1&&V.version>0&&oe.__version!==V.version){const ye=V.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Q(oe,V,B);return}}t.bindTexture(r.TEXTURE_2D,oe.__webglTexture,r.TEXTURE0+B)}function ae(V,B){const oe=n.get(V);if(V.version>0&&oe.__version!==V.version){Q(oe,V,B);return}t.bindTexture(r.TEXTURE_2D_ARRAY,oe.__webglTexture,r.TEXTURE0+B)}function me(V,B){const oe=n.get(V);if(V.version>0&&oe.__version!==V.version){Q(oe,V,B);return}t.bindTexture(r.TEXTURE_3D,oe.__webglTexture,r.TEXTURE0+B)}function H(V,B){const oe=n.get(V);if(V.version>0&&oe.__version!==V.version){re(oe,V,B);return}t.bindTexture(r.TEXTURE_CUBE_MAP,oe.__webglTexture,r.TEXTURE0+B)}const J={[Nh]:r.REPEAT,[zs]:r.CLAMP_TO_EDGE,[Uh]:r.MIRRORED_REPEAT},j={[cr]:r.NEAREST,[bx]:r.NEAREST_MIPMAP_NEAREST,[Nf]:r.NEAREST_MIPMAP_LINEAR,[Si]:r.LINEAR,[xh]:r.LINEAR_MIPMAP_NEAREST,[Ko]:r.LINEAR_MIPMAP_LINEAR},D={[zM]:r.NEVER,[XM]:r.ALWAYS,[VM]:r.LESS,[Fx]:r.LEQUAL,[HM]:r.EQUAL,[jM]:r.GEQUAL,[GM]:r.GREATER,[WM]:r.NOTEQUAL};function Y(V,B){if(B.type===us&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Si||B.magFilter===xh||B.magFilter===Nf||B.magFilter===Ko||B.minFilter===Si||B.minFilter===xh||B.minFilter===Nf||B.minFilter===Ko)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(V,r.TEXTURE_WRAP_S,J[B.wrapS]),r.texParameteri(V,r.TEXTURE_WRAP_T,J[B.wrapT]),(V===r.TEXTURE_3D||V===r.TEXTURE_2D_ARRAY)&&r.texParameteri(V,r.TEXTURE_WRAP_R,J[B.wrapR]),r.texParameteri(V,r.TEXTURE_MAG_FILTER,j[B.magFilter]),r.texParameteri(V,r.TEXTURE_MIN_FILTER,j[B.minFilter]),B.compareFunction&&(r.texParameteri(V,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(V,r.TEXTURE_COMPARE_FUNC,D[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===cr||B.minFilter!==Nf&&B.minFilter!==Ko||B.type===us&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||n.get(B).__currentAnisotropy){const oe=e.get("EXT_texture_filter_anisotropic");r.texParameterf(V,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),n.get(B).__currentAnisotropy=B.anisotropy}}}function ce(V,B){let oe=!1;V.__webglInit===void 0&&(V.__webglInit=!0,B.addEventListener("dispose",N));const ye=B.source;let Se=v.get(ye);Se===void 0&&(Se={},v.set(ye,Se));const ke=ne(B);if(ke!==V.__cacheKey){Se[ke]===void 0&&(Se[ke]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,oe=!0),Se[ke].usedTimes++;const Je=Se[V.__cacheKey];Je!==void 0&&(Se[V.__cacheKey].usedTimes--,Je.usedTimes===0&&k(B)),V.__cacheKey=ke,V.__webglTexture=Se[ke].texture}return oe}function Q(V,B,oe){let ye=r.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(ye=r.TEXTURE_2D_ARRAY),B.isData3DTexture&&(ye=r.TEXTURE_3D);const Se=ce(V,B),ke=B.source;t.bindTexture(ye,V.__webglTexture,r.TEXTURE0+oe);const Je=n.get(ke);if(ke.version!==Je.__version||Se===!0){t.activeTexture(r.TEXTURE0+oe);const He=xn.getPrimaries(xn.workingColorSpace),Ke=B.colorSpace===Wa?null:xn.getPrimaries(B.colorSpace),gt=B.colorSpace===Wa||He===Ke?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,B.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,B.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);let je=E(B.image,!1,i.maxTextureSize);je=ze(B,je);const nt=s.convert(B.format,B.colorSpace),ot=s.convert(B.type);let it=A(B.internalFormat,nt,ot,B.colorSpace,B.isVideoTexture);Y(ye,B);let Xe;const fe=B.mipmaps,Fe=B.isVideoTexture!==!0,ut=Je.__version===void 0||Se===!0,ue=ke.dataReady,Ve=F(B,je);if(B.isDepthTexture)it=R(B.format===jf,B.type),ut&&(Fe?t.texStorage2D(r.TEXTURE_2D,1,it,je.width,je.height):t.texImage2D(r.TEXTURE_2D,0,it,je.width,je.height,0,nt,ot,null));else if(B.isDataTexture)if(fe.length>0){Fe&&ut&&t.texStorage2D(r.TEXTURE_2D,Ve,it,fe[0].width,fe[0].height);for(let Re=0,Ye=fe.length;Re<Ye;Re++)Xe=fe[Re],Fe?ue&&t.texSubImage2D(r.TEXTURE_2D,Re,0,0,Xe.width,Xe.height,nt,ot,Xe.data):t.texImage2D(r.TEXTURE_2D,Re,it,Xe.width,Xe.height,0,nt,ot,Xe.data);B.generateMipmaps=!1}else Fe?(ut&&t.texStorage2D(r.TEXTURE_2D,Ve,it,je.width,je.height),ue&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,je.width,je.height,nt,ot,je.data)):t.texImage2D(r.TEXTURE_2D,0,it,je.width,je.height,0,nt,ot,je.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Fe&&ut&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ve,it,fe[0].width,fe[0].height,je.depth);for(let Re=0,Ye=fe.length;Re<Ye;Re++)if(Xe=fe[Re],B.format!==br)if(nt!==null)if(Fe){if(ue)if(B.layerUpdates.size>0){const et=ox(Xe.width,Xe.height,B.format,B.type);for(const $e of B.layerUpdates){const vt=Xe.data.subarray($e*et/Xe.data.BYTES_PER_ELEMENT,($e+1)*et/Xe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Re,0,0,$e,Xe.width,Xe.height,1,nt,vt)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Re,0,0,0,Xe.width,Xe.height,je.depth,nt,Xe.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Re,it,Xe.width,Xe.height,je.depth,0,Xe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Fe?ue&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Re,0,0,0,Xe.width,Xe.height,je.depth,nt,ot,Xe.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Re,it,Xe.width,Xe.height,je.depth,0,nt,ot,Xe.data)}else{Fe&&ut&&t.texStorage2D(r.TEXTURE_2D,Ve,it,fe[0].width,fe[0].height);for(let Re=0,Ye=fe.length;Re<Ye;Re++)Xe=fe[Re],B.format!==br?nt!==null?Fe?ue&&t.compressedTexSubImage2D(r.TEXTURE_2D,Re,0,0,Xe.width,Xe.height,nt,Xe.data):t.compressedTexImage2D(r.TEXTURE_2D,Re,it,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fe?ue&&t.texSubImage2D(r.TEXTURE_2D,Re,0,0,Xe.width,Xe.height,nt,ot,Xe.data):t.texImage2D(r.TEXTURE_2D,Re,it,Xe.width,Xe.height,0,nt,ot,Xe.data)}else if(B.isDataArrayTexture)if(Fe){if(ut&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ve,it,je.width,je.height,je.depth),ue)if(B.layerUpdates.size>0){const Re=ox(je.width,je.height,B.format,B.type);for(const Ye of B.layerUpdates){const et=je.data.subarray(Ye*Re/je.data.BYTES_PER_ELEMENT,(Ye+1)*Re/je.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ye,je.width,je.height,1,nt,ot,et)}B.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,nt,ot,je.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,it,je.width,je.height,je.depth,0,nt,ot,je.data);else if(B.isData3DTexture)Fe?(ut&&t.texStorage3D(r.TEXTURE_3D,Ve,it,je.width,je.height,je.depth),ue&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,nt,ot,je.data)):t.texImage3D(r.TEXTURE_3D,0,it,je.width,je.height,je.depth,0,nt,ot,je.data);else if(B.isFramebufferTexture){if(ut)if(Fe)t.texStorage2D(r.TEXTURE_2D,Ve,it,je.width,je.height);else{let Re=je.width,Ye=je.height;for(let et=0;et<Ve;et++)t.texImage2D(r.TEXTURE_2D,et,it,Re,Ye,0,nt,ot,null),Re>>=1,Ye>>=1}}else if(fe.length>0){if(Fe&&ut){const Re=_e(fe[0]);t.texStorage2D(r.TEXTURE_2D,Ve,it,Re.width,Re.height)}for(let Re=0,Ye=fe.length;Re<Ye;Re++)Xe=fe[Re],Fe?ue&&t.texSubImage2D(r.TEXTURE_2D,Re,0,0,nt,ot,Xe):t.texImage2D(r.TEXTURE_2D,Re,it,nt,ot,Xe);B.generateMipmaps=!1}else if(Fe){if(ut){const Re=_e(je);t.texStorage2D(r.TEXTURE_2D,Ve,it,Re.width,Re.height)}ue&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,nt,ot,je)}else t.texImage2D(r.TEXTURE_2D,0,it,nt,ot,je);M(B)&&S(ye),Je.__version=ke.version,B.onUpdate&&B.onUpdate(B)}V.__version=B.version}function re(V,B,oe){if(B.image.length!==6)return;const ye=ce(V,B),Se=B.source;t.bindTexture(r.TEXTURE_CUBE_MAP,V.__webglTexture,r.TEXTURE0+oe);const ke=n.get(Se);if(Se.version!==ke.__version||ye===!0){t.activeTexture(r.TEXTURE0+oe);const Je=xn.getPrimaries(xn.workingColorSpace),He=B.colorSpace===Wa?null:xn.getPrimaries(B.colorSpace),Ke=B.colorSpace===Wa||Je===He?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,B.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,B.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);const gt=B.isCompressedTexture||B.image[0].isCompressedTexture,je=B.image[0]&&B.image[0].isDataTexture,nt=[];for(let Ye=0;Ye<6;Ye++)!gt&&!je?nt[Ye]=E(B.image[Ye],!0,i.maxCubemapSize):nt[Ye]=je?B.image[Ye].image:B.image[Ye],nt[Ye]=ze(B,nt[Ye]);const ot=nt[0],it=s.convert(B.format,B.colorSpace),Xe=s.convert(B.type),fe=A(B.internalFormat,it,Xe,B.colorSpace),Fe=B.isVideoTexture!==!0,ut=ke.__version===void 0||ye===!0,ue=Se.dataReady;let Ve=F(B,ot);Y(r.TEXTURE_CUBE_MAP,B);let Re;if(gt){Fe&&ut&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Ve,fe,ot.width,ot.height);for(let Ye=0;Ye<6;Ye++){Re=nt[Ye].mipmaps;for(let et=0;et<Re.length;et++){const $e=Re[et];B.format!==br?it!==null?Fe?ue&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et,0,0,$e.width,$e.height,it,$e.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et,fe,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fe?ue&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et,0,0,$e.width,$e.height,it,Xe,$e.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et,fe,$e.width,$e.height,0,it,Xe,$e.data)}}}else{if(Re=B.mipmaps,Fe&&ut){Re.length>0&&Ve++;const Ye=_e(nt[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Ve,fe,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(je){Fe?ue&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,nt[Ye].width,nt[Ye].height,it,Xe,nt[Ye].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,fe,nt[Ye].width,nt[Ye].height,0,it,Xe,nt[Ye].data);for(let et=0;et<Re.length;et++){const vt=Re[et].image[Ye].image;Fe?ue&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et+1,0,0,vt.width,vt.height,it,Xe,vt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et+1,fe,vt.width,vt.height,0,it,Xe,vt.data)}}else{Fe?ue&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,it,Xe,nt[Ye]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,fe,it,Xe,nt[Ye]);for(let et=0;et<Re.length;et++){const $e=Re[et];Fe?ue&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et+1,0,0,it,Xe,$e.image[Ye]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,et+1,fe,it,Xe,$e.image[Ye])}}}M(B)&&S(r.TEXTURE_CUBE_MAP),ke.__version=Se.version,B.onUpdate&&B.onUpdate(B)}V.__version=B.version}function pe(V,B,oe,ye,Se,ke){const Je=s.convert(oe.format,oe.colorSpace),He=s.convert(oe.type),Ke=A(oe.internalFormat,Je,He,oe.colorSpace),gt=n.get(B),je=n.get(oe);if(je.__renderTarget=B,!gt.__hasExternalTextures){const nt=Math.max(1,B.width>>ke),ot=Math.max(1,B.height>>ke);Se===r.TEXTURE_3D||Se===r.TEXTURE_2D_ARRAY?t.texImage3D(Se,ke,Ke,nt,ot,B.depth,0,Je,He,null):t.texImage2D(Se,ke,Ke,nt,ot,0,Je,He,null)}t.bindFramebuffer(r.FRAMEBUFFER,V),Le(B)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,ye,Se,je.__webglTexture,0,Ae(B)):(Se===r.TEXTURE_2D||Se>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,ye,Se,je.__webglTexture,ke),t.bindFramebuffer(r.FRAMEBUFFER,null)}function $(V,B,oe){if(r.bindRenderbuffer(r.RENDERBUFFER,V),B.depthBuffer){const ye=B.depthTexture,Se=ye&&ye.isDepthTexture?ye.type:null,ke=R(B.stencilBuffer,Se),Je=B.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,He=Ae(B);Le(B)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,He,ke,B.width,B.height):oe?r.renderbufferStorageMultisample(r.RENDERBUFFER,He,ke,B.width,B.height):r.renderbufferStorage(r.RENDERBUFFER,ke,B.width,B.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,Je,r.RENDERBUFFER,V)}else{const ye=B.textures;for(let Se=0;Se<ye.length;Se++){const ke=ye[Se],Je=s.convert(ke.format,ke.colorSpace),He=s.convert(ke.type),Ke=A(ke.internalFormat,Je,He,ke.colorSpace),gt=Ae(B);oe&&Le(B)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,gt,Ke,B.width,B.height):Le(B)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,gt,Ke,B.width,B.height):r.renderbufferStorage(r.RENDERBUFFER,Ke,B.width,B.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ie(V,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,V),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ye=n.get(B.depthTexture);ye.__renderTarget=B,(!ye.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),de(B.depthTexture,0);const Se=ye.__webglTexture,ke=Ae(B);if(B.depthTexture.format===Wf)Le(B)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Se,0,ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Se,0);else if(B.depthTexture.format===jf)Le(B)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Se,0,ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function Te(V){const B=n.get(V),oe=V.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==V.depthTexture){const ye=V.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),ye){const Se=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,ye.removeEventListener("dispose",Se)};ye.addEventListener("dispose",Se),B.__depthDisposeCallback=Se}B.__boundDepthTexture=ye}if(V.depthTexture&&!B.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");ie(B.__webglFramebuffer,V)}else if(oe){B.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)if(t.bindFramebuffer(r.FRAMEBUFFER,B.__webglFramebuffer[ye]),B.__webglDepthbuffer[ye]===void 0)B.__webglDepthbuffer[ye]=r.createRenderbuffer(),$(B.__webglDepthbuffer[ye],V,!1);else{const Se=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ke=B.__webglDepthbuffer[ye];r.bindRenderbuffer(r.RENDERBUFFER,ke),r.framebufferRenderbuffer(r.FRAMEBUFFER,Se,r.RENDERBUFFER,ke)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=r.createRenderbuffer(),$(B.__webglDepthbuffer,V,!1);else{const ye=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Se=B.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Se),r.framebufferRenderbuffer(r.FRAMEBUFFER,ye,r.RENDERBUFFER,Se)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Ce(V,B,oe){const ye=n.get(V);B!==void 0&&pe(ye.__webglFramebuffer,V,V.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),oe!==void 0&&Te(V)}function Pe(V){const B=V.texture,oe=n.get(V),ye=n.get(B);V.addEventListener("dispose",O);const Se=V.textures,ke=V.isWebGLCubeRenderTarget===!0,Je=Se.length>1;if(Je||(ye.__webglTexture===void 0&&(ye.__webglTexture=r.createTexture()),ye.__version=B.version,a.memory.textures++),ke){oe.__webglFramebuffer=[];for(let He=0;He<6;He++)if(B.mipmaps&&B.mipmaps.length>0){oe.__webglFramebuffer[He]=[];for(let Ke=0;Ke<B.mipmaps.length;Ke++)oe.__webglFramebuffer[He][Ke]=r.createFramebuffer()}else oe.__webglFramebuffer[He]=r.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){oe.__webglFramebuffer=[];for(let He=0;He<B.mipmaps.length;He++)oe.__webglFramebuffer[He]=r.createFramebuffer()}else oe.__webglFramebuffer=r.createFramebuffer();if(Je)for(let He=0,Ke=Se.length;He<Ke;He++){const gt=n.get(Se[He]);gt.__webglTexture===void 0&&(gt.__webglTexture=r.createTexture(),a.memory.textures++)}if(V.samples>0&&Le(V)===!1){oe.__webglMultisampledFramebuffer=r.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let He=0;He<Se.length;He++){const Ke=Se[He];oe.__webglColorRenderbuffer[He]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,oe.__webglColorRenderbuffer[He]);const gt=s.convert(Ke.format,Ke.colorSpace),je=s.convert(Ke.type),nt=A(Ke.internalFormat,gt,je,Ke.colorSpace,V.isXRRenderTarget===!0),ot=Ae(V);r.renderbufferStorageMultisample(r.RENDERBUFFER,ot,nt,V.width,V.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+He,r.RENDERBUFFER,oe.__webglColorRenderbuffer[He])}r.bindRenderbuffer(r.RENDERBUFFER,null),V.depthBuffer&&(oe.__webglDepthRenderbuffer=r.createRenderbuffer(),$(oe.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ke){t.bindTexture(r.TEXTURE_CUBE_MAP,ye.__webglTexture),Y(r.TEXTURE_CUBE_MAP,B);for(let He=0;He<6;He++)if(B.mipmaps&&B.mipmaps.length>0)for(let Ke=0;Ke<B.mipmaps.length;Ke++)pe(oe.__webglFramebuffer[He][Ke],V,B,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+He,Ke);else pe(oe.__webglFramebuffer[He],V,B,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);M(B)&&S(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Je){for(let He=0,Ke=Se.length;He<Ke;He++){const gt=Se[He],je=n.get(gt);t.bindTexture(r.TEXTURE_2D,je.__webglTexture),Y(r.TEXTURE_2D,gt),pe(oe.__webglFramebuffer,V,gt,r.COLOR_ATTACHMENT0+He,r.TEXTURE_2D,0),M(gt)&&S(r.TEXTURE_2D)}t.unbindTexture()}else{let He=r.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(He=V.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(He,ye.__webglTexture),Y(He,B),B.mipmaps&&B.mipmaps.length>0)for(let Ke=0;Ke<B.mipmaps.length;Ke++)pe(oe.__webglFramebuffer[Ke],V,B,r.COLOR_ATTACHMENT0,He,Ke);else pe(oe.__webglFramebuffer,V,B,r.COLOR_ATTACHMENT0,He,0);M(B)&&S(He),t.unbindTexture()}V.depthBuffer&&Te(V)}function Ie(V){const B=V.textures;for(let oe=0,ye=B.length;oe<ye;oe++){const Se=B[oe];if(M(Se)){const ke=T(V),Je=n.get(Se).__webglTexture;t.bindTexture(ke,Je),S(ke),t.unbindTexture()}}}const Qe=[],ee=[];function lt(V){if(V.samples>0){if(Le(V)===!1){const B=V.textures,oe=V.width,ye=V.height;let Se=r.COLOR_BUFFER_BIT;const ke=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Je=n.get(V),He=B.length>1;if(He)for(let Ke=0;Ke<B.length;Ke++)t.bindFramebuffer(r.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ke,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ke,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Je.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Je.__webglFramebuffer);for(let Ke=0;Ke<B.length;Ke++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(Se|=r.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(Se|=r.STENCIL_BUFFER_BIT)),He){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Je.__webglColorRenderbuffer[Ke]);const gt=n.get(B[Ke]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,gt,0)}r.blitFramebuffer(0,0,oe,ye,0,0,oe,ye,Se,r.NEAREST),c===!0&&(Qe.length=0,ee.length=0,Qe.push(r.COLOR_ATTACHMENT0+Ke),V.depthBuffer&&V.resolveDepthBuffer===!1&&(Qe.push(ke),ee.push(ke),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ee)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Qe))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),He)for(let Ke=0;Ke<B.length;Ke++){t.bindFramebuffer(r.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ke,r.RENDERBUFFER,Je.__webglColorRenderbuffer[Ke]);const gt=n.get(B[Ke]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ke,r.TEXTURE_2D,gt,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Je.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&c){const B=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[B])}}}function Ae(V){return Math.min(i.maxSamples,V.samples)}function Le(V){const B=n.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function ge(V){const B=a.render.frame;p.get(V)!==B&&(p.set(V,B),V.update())}function ze(V,B){const oe=V.colorSpace,ye=V.format,Se=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||oe!==cc&&oe!==Wa&&(xn.getTransfer(oe)===Cn?(ye!==br||Se!==To)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),B}function _e(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(d.width=V.naturalWidth||V.width,d.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(d.width=V.displayWidth,d.height=V.displayHeight):(d.width=V.width,d.height=V.height),d}this.allocateTextureUnit=K,this.resetTextureUnits=X,this.setTexture2D=de,this.setTexture2DArray=ae,this.setTexture3D=me,this.setTextureCube=H,this.rebindTextures=Ce,this.setupRenderTarget=Pe,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=lt,this.setupDepthRenderbuffer=Te,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Le}function tE(r,e){function t(n,i=Wa){let s;const a=xn.getTransfer(i);if(n===To)return r.UNSIGNED_BYTE;if(n===_0)return r.UNSIGNED_SHORT_4_4_4_4;if(n===S0)return r.UNSIGNED_SHORT_5_5_5_1;if(n===Cx)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===Tx)return r.BYTE;if(n===Ax)return r.SHORT;if(n===Hf)return r.UNSIGNED_SHORT;if(n===x0)return r.INT;if(n===Ka)return r.UNSIGNED_INT;if(n===us)return r.FLOAT;if(n===Qf)return r.HALF_FLOAT;if(n===Rx)return r.ALPHA;if(n===Px)return r.RGB;if(n===br)return r.RGBA;if(n===Ix)return r.LUMINANCE;if(n===Lx)return r.LUMINANCE_ALPHA;if(n===Wf)return r.DEPTH_COMPONENT;if(n===jf)return r.DEPTH_STENCIL;if(n===w0)return r.RED;if(n===sp)return r.RED_INTEGER;if(n===Dx)return r.RG;if(n===M0)return r.RG_INTEGER;if(n===E0)return r.RGBA_INTEGER;if(n===_h||n===Sh||n===wh||n===Mh)if(a===Cn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===_h)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Sh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===wh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Mh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===_h)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Sh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===wh)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Mh)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Rg||n===Pg||n===Ig||n===Lg)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Rg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Pg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ig)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Lg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Dg||n===kg||n===Ng)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Dg||n===kg)return a===Cn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Ng)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Ug||n===Fg||n===Og||n===Bg||n===zg||n===Vg||n===Hg||n===Gg||n===Wg||n===jg||n===Xg||n===Yg||n===qg||n===Jg)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Ug)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Fg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Og)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Bg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===zg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Vg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Hg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Gg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Wg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===jg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Xg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Yg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===qg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Jg)return a===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Eh||n===Zg||n===Kg)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Eh)return a===Cn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Zg)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Kg)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===kx||n===Qg||n===$g||n===e0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Eh)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Qg)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===$g)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===e0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Gf?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const pD=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,mD=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class gD{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new ri,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ao({vertexShader:pD,fragmentShader:mD,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ii(new tl(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class vD extends na{constructor(e,t){super();const n=this;let i=null,s=1,a=null,l="local-floor",c=1,d=null,p=null,g=null,v=null,y=null,w=null;const E=new gD,M=t.getContextAttributes();let S=null,T=null;const A=[],R=[],F=new Ze;let N=null;const O=new _i;O.viewport=new vn;const z=new _i;z.viewport=new vn;const k=[O,z],L=new W2;let W=null,X=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let re=A[Q];return re===void 0&&(re=new pg,A[Q]=re),re.getTargetRaySpace()},this.getControllerGrip=function(Q){let re=A[Q];return re===void 0&&(re=new pg,A[Q]=re),re.getGripSpace()},this.getHand=function(Q){let re=A[Q];return re===void 0&&(re=new pg,A[Q]=re),re.getHandSpace()};function K(Q){const re=R.indexOf(Q.inputSource);if(re===-1)return;const pe=A[re];pe!==void 0&&(pe.update(Q.inputSource,Q.frame,d||a),pe.dispatchEvent({type:Q.type,data:Q.inputSource}))}function ne(){i.removeEventListener("select",K),i.removeEventListener("selectstart",K),i.removeEventListener("selectend",K),i.removeEventListener("squeeze",K),i.removeEventListener("squeezestart",K),i.removeEventListener("squeezeend",K),i.removeEventListener("end",ne),i.removeEventListener("inputsourceschange",de);for(let Q=0;Q<A.length;Q++){const re=R[Q];re!==null&&(R[Q]=null,A[Q].disconnect(re))}W=null,X=null,E.reset(),e.setRenderTarget(S),y=null,v=null,g=null,i=null,T=null,ce.stop(),n.isPresenting=!1,e.setPixelRatio(N),e.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){l=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(Q){d=Q},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return g},this.getFrame=function(){return w},this.getSession=function(){return i},this.setSession=async function(Q){if(i=Q,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",K),i.addEventListener("selectstart",K),i.addEventListener("selectend",K),i.addEventListener("squeeze",K),i.addEventListener("squeezestart",K),i.addEventListener("squeezeend",K),i.addEventListener("end",ne),i.addEventListener("inputsourceschange",de),M.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(F),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let pe=null,$=null,ie=null;M.depth&&(ie=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=M.stencil?jf:Wf,$=M.stencil?Gf:Ka);const Te={colorFormat:t.RGBA8,depthFormat:ie,scaleFactor:s};g=new XRWebGLBinding(i,t),v=g.createProjectionLayer(Te),i.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),T=new ta(v.textureWidth,v.textureHeight,{format:br,type:To,depthTexture:new Xx(v.textureWidth,v.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const pe={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(i,t,pe),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),T=new ta(y.framebufferWidth,y.framebufferHeight,{format:br,type:To,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(c),d=null,a=await i.requestReferenceSpace(l),ce.setContext(i),ce.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function de(Q){for(let re=0;re<Q.removed.length;re++){const pe=Q.removed[re],$=R.indexOf(pe);$>=0&&(R[$]=null,A[$].disconnect(pe))}for(let re=0;re<Q.added.length;re++){const pe=Q.added[re];let $=R.indexOf(pe);if($===-1){for(let Te=0;Te<A.length;Te++)if(Te>=R.length){R.push(pe),$=Te;break}else if(R[Te]===null){R[Te]=pe,$=Te;break}if($===-1)break}const ie=A[$];ie&&ie.connect(pe)}}const ae=new te,me=new te;function H(Q,re,pe){ae.setFromMatrixPosition(re.matrixWorld),me.setFromMatrixPosition(pe.matrixWorld);const $=ae.distanceTo(me),ie=re.projectionMatrix.elements,Te=pe.projectionMatrix.elements,Ce=ie[14]/(ie[10]-1),Pe=ie[14]/(ie[10]+1),Ie=(ie[9]+1)/ie[5],Qe=(ie[9]-1)/ie[5],ee=(ie[8]-1)/ie[0],lt=(Te[8]+1)/Te[0],Ae=Ce*ee,Le=Ce*lt,ge=$/(-ee+lt),ze=ge*-ee;if(re.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(ze),Q.translateZ(ge),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert(),ie[10]===-1)Q.projectionMatrix.copy(re.projectionMatrix),Q.projectionMatrixInverse.copy(re.projectionMatrixInverse);else{const _e=Ce+ge,V=Pe+ge,B=Ae-ze,oe=Le+($-ze),ye=Ie*Pe/V*_e,Se=Qe*Pe/V*_e;Q.projectionMatrix.makePerspective(B,oe,ye,Se,_e,V),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}}function J(Q,re){re===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(re.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(i===null)return;let re=Q.near,pe=Q.far;E.texture!==null&&(E.depthNear>0&&(re=E.depthNear),E.depthFar>0&&(pe=E.depthFar)),L.near=z.near=O.near=re,L.far=z.far=O.far=pe,(W!==L.near||X!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),W=L.near,X=L.far),O.layers.mask=Q.layers.mask|2,z.layers.mask=Q.layers.mask|4,L.layers.mask=O.layers.mask|z.layers.mask;const $=Q.parent,ie=L.cameras;J(L,$);for(let Te=0;Te<ie.length;Te++)J(ie[Te],$);ie.length===2?H(L,O,z):L.projectionMatrix.copy(O.projectionMatrix),j(Q,L,$)};function j(Q,re,pe){pe===null?Q.matrix.copy(re.matrixWorld):(Q.matrix.copy(pe.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(re.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(re.projectionMatrix),Q.projectionMatrixInverse.copy(re.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=Xf*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(Q){c=Q,v!==null&&(v.fixedFoveation=Q),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=Q)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(L)};let D=null;function Y(Q,re){if(p=re.getViewerPose(d||a),w=re,p!==null){const pe=p.views;y!==null&&(e.setRenderTargetFramebuffer(T,y.framebuffer),e.setRenderTarget(T));let $=!1;pe.length!==L.cameras.length&&(L.cameras.length=0,$=!0);for(let Ce=0;Ce<pe.length;Ce++){const Pe=pe[Ce];let Ie=null;if(y!==null)Ie=y.getViewport(Pe);else{const ee=g.getViewSubImage(v,Pe);Ie=ee.viewport,Ce===0&&(e.setRenderTargetTextures(T,ee.colorTexture,ee.depthStencilTexture),e.setRenderTarget(T))}let Qe=k[Ce];Qe===void 0&&(Qe=new _i,Qe.layers.enable(Ce),Qe.viewport=new vn,k[Ce]=Qe),Qe.matrix.fromArray(Pe.transform.matrix),Qe.matrix.decompose(Qe.position,Qe.quaternion,Qe.scale),Qe.projectionMatrix.fromArray(Pe.projectionMatrix),Qe.projectionMatrixInverse.copy(Qe.projectionMatrix).invert(),Qe.viewport.set(Ie.x,Ie.y,Ie.width,Ie.height),Ce===0&&(L.matrix.copy(Qe.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),$===!0&&L.cameras.push(Qe)}const ie=i.enabledFeatures;if(ie&&ie.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&g){const Ce=g.getDepthInformation(pe[0]);Ce&&Ce.isValid&&Ce.texture&&E.init(e,Ce,i.renderState)}}for(let pe=0;pe<A.length;pe++){const $=R[pe],ie=A[pe];$!==null&&ie!==void 0&&ie.update($,re,d||a)}D&&D(Q,re),re.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:re}),w=null}const ce=new Z2;ce.setAnimationLoop(Y),this.setAnimationLoop=function(Q){D=Q},this.dispose=function(){}}}const Xu=new bs,yD=new Wt;function xD(r,e){function t(M,S){M.matrixAutoUpdate===!0&&M.updateMatrix(),S.value.copy(M.matrix)}function n(M,S){S.color.getRGB(M.fogColor.value,KM(r)),S.isFog?(M.fogNear.value=S.near,M.fogFar.value=S.far):S.isFogExp2&&(M.fogDensity.value=S.density)}function i(M,S,T,A,R){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(M,S):S.isMeshToonMaterial?(s(M,S),g(M,S)):S.isMeshPhongMaterial?(s(M,S),p(M,S)):S.isMeshStandardMaterial?(s(M,S),v(M,S),S.isMeshPhysicalMaterial&&y(M,S,R)):S.isMeshMatcapMaterial?(s(M,S),w(M,S)):S.isMeshDepthMaterial?s(M,S):S.isMeshDistanceMaterial?(s(M,S),E(M,S)):S.isMeshNormalMaterial?s(M,S):S.isLineBasicMaterial?(a(M,S),S.isLineDashedMaterial&&l(M,S)):S.isPointsMaterial?c(M,S,T,A):S.isSpriteMaterial?d(M,S):S.isShadowMaterial?(M.color.value.copy(S.color),M.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(M,S){M.opacity.value=S.opacity,S.color&&M.diffuse.value.copy(S.color),S.emissive&&M.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(M.map.value=S.map,t(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,t(S.alphaMap,M.alphaMapTransform)),S.bumpMap&&(M.bumpMap.value=S.bumpMap,t(S.bumpMap,M.bumpMapTransform),M.bumpScale.value=S.bumpScale,S.side===Wr&&(M.bumpScale.value*=-1)),S.normalMap&&(M.normalMap.value=S.normalMap,t(S.normalMap,M.normalMapTransform),M.normalScale.value.copy(S.normalScale),S.side===Wr&&M.normalScale.value.negate()),S.displacementMap&&(M.displacementMap.value=S.displacementMap,t(S.displacementMap,M.displacementMapTransform),M.displacementScale.value=S.displacementScale,M.displacementBias.value=S.displacementBias),S.emissiveMap&&(M.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,M.emissiveMapTransform)),S.specularMap&&(M.specularMap.value=S.specularMap,t(S.specularMap,M.specularMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest);const T=e.get(S),A=T.envMap,R=T.envMapRotation;A&&(M.envMap.value=A,Xu.copy(R),Xu.x*=-1,Xu.y*=-1,Xu.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(Xu.y*=-1,Xu.z*=-1),M.envMapRotation.value.setFromMatrix4(yD.makeRotationFromEuler(Xu)),M.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=S.reflectivity,M.ior.value=S.ior,M.refractionRatio.value=S.refractionRatio),S.lightMap&&(M.lightMap.value=S.lightMap,M.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,M.lightMapTransform)),S.aoMap&&(M.aoMap.value=S.aoMap,M.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,M.aoMapTransform))}function a(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,S.map&&(M.map.value=S.map,t(S.map,M.mapTransform))}function l(M,S){M.dashSize.value=S.dashSize,M.totalSize.value=S.dashSize+S.gapSize,M.scale.value=S.scale}function c(M,S,T,A){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.size.value=S.size*T,M.scale.value=A*.5,S.map&&(M.map.value=S.map,t(S.map,M.uvTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,t(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function d(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.rotation.value=S.rotation,S.map&&(M.map.value=S.map,t(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,t(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function p(M,S){M.specular.value.copy(S.specular),M.shininess.value=Math.max(S.shininess,1e-4)}function g(M,S){S.gradientMap&&(M.gradientMap.value=S.gradientMap)}function v(M,S){M.metalness.value=S.metalness,S.metalnessMap&&(M.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,M.metalnessMapTransform)),M.roughness.value=S.roughness,S.roughnessMap&&(M.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,M.roughnessMapTransform)),S.envMap&&(M.envMapIntensity.value=S.envMapIntensity)}function y(M,S,T){M.ior.value=S.ior,S.sheen>0&&(M.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),M.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(M.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,M.sheenColorMapTransform)),S.sheenRoughnessMap&&(M.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,M.sheenRoughnessMapTransform))),S.clearcoat>0&&(M.clearcoat.value=S.clearcoat,M.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(M.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,M.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(M.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Wr&&M.clearcoatNormalScale.value.negate())),S.dispersion>0&&(M.dispersion.value=S.dispersion),S.iridescence>0&&(M.iridescence.value=S.iridescence,M.iridescenceIOR.value=S.iridescenceIOR,M.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(M.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,M.iridescenceMapTransform)),S.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),S.transmission>0&&(M.transmission.value=S.transmission,M.transmissionSamplerMap.value=T.texture,M.transmissionSamplerSize.value.set(T.width,T.height),S.transmissionMap&&(M.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,M.transmissionMapTransform)),M.thickness.value=S.thickness,S.thicknessMap&&(M.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=S.attenuationDistance,M.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(M.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(M.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=S.specularIntensity,M.specularColor.value.copy(S.specularColor),S.specularColorMap&&(M.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,M.specularColorMapTransform)),S.specularIntensityMap&&(M.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,M.specularIntensityMapTransform))}function w(M,S){S.matcap&&(M.matcap.value=S.matcap)}function E(M,S){const T=e.get(S).light;M.referencePosition.value.setFromMatrixPosition(T.matrixWorld),M.nearDistance.value=T.shadow.camera.near,M.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function _D(r,e,t,n){let i={},s={},a=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function c(T,A){const R=A.program;n.uniformBlockBinding(T,R)}function d(T,A){let R=i[T.id];R===void 0&&(w(T),R=p(T),i[T.id]=R,T.addEventListener("dispose",M));const F=A.program;n.updateUBOMapping(T,F);const N=e.render.frame;s[T.id]!==N&&(v(T),s[T.id]=N)}function p(T){const A=g();T.__bindingPointIndex=A;const R=r.createBuffer(),F=T.__size,N=T.usage;return r.bindBuffer(r.UNIFORM_BUFFER,R),r.bufferData(r.UNIFORM_BUFFER,F,N),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,A,R),R}function g(){for(let T=0;T<l;T++)if(a.indexOf(T)===-1)return a.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(T){const A=i[T.id],R=T.uniforms,F=T.__cache;r.bindBuffer(r.UNIFORM_BUFFER,A);for(let N=0,O=R.length;N<O;N++){const z=Array.isArray(R[N])?R[N]:[R[N]];for(let k=0,L=z.length;k<L;k++){const W=z[k];if(y(W,N,k,F)===!0){const X=W.__offset,K=Array.isArray(W.value)?W.value:[W.value];let ne=0;for(let de=0;de<K.length;de++){const ae=K[de],me=E(ae);typeof ae=="number"||typeof ae=="boolean"?(W.__data[0]=ae,r.bufferSubData(r.UNIFORM_BUFFER,X+ne,W.__data)):ae.isMatrix3?(W.__data[0]=ae.elements[0],W.__data[1]=ae.elements[1],W.__data[2]=ae.elements[2],W.__data[3]=0,W.__data[4]=ae.elements[3],W.__data[5]=ae.elements[4],W.__data[6]=ae.elements[5],W.__data[7]=0,W.__data[8]=ae.elements[6],W.__data[9]=ae.elements[7],W.__data[10]=ae.elements[8],W.__data[11]=0):(ae.toArray(W.__data,ne),ne+=me.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,X,W.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function y(T,A,R,F){const N=T.value,O=A+"_"+R;if(F[O]===void 0)return typeof N=="number"||typeof N=="boolean"?F[O]=N:F[O]=N.clone(),!0;{const z=F[O];if(typeof N=="number"||typeof N=="boolean"){if(z!==N)return F[O]=N,!0}else if(z.equals(N)===!1)return z.copy(N),!0}return!1}function w(T){const A=T.uniforms;let R=0;const F=16;for(let O=0,z=A.length;O<z;O++){const k=Array.isArray(A[O])?A[O]:[A[O]];for(let L=0,W=k.length;L<W;L++){const X=k[L],K=Array.isArray(X.value)?X.value:[X.value];for(let ne=0,de=K.length;ne<de;ne++){const ae=K[ne],me=E(ae),H=R%F,J=H%me.boundary,j=H+J;R+=J,j!==0&&F-j<me.storage&&(R+=F-j),X.__data=new Float32Array(me.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=R,R+=me.storage}}}const N=R%F;return N>0&&(R+=F-N),T.__size=R,T.__cache={},this}function E(T){const A={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(A.boundary=4,A.storage=4):T.isVector2?(A.boundary=8,A.storage=8):T.isVector3||T.isColor?(A.boundary=16,A.storage=12):T.isVector4?(A.boundary=16,A.storage=16):T.isMatrix3?(A.boundary=48,A.storage=48):T.isMatrix4?(A.boundary=64,A.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),A}function M(T){const A=T.target;A.removeEventListener("dispose",M);const R=a.indexOf(A.__bindingPointIndex);a.splice(R,1),r.deleteBuffer(i[A.id]),delete i[A.id],delete s[A.id]}function S(){for(const T in i)r.deleteBuffer(i[T]);a=[],i={},s={}}return{bind:c,update:d,dispose:S}}class nE{constructor(e={}){const{canvas:t=qM(),context:n=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=a;const w=new Uint32Array(4),E=new Int32Array(4);let M=null,S=null;const T=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Qo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const R=this;let F=!1;this._outputColorSpace=as;let N=0,O=0,z=null,k=-1,L=null;const W=new vn,X=new vn;let K=null;const ne=new wt(0);let de=0,ae=t.width,me=t.height,H=1,J=null,j=null;const D=new vn(0,0,ae,me),Y=new vn(0,0,ae,me);let ce=!1;const Q=new up;let re=!1,pe=!1;const $=new Wt,ie=new Wt,Te=new te,Ce=new vn,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ie=!1;function Qe(){return z===null?H:1}let ee=n;function lt(q,Ee){return t.getContext(q,Ee)}try{const q={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${g0}`),t.addEventListener("webglcontextlost",Ye,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",$e,!1),ee===null){const Ee="webgl2";if(ee=lt(Ee,q),ee===null)throw lt(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let Ae,Le,ge,ze,_e,V,B,oe,ye,Se,ke,Je,He,Ke,gt,je,nt,ot,it,Xe,fe,Fe,ut,ue;function Ve(){Ae=new LI(ee),Ae.init(),Fe=new tE(ee,Ae),Le=new bI(ee,Ae,e,Fe),ge=new dD(ee,Ae),Le.reverseDepthBuffer&&v&&ge.buffers.depth.setReversed(!0),ze=new NI(ee),_e=new $L,V=new hD(ee,Ae,ge,_e,Le,Fe,ze),B=new AI(R),oe=new II(R),ye=new V3(ee),ut=new MI(ee,ye),Se=new DI(ee,ye,ze,ut),ke=new FI(ee,Se,ye,ze),it=new UI(ee,Le,V),je=new TI(_e),Je=new QL(R,B,oe,Ae,Le,ut,je),He=new xD(R,_e),Ke=new tD,gt=new aD(Ae),ot=new wI(R,B,oe,ge,ke,y,c),nt=new cD(R,ke,Le),ue=new _D(ee,ze,Le,ge),Xe=new EI(ee,Ae,ze),fe=new kI(ee,Ae,ze),ze.programs=Je.programs,R.capabilities=Le,R.extensions=Ae,R.properties=_e,R.renderLists=Ke,R.shadowMap=nt,R.state=ge,R.info=ze}Ve();const Re=new vD(R,ee);this.xr=Re,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const q=Ae.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=Ae.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(q){q!==void 0&&(H=q,this.setSize(ae,me,!1))},this.getSize=function(q){return q.set(ae,me)},this.setSize=function(q,Ee,Oe=!0){if(Re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=q,me=Ee,t.width=Math.floor(q*H),t.height=Math.floor(Ee*H),Oe===!0&&(t.style.width=q+"px",t.style.height=Ee+"px"),this.setViewport(0,0,q,Ee)},this.getDrawingBufferSize=function(q){return q.set(ae*H,me*H).floor()},this.setDrawingBufferSize=function(q,Ee,Oe){ae=q,me=Ee,H=Oe,t.width=Math.floor(q*Oe),t.height=Math.floor(Ee*Oe),this.setViewport(0,0,q,Ee)},this.getCurrentViewport=function(q){return q.copy(W)},this.getViewport=function(q){return q.copy(D)},this.setViewport=function(q,Ee,Oe,he){q.isVector4?D.set(q.x,q.y,q.z,q.w):D.set(q,Ee,Oe,he),ge.viewport(W.copy(D).multiplyScalar(H).round())},this.getScissor=function(q){return q.copy(Y)},this.setScissor=function(q,Ee,Oe,he){q.isVector4?Y.set(q.x,q.y,q.z,q.w):Y.set(q,Ee,Oe,he),ge.scissor(X.copy(Y).multiplyScalar(H).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(q){ge.setScissorTest(ce=q)},this.setOpaqueSort=function(q){J=q},this.setTransparentSort=function(q){j=q},this.getClearColor=function(q){return q.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor(...arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha(...arguments)},this.clear=function(q=!0,Ee=!0,Oe=!0){let he=0;if(q){let Me=!1;if(z!==null){const st=z.texture.format;Me=st===E0||st===M0||st===sp}if(Me){const st=z.texture.type,ht=st===To||st===Ka||st===Hf||st===Gf||st===_0||st===S0,yt=ot.getClearColor(),Mt=ot.getClearAlpha(),Ot=yt.r,Pt=yt.g,ct=yt.b;ht?(w[0]=Ot,w[1]=Pt,w[2]=ct,w[3]=Mt,ee.clearBufferuiv(ee.COLOR,0,w)):(E[0]=Ot,E[1]=Pt,E[2]=ct,E[3]=Mt,ee.clearBufferiv(ee.COLOR,0,E))}else he|=ee.COLOR_BUFFER_BIT}Ee&&(he|=ee.DEPTH_BUFFER_BIT),Oe&&(he|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ye,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",$e,!1),ot.dispose(),Ke.dispose(),gt.dispose(),_e.dispose(),B.dispose(),oe.dispose(),ke.dispose(),ut.dispose(),ue.dispose(),Je.dispose(),Re.dispose(),Re.removeEventListener("sessionstart",Rn),Re.removeEventListener("sessionend",si),hi.stop()};function Ye(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const q=ze.autoReset,Ee=nt.enabled,Oe=nt.autoUpdate,he=nt.needsUpdate,Me=nt.type;Ve(),ze.autoReset=q,nt.enabled=Ee,nt.autoUpdate=Oe,nt.needsUpdate=he,nt.type=Me}function $e(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function vt(q){const Ee=q.target;Ee.removeEventListener("dispose",vt),Dt(Ee)}function Dt(q){Et(q),_e.remove(q)}function Et(q){const Ee=_e.get(q).programs;Ee!==void 0&&(Ee.forEach(function(Oe){Je.releaseProgram(Oe)}),q.isShaderMaterial&&Je.releaseShaderCache(q))}this.renderBufferDirect=function(q,Ee,Oe,he,Me,st){Ee===null&&(Ee=Pe);const ht=Me.isMesh&&Me.matrixWorld.determinant()<0,yt=nl(q,Ee,Oe,he,Me);ge.setMaterial(he,ht);let Mt=Oe.index,Ot=1;if(he.wireframe===!0){if(Mt=Se.getWireframeAttribute(Oe),Mt===void 0)return;Ot=2}const Pt=Oe.drawRange,ct=Oe.attributes.position;let It=Pt.start*Ot,Bt=(Pt.start+Pt.count)*Ot;st!==null&&(It=Math.max(It,st.start*Ot),Bt=Math.min(Bt,(st.start+st.count)*Ot)),Mt!==null?(It=Math.max(It,0),Bt=Math.min(Bt,Mt.count)):ct!=null&&(It=Math.max(It,0),Bt=Math.min(Bt,ct.count));const sn=Bt-It;if(sn<0||sn===1/0)return;ut.setup(Me,he,yt,Oe,Mt);let tn,Zt=Xe;if(Mt!==null&&(tn=ye.get(Mt),Zt=fe,Zt.setIndex(tn)),Me.isMesh)he.wireframe===!0?(ge.setLineWidth(he.wireframeLinewidth*Qe()),Zt.setMode(ee.LINES)):Zt.setMode(ee.TRIANGLES);else if(Me.isLine){let Tt=he.linewidth;Tt===void 0&&(Tt=1),ge.setLineWidth(Tt*Qe()),Me.isLineSegments?Zt.setMode(ee.LINES):Me.isLineLoop?Zt.setMode(ee.LINE_LOOP):Zt.setMode(ee.LINE_STRIP)}else Me.isPoints?Zt.setMode(ee.POINTS):Me.isSprite&&Zt.setMode(ee.TRIANGLES);if(Me.isBatchedMesh)if(Me._multiDrawInstances!==null)hg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Zt.renderMultiDrawInstances(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount,Me._multiDrawInstances);else if(Ae.get("WEBGL_multi_draw"))Zt.renderMultiDraw(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount);else{const Tt=Me._multiDrawStarts,un=Me._multiDrawCounts,jt=Me._multiDrawCount,Zn=Mt?ye.get(Mt).bytesPerElement:1,Cr=_e.get(he).currentProgram.getUniforms();for(let jn=0;jn<jt;jn++)Cr.setValue(ee,"_gl_DrawID",jn),Zt.render(Tt[jn]/Zn,un[jn])}else if(Me.isInstancedMesh)Zt.renderInstances(It,sn,Me.count);else if(Oe.isInstancedBufferGeometry){const Tt=Oe._maxInstanceCount!==void 0?Oe._maxInstanceCount:1/0,un=Math.min(Oe.instanceCount,Tt);Zt.renderInstances(It,sn,un)}else Zt.render(It,sn)};function Ct(q,Ee,Oe){q.transparent===!0&&q.side===Mo&&q.forceSinglePass===!1?(q.side=Wr,q.needsUpdate=!0,hr(q,Ee,Oe),q.side=Ja,q.needsUpdate=!0,hr(q,Ee,Oe),q.side=Mo):hr(q,Ee,Oe)}this.compile=function(q,Ee,Oe=null){Oe===null&&(Oe=q),S=gt.get(Oe),S.init(Ee),A.push(S),Oe.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Ee.layers)&&(S.pushLight(Me),Me.castShadow&&S.pushShadow(Me))}),q!==Oe&&q.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Ee.layers)&&(S.pushLight(Me),Me.castShadow&&S.pushShadow(Me))}),S.setupLights();const he=new Set;return q.traverse(function(Me){if(!(Me.isMesh||Me.isPoints||Me.isLine||Me.isSprite))return;const st=Me.material;if(st)if(Array.isArray(st))for(let ht=0;ht<st.length;ht++){const yt=st[ht];Ct(yt,Oe,Me),he.add(yt)}else Ct(st,Oe,Me),he.add(st)}),S=A.pop(),he},this.compileAsync=function(q,Ee,Oe=null){const he=this.compile(q,Ee,Oe);return new Promise(Me=>{function st(){if(he.forEach(function(ht){_e.get(ht).currentProgram.isReady()&&he.delete(ht)}),he.size===0){Me(q);return}setTimeout(st,10)}Ae.get("KHR_parallel_shader_compile")!==null?st():setTimeout(st,10)})};let dn=null;function hn(q){dn&&dn(q)}function Rn(){hi.stop()}function si(){hi.start()}const hi=new Z2;hi.setAnimationLoop(hn),typeof self<"u"&&hi.setContext(self),this.setAnimationLoop=function(q){dn=q,Re.setAnimationLoop(q),q===null?hi.stop():hi.start()},Re.addEventListener("sessionstart",Rn),Re.addEventListener("sessionend",si),this.render=function(q,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),Re.enabled===!0&&Re.isPresenting===!0&&(Re.cameraAutoUpdate===!0&&Re.updateCamera(Ee),Ee=Re.getCamera()),q.isScene===!0&&q.onBeforeRender(R,q,Ee,z),S=gt.get(q,A.length),S.init(Ee),A.push(S),ie.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),Q.setFromProjectionMatrix(ie),pe=this.localClippingEnabled,re=je.init(this.clippingPlanes,pe),M=Ke.get(q,T.length),M.init(),T.push(M),Re.enabled===!0&&Re.isPresenting===!0){const st=R.xr.getDepthSensingMesh();st!==null&&Jn(st,Ee,-1/0,R.sortObjects)}Jn(q,Ee,0,R.sortObjects),M.finish(),R.sortObjects===!0&&M.sort(J,j),Ie=Re.enabled===!1||Re.isPresenting===!1||Re.hasDepthSensing()===!1,Ie&&ot.addToRenderList(M,q),this.info.render.frame++,re===!0&&je.beginShadows();const Oe=S.state.shadowsArray;nt.render(Oe,q,Ee),re===!0&&je.endShadows(),this.info.autoReset===!0&&this.info.reset();const he=M.opaque,Me=M.transmissive;if(S.setupLights(),Ee.isArrayCamera){const st=Ee.cameras;if(Me.length>0)for(let ht=0,yt=st.length;ht<yt;ht++){const Mt=st[ht];pi(he,Me,q,Mt)}Ie&&ot.render(q);for(let ht=0,yt=st.length;ht<yt;ht++){const Mt=st[ht];ji(M,q,Mt,Mt.viewport)}}else Me.length>0&&pi(he,Me,q,Ee),Ie&&ot.render(q),ji(M,q,Ee);z!==null&&O===0&&(V.updateMultisampleRenderTarget(z),V.updateRenderTargetMipmap(z)),q.isScene===!0&&q.onAfterRender(R,q,Ee),ut.resetDefaultState(),k=-1,L=null,A.pop(),A.length>0?(S=A[A.length-1],re===!0&&je.setGlobalState(R.clippingPlanes,S.state.camera)):S=null,T.pop(),T.length>0?M=T[T.length-1]:M=null};function Jn(q,Ee,Oe,he){if(q.visible===!1)return;if(q.layers.test(Ee.layers)){if(q.isGroup)Oe=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(Ee);else if(q.isLight)S.pushLight(q),q.castShadow&&S.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||Q.intersectsSprite(q)){he&&Ce.setFromMatrixPosition(q.matrixWorld).applyMatrix4(ie);const ht=ke.update(q),yt=q.material;yt.visible&&M.push(q,ht,yt,Oe,Ce.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||Q.intersectsObject(q))){const ht=ke.update(q),yt=q.material;if(he&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),Ce.copy(q.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),Ce.copy(ht.boundingSphere.center)),Ce.applyMatrix4(q.matrixWorld).applyMatrix4(ie)),Array.isArray(yt)){const Mt=ht.groups;for(let Ot=0,Pt=Mt.length;Ot<Pt;Ot++){const ct=Mt[Ot],It=yt[ct.materialIndex];It&&It.visible&&M.push(q,ht,It,Oe,Ce.z,ct)}}else yt.visible&&M.push(q,ht,yt,Oe,Ce.z,null)}}const st=q.children;for(let ht=0,yt=st.length;ht<yt;ht++)Jn(st[ht],Ee,Oe,he)}function ji(q,Ee,Oe,he){const Me=q.opaque,st=q.transmissive,ht=q.transparent;S.setupLightsView(Oe),re===!0&&je.setGlobalState(R.clippingPlanes,Oe),he&&ge.viewport(W.copy(he)),Me.length>0&&wi(Me,Ee,Oe),st.length>0&&wi(st,Ee,Oe),ht.length>0&&wi(ht,Ee,Oe),ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),ge.setPolygonOffset(!1)}function pi(q,Ee,Oe,he){if((Oe.isScene===!0?Oe.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[he.id]===void 0&&(S.state.transmissionRenderTarget[he.id]=new ta(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")||Ae.has("EXT_color_buffer_float")?Qf:To,minFilter:Ko,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xn.workingColorSpace}));const st=S.state.transmissionRenderTarget[he.id],ht=he.viewport||W;st.setSize(ht.z*R.transmissionResolutionScale,ht.w*R.transmissionResolutionScale);const yt=R.getRenderTarget();R.setRenderTarget(st),R.getClearColor(ne),de=R.getClearAlpha(),de<1&&R.setClearColor(16777215,.5),R.clear(),Ie&&ot.render(Oe);const Mt=R.toneMapping;R.toneMapping=Qo;const Ot=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),S.setupLightsView(he),re===!0&&je.setGlobalState(R.clippingPlanes,he),wi(q,Oe,he),V.updateMultisampleRenderTarget(st),V.updateRenderTargetMipmap(st),Ae.has("WEBGL_multisampled_render_to_texture")===!1){let Pt=!1;for(let ct=0,It=Ee.length;ct<It;ct++){const Bt=Ee[ct],sn=Bt.object,tn=Bt.geometry,Zt=Bt.material,Tt=Bt.group;if(Zt.side===Mo&&sn.layers.test(he.layers)){const un=Zt.side;Zt.side=Wr,Zt.needsUpdate=!0,oi(sn,Oe,he,tn,Zt,Tt),Zt.side=un,Zt.needsUpdate=!0,Pt=!0}}Pt===!0&&(V.updateMultisampleRenderTarget(st),V.updateRenderTargetMipmap(st))}R.setRenderTarget(yt),R.setClearColor(ne,de),Ot!==void 0&&(he.viewport=Ot),R.toneMapping=Mt}function wi(q,Ee,Oe){const he=Ee.isScene===!0?Ee.overrideMaterial:null;for(let Me=0,st=q.length;Me<st;Me++){const ht=q[Me],yt=ht.object,Mt=ht.geometry,Ot=ht.group;let Pt=ht.material;Pt.allowOverride===!0&&he!==null&&(Pt=he),yt.layers.test(Oe.layers)&&oi(yt,Ee,Oe,Mt,Pt,Ot)}}function oi(q,Ee,Oe,he,Me,st){q.onBeforeRender(R,Ee,Oe,he,Me,st),q.modelViewMatrix.multiplyMatrices(Oe.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),Me.onBeforeRender(R,Ee,Oe,he,q,st),Me.transparent===!0&&Me.side===Mo&&Me.forceSinglePass===!1?(Me.side=Wr,Me.needsUpdate=!0,R.renderBufferDirect(Oe,Ee,he,Me,q,st),Me.side=Ja,Me.needsUpdate=!0,R.renderBufferDirect(Oe,Ee,he,Me,q,st),Me.side=Mo):R.renderBufferDirect(Oe,Ee,he,Me,q,st),q.onAfterRender(R,Ee,Oe,he,Me,st)}function hr(q,Ee,Oe){Ee.isScene!==!0&&(Ee=Pe);const he=_e.get(q),Me=S.state.lights,st=S.state.shadowsArray,ht=Me.state.version,yt=Je.getParameters(q,Me.state,st,Ee,Oe),Mt=Je.getProgramCacheKey(yt);let Ot=he.programs;he.environment=q.isMeshStandardMaterial?Ee.environment:null,he.fog=Ee.fog,he.envMap=(q.isMeshStandardMaterial?oe:B).get(q.envMap||he.environment),he.envMapRotation=he.environment!==null&&q.envMap===null?Ee.environmentRotation:q.envMapRotation,Ot===void 0&&(q.addEventListener("dispose",vt),Ot=new Map,he.programs=Ot);let Pt=Ot.get(Mt);if(Pt!==void 0){if(he.currentProgram===Pt&&he.lightsStateVersion===ht)return pr(q,yt),Pt}else yt.uniforms=Je.getUniforms(q),q.onBeforeCompile(yt,R),Pt=Je.acquireProgram(yt,Mt),Ot.set(Mt,Pt),he.uniforms=yt.uniforms;const ct=he.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(ct.clippingPlanes=je.uniform),pr(q,yt),he.needsLights=Gs(q),he.lightsStateVersion=ht,he.needsLights&&(ct.ambientLightColor.value=Me.state.ambient,ct.lightProbe.value=Me.state.probe,ct.directionalLights.value=Me.state.directional,ct.directionalLightShadows.value=Me.state.directionalShadow,ct.spotLights.value=Me.state.spot,ct.spotLightShadows.value=Me.state.spotShadow,ct.rectAreaLights.value=Me.state.rectArea,ct.ltc_1.value=Me.state.rectAreaLTC1,ct.ltc_2.value=Me.state.rectAreaLTC2,ct.pointLights.value=Me.state.point,ct.pointLightShadows.value=Me.state.pointShadow,ct.hemisphereLights.value=Me.state.hemi,ct.directionalShadowMap.value=Me.state.directionalShadowMap,ct.directionalShadowMatrix.value=Me.state.directionalShadowMatrix,ct.spotShadowMap.value=Me.state.spotShadowMap,ct.spotLightMatrix.value=Me.state.spotLightMatrix,ct.spotLightMap.value=Me.state.spotLightMap,ct.pointShadowMap.value=Me.state.pointShadowMap,ct.pointShadowMatrix.value=Me.state.pointShadowMatrix),he.currentProgram=Pt,he.uniformsList=null,Pt}function ra(q){if(q.uniformsList===null){const Ee=q.currentProgram.getUniforms();q.uniformsList=mg.seqWithValue(Ee.seq,q.uniforms)}return q.uniformsList}function pr(q,Ee){const Oe=_e.get(q);Oe.outputColorSpace=Ee.outputColorSpace,Oe.batching=Ee.batching,Oe.batchingColor=Ee.batchingColor,Oe.instancing=Ee.instancing,Oe.instancingColor=Ee.instancingColor,Oe.instancingMorph=Ee.instancingMorph,Oe.skinning=Ee.skinning,Oe.morphTargets=Ee.morphTargets,Oe.morphNormals=Ee.morphNormals,Oe.morphColors=Ee.morphColors,Oe.morphTargetsCount=Ee.morphTargetsCount,Oe.numClippingPlanes=Ee.numClippingPlanes,Oe.numIntersection=Ee.numClipIntersection,Oe.vertexAlphas=Ee.vertexAlphas,Oe.vertexTangents=Ee.vertexTangents,Oe.toneMapping=Ee.toneMapping}function nl(q,Ee,Oe,he,Me){Ee.isScene!==!0&&(Ee=Pe),V.resetTextureUnits();const st=Ee.fog,ht=he.isMeshStandardMaterial?Ee.environment:null,yt=z===null?R.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:cc,Mt=(he.isMeshStandardMaterial?oe:B).get(he.envMap||ht),Ot=he.vertexColors===!0&&!!Oe.attributes.color&&Oe.attributes.color.itemSize===4,Pt=!!Oe.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),ct=!!Oe.morphAttributes.position,It=!!Oe.morphAttributes.normal,Bt=!!Oe.morphAttributes.color;let sn=Qo;he.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(sn=R.toneMapping);const tn=Oe.morphAttributes.position||Oe.morphAttributes.normal||Oe.morphAttributes.color,Zt=tn!==void 0?tn.length:0,Tt=_e.get(he),un=S.state.lights;if(re===!0&&(pe===!0||q!==L)){const ai=q===L&&he.id===k;je.setState(he,q,ai)}let jt=!1;he.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==un.state.version||Tt.outputColorSpace!==yt||Me.isBatchedMesh&&Tt.batching===!1||!Me.isBatchedMesh&&Tt.batching===!0||Me.isBatchedMesh&&Tt.batchingColor===!0&&Me.colorTexture===null||Me.isBatchedMesh&&Tt.batchingColor===!1&&Me.colorTexture!==null||Me.isInstancedMesh&&Tt.instancing===!1||!Me.isInstancedMesh&&Tt.instancing===!0||Me.isSkinnedMesh&&Tt.skinning===!1||!Me.isSkinnedMesh&&Tt.skinning===!0||Me.isInstancedMesh&&Tt.instancingColor===!0&&Me.instanceColor===null||Me.isInstancedMesh&&Tt.instancingColor===!1&&Me.instanceColor!==null||Me.isInstancedMesh&&Tt.instancingMorph===!0&&Me.morphTexture===null||Me.isInstancedMesh&&Tt.instancingMorph===!1&&Me.morphTexture!==null||Tt.envMap!==Mt||he.fog===!0&&Tt.fog!==st||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==je.numPlanes||Tt.numIntersection!==je.numIntersection)||Tt.vertexAlphas!==Ot||Tt.vertexTangents!==Pt||Tt.morphTargets!==ct||Tt.morphNormals!==It||Tt.morphColors!==Bt||Tt.toneMapping!==sn||Tt.morphTargetsCount!==Zt)&&(jt=!0):(jt=!0,Tt.__version=he.version);let Zn=Tt.currentProgram;jt===!0&&(Zn=hr(he,Ee,Me));let Cr=!1,jn=!1,Kn=!1;const cn=Zn.getUniforms(),Qn=Tt.uniforms;if(ge.useProgram(Zn.program)&&(Cr=!0,jn=!0,Kn=!0),he.id!==k&&(k=he.id,jn=!0),Cr||L!==q){ge.buffers.depth.getReversed()?($.copy(q.projectionMatrix),uA($),cA($),cn.setValue(ee,"projectionMatrix",$)):cn.setValue(ee,"projectionMatrix",q.projectionMatrix),cn.setValue(ee,"viewMatrix",q.matrixWorldInverse);const Pn=cn.map.cameraPosition;Pn!==void 0&&Pn.setValue(ee,Te.setFromMatrixPosition(q.matrixWorld)),Le.logarithmicDepthBuffer&&cn.setValue(ee,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&cn.setValue(ee,"isOrthographic",q.isOrthographicCamera===!0),L!==q&&(L=q,jn=!0,Kn=!0)}if(Me.isSkinnedMesh){cn.setOptional(ee,Me,"bindMatrix"),cn.setOptional(ee,Me,"bindMatrixInverse");const ai=Me.skeleton;ai&&(ai.boneTexture===null&&ai.computeBoneTexture(),cn.setValue(ee,"boneTexture",ai.boneTexture,V))}Me.isBatchedMesh&&(cn.setOptional(ee,Me,"batchingTexture"),cn.setValue(ee,"batchingTexture",Me._matricesTexture,V),cn.setOptional(ee,Me,"batchingIdTexture"),cn.setValue(ee,"batchingIdTexture",Me._indirectTexture,V),cn.setOptional(ee,Me,"batchingColorTexture"),Me._colorsTexture!==null&&cn.setValue(ee,"batchingColorTexture",Me._colorsTexture,V));const Fn=Oe.morphAttributes;if((Fn.position!==void 0||Fn.normal!==void 0||Fn.color!==void 0)&&it.update(Me,Oe,Zn),(jn||Tt.receiveShadow!==Me.receiveShadow)&&(Tt.receiveShadow=Me.receiveShadow,cn.setValue(ee,"receiveShadow",Me.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(Qn.envMap.value=Mt,Qn.flipEnvMap.value=Mt.isCubeTexture&&Mt.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&Ee.environment!==null&&(Qn.envMapIntensity.value=Ee.environmentIntensity),jn&&(cn.setValue(ee,"toneMappingExposure",R.toneMappingExposure),Tt.needsLights&&sa(Qn,Kn),st&&he.fog===!0&&He.refreshFogUniforms(Qn,st),He.refreshMaterialUniforms(Qn,he,H,me,S.state.transmissionRenderTarget[q.id]),mg.upload(ee,ra(Tt),Qn,V)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(mg.upload(ee,ra(Tt),Qn,V),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&cn.setValue(ee,"center",Me.center),cn.setValue(ee,"modelViewMatrix",Me.modelViewMatrix),cn.setValue(ee,"normalMatrix",Me.normalMatrix),cn.setValue(ee,"modelMatrix",Me.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const ai=he.uniformsGroups;for(let Pn=0,nn=ai.length;Pn<nn;Pn++){const Mi=ai[Pn];ue.update(Mi,Zn),ue.bind(Mi,Zn)}}return Zn}function sa(q,Ee){q.ambientLightColor.needsUpdate=Ee,q.lightProbe.needsUpdate=Ee,q.directionalLights.needsUpdate=Ee,q.directionalLightShadows.needsUpdate=Ee,q.pointLights.needsUpdate=Ee,q.pointLightShadows.needsUpdate=Ee,q.spotLights.needsUpdate=Ee,q.spotLightShadows.needsUpdate=Ee,q.rectAreaLights.needsUpdate=Ee,q.hemisphereLights.needsUpdate=Ee}function Gs(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(q,Ee,Oe){const he=_e.get(q);he.__autoAllocateDepthBuffer=q.resolveDepthBuffer===!1,he.__autoAllocateDepthBuffer===!1&&(he.__useRenderToTexture=!1),_e.get(q.texture).__webglTexture=Ee,_e.get(q.depthTexture).__webglTexture=he.__autoAllocateDepthBuffer?void 0:Oe,he.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(q,Ee){const Oe=_e.get(q);Oe.__webglFramebuffer=Ee,Oe.__useDefaultFramebuffer=Ee===void 0};const Po=ee.createFramebuffer();this.setRenderTarget=function(q,Ee=0,Oe=0){z=q,N=Ee,O=Oe;let he=!0,Me=null,st=!1,ht=!1;if(q){const Mt=_e.get(q);if(Mt.__useDefaultFramebuffer!==void 0)ge.bindFramebuffer(ee.FRAMEBUFFER,null),he=!1;else if(Mt.__webglFramebuffer===void 0)V.setupRenderTarget(q);else if(Mt.__hasExternalTextures)V.rebindTextures(q,_e.get(q.texture).__webglTexture,_e.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const ct=q.depthTexture;if(Mt.__boundDepthTexture!==ct){if(ct!==null&&_e.has(ct)&&(q.width!==ct.image.width||q.height!==ct.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");V.setupDepthRenderbuffer(q)}}const Ot=q.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&&(ht=!0);const Pt=_e.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Pt[Ee])?Me=Pt[Ee][Oe]:Me=Pt[Ee],st=!0):q.samples>0&&V.useMultisampledRTT(q)===!1?Me=_e.get(q).__webglMultisampledFramebuffer:Array.isArray(Pt)?Me=Pt[Oe]:Me=Pt,W.copy(q.viewport),X.copy(q.scissor),K=q.scissorTest}else W.copy(D).multiplyScalar(H).floor(),X.copy(Y).multiplyScalar(H).floor(),K=ce;if(Oe!==0&&(Me=Po),ge.bindFramebuffer(ee.FRAMEBUFFER,Me)&&he&&ge.drawBuffers(q,Me),ge.viewport(W),ge.scissor(X),ge.setScissorTest(K),st){const Mt=_e.get(q.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,Mt.__webglTexture,Oe)}else if(ht){const Mt=_e.get(q.texture),Ot=Ee;ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Mt.__webglTexture,Oe,Ot)}else if(q!==null&&Oe!==0){const Mt=_e.get(q.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Mt.__webglTexture,Oe)}k=-1},this.readRenderTargetPixels=function(q,Ee,Oe,he,Me,st,ht){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=_e.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ht!==void 0&&(yt=yt[ht]),yt){ge.bindFramebuffer(ee.FRAMEBUFFER,yt);try{const Mt=q.texture,Ot=Mt.format,Pt=Mt.type;if(!Le.textureFormatReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Le.textureTypeReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=q.width-he&&Oe>=0&&Oe<=q.height-Me&&ee.readPixels(Ee,Oe,he,Me,Fe.convert(Ot),Fe.convert(Pt),st)}finally{const Mt=z!==null?_e.get(z).__webglFramebuffer:null;ge.bindFramebuffer(ee.FRAMEBUFFER,Mt)}}},this.readRenderTargetPixelsAsync=async function(q,Ee,Oe,he,Me,st,ht){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let yt=_e.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ht!==void 0&&(yt=yt[ht]),yt)if(Ee>=0&&Ee<=q.width-he&&Oe>=0&&Oe<=q.height-Me){ge.bindFramebuffer(ee.FRAMEBUFFER,yt);const Mt=q.texture,Ot=Mt.format,Pt=Mt.type;if(!Le.textureFormatReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Le.textureTypeReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ct=ee.createBuffer();ee.bindBuffer(ee.PIXEL_PACK_BUFFER,ct),ee.bufferData(ee.PIXEL_PACK_BUFFER,st.byteLength,ee.STREAM_READ),ee.readPixels(Ee,Oe,he,Me,Fe.convert(Ot),Fe.convert(Pt),0);const It=z!==null?_e.get(z).__webglFramebuffer:null;ge.bindFramebuffer(ee.FRAMEBUFFER,It);const Bt=ee.fenceSync(ee.SYNC_GPU_COMMANDS_COMPLETE,0);return ee.flush(),await lA(ee,Bt,4),ee.bindBuffer(ee.PIXEL_PACK_BUFFER,ct),ee.getBufferSubData(ee.PIXEL_PACK_BUFFER,0,st),ee.deleteBuffer(ct),ee.deleteSync(Bt),st}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(q,Ee=null,Oe=0){const he=Math.pow(2,-Oe),Me=Math.floor(q.image.width*he),st=Math.floor(q.image.height*he),ht=Ee!==null?Ee.x:0,yt=Ee!==null?Ee.y:0;V.setTexture2D(q,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,Oe,0,0,ht,yt,Me,st),ge.unbindTexture()};const il=ee.createFramebuffer(),oa=ee.createFramebuffer();this.copyTextureToTexture=function(q,Ee,Oe=null,he=null,Me=0,st=null){st===null&&(Me!==0?(hg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),st=Me,Me=0):st=0);let ht,yt,Mt,Ot,Pt,ct,It,Bt,sn;const tn=q.isCompressedTexture?q.mipmaps[st]:q.image;if(Oe!==null)ht=Oe.max.x-Oe.min.x,yt=Oe.max.y-Oe.min.y,Mt=Oe.isBox3?Oe.max.z-Oe.min.z:1,Ot=Oe.min.x,Pt=Oe.min.y,ct=Oe.isBox3?Oe.min.z:0;else{const Fn=Math.pow(2,-Me);ht=Math.floor(tn.width*Fn),yt=Math.floor(tn.height*Fn),q.isDataArrayTexture?Mt=tn.depth:q.isData3DTexture?Mt=Math.floor(tn.depth*Fn):Mt=1,Ot=0,Pt=0,ct=0}he!==null?(It=he.x,Bt=he.y,sn=he.z):(It=0,Bt=0,sn=0);const Zt=Fe.convert(Ee.format),Tt=Fe.convert(Ee.type);let un;Ee.isData3DTexture?(V.setTexture3D(Ee,0),un=ee.TEXTURE_3D):Ee.isDataArrayTexture||Ee.isCompressedArrayTexture?(V.setTexture2DArray(Ee,0),un=ee.TEXTURE_2D_ARRAY):(V.setTexture2D(Ee,0),un=ee.TEXTURE_2D),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,Ee.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ee.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,Ee.unpackAlignment);const jt=ee.getParameter(ee.UNPACK_ROW_LENGTH),Zn=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),Cr=ee.getParameter(ee.UNPACK_SKIP_PIXELS),jn=ee.getParameter(ee.UNPACK_SKIP_ROWS),Kn=ee.getParameter(ee.UNPACK_SKIP_IMAGES);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,tn.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,tn.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,Ot),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,Pt),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,ct);const cn=q.isDataArrayTexture||q.isData3DTexture,Qn=Ee.isDataArrayTexture||Ee.isData3DTexture;if(q.isDepthTexture){const Fn=_e.get(q),ai=_e.get(Ee),Pn=_e.get(Fn.__renderTarget),nn=_e.get(ai.__renderTarget);ge.bindFramebuffer(ee.READ_FRAMEBUFFER,Pn.__webglFramebuffer),ge.bindFramebuffer(ee.DRAW_FRAMEBUFFER,nn.__webglFramebuffer);for(let Mi=0;Mi<Mt;Mi++)cn&&(ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,_e.get(q).__webglTexture,Me,ct+Mi),ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,_e.get(Ee).__webglTexture,st,sn+Mi)),ee.blitFramebuffer(Ot,Pt,ht,yt,It,Bt,ht,yt,ee.DEPTH_BUFFER_BIT,ee.NEAREST);ge.bindFramebuffer(ee.READ_FRAMEBUFFER,null),ge.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else if(Me!==0||q.isRenderTargetTexture||_e.has(q)){const Fn=_e.get(q),ai=_e.get(Ee);ge.bindFramebuffer(ee.READ_FRAMEBUFFER,il),ge.bindFramebuffer(ee.DRAW_FRAMEBUFFER,oa);for(let Pn=0;Pn<Mt;Pn++)cn?ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Fn.__webglTexture,Me,ct+Pn):ee.framebufferTexture2D(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Fn.__webglTexture,Me),Qn?ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ai.__webglTexture,st,sn+Pn):ee.framebufferTexture2D(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,ai.__webglTexture,st),Me!==0?ee.blitFramebuffer(Ot,Pt,ht,yt,It,Bt,ht,yt,ee.COLOR_BUFFER_BIT,ee.NEAREST):Qn?ee.copyTexSubImage3D(un,st,It,Bt,sn+Pn,Ot,Pt,ht,yt):ee.copyTexSubImage2D(un,st,It,Bt,Ot,Pt,ht,yt);ge.bindFramebuffer(ee.READ_FRAMEBUFFER,null),ge.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else Qn?q.isDataTexture||q.isData3DTexture?ee.texSubImage3D(un,st,It,Bt,sn,ht,yt,Mt,Zt,Tt,tn.data):Ee.isCompressedArrayTexture?ee.compressedTexSubImage3D(un,st,It,Bt,sn,ht,yt,Mt,Zt,tn.data):ee.texSubImage3D(un,st,It,Bt,sn,ht,yt,Mt,Zt,Tt,tn):q.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,st,It,Bt,ht,yt,Zt,Tt,tn.data):q.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,st,It,Bt,tn.width,tn.height,Zt,tn.data):ee.texSubImage2D(ee.TEXTURE_2D,st,It,Bt,ht,yt,Zt,Tt,tn);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,jt),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Zn),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,Cr),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,jn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,Kn),st===0&&Ee.generateMipmaps&&ee.generateMipmap(un),ge.unbindTexture()},this.copyTextureToTexture3D=function(q,Ee,Oe=null,he=null,Me=0){return hg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(q,Ee,Oe,he,Me)},this.initRenderTarget=function(q){_e.get(q).__webglFramebuffer===void 0&&V.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?V.setTextureCube(q,0):q.isData3DTexture?V.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?V.setTexture2DArray(q,0):V.setTexture2D(q,0),ge.unbindTexture()},this.resetState=function(){N=0,O=0,z=null,ge.reset(),ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Eo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=xn._getDrawingBufferColorSpace(e),t.unpackColorSpace=xn._getUnpackColorSpace()}}const iE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Ex,AddEquation:Gl,AddOperation:AM,AdditiveAnimationBlendMode:Nx,AdditiveBlending:Yy,AgXToneMapping:LM,AlphaFormat:Rx,AlwaysCompare:XM,AlwaysDepth:Mg,AlwaysStencilFunc:Ky,AmbientLight:B2,AnimationAction:Y2,AnimationClip:Jh,AnimationLoader:NC,AnimationMixer:c3,AnimationObjectGroup:l3,AnimationUtils:IC,ArcCurve:u2,ArrayCamera:W2,ArrowHelper:L3,AttachedBindMode:Zy,Audio:j2,AudioAnalyser:QC,AudioContext:o_,AudioListener:JC,AudioLoader:XC,AxesHelper:D3,BackSide:Wr,BasicDepthPacking:OM,BasicShadowMap:aM,BatchedMesh:s2,Bone:Wx,BooleanKeyframeTrack:vc,Box2:y3,Box3:fr,Box3Helper:P3,BoxGeometry:gc,BoxHelper:R3,BufferAttribute:kn,BufferGeometry:fn,BufferGeometryLoader:G2,ByteType:Tx,Cache:Xa,Camera:ap,CameraHelper:C3,CanvasTexture:eC,CapsuleGeometry:k0,CatmullRomCurve3:c2,CineonToneMapping:PM,CircleGeometry:N0,ClampToEdgeWrapping:zs,Clock:a_,Color:wt,ColorKeyframeTrack:n_,ColorManagement:xn,CompressedArrayTexture:QA,CompressedCubeTexture:$A,CompressedTexture:L0,CompressedTextureLoader:UC,ConeGeometry:U0,ConstantAlphaFactor:EM,ConstantColorFactor:wM,Controls:N3,CubeCamera:QM,CubeReflectionMapping:Za,CubeRefractionMapping:Zl,CubeTexture:lp,CubeTextureLoader:FC,CubeUVReflectionMapping:Kf,CubicBezierCurve:qx,CubicBezierCurve3:f2,CubicInterpolant:I2,CullFaceBack:Xy,CullFaceFront:oM,CullFaceFrontBack:uT,CullFaceNone:sM,Curve:Ro,CurvePath:h2,CustomBlending:lM,CustomToneMapping:IM,CylinderGeometry:$f,Cylindrical:v3,Data3DTexture:A0,DataArrayTexture:op,DataTexture:$o,DataTextureLoader:OC,DataUtils:bA,DecrementStencilOp:MT,DecrementWrapStencilOp:bT,DefaultLoadingManager:k2,DepthFormat:Wf,DepthStencilFormat:jf,DepthTexture:Xx,DetachedBindMode:kM,DirectionalLight:O2,DirectionalLightHelper:A3,DiscreteInterpolant:L2,DodecahedronGeometry:F0,DoubleSide:Mo,DstAlphaFactor:vM,DstColorFactor:xM,DynamicCopyUsage:zT,DynamicDrawUsage:kT,DynamicReadUsage:FT,EdgesGeometry:p2,EllipseCurve:D0,EqualCompare:HM,EqualDepth:bg,EqualStencilFunc:RT,EquirectangularReflectionMapping:Dh,EquirectangularRefractionMapping:kh,Euler:bs,EventDispatcher:na,ExtrudeGeometry:O0,FileLoader:Qa,Float16BufferAttribute:LA,Float32BufferAttribute:Ut,FloatType:us,Fog:R0,FogExp2:C0,FramebufferTexture:KA,FrontSide:Ja,Frustum:up,GLBufferAttribute:g3,GLSL1:HT,GLSL3:Qy,GreaterCompare:GM,GreaterDepth:Ag,GreaterEqualCompare:jM,GreaterEqualDepth:Tg,GreaterEqualStencilFunc:DT,GreaterStencilFunc:IT,GridHelper:b3,Group:Ff,HalfFloatType:Qf,HemisphereLight:N2,HemisphereLightHelper:E3,IcosahedronGeometry:B0,ImageBitmapLoader:jC,ImageLoader:Zh,ImageUtils:JM,IncrementStencilOp:wT,IncrementWrapStencilOp:ET,InstancedBufferAttribute:dc,InstancedBufferGeometry:s_,InstancedInterleavedBuffer:m3,InstancedMesh:r2,Int16BufferAttribute:PA,Int32BufferAttribute:IA,Int8BufferAttribute:AA,IntType:x0,InterleavedBuffer:P0,InterleavedBufferAttribute:fc,Interpolant:hp,InterpolateDiscrete:Fh,InterpolateLinear:t0,InterpolateSmooth:dg,InvertStencilOp:TT,KeepStencilOp:Zu,KeyframeTrack:Hs,LOD:n2,LatheGeometry:cp,Layers:oc,LessCompare:VM,LessDepth:Eg,LessEqualCompare:Fx,LessEqualDepth:uc,LessEqualStencilFunc:PT,LessStencilFunc:CT,Light:eu,LightProbe:H2,Line:Kl,Line3:x3,LineBasicMaterial:jr,LineCurve:Jx,LineCurve3:d2,LineDashedMaterial:C2,LineLoop:o2,LineSegments:ia,LinearFilter:Si,LinearInterpolant:t_,LinearMipMapLinearFilter:hT,LinearMipMapNearestFilter:dT,LinearMipmapLinearFilter:Ko,LinearMipmapNearestFilter:xh,LinearSRGBColorSpace:cc,LinearToneMapping:CM,LinearTransfer:Bh,Loader:cs,LoaderUtils:ix,LoadingManager:i_,LoopOnce:NM,LoopPingPong:FM,LoopRepeat:UM,LuminanceAlphaFormat:Lx,LuminanceFormat:Ix,MOUSE:qu,Material:Ar,MaterialLoader:q0,MathUtils:oA,Matrix2:f_,Matrix3:Qt,Matrix4:Wt,MaxEquation:dM,Mesh:ii,MeshBasicMaterial:el,MeshDepthMaterial:X0,MeshDistanceMaterial:Y0,MeshLambertMaterial:T2,MeshMatcapMaterial:A2,MeshNormalMaterial:b2,MeshPhongMaterial:M2,MeshPhysicalMaterial:w2,MeshStandardMaterial:$x,MeshToonMaterial:E2,MinEquation:fM,MirroredRepeatWrapping:Uh,MixOperation:TM,MultiplyBlending:Jy,MultiplyOperation:rp,NearestFilter:cr,NearestMipMapLinearFilter:fT,NearestMipMapNearestFilter:cT,NearestMipmapLinearFilter:Nf,NearestMipmapNearestFilter:bx,NeutralToneMapping:DM,NeverCompare:zM,NeverDepth:wg,NeverStencilFunc:AT,NoBlending:Ya,NoColorSpace:Wa,NoToneMapping:Qo,NormalAnimationBlendMode:b0,NormalBlending:rc,NotEqualCompare:WM,NotEqualDepth:Cg,NotEqualStencilFunc:LT,NumberKeyframeTrack:Yh,Object3D:wn,ObjectLoader:GC,ObjectSpaceNormalMap:BM,OctahedronGeometry:fp,OneFactor:pM,OneMinusConstantAlphaFactor:bM,OneMinusConstantColorFactor:MM,OneMinusDstAlphaFactor:yM,OneMinusDstColorFactor:_M,OneMinusSrcAlphaFactor:Sg,OneMinusSrcColorFactor:gM,OrthographicCamera:Yl,PCFShadowMap:v0,PCFSoftShadowMap:yh,PMREMGenerator:ax,Path:Gh,PerspectiveCamera:_i,Plane:Ga,PlaneGeometry:tl,PlaneHelper:I3,PointLight:F2,PointLightHelper:w3,Points:a2,PointsMaterial:jx,PolarGridHelper:T3,PolyhedronGeometry:$l,PositionalAudio:KC,PropertyBinding:Sn,PropertyMixer:X2,QuadraticBezierCurve:Zx,QuadraticBezierCurve3:Kx,Quaternion:Tr,QuaternionKeyframeTrack:pp,QuaternionLinearInterpolant:D2,RED_GREEN_RGTC2_Format:$g,RED_RGTC1_Format:kx,REVISION:g0,RGBADepthPacking:Ux,RGBAFormat:br,RGBAIntegerFormat:E0,RGBA_ASTC_10x10_Format:Yg,RGBA_ASTC_10x5_Format:Wg,RGBA_ASTC_10x6_Format:jg,RGBA_ASTC_10x8_Format:Xg,RGBA_ASTC_12x10_Format:qg,RGBA_ASTC_12x12_Format:Jg,RGBA_ASTC_4x4_Format:Ug,RGBA_ASTC_5x4_Format:Fg,RGBA_ASTC_5x5_Format:Og,RGBA_ASTC_6x5_Format:Bg,RGBA_ASTC_6x6_Format:zg,RGBA_ASTC_8x5_Format:Vg,RGBA_ASTC_8x6_Format:Hg,RGBA_ASTC_8x8_Format:Gg,RGBA_BPTC_Format:Eh,RGBA_ETC2_EAC_Format:Ng,RGBA_PVRTC_2BPPV1_Format:Lg,RGBA_PVRTC_4BPPV1_Format:Ig,RGBA_S3TC_DXT1_Format:Sh,RGBA_S3TC_DXT3_Format:wh,RGBA_S3TC_DXT5_Format:Mh,RGBDepthPacking:yT,RGBFormat:Px,RGBIntegerFormat:pT,RGB_BPTC_SIGNED_Format:Zg,RGB_BPTC_UNSIGNED_Format:Kg,RGB_ETC1_Format:Dg,RGB_ETC2_Format:kg,RGB_PVRTC_2BPPV1_Format:Pg,RGB_PVRTC_4BPPV1_Format:Rg,RGB_S3TC_DXT1_Format:_h,RGDepthPacking:xT,RGFormat:Dx,RGIntegerFormat:M0,RawShaderMaterial:S2,Ray:mc,Raycaster:q2,RectAreaLight:z2,RedFormat:w0,RedIntegerFormat:sp,ReinhardToneMapping:RM,RenderTarget:T0,RenderTarget3D:f3,RenderTargetArray:d3,RepeatWrapping:Nh,ReplaceStencilOp:ST,ReverseSubtractEquation:cM,RingGeometry:z0,SIGNED_RED_GREEN_RGTC2_Format:e0,SIGNED_RED_RGTC1_Format:Qg,SRGBColorSpace:as,SRGBTransfer:Cn,Scene:Hx,ShaderChunk:an,ShaderLib:So,ShaderMaterial:Ao,ShadowMaterial:_2,Shape:ac,ShapeGeometry:V0,ShapePath:k3,ShapeUtils:ea,ShortType:Ax,Skeleton:I0,SkeletonHelper:S3,SkinnedMesh:i2,Source:Wl,Sphere:dr,SphereGeometry:dp,Spherical:sx,SphericalHarmonics3:V2,SplineCurve:Qx,SpotLight:U2,SpotLightHelper:_3,Sprite:t2,SpriteMaterial:Gx,SrcAlphaFactor:_g,SrcAlphaSaturateFactor:SM,SrcColorFactor:mM,StaticCopyUsage:BT,StaticDrawUsage:zh,StaticReadUsage:UT,StereoCamera:YC,StreamCopyUsage:VT,StreamDrawUsage:NT,StreamReadUsage:OT,StringKeyframeTrack:yc,SubtractEquation:uM,SubtractiveBlending:qy,TOUCH:Ju,TangentSpaceNormalMap:Ql,TetrahedronGeometry:H0,Texture:ri,TextureLoader:BC,TextureUtils:z3,TimestampQuery:GT,TorusGeometry:G0,TorusKnotGeometry:W0,Triangle:ls,TriangleFanDrawMode:vT,TriangleStripDrawMode:gT,TrianglesDrawMode:mT,TubeGeometry:j0,UVMapping:y0,Uint16BufferAttribute:Bx,Uint32BufferAttribute:zx,Uint8BufferAttribute:CA,Uint8ClampedBufferAttribute:RA,Uniform:c_,UniformsGroup:p3,UniformsLib:_t,UniformsUtils:Vx,UnsignedByteType:To,UnsignedInt248Type:Gf,UnsignedInt5999Type:Cx,UnsignedIntType:Ka,UnsignedShort4444Type:_0,UnsignedShort5551Type:S0,UnsignedShortType:Hf,VSMShadowMap:_o,Vector2:Ze,Vector3:te,Vector4:vn,VectorKeyframeTrack:qh,VideoFrameTexture:ZA,VideoTexture:l2,WebGL3DRenderTarget:mA,WebGLArrayRenderTarget:pA,WebGLCoordinateSystem:Eo,WebGLCubeRenderTarget:$M,WebGLRenderTarget:ta,WebGLRenderer:nE,WebGLUtils:tE,WebGPUCoordinateSystem:Vh,WebXRController:pg,WireframeGeometry:x2,WrapAroundEnding:Oh,ZeroCurvatureEnding:tc,ZeroFactor:hM,ZeroSlopeEnding:nc,ZeroStencilOp:_T,createCanvasElement:qM},Symbol.toStringTag,{value:"Module"}));var My={exports:{}},Vl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS;function SD(){return JS||(JS=1,Vl.ConcurrentRoot=1,Vl.ContinuousEventPriority=4,Vl.DefaultEventPriority=16,Vl.DiscreteEventPriority=1,Vl.IdleEventPriority=536870912,Vl.LegacyRoot=0),Vl}var ZS;function wD(){return ZS||(ZS=1,My.exports=SD()),My.exports}var gh=wD();function MD(r){let e;const t=new Set,n=(d,p)=>{const g=typeof d=="function"?d(e):d;if(g!==e){const v=e;e=p?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},i=()=>e,s=(d,p=i,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function y(){const w=p(e);if(!g(v,w)){const E=v;d(v=w,E)}}return t.add(y),()=>t.delete(y)},c={setState:n,getState:i,subscribe:(d,p,g)=>p||g?s(d,p,g):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=r(n,i,c),c}const ED=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),KS=ED?We.useEffect:We.useLayoutEffect;function bD(r){const e=typeof r=="function"?MD(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=We.useReducer(M=>M+1,0),a=e.getState(),l=We.useRef(a),c=We.useRef(n),d=We.useRef(i),p=We.useRef(!1),g=We.useRef();g.current===void 0&&(g.current=n(a));let v,y=!1;(l.current!==a||c.current!==n||d.current!==i||p.current)&&(v=n(a),y=!i(g.current,v)),KS(()=>{y&&(g.current=v),l.current=a,c.current=n,d.current=i,p.current=!1});const w=We.useRef(a);KS(()=>{const M=()=>{try{const T=e.getState(),A=c.current(T);d.current(g.current,A)||(l.current=T,g.current=A,s())}catch{p.current=!0,s()}},S=e.subscribe(M);return e.getState()!==w.current&&M(),S},[]);const E=y?v:g.current;return We.useDebugValue(E),E};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const TD=r=>typeof r=="object"&&typeof r.then=="function",ig=[];function AD(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function CD(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of ig)if(AD(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=ig.indexOf(i);s!==-1&&ig.splice(s,1)},promise:(TD(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(ig.push(i),!t)throw i.promise}const RD=(r,e,t)=>CD(r,e,!1,t);var Ey={exports:{}},by={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QS;function PD(){return QS||(QS=1,function(r){function e(H,J){var j=H.length;H.push(J);e:for(;0<j;){var D=j-1>>>1,Y=H[D];if(0<i(Y,J))H[D]=J,H[j]=Y,j=D;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],j=H.pop();if(j!==J){H[0]=j;e:for(var D=0,Y=H.length,ce=Y>>>1;D<ce;){var Q=2*(D+1)-1,re=H[Q],pe=Q+1,$=H[pe];if(0>i(re,j))pe<Y&&0>i($,re)?(H[D]=$,H[pe]=j,D=pe):(H[D]=re,H[Q]=j,D=Q);else if(pe<Y&&0>i($,j))H[D]=$,H[pe]=j,D=pe;else break e}}return J}function i(H,J){var j=H.sortIndex-J.sortIndex;return j!==0?j:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();r.unstable_now=function(){return a.now()-l}}var c=[],d=[],p=1,g=null,v=3,y=!1,w=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var J=t(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=H)n(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=t(d)}}function R(H){if(E=!1,A(H),!w)if(t(c)!==null)w=!0,ae(F);else{var J=t(d);J!==null&&me(R,J.startTime-H)}}function F(H,J){w=!1,E&&(E=!1,S(z),z=-1),y=!0;var j=v;try{for(A(J),g=t(c);g!==null&&(!(g.expirationTime>J)||H&&!W());){var D=g.callback;if(typeof D=="function"){g.callback=null,v=g.priorityLevel;var Y=D(g.expirationTime<=J);J=r.unstable_now(),typeof Y=="function"?g.callback=Y:g===t(c)&&n(c),A(J)}else n(c);g=t(c)}if(g!==null)var ce=!0;else{var Q=t(d);Q!==null&&me(R,Q.startTime-J),ce=!1}return ce}finally{g=null,v=j,y=!1}}var N=!1,O=null,z=-1,k=5,L=-1;function W(){return!(r.unstable_now()-L<k)}function X(){if(O!==null){var H=r.unstable_now();L=H;var J=!0;try{J=O(!0,H)}finally{J?K():(N=!1,O=null)}}else N=!1}var K;if(typeof T=="function")K=function(){T(X)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,de=ne.port2;ne.port1.onmessage=X,K=function(){de.postMessage(null)}}else K=function(){M(X,0)};function ae(H){O=H,N||(N=!0,K())}function me(H,J){z=M(function(){H(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){w||y||(w=!0,ae(F))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(H){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var j=v;v=J;try{return H()}finally{v=j}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=v;v=H;try{return J()}finally{v=j}},r.unstable_scheduleCallback=function(H,J,j){var D=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?D+j:D):j=D,H){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=j+Y,H={id:p++,callback:J,priorityLevel:H,startTime:j,expirationTime:Y,sortIndex:-1},j>D?(H.sortIndex=j,e(d,H),t(c)===null&&H===t(d)&&(E?(S(z),z=-1):E=!0,me(R,j-D))):(H.sortIndex=Y,e(c,H),w||y||(w=!0,ae(F))),H},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(H){var J=v;return function(){var j=v;v=J;try{return H.apply(this,arguments)}finally{v=j}}}}(Ty)),Ty}var $S;function ID(){return $S||($S=1,by.exports=PD()),by.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay,ew;function LD(){return ew||(ew=1,Ay=function(e){var t={},n=m0(),i=ID(),s=Object.assign;function a(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),F=Symbol.iterator;function N(f){return f===null||typeof f!="object"?null:(f=F&&f[F]||f["@@iterator"],typeof f=="function"?f:null)}function O(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case p:return"Fragment";case d:return"Portal";case v:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case S:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case w:return(f.displayName||"Context")+".Consumer";case y:return(f._context.displayName||"Context")+".Provider";case E:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case T:return h=f.displayName||null,h!==null?h:O(f.type)||"Memo";case A:h=f._payload,f=f._init;try{return O(f(h))}catch{}}return null}function z(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(h);case 8:return h===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function k(f){var h=f,x=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(x=h.return),f=h.return;while(f)}return h.tag===3?x:null}function L(f){if(k(f)!==f)throw Error(a(188))}function W(f){var h=f.alternate;if(!h){if(h=k(f),h===null)throw Error(a(188));return h!==f?null:f}for(var x=f,b=h;;){var P=x.return;if(P===null)break;var U=P.alternate;if(U===null){if(b=P.return,b!==null){x=b;continue}break}if(P.child===U.child){for(U=P.child;U;){if(U===x)return L(P),f;if(U===b)return L(P),h;U=U.sibling}throw Error(a(188))}if(x.return!==b.return)x=P,b=U;else{for(var se=!1,we=P.child;we;){if(we===x){se=!0,x=P,b=U;break}if(we===b){se=!0,b=P,x=U;break}we=we.sibling}if(!se){for(we=U.child;we;){if(we===x){se=!0,x=U,b=P;break}if(we===b){se=!0,b=U,x=P;break}we=we.sibling}if(!se)throw Error(a(189))}}if(x.alternate!==b)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?f:h}function X(f){return f=W(f),f!==null?K(f):null}function K(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=K(f);if(h!==null)return h;f=f.sibling}return null}function ne(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=ne(f);if(h!==null)return h}f=f.sibling}return null}var de=Array.isArray,ae=e.getPublicInstance,me=e.getRootHostContext,H=e.getChildHostContext,J=e.prepareForCommit,j=e.resetAfterCommit,D=e.createInstance,Y=e.appendInitialChild,ce=e.finalizeInitialChildren,Q=e.prepareUpdate,re=e.shouldSetTextContent,pe=e.createTextInstance,$=e.scheduleTimeout,ie=e.cancelTimeout,Te=e.noTimeout,Ce=e.isPrimaryRenderer,Pe=e.supportsMutation,Ie=e.supportsPersistence,Qe=e.supportsHydration,ee=e.getInstanceFromNode,lt=e.preparePortalMount,Ae=e.getCurrentEventPriority,Le=e.detachDeletedInstance,ge=e.supportsMicrotasks,ze=e.scheduleMicrotask,_e=e.supportsTestSelectors,V=e.findFiberRoot,B=e.getBoundingRect,oe=e.getTextContent,ye=e.isHiddenSubtree,Se=e.matchAccessibilityRole,ke=e.setFocusIfFocusable,Je=e.setupIntersectionObserver,He=e.appendChild,Ke=e.appendChildToContainer,gt=e.commitTextUpdate,je=e.commitMount,nt=e.commitUpdate,ot=e.insertBefore,it=e.insertInContainerBefore,Xe=e.removeChild,fe=e.removeChildFromContainer,Fe=e.resetTextContent,ut=e.hideInstance,ue=e.hideTextInstance,Ve=e.unhideInstance,Re=e.unhideTextInstance,Ye=e.clearContainer,et=e.cloneInstance,$e=e.createContainerChildSet,vt=e.appendChildToContainerChildSet,Dt=e.finalizeContainerChildren,Et=e.replaceContainerChildren,Ct=e.cloneHiddenInstance,dn=e.cloneHiddenTextInstance,hn=e.canHydrateInstance,Rn=e.canHydrateTextInstance,si=e.canHydrateSuspenseInstance,hi=e.isSuspenseInstancePending,Jn=e.isSuspenseInstanceFallback,ji=e.registerSuspenseInstanceRetry,pi=e.getNextHydratableSibling,wi=e.getFirstHydratableChild,oi=e.getFirstHydratableChildWithinContainer,hr=e.getFirstHydratableChildWithinSuspenseInstance,ra=e.hydrateInstance,pr=e.hydrateTextInstance,nl=e.hydrateSuspenseInstance,sa=e.getNextHydratableInstanceAfterSuspenseInstance,Gs=e.commitHydratedContainer,Po=e.commitHydratedSuspenseInstance,il=e.clearSuspenseBoundary,oa=e.clearSuspenseBoundaryFromContainer,q=e.shouldDeleteUnhydratedTailInstances,Ee=e.didNotMatchHydratedContainerTextInstance,Oe=e.didNotMatchHydratedTextInstance,he;function Me(f){if(he===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);he=h&&h[1]||""}return`
`+he+f}var st=!1;function ht(f,h){if(!f||st)return"";st=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ft){var b=ft}Reflect.construct(f,[],h)}else{try{h.call()}catch(ft){b=ft}f.call(h.prototype)}else{try{throw Error()}catch(ft){b=ft}f()}}catch(ft){if(ft&&b&&typeof ft.stack=="string"){for(var P=ft.stack.split(`
`),U=b.stack.split(`
`),se=P.length-1,we=U.length-1;1<=se&&0<=we&&P[se]!==U[we];)we--;for(;1<=se&&0<=we;se--,we--)if(P[se]!==U[we]){if(se!==1||we!==1)do if(se--,we--,0>we||P[se]!==U[we]){var qe=`
`+P[se].replace(" at new "," at ");return f.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",f.displayName)),qe}while(1<=se&&0<=we);break}}}finally{st=!1,Error.prepareStackTrace=x}return(f=f?f.displayName||f.name:"")?Me(f):""}var yt=Object.prototype.hasOwnProperty,Mt=[],Ot=-1;function Pt(f){return{current:f}}function ct(f){0>Ot||(f.current=Mt[Ot],Mt[Ot]=null,Ot--)}function It(f,h){Ot++,Mt[Ot]=f.current,f.current=h}var Bt={},sn=Pt(Bt),tn=Pt(!1),Zt=Bt;function Tt(f,h){var x=f.type.contextTypes;if(!x)return Bt;var b=f.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var P={},U;for(U in x)P[U]=h[U];return b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=P),P}function un(f){return f=f.childContextTypes,f!=null}function jt(){ct(tn),ct(sn)}function Zn(f,h,x){if(sn.current!==Bt)throw Error(a(168));It(sn,h),It(tn,x)}function Cr(f,h,x){var b=f.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return x;b=b.getChildContext();for(var P in b)if(!(P in h))throw Error(a(108,z(f)||"Unknown",P));return s({},x,b)}function jn(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Bt,Zt=sn.current,It(sn,f),It(tn,tn.current),!0}function Kn(f,h,x){var b=f.stateNode;if(!b)throw Error(a(169));x?(f=Cr(f,h,Zt),b.__reactInternalMemoizedMergedChildContext=f,ct(tn),ct(sn),It(sn,f)):ct(tn),It(tn,x)}var cn=Math.clz32?Math.clz32:ai,Qn=Math.log,Fn=Math.LN2;function ai(f){return f>>>=0,f===0?32:31-(Qn(f)/Fn|0)|0}var Pn=64,nn=4194304;function Mi(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Io(f,h){var x=f.pendingLanes;if(x===0)return 0;var b=0,P=f.suspendedLanes,U=f.pingedLanes,se=x&268435455;if(se!==0){var we=se&~P;we!==0?b=Mi(we):(U&=se,U!==0&&(b=Mi(U)))}else se=x&~P,se!==0?b=Mi(se):U!==0&&(b=Mi(U));if(b===0)return 0;if(h!==0&&h!==b&&!(h&P)&&(P=b&-b,U=h&-h,P>=U||P===16&&(U&4194240)!==0))return h;if(b&4&&(b|=x&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=b;0<h;)x=31-cn(h),P=1<<x,b|=f[x],h&=~P;return b}function rl(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sl(f,h){for(var x=f.suspendedLanes,b=f.pingedLanes,P=f.expirationTimes,U=f.pendingLanes;0<U;){var se=31-cn(U),we=1<<se,qe=P[se];qe===-1?(!(we&x)||we&b)&&(P[se]=rl(we,h)):qe<=h&&(f.expiredLanes|=we),U&=~we}}function Ts(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function aa(f){for(var h=[],x=0;31>x;x++)h.push(f);return h}function Xr(f,h,x){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-cn(h),f[h]=x}function fs(f,h){var x=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var b=f.eventTimes;for(f=f.expirationTimes;0<x;){var P=31-cn(x),U=1<<P;h[P]=0,b[P]=-1,f[P]=-1,x&=~U}}function Ni(f,h){var x=f.entangledLanes|=h;for(f=f.entanglements;x;){var b=31-cn(x),P=1<<b;P&h|f[b]&h&&(f[b]|=h),x&=~P}}var Xt=0;function Yr(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var Rr=i.unstable_scheduleCallback,As=i.unstable_cancelCallback,qr=i.unstable_shouldYield,xc=i.unstable_requestPaint,On=i.unstable_now,ds=i.unstable_ImmediatePriority,_c=i.unstable_UserBlockingPriority,Xi=i.unstable_NormalPriority,Lo=i.unstable_IdlePriority,Do=null,Pr=null;function Ws(f){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Do,f,void 0,(f.current.flags&128)===128)}catch{}}function ko(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var Ei=typeof Object.is=="function"?Object.is:ko,bi=null,Cs=!1,Jr=!1;function la(f){bi===null?bi=[f]:bi.push(f)}function No(f){Cs=!0,la(f)}function Yi(){if(!Jr&&bi!==null){Jr=!0;var f=0,h=Xt;try{var x=bi;for(Xt=1;f<x.length;f++){var b=x[f];do b=b(!0);while(b!==null)}bi=null,Cs=!1}catch(P){throw bi!==null&&(bi=bi.slice(f+1)),Rr(ds,Yi),P}finally{Xt=h,Jr=!1}}return null}var Uo=l.ReactCurrentBatchConfig;function mr(f,h){if(Ei(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var x=Object.keys(f),b=Object.keys(h);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var P=x[b];if(!yt.call(h,P)||!Ei(f[P],h[P]))return!1}return!0}function js(f){switch(f.tag){case 5:return Me(f.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 2:case 15:return f=ht(f.type,!1),f;case 11:return f=ht(f.type.render,!1),f;case 1:return f=ht(f.type,!0),f;default:return""}}function Ti(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var x in f)h[x]===void 0&&(h[x]=f[x]);return h}return h}var mi=Pt(null),Xs=null,gr=null,Ys=null;function Ai(){Ys=gr=Xs=null}function qs(f,h,x){Ce?(It(mi,h._currentValue),h._currentValue=x):(It(mi,h._currentValue2),h._currentValue2=x)}function li(f){var h=mi.current;ct(mi),Ce?f._currentValue=h:f._currentValue2=h}function gi(f,h,x){for(;f!==null;){var b=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),f===x)break;f=f.return}}function $n(f,h){Xs=f,Ys=gr=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Ii=!0),f.firstContext=null)}function Vn(f){var h=Ce?f._currentValue:f._currentValue2;if(Ys!==f)if(f={context:f,memoizedValue:h,next:null},gr===null){if(Xs===null)throw Error(a(308));gr=f,Xs.dependencies={lanes:0,firstContext:f}}else gr=gr.next=f;return h}var er=null,Zr=!1;function ol(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nd(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Js(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function Fo(f,h){var x=f.updateQueue;x!==null&&(x=x.shared,ti!==null&&f.mode&1&&!(rn&2)?(f=x.interleaved,f===null?(h.next=h,er===null?er=[x]:er.push(x)):(h.next=f.next,f.next=h),x.interleaved=h):(f=x.pending,f===null?h.next=h:(h.next=f.next,f.next=h),x.pending=h))}function Sc(f,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var b=h.lanes;b&=f.pendingLanes,x|=b,h.lanes=x,Ni(f,x)}}function wc(f,h){var x=f.updateQueue,b=f.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var P=null,U=null;if(x=x.firstBaseUpdate,x!==null){do{var se={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};U===null?P=U=se:U=U.next=se,x=x.next}while(x!==null);U===null?P=U=h:U=U.next=h}else P=U=h;x={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:U,shared:b.shared,effects:b.effects},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=h:f.next=h,x.lastBaseUpdate=h}function Mc(f,h,x,b){var P=f.updateQueue;Zr=!1;var U=P.firstBaseUpdate,se=P.lastBaseUpdate,we=P.shared.pending;if(we!==null){P.shared.pending=null;var qe=we,ft=qe.next;qe.next=null,se===null?U=ft:se.next=ft,se=qe;var At=f.alternate;At!==null&&(At=At.updateQueue,we=At.lastBaseUpdate,we!==se&&(we===null?At.firstBaseUpdate=ft:we.next=ft,At.lastBaseUpdate=qe))}if(U!==null){var qt=P.baseState;se=0,At=ft=qe=null,we=U;do{var zt=we.lane,on=we.eventTime;if((b&zt)===zt){At!==null&&(At=At.next={eventTime:on,lane:0,tag:we.tag,payload:we.payload,callback:we.callback,next:null});e:{var St=f,Vi=we;switch(zt=h,on=x,Vi.tag){case 1:if(St=Vi.payload,typeof St=="function"){qt=St.call(on,qt,zt);break e}qt=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Vi.payload,zt=typeof St=="function"?St.call(on,qt,zt):St,zt==null)break e;qt=s({},qt,zt);break e;case 2:Zr=!0}}we.callback!==null&&we.lane!==0&&(f.flags|=64,zt=P.effects,zt===null?P.effects=[we]:zt.push(we))}else on={eventTime:on,lane:zt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},At===null?(ft=At=on,qe=qt):At=At.next=on,se|=zt;if(we=we.next,we===null){if(we=P.shared.pending,we===null)break;zt=we,we=zt.next,zt.next=null,P.lastBaseUpdate=zt,P.shared.pending=null}}while(!0);if(At===null&&(qe=qt),P.baseState=qe,P.firstBaseUpdate=ft,P.lastBaseUpdate=At,h=P.shared.interleaved,h!==null){P=h;do se|=P.lane,P=P.next;while(P!==h)}else U===null&&(P.shared.lanes=0);Ls|=se,f.lanes=se,f.memoizedState=qt}}function Sp(f,h,x){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var b=f[h],P=b.callback;if(P!==null){if(b.callback=null,b=x,typeof P!="function")throw Error(a(191,P));P.call(b)}}}var wp=new n.Component().refs;function id(f,h,x,b){h=f.memoizedState,x=x(b,h),x=x==null?h:s({},h,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var Ec={isMounted:function(f){return(f=f._reactInternals)?k(f)===f:!1},enqueueSetState:function(f,h,x){f=f._reactInternals;var b=yn(),P=xs(f),U=Js(b,P);U.payload=h,x!=null&&(U.callback=x),Fo(f,U),h=Zi(f,P,b),h!==null&&Sc(h,f,P)},enqueueReplaceState:function(f,h,x){f=f._reactInternals;var b=yn(),P=xs(f),U=Js(b,P);U.tag=1,U.payload=h,x!=null&&(U.callback=x),Fo(f,U),h=Zi(f,P,b),h!==null&&Sc(h,f,P)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var x=yn(),b=xs(f),P=Js(x,b);P.tag=2,h!=null&&(P.callback=h),Fo(f,P),h=Zi(f,b,x),h!==null&&Sc(h,f,b)}};function rd(f,h,x,b,P,U,se){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(b,U,se):h.prototype&&h.prototype.isPureReactComponent?!mr(x,b)||!mr(P,U):!0}function Mp(f,h,x){var b=!1,P=Bt,U=h.contextType;return typeof U=="object"&&U!==null?U=Vn(U):(P=un(h)?Zt:sn.current,b=h.contextTypes,U=(b=b!=null)?Tt(f,P):Bt),h=new h(x,U),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Ec,f.stateNode=h,h._reactInternals=f,b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=P,f.__reactInternalMemoizedMaskedChildContext=U),h}function Ep(f,h,x,b){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,b),h.state!==f&&Ec.enqueueReplaceState(h,h.state,null)}function sd(f,h,x,b){var P=f.stateNode;P.props=x,P.state=f.memoizedState,P.refs=wp,ol(f);var U=h.contextType;typeof U=="object"&&U!==null?P.context=Vn(U):(U=un(h)?Zt:sn.current,P.context=Tt(f,U)),P.state=f.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(id(f,h,U,x),P.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(h=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),h!==P.state&&Ec.enqueueReplaceState(P,P.state,null),Mc(f,x,P,b),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308)}var al=[],Oo=0,bc=null,Tc=0,Kr=[],Ir=0,ua=null,Zs=1,Ks="";function ca(f,h){al[Oo++]=Tc,al[Oo++]=bc,bc=f,Tc=h}function bp(f,h,x){Kr[Ir++]=Zs,Kr[Ir++]=Ks,Kr[Ir++]=ua,ua=f;var b=Zs;f=Ks;var P=32-cn(b)-1;b&=~(1<<P),x+=1;var U=32-cn(h)+P;if(30<U){var se=P-P%5;U=(b&(1<<se)-1).toString(32),b>>=se,P-=se,Zs=1<<32-cn(h)+P|x<<P|b,Ks=U+f}else Zs=1<<U|x<<P|b,Ks=f}function od(f){f.return!==null&&(ca(f,1),bp(f,1,0))}function ad(f){for(;f===bc;)bc=al[--Oo],al[Oo]=null,Tc=al[--Oo],al[Oo]=null;for(;f===ua;)ua=Kr[--Ir],Kr[Ir]=null,Ks=Kr[--Ir],Kr[Ir]=null,Zs=Kr[--Ir],Kr[Ir]=null}var tr=null,Ui=null,Bn=!1,ll=!1,Qr=null;function ld(f,h){var x=Or(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=f,h=f.deletions,h===null?(f.deletions=[x],f.flags|=16):h.push(x)}function ud(f,h){switch(f.tag){case 5:return h=hn(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,tr=f,Ui=wi(h),!0):!1;case 6:return h=Rn(h,f.pendingProps),h!==null?(f.stateNode=h,tr=f,Ui=null,!0):!1;case 13:if(h=si(h),h!==null){var x=ua!==null?{id:Zs,overflow:Ks}:null;return f.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=Or(18,null,null,0),x.stateNode=h,x.return=f,f.child=x,tr=f,Ui=null,!0}return!1;default:return!1}}function Ac(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Bo(f){if(Bn){var h=Ui;if(h){var x=h;if(!ud(f,h)){if(Ac(f))throw Error(a(418));h=pi(x);var b=tr;h&&ud(f,h)?ld(b,x):(f.flags=f.flags&-4097|2,Bn=!1,tr=f)}}else{if(Ac(f))throw Error(a(418));f.flags=f.flags&-4097|2,Bn=!1,tr=f}}}function Tp(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;tr=f}function tu(f){if(!Qe||f!==tr)return!1;if(!Bn)return Tp(f),Bn=!0,!1;if(f.tag!==3&&(f.tag!==5||q(f.type)&&!re(f.type,f.memoizedProps))){var h=Ui;if(h){if(Ac(f)){for(f=Ui;f;)f=pi(f);throw Error(a(418))}for(;h;)ld(f,h),h=pi(h)}}if(Tp(f),f.tag===13){if(!Qe)throw Error(a(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));Ui=sa(f)}else Ui=tr?pi(f.stateNode):null;return!0}function ul(){Qe&&(Ui=tr=null,ll=Bn=!1)}function Cc(f){Qr===null?Qr=[f]:Qr.push(f)}function cl(f,h,x){if(f=x.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var b=x.stateNode}if(!b)throw Error(a(147,f));var P=b,U=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===U?h.ref:(h=function(se){var we=P.refs;we===wp&&(we=P.refs={}),se===null?delete we[U]:we[U]=se},h._stringRef=U,h)}if(typeof f!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,f))}return f}function zo(f,h){throw f=Object.prototype.toString.call(h),Error(a(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function fl(f){var h=f._init;return h(f._payload)}function Ap(f){function h(Ue,be){if(f){var Ge=Ue.deletions;Ge===null?(Ue.deletions=[be],Ue.flags|=16):Ge.push(be)}}function x(Ue,be){if(!f)return null;for(;be!==null;)h(Ue,be),be=be.sibling;return null}function b(Ue,be){for(Ue=new Map;be!==null;)be.key!==null?Ue.set(be.key,be):Ue.set(be.index,be),be=be.sibling;return Ue}function P(Ue,be){return Ue=fo(Ue,be),Ue.index=0,Ue.sibling=null,Ue}function U(Ue,be,Ge){return Ue.index=Ge,f?(Ge=Ue.alternate,Ge!==null?(Ge=Ge.index,Ge<be?(Ue.flags|=2,be):Ge):(Ue.flags|=2,be)):(Ue.flags|=1048576,be)}function se(Ue){return f&&Ue.alternate===null&&(Ue.flags|=2),Ue}function we(Ue,be,Ge,xt){return be===null||be.tag!==6?(be=tf(Ge,Ue.mode,xt),be.return=Ue,be):(be=P(be,Ge),be.return=Ue,be)}function qe(Ue,be,Ge,xt){var Nt=Ge.type;return Nt===p?At(Ue,be,Ge.props.children,xt,Ge.key):be!==null&&(be.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===A&&fl(Nt)===be.type)?(xt=P(be,Ge.props),xt.ref=cl(Ue,be,Ge),xt.return=Ue,xt):(xt=ef(Ge.type,Ge.key,Ge.props,null,Ue.mode,xt),xt.ref=cl(Ue,be,Ge),xt.return=Ue,xt)}function ft(Ue,be,Ge,xt){return be===null||be.tag!==4||be.stateNode.containerInfo!==Ge.containerInfo||be.stateNode.implementation!==Ge.implementation?(be=nf(Ge,Ue.mode,xt),be.return=Ue,be):(be=P(be,Ge.children||[]),be.return=Ue,be)}function At(Ue,be,Ge,xt,Nt){return be===null||be.tag!==7?(be=La(Ge,Ue.mode,xt,Nt),be.return=Ue,be):(be=P(be,Ge),be.return=Ue,be)}function qt(Ue,be,Ge){if(typeof be=="string"&&be!==""||typeof be=="number")return be=tf(""+be,Ue.mode,Ge),be.return=Ue,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case c:return Ge=ef(be.type,be.key,be.props,null,Ue.mode,Ge),Ge.ref=cl(Ue,null,be),Ge.return=Ue,Ge;case d:return be=nf(be,Ue.mode,Ge),be.return=Ue,be;case A:var xt=be._init;return qt(Ue,xt(be._payload),Ge)}if(de(be)||N(be))return be=La(be,Ue.mode,Ge,null),be.return=Ue,be;zo(Ue,be)}return null}function zt(Ue,be,Ge,xt){var Nt=be!==null?be.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return Nt!==null?null:we(Ue,be,""+Ge,xt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case c:return Ge.key===Nt?qe(Ue,be,Ge,xt):null;case d:return Ge.key===Nt?ft(Ue,be,Ge,xt):null;case A:return Nt=Ge._init,zt(Ue,be,Nt(Ge._payload),xt)}if(de(Ge)||N(Ge))return Nt!==null?null:At(Ue,be,Ge,xt,null);zo(Ue,Ge)}return null}function on(Ue,be,Ge,xt,Nt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ue=Ue.get(Ge)||null,we(be,Ue,""+xt,Nt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case c:return Ue=Ue.get(xt.key===null?Ge:xt.key)||null,qe(be,Ue,xt,Nt);case d:return Ue=Ue.get(xt.key===null?Ge:xt.key)||null,ft(be,Ue,xt,Nt);case A:var Kt=xt._init;return on(Ue,be,Ge,Kt(xt._payload),Nt)}if(de(xt)||N(xt))return Ue=Ue.get(Ge)||null,At(be,Ue,xt,Nt,null);zo(be,xt)}return null}function St(Ue,be,Ge,xt){for(var Nt=null,Kt=null,Jt=be,gn=be=0,ci=null;Jt!==null&&gn<Ge.length;gn++){Jt.index>gn?(ci=Jt,Jt=null):ci=Jt.sibling;var mn=zt(Ue,Jt,Ge[gn],xt);if(mn===null){Jt===null&&(Jt=ci);break}f&&Jt&&mn.alternate===null&&h(Ue,Jt),be=U(mn,be,gn),Kt===null?Nt=mn:Kt.sibling=mn,Kt=mn,Jt=ci}if(gn===Ge.length)return x(Ue,Jt),Bn&&ca(Ue,gn),Nt;if(Jt===null){for(;gn<Ge.length;gn++)Jt=qt(Ue,Ge[gn],xt),Jt!==null&&(be=U(Jt,be,gn),Kt===null?Nt=Jt:Kt.sibling=Jt,Kt=Jt);return Bn&&ca(Ue,gn),Nt}for(Jt=b(Ue,Jt);gn<Ge.length;gn++)ci=on(Jt,Ue,gn,Ge[gn],xt),ci!==null&&(f&&ci.alternate!==null&&Jt.delete(ci.key===null?gn:ci.key),be=U(ci,be,gn),Kt===null?Nt=ci:Kt.sibling=ci,Kt=ci);return f&&Jt.forEach(function(ho){return h(Ue,ho)}),Bn&&ca(Ue,gn),Nt}function Vi(Ue,be,Ge,xt){var Nt=N(Ge);if(typeof Nt!="function")throw Error(a(150));if(Ge=Nt.call(Ge),Ge==null)throw Error(a(151));for(var Kt=Nt=null,Jt=be,gn=be=0,ci=null,mn=Ge.next();Jt!==null&&!mn.done;gn++,mn=Ge.next()){Jt.index>gn?(ci=Jt,Jt=null):ci=Jt.sibling;var ho=zt(Ue,Jt,mn.value,xt);if(ho===null){Jt===null&&(Jt=ci);break}f&&Jt&&ho.alternate===null&&h(Ue,Jt),be=U(ho,be,gn),Kt===null?Nt=ho:Kt.sibling=ho,Kt=ho,Jt=ci}if(mn.done)return x(Ue,Jt),Bn&&ca(Ue,gn),Nt;if(Jt===null){for(;!mn.done;gn++,mn=Ge.next())mn=qt(Ue,mn.value,xt),mn!==null&&(be=U(mn,be,gn),Kt===null?Nt=mn:Kt.sibling=mn,Kt=mn);return Bn&&ca(Ue,gn),Nt}for(Jt=b(Ue,Jt);!mn.done;gn++,mn=Ge.next())mn=on(Jt,Ue,gn,mn.value,xt),mn!==null&&(f&&mn.alternate!==null&&Jt.delete(mn.key===null?gn:mn.key),be=U(mn,be,gn),Kt===null?Nt=mn:Kt.sibling=mn,Kt=mn);return f&&Jt.forEach(function(zd){return h(Ue,zd)}),Bn&&ca(Ue,gn),Nt}function Br(Ue,be,Ge,xt){if(typeof Ge=="object"&&Ge!==null&&Ge.type===p&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case c:e:{for(var Nt=Ge.key,Kt=be;Kt!==null;){if(Kt.key===Nt){if(Nt=Ge.type,Nt===p){if(Kt.tag===7){x(Ue,Kt.sibling),be=P(Kt,Ge.props.children),be.return=Ue,Ue=be;break e}}else if(Kt.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===A&&fl(Nt)===Kt.type){x(Ue,Kt.sibling),be=P(Kt,Ge.props),be.ref=cl(Ue,Kt,Ge),be.return=Ue,Ue=be;break e}x(Ue,Kt);break}else h(Ue,Kt);Kt=Kt.sibling}Ge.type===p?(be=La(Ge.props.children,Ue.mode,xt,Ge.key),be.return=Ue,Ue=be):(xt=ef(Ge.type,Ge.key,Ge.props,null,Ue.mode,xt),xt.ref=cl(Ue,be,Ge),xt.return=Ue,Ue=xt)}return se(Ue);case d:e:{for(Kt=Ge.key;be!==null;){if(be.key===Kt)if(be.tag===4&&be.stateNode.containerInfo===Ge.containerInfo&&be.stateNode.implementation===Ge.implementation){x(Ue,be.sibling),be=P(be,Ge.children||[]),be.return=Ue,Ue=be;break e}else{x(Ue,be);break}else h(Ue,be);be=be.sibling}be=nf(Ge,Ue.mode,xt),be.return=Ue,Ue=be}return se(Ue);case A:return Kt=Ge._init,Br(Ue,be,Kt(Ge._payload),xt)}if(de(Ge))return St(Ue,be,Ge,xt);if(N(Ge))return Vi(Ue,be,Ge,xt);zo(Ue,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?(Ge=""+Ge,be!==null&&be.tag===6?(x(Ue,be.sibling),be=P(be,Ge),be.return=Ue,Ue=be):(x(Ue,be),be=tf(Ge,Ue.mode,xt),be.return=Ue,Ue=be),se(Ue)):x(Ue,be)}return Br}var Qs=Ap(!0),Cp=Ap(!1),dl={},vr=Pt(dl),fa=Pt(dl),da=Pt(dl);function hs(f){if(f===dl)throw Error(a(174));return f}function Rc(f,h){It(da,h),It(fa,f),It(vr,dl),f=me(h),ct(vr),It(vr,f)}function hl(){ct(vr),ct(fa),ct(da)}function Rp(f){var h=hs(da.current),x=hs(vr.current);h=H(x,f.type,h),x!==h&&(It(fa,f),It(vr,h))}function cd(f){fa.current===f&&(ct(vr),ct(fa))}var Hn=Pt(0);function Pc(f){for(var h=f;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||hi(x)||Jn(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Lr=[];function ha(){for(var f=0;f<Lr.length;f++){var h=Lr[f];Ce?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Lr.length=0}var nu=l.ReactCurrentDispatcher,Dr=l.ReactCurrentBatchConfig,pa=0,Gn=null,Ci=null,Ri=null,Ic=!1,Rs=!1,ma=0,iu=0;function Pi(){throw Error(a(321))}function Lc(f,h){if(h===null)return!1;for(var x=0;x<h.length&&x<f.length;x++)if(!Ei(f[x],h[x]))return!1;return!0}function pl(f,h,x,b,P,U){if(pa=U,Gn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,nu.current=f===null||f.memoizedState===null?gd:vd,f=x(b,P),Rs){U=0;do{if(Rs=!1,ma=0,25<=U)throw Error(a(301));U+=1,Ri=Ci=null,h.updateQueue=null,nu.current=yd,f=x(b,P)}while(Rs)}if(nu.current=yl,h=Ci!==null&&Ci.next!==null,pa=0,Ri=Ci=Gn=null,Ic=!1,h)throw Error(a(300));return f}function Vo(){var f=ma!==0;return ma=0,f}function ps(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?Gn.memoizedState=Ri=f:Ri=Ri.next=f,Ri}function ms(){if(Ci===null){var f=Gn.alternate;f=f!==null?f.memoizedState:null}else f=Ci.next;var h=Ri===null?Gn.memoizedState:Ri.next;if(h!==null)Ri=h,Ci=f;else{if(f===null)throw Error(a(310));Ci=f,f={memoizedState:Ci.memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},Ri===null?Gn.memoizedState=Ri=f:Ri=Ri.next=f}return Ri}function Ps(f,h){return typeof h=="function"?h(f):h}function ru(f){var h=ms(),x=h.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=f;var b=Ci,P=b.baseQueue,U=x.pending;if(U!==null){if(P!==null){var se=P.next;P.next=U.next,U.next=se}b.baseQueue=P=U,x.pending=null}if(P!==null){U=P.next,b=b.baseState;var we=se=null,qe=null,ft=U;do{var At=ft.lane;if((pa&At)===At)qe!==null&&(qe=qe.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),b=ft.hasEagerState?ft.eagerState:f(b,ft.action);else{var qt={lane:At,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};qe===null?(we=qe=qt,se=b):qe=qe.next=qt,Gn.lanes|=At,Ls|=At}ft=ft.next}while(ft!==null&&ft!==U);qe===null?se=b:qe.next=we,Ei(b,h.memoizedState)||(Ii=!0),h.memoizedState=b,h.baseState=se,h.baseQueue=qe,x.lastRenderedState=b}if(f=x.interleaved,f!==null){P=f;do U=P.lane,Gn.lanes|=U,Ls|=U,P=P.next;while(P!==f)}else P===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function su(f){var h=ms(),x=h.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=f;var b=x.dispatch,P=x.pending,U=h.memoizedState;if(P!==null){x.pending=null;var se=P=P.next;do U=f(U,se.action),se=se.next;while(se!==P);Ei(U,h.memoizedState)||(Ii=!0),h.memoizedState=U,h.baseQueue===null&&(h.baseState=U),x.lastRenderedState=U}return[U,b]}function fd(){}function dd(f,h){var x=Gn,b=ms(),P=h(),U=!Ei(b.memoizedState,P);if(U&&(b.memoizedState=P,Ii=!0),b=b.queue,ml($s.bind(null,x,b,f),[f]),b.getSnapshot!==h||U||Ri!==null&&Ri.memoizedState.tag&1){if(x.flags|=2048,au(9,pd.bind(null,x,b,P,h),void 0,null),ti===null)throw Error(a(349));pa&30||hd(x,h,P)}return P}function hd(f,h,x){f.flags|=16384,f={getSnapshot:h,value:x},h=Gn.updateQueue,h===null?(h={lastEffect:null,stores:null},Gn.updateQueue=h,h.stores=[f]):(x=h.stores,x===null?h.stores=[f]:x.push(f))}function pd(f,h,x,b){h.value=x,h.getSnapshot=b,Dc(h)&&Zi(f,1,-1)}function $s(f,h,x){return x(function(){Dc(h)&&Zi(f,1,-1)})}function Dc(f){var h=f.getSnapshot;f=f.value;try{var x=h();return!Ei(f,x)}catch{return!0}}function ou(f){var h=ps();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:f},h.queue=f,f=f.dispatch=rv.bind(null,Gn,f),[h.memoizedState,f]}function au(f,h,x,b){return f={tag:f,create:h,destroy:x,deps:b,next:null},h=Gn.updateQueue,h===null?(h={lastEffect:null,stores:null},Gn.updateQueue=h,h.lastEffect=f.next=f):(x=h.lastEffect,x===null?h.lastEffect=f.next=f:(b=x.next,x.next=f,f.next=b,h.lastEffect=f)),f}function Pp(){return ms().memoizedState}function Ho(f,h,x,b){var P=ps();Gn.flags|=f,P.memoizedState=au(1|h,x,void 0,b===void 0?null:b)}function kc(f,h,x,b){var P=ms();b=b===void 0?null:b;var U=void 0;if(Ci!==null){var se=Ci.memoizedState;if(U=se.destroy,b!==null&&Lc(b,se.deps)){P.memoizedState=au(h,x,U,b);return}}Gn.flags|=f,P.memoizedState=au(1|h,x,U,b)}function Nc(f,h){return Ho(8390656,8,f,h)}function ml(f,h){return kc(2048,8,f,h)}function In(f,h){return kc(4,2,f,h)}function Uc(f,h){return kc(4,4,f,h)}function lu(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function gl(f,h,x){return x=x!=null?x.concat([f]):null,kc(4,4,lu.bind(null,h,f),x)}function Fc(){}function Oc(f,h){var x=ms();h=h===void 0?null:h;var b=x.memoizedState;return b!==null&&h!==null&&Lc(h,b[1])?b[0]:(x.memoizedState=[f,h],f)}function vl(f,h){var x=ms();h=h===void 0?null:h;var b=x.memoizedState;return b!==null&&h!==null&&Lc(h,b[1])?b[0]:(f=f(),x.memoizedState=[f,h],f)}function Bc(f,h){var x=Xt;Xt=x!==0&&4>x?x:4,f(!0);var b=Dr.transition;Dr.transition={};try{f(!1),h()}finally{Xt=x,Dr.transition=b}}function ga(){return ms().memoizedState}function Ip(f,h,x){var b=xs(f);x={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null},Lp(f)?md(h,x):(uu(f,h,x),x=yn(),f=Zi(f,b,x),f!==null&&cu(f,h,b))}function rv(f,h,x){var b=xs(f),P={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null};if(Lp(f))md(h,P);else{uu(f,h,P);var U=f.alternate;if(f.lanes===0&&(U===null||U.lanes===0)&&(U=h.lastRenderedReducer,U!==null))try{var se=h.lastRenderedState,we=U(se,x);if(P.hasEagerState=!0,P.eagerState=we,Ei(we,se))return}catch{}finally{}x=yn(),f=Zi(f,b,x),f!==null&&cu(f,h,b)}}function Lp(f){var h=f.alternate;return f===Gn||h!==null&&h===Gn}function md(f,h){Rs=Ic=!0;var x=f.pending;x===null?h.next=h:(h.next=x.next,x.next=h),f.pending=h}function uu(f,h,x){ti!==null&&f.mode&1&&!(rn&2)?(f=h.interleaved,f===null?(x.next=x,er===null?er=[h]:er.push(h)):(x.next=f.next,f.next=x),h.interleaved=x):(f=h.pending,f===null?x.next=x:(x.next=f.next,f.next=x),h.pending=x)}function cu(f,h,x){if(x&4194240){var b=h.lanes;b&=f.pendingLanes,x|=b,h.lanes=x,Ni(f,x)}}var yl={readContext:Vn,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},gd={readContext:Vn,useCallback:function(f,h){return ps().memoizedState=[f,h===void 0?null:h],f},useContext:Vn,useEffect:Nc,useImperativeHandle:function(f,h,x){return x=x!=null?x.concat([f]):null,Ho(4194308,4,lu.bind(null,h,f),x)},useLayoutEffect:function(f,h){return Ho(4194308,4,f,h)},useInsertionEffect:function(f,h){return Ho(4,2,f,h)},useMemo:function(f,h){var x=ps();return h=h===void 0?null:h,f=f(),x.memoizedState=[f,h],f},useReducer:function(f,h,x){var b=ps();return h=x!==void 0?x(h):h,b.memoizedState=b.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},b.queue=f,f=f.dispatch=Ip.bind(null,Gn,f),[b.memoizedState,f]},useRef:function(f){var h=ps();return f={current:f},h.memoizedState=f},useState:ou,useDebugValue:Fc,useDeferredValue:function(f){var h=ou(f),x=h[0],b=h[1];return Nc(function(){var P=Dr.transition;Dr.transition={};try{b(f)}finally{Dr.transition=P}},[f]),x},useTransition:function(){var f=ou(!1),h=f[0];return f=Bc.bind(null,f[1]),ps().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,x){var b=Gn,P=ps();if(Bn){if(x===void 0)throw Error(a(407));x=x()}else{if(x=h(),ti===null)throw Error(a(349));pa&30||hd(b,h,x)}P.memoizedState=x;var U={value:x,getSnapshot:h};return P.queue=U,Nc($s.bind(null,b,U,f),[f]),b.flags|=2048,au(9,pd.bind(null,b,U,x,h),void 0,null),x},useId:function(){var f=ps(),h=ti.identifierPrefix;if(Bn){var x=Ks,b=Zs;x=(b&~(1<<32-cn(b)-1)).toString(32)+x,h=":"+h+"R"+x,x=ma++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=iu++,h=":"+h+"r"+x.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},vd={readContext:Vn,useCallback:Oc,useContext:Vn,useEffect:ml,useImperativeHandle:gl,useInsertionEffect:In,useLayoutEffect:Uc,useMemo:vl,useReducer:ru,useRef:Pp,useState:function(){return ru(Ps)},useDebugValue:Fc,useDeferredValue:function(f){var h=ru(Ps),x=h[0],b=h[1];return ml(function(){var P=Dr.transition;Dr.transition={};try{b(f)}finally{Dr.transition=P}},[f]),x},useTransition:function(){var f=ru(Ps)[0],h=ms().memoizedState;return[f,h]},useMutableSource:fd,useSyncExternalStore:dd,useId:ga,unstable_isNewReconciler:!1},yd={readContext:Vn,useCallback:Oc,useContext:Vn,useEffect:ml,useImperativeHandle:gl,useInsertionEffect:In,useLayoutEffect:Uc,useMemo:vl,useReducer:su,useRef:Pp,useState:function(){return su(Ps)},useDebugValue:Fc,useDeferredValue:function(f){var h=su(Ps),x=h[0],b=h[1];return ml(function(){var P=Dr.transition;Dr.transition={};try{b(f)}finally{Dr.transition=P}},[f]),x},useTransition:function(){var f=su(Ps)[0],h=ms().memoizedState;return[f,h]},useMutableSource:fd,useSyncExternalStore:dd,useId:ga,unstable_isNewReconciler:!1};function xd(f,h){try{var x="",b=h;do x+=js(b),b=b.return;while(b);var P=x}catch(U){P=`
Error generating stack: `+U.message+`
`+U.stack}return{value:f,source:h,stack:P}}function zc(f,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var sv=typeof WeakMap=="function"?WeakMap:Map;function Dp(f,h,x){x=Js(-1,x),x.tag=3,x.payload={element:null};var b=h.value;return x.callback=function(){El||(El=!0,Un=b),zc(f,h)},x}function Vc(f,h,x){x=Js(-1,x),x.tag=3;var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var P=h.value;x.payload=function(){return b(P)},x.callback=function(){zc(f,h)}}var U=f.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(x.callback=function(){zc(f,h),typeof b!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var se=h.stack;this.componentDidCatch(h.value,{componentStack:se!==null?se:""})}),x}function eo(f,h,x){var b=f.pingCache;if(b===null){b=f.pingCache=new sv;var P=new Set;b.set(h,P)}else P=b.get(h),P===void 0&&(P=new Set,b.set(h,P));P.has(x)||(P.add(x),f=Fd.bind(null,f,h,x),h.then(f,f))}function _d(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function va(f,h,x,b,P){return f.mode&1?(f.flags|=65536,f.lanes=P,f):(f===h?f.flags|=65536:(f.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=Js(-1,1),h.tag=2,Fo(x,h))),x.lanes|=1),f)}function vi(f){f.flags|=4}function xl(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var kr,ya,Hc,Gc;if(Pe)kr=function(f,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)Y(f,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},ya=function(){},Hc=function(f,h,x,b,P){if(f=f.memoizedProps,f!==b){var U=h.stateNode,se=hs(vr.current);x=Q(U,x,f,b,P,se),(h.updateQueue=x)&&vi(h)}},Gc=function(f,h,x,b){x!==b&&vi(h)};else if(Ie){kr=function(f,h,x,b){for(var P=h.child;P!==null;){if(P.tag===5){var U=P.stateNode;x&&b&&(U=Ct(U,P.type,P.memoizedProps,P)),Y(f,U)}else if(P.tag===6)U=P.stateNode,x&&b&&(U=dn(U,P.memoizedProps,P)),Y(f,U);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)U=P.child,U!==null&&(U.return=P),kr(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===h)break;for(;P.sibling===null;){if(P.return===null||P.return===h)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var Go=function(f,h,x,b){for(var P=h.child;P!==null;){if(P.tag===5){var U=P.stateNode;x&&b&&(U=Ct(U,P.type,P.memoizedProps,P)),vt(f,U)}else if(P.tag===6)U=P.stateNode,x&&b&&(U=dn(U,P.memoizedProps,P)),vt(f,U);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)U=P.child,U!==null&&(U.return=P),Go(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===h)break;for(;P.sibling===null;){if(P.return===null||P.return===h)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};ya=function(f,h){var x=h.stateNode;if(!xl(f,h)){f=x.containerInfo;var b=$e(f);Go(b,h,!1,!1),x.pendingChildren=b,vi(h),Dt(f,b)}},Hc=function(f,h,x,b,P){var U=f.stateNode,se=f.memoizedProps;if((f=xl(f,h))&&se===b)h.stateNode=U;else{var we=h.stateNode,qe=hs(vr.current),ft=null;se!==b&&(ft=Q(we,x,se,b,P,qe)),f&&ft===null?h.stateNode=U:(U=et(U,ft,x,se,b,h,f,we),ce(U,x,b,P,qe)&&vi(h),h.stateNode=U,f?vi(h):kr(U,h,!1,!1))}},Gc=function(f,h,x,b){x!==b?(f=hs(da.current),x=hs(vr.current),h.stateNode=pe(b,f,x,h),vi(h)):h.stateNode=f.stateNode}}else ya=function(){},Hc=function(){},Gc=function(){};function to(f,h){if(!Bn)switch(f.tailMode){case"hidden":h=f.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:b.sibling=null}}function ei(f){var h=f.alternate!==null&&f.alternate.child===f.child,x=0,b=0;if(h)for(var P=f.child;P!==null;)x|=P.lanes|P.childLanes,b|=P.subtreeFlags&14680064,b|=P.flags&14680064,P.return=f,P=P.sibling;else for(P=f.child;P!==null;)x|=P.lanes|P.childLanes,b|=P.subtreeFlags,b|=P.flags,P.return=f,P=P.sibling;return f.subtreeFlags|=b,f.childLanes=x,h}function Wc(f,h,x){var b=h.pendingProps;switch(ad(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(h),null;case 1:return un(h.type)&&jt(),ei(h),null;case 3:return b=h.stateNode,hl(),ct(tn),ct(sn),ha(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(tu(h)?vi(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Qr!==null&&(Mu(Qr),Qr=null))),ya(f,h),ei(h),null;case 5:cd(h),x=hs(da.current);var P=h.type;if(f!==null&&h.stateNode!=null)Hc(f,h,P,b,x),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(a(166));return ei(h),null}if(f=hs(vr.current),tu(h)){if(!Qe)throw Error(a(175));f=ra(h.stateNode,h.type,h.memoizedProps,x,f,h,!ll),h.updateQueue=f,f!==null&&vi(h)}else{var U=D(P,b,x,f,h);kr(U,h,!1,!1),h.stateNode=U,ce(U,P,b,x,f)&&vi(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return ei(h),null;case 6:if(f&&h.stateNode!=null)Gc(f,h,f.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(a(166));if(f=hs(da.current),x=hs(vr.current),tu(h)){if(!Qe)throw Error(a(176));if(f=h.stateNode,b=h.memoizedProps,(x=pr(f,b,h,!ll))&&(P=tr,P!==null))switch(U=(P.mode&1)!==0,P.tag){case 3:Ee(P.stateNode.containerInfo,f,b,U);break;case 5:Oe(P.type,P.memoizedProps,P.stateNode,f,b,U)}x&&vi(h)}else h.stateNode=pe(b,f,x,h)}return ei(h),null;case 13:if(ct(Hn),b=h.memoizedState,Bn&&Ui!==null&&h.mode&1&&!(h.flags&128)){for(f=Ui;f;)f=pi(f);return ul(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=tu(h),f===null){if(!b)throw Error(a(318));if(!Qe)throw Error(a(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));nl(f,h)}else ul(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return ei(h),null}return Qr!==null&&(Mu(Qr),Qr=null),h.flags&128?(h.lanes=x,h):(b=b!==null,x=!1,f===null?tu(h):x=f.memoizedState!==null,b&&!x&&(h.child.flags|=8192,h.mode&1&&(f===null||Hn.current&1?Yn===0&&(Yn=3):Kc())),h.updateQueue!==null&&(h.flags|=4),ei(h),null);case 4:return hl(),ya(f,h),f===null&&lt(h.stateNode.containerInfo),ei(h),null;case 10:return li(h.type._context),ei(h),null;case 17:return un(h.type)&&jt(),ei(h),null;case 19:if(ct(Hn),P=h.memoizedState,P===null)return ei(h),null;if(b=(h.flags&128)!==0,U=P.rendering,U===null)if(b)to(P,!1);else{if(Yn!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(U=Pc(f),U!==null){for(h.flags|=128,to(P,!1),f=U.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=x,b=h.child;b!==null;)x=b,P=f,x.flags&=14680066,U=x.alternate,U===null?(x.childLanes=0,x.lanes=P,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=U.childLanes,x.lanes=U.lanes,x.child=U.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=U.memoizedProps,x.memoizedState=U.memoizedState,x.updateQueue=U.updateQueue,x.type=U.type,P=U.dependencies,x.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),b=b.sibling;return It(Hn,Hn.current&1|2),h.child}f=f.sibling}P.tail!==null&&On()>Xo&&(h.flags|=128,b=!0,to(P,!1),h.lanes=4194304)}else{if(!b)if(f=Pc(U),f!==null){if(h.flags|=128,b=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),to(P,!0),P.tail===null&&P.tailMode==="hidden"&&!U.alternate&&!Bn)return ei(h),null}else 2*On()-P.renderingStartTime>Xo&&x!==1073741824&&(h.flags|=128,b=!0,to(P,!1),h.lanes=4194304);P.isBackwards?(U.sibling=h.child,h.child=U):(f=P.last,f!==null?f.sibling=U:h.child=U,P.last=U)}return P.tail!==null?(h=P.tail,P.rendering=h,P.tail=h.sibling,P.renderingStartTime=On(),h.sibling=null,f=Hn.current,It(Hn,b?f&1|2:f&1),h):(ei(h),null);case 22:case 23:return Eu(),b=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==b&&(h.flags|=8192),b&&h.mode&1?Ji&1073741824&&(ei(h),Pe&&h.subtreeFlags&6&&(h.flags|=8192)):ei(h),null;case 24:return null;case 25:return null}throw Error(a(156,h.tag))}var Sd=l.ReactCurrentOwner,Ii=!1;function Xn(f,h,x,b){h.child=f===null?Cp(h,null,x,b):Qs(h,f.child,x,b)}function Ln(f,h,x,b,P){x=x.render;var U=h.ref;return $n(h,P),b=pl(f,h,x,b,U,P),x=Vo(),f!==null&&!Ii?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~P,yr(f,h,P)):(Bn&&x&&od(h),h.flags|=1,Xn(f,h,b,P),h.child)}function An(f,h,x,b,P){if(f===null){var U=x.type;return typeof U=="function"&&!$c(U)&&U.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=U,no(f,h,U,b,P)):(f=ef(x.type,null,b,h,h.mode,P),f.ref=h.ref,f.return=h,h.child=f)}if(U=f.child,!(f.lanes&P)){var se=U.memoizedProps;if(x=x.compare,x=x!==null?x:mr,x(se,b)&&f.ref===h.ref)return yr(f,h,P)}return h.flags|=1,f=fo(U,b),f.ref=h.ref,f.return=h,h.child=f}function no(f,h,x,b,P){if(f!==null&&mr(f.memoizedProps,b)&&f.ref===h.ref)if(Ii=!1,(f.lanes&P)!==0)f.flags&131072&&(Ii=!0);else return h.lanes=f.lanes,yr(f,h,P);return io(f,h,x,b,P)}function Fi(f,h,x){var b=h.pendingProps,P=b.children,U=f!==null?f.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},It(Aa,Ji),Ji|=x;else if(x&1073741824)h.memoizedState={baseLanes:0,cachePool:null},b=U!==null?U.baseLanes:x,It(Aa,Ji),Ji|=b;else return f=U!==null?U.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,It(Aa,Ji),Ji|=f,null;else U!==null?(b=U.baseLanes|x,h.memoizedState=null):b=x,It(Aa,Ji),Ji|=b;return Xn(f,h,P,x),h.child}function nr(f,h){var x=h.ref;(f===null&&x!==null||f!==null&&f.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function io(f,h,x,b,P){var U=un(x)?Zt:sn.current;return U=Tt(h,U),$n(h,P),x=pl(f,h,x,b,U,P),b=Vo(),f!==null&&!Ii?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~P,yr(f,h,P)):(Bn&&b&&od(h),h.flags|=1,Xn(f,h,x,P),h.child)}function xa(f,h,x,b,P){if(un(x)){var U=!0;jn(h)}else U=!1;if($n(h,P),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),Mp(h,x,b),sd(h,x,b,P),b=!0;else if(f===null){var se=h.stateNode,we=h.memoizedProps;se.props=we;var qe=se.context,ft=x.contextType;typeof ft=="object"&&ft!==null?ft=Vn(ft):(ft=un(x)?Zt:sn.current,ft=Tt(h,ft));var At=x.getDerivedStateFromProps,qt=typeof At=="function"||typeof se.getSnapshotBeforeUpdate=="function";qt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(we!==b||qe!==ft)&&Ep(h,se,b,ft),Zr=!1;var zt=h.memoizedState;se.state=zt,Mc(h,b,se,P),qe=h.memoizedState,we!==b||zt!==qe||tn.current||Zr?(typeof At=="function"&&(id(h,x,At,b),qe=h.memoizedState),(we=Zr||rd(h,x,we,b,zt,qe,ft))?(qt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(h.flags|=4194308)):(typeof se.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=qe),se.props=b,se.state=qe,se.context=ft,b=we):(typeof se.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{se=h.stateNode,nd(f,h),we=h.memoizedProps,ft=h.type===h.elementType?we:Ti(h.type,we),se.props=ft,qt=h.pendingProps,zt=se.context,qe=x.contextType,typeof qe=="object"&&qe!==null?qe=Vn(qe):(qe=un(x)?Zt:sn.current,qe=Tt(h,qe));var on=x.getDerivedStateFromProps;(At=typeof on=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(we!==qt||zt!==qe)&&Ep(h,se,b,qe),Zr=!1,zt=h.memoizedState,se.state=zt,Mc(h,b,se,P);var St=h.memoizedState;we!==qt||zt!==St||tn.current||Zr?(typeof on=="function"&&(id(h,x,on,b),St=h.memoizedState),(ft=Zr||rd(h,x,ft,b,zt,St,qe)||!1)?(At||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(b,St,qe),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(b,St,qe)),typeof se.componentDidUpdate=="function"&&(h.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof se.componentDidUpdate!="function"||we===f.memoizedProps&&zt===f.memoizedState||(h.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||we===f.memoizedProps&&zt===f.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=St),se.props=b,se.state=St,se.context=qe,b=ft):(typeof se.componentDidUpdate!="function"||we===f.memoizedProps&&zt===f.memoizedState||(h.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||we===f.memoizedProps&&zt===f.memoizedState||(h.flags|=1024),b=!1)}return qi(f,h,x,b,U,P)}function qi(f,h,x,b,P,U){nr(f,h);var se=(h.flags&128)!==0;if(!b&&!se)return P&&Kn(h,x,!1),yr(f,h,U);b=h.stateNode,Sd.current=h;var we=se&&typeof x.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,f!==null&&se?(h.child=Qs(h,f.child,null,U),h.child=Qs(h,null,we,U)):Xn(f,h,we,U),h.memoizedState=b.state,P&&Kn(h,x,!0),h.child}function fu(f){var h=f.stateNode;h.pendingContext?Zn(f,h.pendingContext,h.pendingContext!==h.context):h.context&&Zn(f,h.context,!1),Rc(f,h.containerInfo)}function wd(f,h,x,b,P){return ul(),Cc(P),h.flags|=256,Xn(f,h,x,b),h.child}var du={dehydrated:null,treeContext:null,retryLane:0};function _a(f){return{baseLanes:f,cachePool:null}}function Md(f,h,x){var b=h.pendingProps,P=Hn.current,U=!1,se=(h.flags&128)!==0,we;if((we=se)||(we=f!==null&&f.memoizedState===null?!1:(P&2)!==0),we?(U=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(P|=1),It(Hn,P&1),f===null)return Bo(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?Jn(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(P=b.children,f=b.fallback,U?(b=h.mode,U=h.child,P={mode:"hidden",children:P},!(b&1)&&U!==null?(U.childLanes=0,U.pendingProps=P):U=Au(P,b,0,null),f=La(f,b,x,null),U.return=h,f.return=h,U.sibling=f,h.child=U,h.child.memoizedState=_a(x),h.memoizedState=du,f):gs(h,P));if(P=f.memoizedState,P!==null){if(we=P.dehydrated,we!==null){if(se)return h.flags&256?(h.flags&=-257,pu(f,h,x,Error(a(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(U=b.fallback,P=h.mode,b=Au({mode:"visible",children:b.children},P,0,null),U=La(U,P,x,null),U.flags|=2,b.return=h,U.return=h,b.sibling=U,h.child=b,h.mode&1&&Qs(h,f.child,null,x),h.child.memoizedState=_a(x),h.memoizedState=du,U);if(!(h.mode&1))h=pu(f,h,x,null);else if(Jn(we))h=pu(f,h,x,Error(a(419)));else if(b=(x&f.childLanes)!==0,Ii||b){if(b=ti,b!==null){switch(x&-x){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}b=U&(b.suspendedLanes|x)?0:U,b!==0&&b!==P.retryLane&&(P.retryLane=b,Zi(f,b,-1))}Kc(),h=pu(f,h,x,Error(a(421)))}else hi(we)?(h.flags|=128,h.child=f.child,h=Op.bind(null,f),ji(we,h),h=null):(x=P.treeContext,Qe&&(Ui=hr(we),tr=h,Bn=!0,Qr=null,ll=!1,x!==null&&(Kr[Ir++]=Zs,Kr[Ir++]=Ks,Kr[Ir++]=ua,Zs=x.id,Ks=x.overflow,ua=h)),h=gs(h,h.pendingProps.children),h.flags|=4096);return h}return U?(b=jc(f,h,b.children,b.fallback,x),U=h.child,P=f.child.memoizedState,U.memoizedState=P===null?_a(x):{baseLanes:P.baseLanes|x,cachePool:null},U.childLanes=f.childLanes&~x,h.memoizedState=du,b):(x=hu(f,h,b.children,x),h.memoizedState=null,x)}return U?(b=jc(f,h,b.children,b.fallback,x),U=h.child,P=f.child.memoizedState,U.memoizedState=P===null?_a(x):{baseLanes:P.baseLanes|x,cachePool:null},U.childLanes=f.childLanes&~x,h.memoizedState=du,b):(x=hu(f,h,b.children,x),h.memoizedState=null,x)}function gs(f,h){return h=Au({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function hu(f,h,x,b){var P=f.child;return f=P.sibling,x=fo(P,{mode:"visible",children:x}),!(h.mode&1)&&(x.lanes=b),x.return=h,x.sibling=null,f!==null&&(b=h.deletions,b===null?(h.deletions=[f],h.flags|=16):b.push(f)),h.child=x}function jc(f,h,x,b,P){var U=h.mode;f=f.child;var se=f.sibling,we={mode:"hidden",children:x};return!(U&1)&&h.child!==f?(x=h.child,x.childLanes=0,x.pendingProps=we,h.deletions=null):(x=fo(f,we),x.subtreeFlags=f.subtreeFlags&14680064),se!==null?b=fo(se,b):(b=La(b,U,P,null),b.flags|=2),b.return=h,x.return=h,x.sibling=b,h.child=x,b}function pu(f,h,x,b){return b!==null&&Cc(b),Qs(h,f.child,null,x),f=gs(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function kp(f,h,x){f.lanes|=h;var b=f.alternate;b!==null&&(b.lanes|=h),gi(f.return,h,x)}function Is(f,h,x,b,P){var U=f.memoizedState;U===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:P}:(U.isBackwards=h,U.rendering=null,U.renderingStartTime=0,U.last=b,U.tail=x,U.tailMode=P)}function Sa(f,h,x){var b=h.pendingProps,P=b.revealOrder,U=b.tail;if(Xn(f,h,b.children,x),b=Hn.current,b&2)b=b&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&kp(f,x,h);else if(f.tag===19)kp(f,x,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}b&=1}if(It(Hn,b),!(h.mode&1))h.memoizedState=null;else switch(P){case"forwards":for(x=h.child,P=null;x!==null;)f=x.alternate,f!==null&&Pc(f)===null&&(P=x),x=x.sibling;x=P,x===null?(P=h.child,h.child=null):(P=x.sibling,x.sibling=null),Is(h,!1,P,x,U);break;case"backwards":for(x=null,P=h.child,h.child=null;P!==null;){if(f=P.alternate,f!==null&&Pc(f)===null){h.child=P;break}f=P.sibling,P.sibling=x,x=P,P=f}Is(h,!0,x,null,U);break;case"together":Is(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function yr(f,h,x){if(f!==null&&(h.dependencies=f.dependencies),Ls|=h.lanes,!(x&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(a(153));if(h.child!==null){for(f=h.child,x=fo(f,f.pendingProps),h.child=x,x.return=h;f.sibling!==null;)f=f.sibling,x=x.sibling=fo(f,f.pendingProps),x.return=h;x.sibling=null}return h.child}function Xc(f,h,x){switch(h.tag){case 3:fu(h),ul();break;case 5:Rp(h);break;case 1:un(h.type)&&jn(h);break;case 4:Rc(h,h.stateNode.containerInfo);break;case 10:qs(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(It(Hn,Hn.current&1),h.flags|=128,null):x&h.child.childLanes?Md(f,h,x):(It(Hn,Hn.current&1),f=yr(f,h,x),f!==null?f.sibling:null);It(Hn,Hn.current&1);break;case 19:if(b=(x&h.childLanes)!==0,f.flags&128){if(b)return Sa(f,h,x);h.flags|=128}var P=h.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),It(Hn,Hn.current),b)break;return null;case 22:case 23:return h.lanes=0,Fi(f,h,x)}return yr(f,h,x)}function Yc(f,h){switch(ad(h),h.tag){case 1:return un(h.type)&&jt(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return hl(),ct(tn),ct(sn),ha(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return cd(h),null;case 13:if(ct(Hn),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(a(340));ul()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return ct(Hn),null;case 4:return hl(),null;case 10:return li(h.type._context),null;case 22:case 23:return Eu(),null;case 24:return null;default:return null}}var ir=!1,Li=!1,wa=typeof WeakSet=="function"?WeakSet:Set,pt=null;function $r(f,h){var x=f.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(b){sr(f,h,b)}else x.current=null}function ro(f,h,x){try{x()}catch(b){sr(f,h,b)}}var Ed=!1;function bd(f,h){for(J(f.containerInfo),pt=h;pt!==null;)if(f=pt,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,pt=h;else for(;pt!==null;){f=pt;try{var x=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,P=x.memoizedState,U=f.stateNode,se=U.getSnapshotBeforeUpdate(f.elementType===f.type?b:Ti(f.type,b),P);U.__reactInternalSnapshotBeforeUpdate=se}break;case 3:Pe&&Ye(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(we){sr(f,f.return,we)}if(h=f.sibling,h!==null){h.return=f.return,pt=h;break}pt=f.return}return x=Ed,Ed=!1,x}function so(f,h,x){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var P=b=b.next;do{if((P.tag&f)===f){var U=P.destroy;P.destroy=void 0,U!==void 0&&ro(h,x,U)}P=P.next}while(P!==b)}}function Oi(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&f)===f){var b=x.create;x.destroy=b()}x=x.next}while(x!==h)}}function rr(f){var h=f.ref;if(h!==null){var x=f.stateNode;switch(f.tag){case 5:f=ae(x);break;default:f=x}typeof h=="function"?h(f):h.current=f}}function Nn(f,h,x){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Do,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var b=f=f.next;do{var P=b,U=P.destroy;P=P.tag,U!==void 0&&(P&2||P&4)&&ro(h,x,U),b=b.next}while(b!==f)}break;case 1:if($r(h,x),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(se){sr(h,x,se)}break;case 5:$r(h,x);break;case 4:Pe?Cd(f,h,x):Ie&&Ie&&(h=h.stateNode.containerInfo,x=$e(h),Et(h,x))}}function es(f,h,x){for(var b=h;;)if(Nn(f,b,x),b.child===null||Pe&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function Td(f){var h=f.alternate;h!==null&&(f.alternate=null,Td(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&Le(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Ad(f){return f.tag===5||f.tag===3||f.tag===4}function qc(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Ad(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Jc(f){if(Pe){e:{for(var h=f.return;h!==null;){if(Ad(h))break e;h=h.return}throw Error(a(160))}var x=h;switch(x.tag){case 5:h=x.stateNode,x.flags&32&&(Fe(h),x.flags&=-33),x=qc(f),_l(f,x,h);break;case 3:case 4:h=x.stateNode.containerInfo,x=qc(f),Zc(f,x,h);break;default:throw Error(a(161))}}}function Zc(f,h,x){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?it(x,f,h):Ke(x,f);else if(b!==4&&(f=f.child,f!==null))for(Zc(f,h,x),f=f.sibling;f!==null;)Zc(f,h,x),f=f.sibling}function _l(f,h,x){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?ot(x,f,h):He(x,f);else if(b!==4&&(f=f.child,f!==null))for(_l(f,h,x),f=f.sibling;f!==null;)_l(f,h,x),f=f.sibling}function Cd(f,h,x){for(var b=h,P=!1,U,se;;){if(!P){P=b.return;e:for(;;){if(P===null)throw Error(a(160));switch(U=P.stateNode,P.tag){case 5:se=!1;break e;case 3:U=U.containerInfo,se=!0;break e;case 4:U=U.containerInfo,se=!0;break e}P=P.return}P=!0}if(b.tag===5||b.tag===6)es(f,b,x),se?fe(U,b.stateNode):Xe(U,b.stateNode);else if(b.tag===18)se?oa(U,b.stateNode):il(U,b.stateNode);else if(b.tag===4){if(b.child!==null){U=b.stateNode.containerInfo,se=!0,b.child.return=b,b=b.child;continue}}else if(Nn(f,b,x),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(P=!1)}b.sibling.return=b.return,b=b.sibling}}function Wo(f,h){if(Pe){switch(h.tag){case 0:case 11:case 14:case 15:so(3,h,h.return),Oi(3,h),so(5,h,h.return);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var b=h.memoizedProps;f=f!==null?f.memoizedProps:b;var P=h.type,U=h.updateQueue;h.updateQueue=null,U!==null&&nt(x,U,P,f,b,h)}return;case 6:if(h.stateNode===null)throw Error(a(162));x=h.memoizedProps,gt(h.stateNode,f!==null?f.memoizedProps:x,x);return;case 3:Qe&&f!==null&&f.memoizedState.isDehydrated&&Gs(h.stateNode.containerInfo);return;case 12:return;case 13:Sl(h);return;case 19:Sl(h);return;case 17:return}throw Error(a(163))}switch(h.tag){case 0:case 11:case 14:case 15:so(3,h,h.return),Oi(3,h),so(5,h,h.return);return;case 12:return;case 13:Sl(h);return;case 19:Sl(h);return;case 3:Qe&&f!==null&&f.memoizedState.isDehydrated&&Gs(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ie){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Et(h.containerInfo,h.pendingChildren);break e}throw Error(a(163))}}function Sl(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var x=f.stateNode;x===null&&(x=f.stateNode=new wa),h.forEach(function(b){var P=Bp.bind(null,f,b);x.has(b)||(x.add(b),b.then(P,P))})}}function ov(f,h){for(pt=h;pt!==null;){h=pt;var x=h.deletions;if(x!==null)for(var b=0;b<x.length;b++){var P=x[b];try{var U=f;Pe?Cd(U,P,h):es(U,P,h);var se=P.alternate;se!==null&&(se.return=null),P.return=null}catch(Nt){sr(P,h,Nt)}}if(x=h.child,h.subtreeFlags&12854&&x!==null)x.return=h,pt=x;else for(;pt!==null;){h=pt;try{var we=h.flags;if(we&32&&Pe&&Fe(h.stateNode),we&512){var qe=h.alternate;if(qe!==null){var ft=qe.ref;ft!==null&&(typeof ft=="function"?ft(null):ft.current=null)}}if(we&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var At=h.alternate;(At===null||At.memoizedState===null)&&(Su=On())}break;case 22:var qt=h.memoizedState!==null,zt=h.alternate,on=zt!==null&&zt.memoizedState!==null;if(x=h,Pe){e:if(b=x,P=qt,U=null,Pe)for(var St=b;;){if(St.tag===5){if(U===null){U=St;var Vi=St.stateNode;P?ut(Vi):Ve(St.stateNode,St.memoizedProps)}}else if(St.tag===6){if(U===null){var Br=St.stateNode;P?ue(Br):Re(Br,St.memoizedProps)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===b)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===b)break;for(;St.sibling===null;){if(St.return===null||St.return===b)break e;U===St&&(U=null),St=St.return}U===St&&(U=null),St.sibling.return=St.return,St=St.sibling}}if(qt&&!on&&x.mode&1){pt=x;for(var Ue=x.child;Ue!==null;){for(x=pt=Ue;pt!==null;){b=pt;var be=b.child;switch(b.tag){case 0:case 11:case 14:case 15:so(4,b,b.return);break;case 1:$r(b,b.return);var Ge=b.stateNode;if(typeof Ge.componentWillUnmount=="function"){var xt=b.return;try{Ge.props=b.memoizedProps,Ge.state=b.memoizedState,Ge.componentWillUnmount()}catch(Nt){sr(b,xt,Nt)}}break;case 5:$r(b,b.return);break;case 22:if(b.memoizedState!==null){Pd(x);continue}}be!==null?(be.return=b,pt=be):Pd(x)}Ue=Ue.sibling}}}switch(we&4102){case 2:Jc(h),h.flags&=-3;break;case 6:Jc(h),h.flags&=-3,Wo(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Wo(h.alternate,h);break;case 4:Wo(h.alternate,h)}}catch(Nt){sr(h,h.return,Nt)}if(x=h.sibling,x!==null){x.return=h.return,pt=x;break}pt=h.return}}}function mu(f,h,x){pt=f,gu(f)}function gu(f,h,x){for(var b=(f.mode&1)!==0;pt!==null;){var P=pt,U=P.child;if(P.tag===22&&b){var se=P.memoizedState!==null||ir;if(!se){var we=P.alternate,qe=we!==null&&we.memoizedState!==null||Li;we=ir;var ft=Li;if(ir=se,(Li=qe)&&!ft)for(pt=P;pt!==null;)se=pt,qe=se.child,se.tag===22&&se.memoizedState!==null?Ma(P):qe!==null?(qe.return=se,pt=qe):Ma(P);for(;U!==null;)pt=U,gu(U),U=U.sibling;pt=P,ir=we,Li=ft}Rd(f)}else P.subtreeFlags&8772&&U!==null?(U.return=P,pt=U):Rd(f)}}function Rd(f){for(;pt!==null;){var h=pt;if(h.flags&8772){var x=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Li||Oi(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Li)if(x===null)b.componentDidMount();else{var P=h.elementType===h.type?x.memoizedProps:Ti(h.type,x.memoizedProps);b.componentDidUpdate(P,x.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var U=h.updateQueue;U!==null&&Sp(h,U,b);break;case 3:var se=h.updateQueue;if(se!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=ae(h.child.stateNode);break;case 1:x=h.child.stateNode}Sp(h,se,x)}break;case 5:var we=h.stateNode;x===null&&h.flags&4&&je(we,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Qe&&h.memoizedState===null){var qe=h.alternate;if(qe!==null){var ft=qe.memoizedState;if(ft!==null){var At=ft.dehydrated;At!==null&&Po(At)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Li||h.flags&512&&rr(h)}catch(qt){sr(h,h.return,qt)}}if(h===f){pt=null;break}if(x=h.sibling,x!==null){x.return=h.return,pt=x;break}pt=h.return}}function Pd(f){for(;pt!==null;){var h=pt;if(h===f){pt=null;break}var x=h.sibling;if(x!==null){x.return=h.return,pt=x;break}pt=h.return}}function Ma(f){for(;pt!==null;){var h=pt;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{Oi(4,h)}catch(qe){sr(h,x,qe)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var P=h.return;try{b.componentDidMount()}catch(qe){sr(h,P,qe)}}var U=h.return;try{rr(h)}catch(qe){sr(h,U,qe)}break;case 5:var se=h.return;try{rr(h)}catch(qe){sr(h,se,qe)}}}catch(qe){sr(h,h.return,qe)}if(h===f){pt=null;break}var we=h.sibling;if(we!==null){we.return=h.return,pt=we;break}pt=h.return}}var vu=0,Ea=1,ba=2,oo=3,wl=4;if(typeof Symbol=="function"&&Symbol.for){var Ta=Symbol.for;vu=Ta("selector.component"),Ea=Ta("selector.has_pseudo_class"),ba=Ta("selector.role"),oo=Ta("selector.test_id"),wl=Ta("selector.text")}function yu(f){var h=ee(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(a(364));return h}if(f=V(f),f===null)throw Error(a(362));return f.stateNode.current}function xu(f,h){switch(h.$$typeof){case vu:if(f.type===h.value)return!0;break;case Ea:e:{h=h.value,f=[f,0];for(var x=0;x<f.length;){var b=f[x++],P=f[x++],U=h[P];if(b.tag!==5||!ye(b)){for(;U!=null&&xu(b,U);)P++,U=h[P];if(P===h.length){h=!0;break e}else for(b=b.child;b!==null;)f.push(b,P),b=b.sibling}}h=!1}return h;case ba:if(f.tag===5&&Se(f.stateNode,h.value))return!0;break;case wl:if((f.tag===5||f.tag===6)&&(f=oe(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case oo:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function jo(f){switch(f.$$typeof){case vu:return"<"+(O(f.value)||"Unknown")+">";case Ea:return":has("+(jo(f)||"")+")";case ba:return'[role="'+f.value+'"]';case wl:return'"'+f.value+'"';case oo:return'[data-testname="'+f.value+'"]';default:throw Error(a(365))}}function Nr(f,h){var x=[];f=[f,0];for(var b=0;b<f.length;){var P=f[b++],U=f[b++],se=h[U];if(P.tag!==5||!ye(P)){for(;se!=null&&xu(P,se);)U++,se=h[U];if(U===h.length)x.push(P);else for(P=P.child;P!==null;)f.push(P,U),P=P.sibling}}return x}function ao(f,h){if(!_e)throw Error(a(363));f=yu(f),f=Nr(f,h),h=[],f=Array.from(f);for(var x=0;x<f.length;){var b=f[x++];if(b.tag===5)ye(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)f.push(b),b=b.sibling}return h}var Id=Math.ceil,_u=l.ReactCurrentDispatcher,vs=l.ReactCurrentOwner,En=l.ReactCurrentBatchConfig,rn=0,ti=null,bn=null,zn=0,Ji=0,Aa=Pt(0),Yn=0,Ml=null,Ls=0,Ur=0,Ca=0,lo=null,ui=null,Su=0,Xo=1/0;function Ra(){Xo=On()+500}var El=!1,Un=null,ys=null,bl=!1,Ds=null,Pa=0,Ia=0,uo=null,Dn=-1,qn=0;function yn(){return rn&6?On():Dn!==-1?Dn:Dn=On()}function xs(f){return f.mode&1?rn&2&&zn!==0?zn&-zn:Uo.transition!==null?(qn===0&&(f=Pn,Pn<<=1,!(Pn&4194240)&&(Pn=64),qn=f),qn):(f=Xt,f!==0?f:Ae()):1}function Zi(f,h,x){if(50<Ia)throw Ia=0,uo=null,Error(a(185));var b=Yo(f,h);return b===null?null:(Xr(b,h,x),(!(rn&2)||b!==ti)&&(b===ti&&(!(rn&2)&&(Ur|=h),Yn===4&&zi(b,zn)),xr(b,x),h===1&&rn===0&&!(f.mode&1)&&(Ra(),Cs&&Yi())),b)}function Yo(f,h){f.lanes|=h;var x=f.alternate;for(x!==null&&(x.lanes|=h),x=f,f=f.return;f!==null;)f.childLanes|=h,x=f.alternate,x!==null&&(x.childLanes|=h),x=f,f=f.return;return x.tag===3?x.stateNode:null}function xr(f,h){var x=f.callbackNode;sl(f,h);var b=Io(f,f===ti?zn:0);if(b===0)x!==null&&As(x),f.callbackNode=null,f.callbackPriority=0;else if(h=b&-b,f.callbackPriority!==h){if(x!=null&&As(x),h===1)f.tag===0?No(Fr.bind(null,f)):la(Fr.bind(null,f)),ge?ze(function(){rn===0&&Yi()}):Rr(ds,Yi),x=null;else{switch(Yr(b)){case 1:x=ds;break;case 4:x=_c;break;case 16:x=Xi;break;case 536870912:x=Lo;break;default:x=Xi}x=Qc(x,Bi.bind(null,f))}f.callbackPriority=h,f.callbackNode=x}}function Bi(f,h){if(Dn=-1,qn=0,rn&6)throw Error(a(327));var x=f.callbackNode;if(ks()&&f.callbackNode!==x)return null;var b=Io(f,f===ti?zn:0);if(b===0)return null;if(b&30||b&f.expiredLanes||h)h=bu(f,b);else{h=b;var P=rn;rn|=2;var U=kd();(ti!==f||zn!==h)&&(Ra(),co(f,h));do try{Up();break}catch(we){Dd(f,we)}while(!0);Ai(),_u.current=U,rn=P,bn!==null?h=0:(ti=null,zn=0,h=Yn)}if(h!==0){if(h===2&&(P=Ts(f),P!==0&&(b=P,h=wu(f,P))),h===1)throw x=Ml,co(f,0),zi(f,b),xr(f,On()),x;if(h===6)zi(f,b);else{if(P=f.current.alternate,!(b&30)&&!Ld(P)&&(h=bu(f,b),h===2&&(U=Ts(f),U!==0&&(b=U,h=wu(f,U))),h===1))throw x=Ml,co(f,0),zi(f,b),xr(f,On()),x;switch(f.finishedWork=P,f.finishedLanes=b,h){case 0:case 1:throw Error(a(345));case 2:_s(f,ui);break;case 3:if(zi(f,b),(b&130023424)===b&&(h=Su+500-On(),10<h)){if(Io(f,0)!==0)break;if(P=f.suspendedLanes,(P&b)!==b){yn(),f.pingedLanes|=f.suspendedLanes&P;break}f.timeoutHandle=$(_s.bind(null,f,ui),h);break}_s(f,ui);break;case 4:if(zi(f,b),(b&4194240)===b)break;for(h=f.eventTimes,P=-1;0<b;){var se=31-cn(b);U=1<<se,se=h[se],se>P&&(P=se),b&=~U}if(b=P,b=On()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Id(b/1960))-b,10<b){f.timeoutHandle=$(_s.bind(null,f,ui),b);break}_s(f,ui);break;case 5:_s(f,ui);break;default:throw Error(a(329))}}}return xr(f,On()),f.callbackNode===x?Bi.bind(null,f):null}function wu(f,h){var x=lo;return f.current.memoizedState.isDehydrated&&(co(f,h).flags|=256),f=bu(f,h),f!==2&&(h=ui,ui=x,h!==null&&Mu(h)),f}function Mu(f){ui===null?ui=f:ui.push.apply(ui,f)}function Ld(f){for(var h=f;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var b=0;b<x.length;b++){var P=x[b],U=P.getSnapshot;P=P.value;try{if(!Ei(U(),P))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function zi(f,h){for(h&=~Ca,h&=~Ur,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var x=31-cn(h),b=1<<x;f[x]=-1,h&=~b}}function Fr(f){if(rn&6)throw Error(a(327));ks();var h=Io(f,0);if(!(h&1))return xr(f,On()),null;var x=bu(f,h);if(f.tag!==0&&x===2){var b=Ts(f);b!==0&&(h=b,x=wu(f,b))}if(x===1)throw x=Ml,co(f,0),zi(f,h),xr(f,On()),x;if(x===6)throw Error(a(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,_s(f,ui),xr(f,On()),null}function Tl(f){Ds!==null&&Ds.tag===0&&!(rn&6)&&ks();var h=rn;rn|=1;var x=En.transition,b=Xt;try{if(En.transition=null,Xt=1,f)return f()}finally{Xt=b,En.transition=x,rn=h,!(rn&6)&&Yi()}}function Eu(){Ji=Aa.current,ct(Aa)}function co(f,h){f.finishedWork=null,f.finishedLanes=0;var x=f.timeoutHandle;if(x!==Te&&(f.timeoutHandle=Te,ie(x)),bn!==null)for(x=bn.return;x!==null;){var b=x;switch(ad(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&jt();break;case 3:hl(),ct(tn),ct(sn),ha();break;case 5:cd(b);break;case 4:hl();break;case 13:ct(Hn);break;case 19:ct(Hn);break;case 10:li(b.type._context);break;case 22:case 23:Eu()}x=x.return}if(ti=f,bn=f=fo(f.current,null),zn=Ji=h,Yn=0,Ml=null,Ca=Ur=Ls=0,ui=lo=null,er!==null){for(h=0;h<er.length;h++)if(x=er[h],b=x.interleaved,b!==null){x.interleaved=null;var P=b.next,U=x.pending;if(U!==null){var se=U.next;U.next=P,b.next=se}x.pending=b}er=null}return f}function Dd(f,h){do{var x=bn;try{if(Ai(),nu.current=yl,Ic){for(var b=Gn.memoizedState;b!==null;){var P=b.queue;P!==null&&(P.pending=null),b=b.next}Ic=!1}if(pa=0,Ri=Ci=Gn=null,Rs=!1,ma=0,vs.current=null,x===null||x.return===null){Yn=1,Ml=h,bn=null;break}e:{var U=f,se=x.return,we=x,qe=h;if(h=zn,we.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var ft=qe,At=we,qt=At.tag;if(!(At.mode&1)&&(qt===0||qt===11||qt===15)){var zt=At.alternate;zt?(At.updateQueue=zt.updateQueue,At.memoizedState=zt.memoizedState,At.lanes=zt.lanes):(At.updateQueue=null,At.memoizedState=null)}var on=_d(se);if(on!==null){on.flags&=-257,va(on,se,we,U,h),on.mode&1&&eo(U,ft,h),h=on,qe=ft;var St=h.updateQueue;if(St===null){var Vi=new Set;Vi.add(qe),h.updateQueue=Vi}else St.add(qe);break e}else{if(!(h&1)){eo(U,ft,h),Kc();break e}qe=Error(a(426))}}else if(Bn&&we.mode&1){var Br=_d(se);if(Br!==null){!(Br.flags&65536)&&(Br.flags|=256),va(Br,se,we,U,h),Cc(qe);break e}}U=qe,Yn!==4&&(Yn=2),lo===null?lo=[U]:lo.push(U),qe=xd(qe,we),we=se;do{switch(we.tag){case 3:we.flags|=65536,h&=-h,we.lanes|=h;var Ue=Dp(we,qe,h);wc(we,Ue);break e;case 1:U=qe;var be=we.type,Ge=we.stateNode;if(!(we.flags&128)&&(typeof be.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(ys===null||!ys.has(Ge)))){we.flags|=65536,h&=-h,we.lanes|=h;var xt=Vc(we,U,h);wc(we,xt);break e}}we=we.return}while(we!==null)}Ud(x)}catch(Nt){h=Nt,bn===x&&x!==null&&(bn=x=x.return);continue}break}while(!0)}function kd(){var f=_u.current;return _u.current=yl,f===null?yl:f}function Kc(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),ti===null||!(Ls&268435455)&&!(Ur&268435455)||zi(ti,zn)}function bu(f,h){var x=rn;rn|=2;var b=kd();ti===f&&zn===h||co(f,h);do try{Np();break}catch(P){Dd(f,P)}while(!0);if(Ai(),rn=x,_u.current=b,bn!==null)throw Error(a(261));return ti=null,zn=0,Yn}function Np(){for(;bn!==null;)Nd(bn)}function Up(){for(;bn!==null&&!qr();)Nd(bn)}function Nd(f){var h=Bd(f.alternate,f,Ji);f.memoizedProps=f.pendingProps,h===null?Ud(f):bn=h,vs.current=null}function Ud(f){var h=f;do{var x=h.alternate;if(f=h.return,h.flags&32768){if(x=Yc(x,h),x!==null){x.flags&=32767,bn=x;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Yn=6,bn=null;return}}else if(x=Wc(x,h,Ji),x!==null){bn=x;return}if(h=h.sibling,h!==null){bn=h;return}bn=h=f}while(h!==null);Yn===0&&(Yn=5)}function _s(f,h){var x=Xt,b=En.transition;try{En.transition=null,Xt=1,Fp(f,h,x)}finally{En.transition=b,Xt=x}return null}function Fp(f,h,x){do ks();while(Ds!==null);if(rn&6)throw Error(a(327));var b=f.finishedWork,P=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(a(177));f.callbackNode=null,f.callbackPriority=0;var U=b.lanes|b.childLanes;if(fs(f,U),f===ti&&(bn=ti=null,zn=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||bl||(bl=!0,Qc(Xi,function(){return ks(),null})),U=(b.flags&15990)!==0,b.subtreeFlags&15990||U){U=En.transition,En.transition=null;var se=Xt;Xt=1;var we=rn;rn|=4,vs.current=null,bd(f,b),ov(f,b),j(f.containerInfo),f.current=b,mu(b),xc(),rn=we,Xt=se,En.transition=U}else f.current=b;if(bl&&(bl=!1,Ds=f,Pa=P),U=f.pendingLanes,U===0&&(ys=null),Ws(b.stateNode),xr(f,On()),h!==null)for(x=f.onRecoverableError,b=0;b<h.length;b++)x(h[b]);if(El)throw El=!1,f=Un,Un=null,f;return Pa&1&&f.tag!==0&&ks(),U=f.pendingLanes,U&1?f===uo?Ia++:(Ia=0,uo=f):Ia=0,Yi(),null}function ks(){if(Ds!==null){var f=Yr(Pa),h=En.transition,x=Xt;try{if(En.transition=null,Xt=16>f?16:f,Ds===null)var b=!1;else{if(f=Ds,Ds=null,Pa=0,rn&6)throw Error(a(331));var P=rn;for(rn|=4,pt=f.current;pt!==null;){var U=pt,se=U.child;if(pt.flags&16){var we=U.deletions;if(we!==null){for(var qe=0;qe<we.length;qe++){var ft=we[qe];for(pt=ft;pt!==null;){var At=pt;switch(At.tag){case 0:case 11:case 15:so(8,At,U)}var qt=At.child;if(qt!==null)qt.return=At,pt=qt;else for(;pt!==null;){At=pt;var zt=At.sibling,on=At.return;if(Td(At),At===ft){pt=null;break}if(zt!==null){zt.return=on,pt=zt;break}pt=on}}}var St=U.alternate;if(St!==null){var Vi=St.child;if(Vi!==null){St.child=null;do{var Br=Vi.sibling;Vi.sibling=null,Vi=Br}while(Vi!==null)}}pt=U}}if(U.subtreeFlags&2064&&se!==null)se.return=U,pt=se;else e:for(;pt!==null;){if(U=pt,U.flags&2048)switch(U.tag){case 0:case 11:case 15:so(9,U,U.return)}var Ue=U.sibling;if(Ue!==null){Ue.return=U.return,pt=Ue;break e}pt=U.return}}var be=f.current;for(pt=be;pt!==null;){se=pt;var Ge=se.child;if(se.subtreeFlags&2064&&Ge!==null)Ge.return=se,pt=Ge;else e:for(se=be;pt!==null;){if(we=pt,we.flags&2048)try{switch(we.tag){case 0:case 11:case 15:Oi(9,we)}}catch(Nt){sr(we,we.return,Nt)}if(we===se){pt=null;break e}var xt=we.sibling;if(xt!==null){xt.return=we.return,pt=xt;break e}pt=we.return}}if(rn=P,Yi(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Do,f)}catch{}b=!0}return b}finally{Xt=x,En.transition=h}}return!1}function Tu(f,h,x){h=xd(x,h),h=Dp(f,h,1),Fo(f,h),h=yn(),f=Yo(f,1),f!==null&&(Xr(f,1,h),xr(f,h))}function sr(f,h,x){if(f.tag===3)Tu(f,f,x);else for(;h!==null;){if(h.tag===3){Tu(h,f,x);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(ys===null||!ys.has(b))){f=xd(x,f),f=Vc(h,f,1),Fo(h,f),f=yn(),h=Yo(h,1),h!==null&&(Xr(h,1,f),xr(h,f));break}}h=h.return}}function Fd(f,h,x){var b=f.pingCache;b!==null&&b.delete(h),h=yn(),f.pingedLanes|=f.suspendedLanes&x,ti===f&&(zn&x)===x&&(Yn===4||Yn===3&&(zn&130023424)===zn&&500>On()-Su?co(f,0):Ca|=x),xr(f,h)}function Od(f,h){h===0&&(f.mode&1?(h=nn,nn<<=1,!(nn&130023424)&&(nn=4194304)):h=1);var x=yn();f=Yo(f,h),f!==null&&(Xr(f,h,x),xr(f,x))}function Op(f){var h=f.memoizedState,x=0;h!==null&&(x=h.retryLane),Od(f,x)}function Bp(f,h){var x=0;switch(f.tag){case 13:var b=f.stateNode,P=f.memoizedState;P!==null&&(x=P.retryLane);break;case 19:b=f.stateNode;break;default:throw Error(a(314))}b!==null&&b.delete(h),Od(f,x)}var Bd;Bd=function(f,h,x){if(f!==null)if(f.memoizedProps!==h.pendingProps||tn.current)Ii=!0;else{if(!(f.lanes&x)&&!(h.flags&128))return Ii=!1,Xc(f,h,x);Ii=!!(f.flags&131072)}else Ii=!1,Bn&&h.flags&1048576&&bp(h,Tc,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var P=Tt(h,sn.current);$n(h,x),P=pl(null,h,b,f,P,x);var U=Vo();return h.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,un(b)?(U=!0,jn(h)):U=!1,h.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,ol(h),P.updater=Ec,h.stateNode=P,P._reactInternals=h,sd(h,b,f,x),h=qi(null,h,b,!0,U,x)):(h.tag=0,Bn&&U&&od(h),Xn(null,h,P,x),h=h.child),h;case 16:b=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,P=b._init,b=P(b._payload),h.type=b,P=h.tag=av(b),f=Ti(b,f),P){case 0:h=io(null,h,b,f,x);break e;case 1:h=xa(null,h,b,f,x);break e;case 11:h=Ln(null,h,b,f,x);break e;case 14:h=An(null,h,b,Ti(b.type,f),x);break e}throw Error(a(306,b,""))}return h;case 0:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:Ti(b,P),io(f,h,b,P,x);case 1:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:Ti(b,P),xa(f,h,b,P,x);case 3:e:{if(fu(h),f===null)throw Error(a(387));b=h.pendingProps,U=h.memoizedState,P=U.element,nd(f,h),Mc(h,b,null,x);var se=h.memoizedState;if(b=se.element,Qe&&U.isDehydrated)if(U={element:b,isDehydrated:!1,cache:se.cache,transitions:se.transitions},h.updateQueue.baseState=U,h.memoizedState=U,h.flags&256){P=Error(a(423)),h=wd(f,h,b,x,P);break e}else if(b!==P){P=Error(a(424)),h=wd(f,h,b,x,P);break e}else for(Qe&&(Ui=oi(h.stateNode.containerInfo),tr=h,Bn=!0,Qr=null,ll=!1),x=Cp(h,null,b,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ul(),b===P){h=yr(f,h,x);break e}Xn(f,h,b,x)}h=h.child}return h;case 5:return Rp(h),f===null&&Bo(h),b=h.type,P=h.pendingProps,U=f!==null?f.memoizedProps:null,se=P.children,re(b,P)?se=null:U!==null&&re(b,U)&&(h.flags|=32),nr(f,h),Xn(f,h,se,x),h.child;case 6:return f===null&&Bo(h),null;case 13:return Md(f,h,x);case 4:return Rc(h,h.stateNode.containerInfo),b=h.pendingProps,f===null?h.child=Qs(h,null,b,x):Xn(f,h,b,x),h.child;case 11:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:Ti(b,P),Ln(f,h,b,P,x);case 7:return Xn(f,h,h.pendingProps,x),h.child;case 8:return Xn(f,h,h.pendingProps.children,x),h.child;case 12:return Xn(f,h,h.pendingProps.children,x),h.child;case 10:e:{if(b=h.type._context,P=h.pendingProps,U=h.memoizedProps,se=P.value,qs(h,b,se),U!==null)if(Ei(U.value,se)){if(U.children===P.children&&!tn.current){h=yr(f,h,x);break e}}else for(U=h.child,U!==null&&(U.return=h);U!==null;){var we=U.dependencies;if(we!==null){se=U.child;for(var qe=we.firstContext;qe!==null;){if(qe.context===b){if(U.tag===1){qe=Js(-1,x&-x),qe.tag=2;var ft=U.updateQueue;if(ft!==null){ft=ft.shared;var At=ft.pending;At===null?qe.next=qe:(qe.next=At.next,At.next=qe),ft.pending=qe}}U.lanes|=x,qe=U.alternate,qe!==null&&(qe.lanes|=x),gi(U.return,x,h),we.lanes|=x;break}qe=qe.next}}else if(U.tag===10)se=U.type===h.type?null:U.child;else if(U.tag===18){if(se=U.return,se===null)throw Error(a(341));se.lanes|=x,we=se.alternate,we!==null&&(we.lanes|=x),gi(se,x,h),se=U.sibling}else se=U.child;if(se!==null)se.return=U;else for(se=U;se!==null;){if(se===h){se=null;break}if(U=se.sibling,U!==null){U.return=se.return,se=U;break}se=se.return}U=se}Xn(f,h,P.children,x),h=h.child}return h;case 9:return P=h.type,b=h.pendingProps.children,$n(h,x),P=Vn(P),b=b(P),h.flags|=1,Xn(f,h,b,x),h.child;case 14:return b=h.type,P=Ti(b,h.pendingProps),P=Ti(b.type,P),An(f,h,b,P,x);case 15:return no(f,h,h.type,h.pendingProps,x);case 17:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:Ti(b,P),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,un(b)?(f=!0,jn(h)):f=!1,$n(h,x),Mp(h,b,P),sd(h,b,P,x),qi(null,h,b,!0,f,x);case 19:return Sa(f,h,x);case 22:return Fi(f,h,x)}throw Error(a(156,h.tag))};function Qc(f,h){return Rr(f,h)}function zp(f,h,x,b){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(f,h,x,b){return new zp(f,h,x,b)}function $c(f){return f=f.prototype,!(!f||!f.isReactComponent)}function av(f){if(typeof f=="function")return $c(f)?1:0;if(f!=null){if(f=f.$$typeof,f===E)return 11;if(f===T)return 14}return 2}function fo(f,h){var x=f.alternate;return x===null?(x=Or(f.tag,h,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=h,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&14680064,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,h=f.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x}function ef(f,h,x,b,P,U){var se=2;if(b=f,typeof f=="function")$c(f)&&(se=1);else if(typeof f=="string")se=5;else e:switch(f){case p:return La(x.children,P,U,h);case g:se=8,P|=8;break;case v:return f=Or(12,x,h,P|2),f.elementType=v,f.lanes=U,f;case M:return f=Or(13,x,h,P),f.elementType=M,f.lanes=U,f;case S:return f=Or(19,x,h,P),f.elementType=S,f.lanes=U,f;case R:return Au(x,P,U,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:se=10;break e;case w:se=9;break e;case E:se=11;break e;case T:se=14;break e;case A:se=16,b=null;break e}throw Error(a(130,f==null?f:typeof f,""))}return h=Or(se,x,h,P),h.elementType=f,h.type=b,h.lanes=U,h}function La(f,h,x,b){return f=Or(7,f,b,h),f.lanes=x,f}function Au(f,h,x,b){return f=Or(22,f,b,h),f.elementType=R,f.lanes=x,f.stateNode={},f}function tf(f,h,x){return f=Or(6,f,null,h),f.lanes=x,f}function nf(f,h,x){return h=Or(4,f.children!==null?f.children:[],f.key,h),h.lanes=x,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function rf(f,h,x,b,P){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Te,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=b,this.onRecoverableError=P,Qe&&(this.mutableSourceEagerHydrationData=null)}function Vp(f,h,x,b,P,U,se,we,qe){return f=new rf(f,h,x,we,qe),h===1?(h=1,U===!0&&(h|=8)):h=0,U=Or(3,null,null,h),f.current=U,U.stateNode=f,U.memoizedState={element:b,isDehydrated:x,cache:null,transitions:null},ol(U),f}function Hp(f){if(!f)return Bt;f=f._reactInternals;e:{if(k(f)!==f||f.tag!==1)throw Error(a(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(un(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(a(171))}if(f.tag===1){var x=f.type;if(un(x))return Cr(f,x,h)}return h}function Gp(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(a(188)):(f=Object.keys(f).join(","),Error(a(268,f)));return f=X(h),f===null?null:f.stateNode}function ts(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<h?x:h}}function Cu(f,h){ts(f,h),(f=f.alternate)&&ts(f,h)}function sf(f){return f=X(f),f===null?null:f.stateNode}function Wp(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var h=yn();Zi(f,134217728,h),Cu(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=yn(),x=xs(f);Zi(f,x,h),Cu(f,x)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var x=Mi(h.pendingLanes);x!==0&&(Ni(h,x|1),xr(h,On()),!(rn&6)&&(Ra(),Yi()))}break;case 13:var b=yn();Tl(function(){return Zi(f,1,b)}),Cu(f,1)}},t.batchedUpdates=function(f,h){var x=rn;rn|=1;try{return f(h)}finally{rn=x,rn===0&&(Ra(),Cs&&Yi())}},t.createComponentSelector=function(f){return{$$typeof:vu,value:f}},t.createContainer=function(f,h,x,b,P,U,se){return Vp(f,h,!1,null,x,b,P,U,se)},t.createHasPseudoClassSelector=function(f){return{$$typeof:Ea,value:f}},t.createHydrationContainer=function(f,h,x,b,P,U,se,we,qe){return f=Vp(x,b,!0,f,P,U,se,we,qe),f.context=Hp(null),x=f.current,b=yn(),P=xs(x),U=Js(b,P),U.callback=h??null,Fo(x,U),f.current.lanes=P,Xr(f,P,b),xr(f,b),f},t.createPortal=function(f,h,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:b==null?null:""+b,children:f,containerInfo:h,implementation:x}},t.createRoleSelector=function(f){return{$$typeof:ba,value:f}},t.createTestNameSelector=function(f){return{$$typeof:oo,value:f}},t.createTextSelector=function(f){return{$$typeof:wl,value:f}},t.deferredUpdates=function(f){var h=Xt,x=En.transition;try{return En.transition=null,Xt=16,f()}finally{Xt=h,En.transition=x}},t.discreteUpdates=function(f,h,x,b,P){var U=Xt,se=En.transition;try{return En.transition=null,Xt=1,f(h,x,b,P)}finally{Xt=U,En.transition=se,rn===0&&Ra()}},t.findAllNodes=ao,t.findBoundingRects=function(f,h){if(!_e)throw Error(a(363));h=ao(f,h),f=[];for(var x=0;x<h.length;x++)f.push(B(h[x]));for(h=f.length-1;0<h;h--){x=f[h];for(var b=x.x,P=b+x.width,U=x.y,se=U+x.height,we=h-1;0<=we;we--)if(h!==we){var qe=f[we],ft=qe.x,At=ft+qe.width,qt=qe.y,zt=qt+qe.height;if(b>=ft&&U>=qt&&P<=At&&se<=zt){f.splice(h,1);break}else if(b!==ft||x.width!==qe.width||zt<U||qt>se){if(!(U!==qt||x.height!==qe.height||At<b||ft>P)){ft>b&&(qe.width+=ft-b,qe.x=b),At<P&&(qe.width=P-ft),f.splice(h,1);break}}else{qt>U&&(qe.height+=qt-U,qe.y=U),zt<se&&(qe.height=se-qt),f.splice(h,1);break}}}return f},t.findHostInstance=Gp,t.findHostInstanceWithNoPortals=function(f){return f=W(f),f=f!==null?ne(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return Gp(f)},t.flushControlled=function(f){var h=rn;rn|=1;var x=En.transition,b=Xt;try{En.transition=null,Xt=1,f()}finally{Xt=b,En.transition=x,rn=h,rn===0&&(Ra(),Yi())}},t.flushPassiveEffects=ks,t.flushSync=Tl,t.focusWithin=function(f,h){if(!_e)throw Error(a(363));for(f=yu(f),h=Nr(f,h),h=Array.from(h),f=0;f<h.length;){var x=h[f++];if(!ye(x)){if(x.tag===5&&ke(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Xt},t.getFindAllNodesFailureDescription=function(f,h){if(!_e)throw Error(a(363));var x=0,b=[];f=[yu(f),0];for(var P=0;P<f.length;){var U=f[P++],se=f[P++],we=h[se];if((U.tag!==5||!ye(U))&&(xu(U,we)&&(b.push(jo(we)),se++,se>x&&(x=se)),se<h.length))for(U=U.child;U!==null;)f.push(U,se),U=U.sibling}if(x<h.length){for(f=[];x<h.length;x++)f.push(jo(h[x]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return ae(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:sf,findFiberByHostInstance:f.findFiberByHostInstance||Wp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{Do=h.inject(f),Pr=h}catch{}f=!!h.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,h,x,b){if(!_e)throw Error(a(363));f=ao(f,h);var P=Je(f,x,b).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(f,h){var x=h._getVersion;x=x(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,x]:f.mutableSourceEagerHydrationData.push(h,x)},t.runWithPriority=function(f,h){var x=Xt;try{return Xt=f,h()}finally{Xt=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,h,x,b){var P=h.current,U=yn(),se=xs(P);return x=Hp(x),h.context===null?h.context=x:h.pendingContext=x,h=Js(U,se),h.payload={element:f},b=b===void 0?null:b,b!==null&&(h.callback=b),Fo(P,h),f=Zi(P,se,U),f!==null&&Sc(f,P,se),se},t}),Ay}var tw;function DD(){return tw||(tw=1,Ey.exports=LD()),Ey.exports}var kD=DD();const ND=Mx(kD);var Cy={exports:{}},Ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function UD(){return nw||(nw=1,function(r){function e(H,J){var j=H.length;H.push(J);e:for(;0<j;){var D=j-1>>>1,Y=H[D];if(0<i(Y,J))H[D]=J,H[j]=Y,j=D;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],j=H.pop();if(j!==J){H[0]=j;e:for(var D=0,Y=H.length,ce=Y>>>1;D<ce;){var Q=2*(D+1)-1,re=H[Q],pe=Q+1,$=H[pe];if(0>i(re,j))pe<Y&&0>i($,re)?(H[D]=$,H[pe]=j,D=pe):(H[D]=re,H[Q]=j,D=Q);else if(pe<Y&&0>i($,j))H[D]=$,H[pe]=j,D=pe;else break e}}return J}function i(H,J){var j=H.sortIndex-J.sortIndex;return j!==0?j:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();r.unstable_now=function(){return a.now()-l}}var c=[],d=[],p=1,g=null,v=3,y=!1,w=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var J=t(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=H)n(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=t(d)}}function R(H){if(E=!1,A(H),!w)if(t(c)!==null)w=!0,ae(F);else{var J=t(d);J!==null&&me(R,J.startTime-H)}}function F(H,J){w=!1,E&&(E=!1,S(z),z=-1),y=!0;var j=v;try{for(A(J),g=t(c);g!==null&&(!(g.expirationTime>J)||H&&!W());){var D=g.callback;if(typeof D=="function"){g.callback=null,v=g.priorityLevel;var Y=D(g.expirationTime<=J);J=r.unstable_now(),typeof Y=="function"?g.callback=Y:g===t(c)&&n(c),A(J)}else n(c);g=t(c)}if(g!==null)var ce=!0;else{var Q=t(d);Q!==null&&me(R,Q.startTime-J),ce=!1}return ce}finally{g=null,v=j,y=!1}}var N=!1,O=null,z=-1,k=5,L=-1;function W(){return!(r.unstable_now()-L<k)}function X(){if(O!==null){var H=r.unstable_now();L=H;var J=!0;try{J=O(!0,H)}finally{J?K():(N=!1,O=null)}}else N=!1}var K;if(typeof T=="function")K=function(){T(X)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,de=ne.port2;ne.port1.onmessage=X,K=function(){de.postMessage(null)}}else K=function(){M(X,0)};function ae(H){O=H,N||(N=!0,K())}function me(H,J){z=M(function(){H(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){w||y||(w=!0,ae(F))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(H){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var j=v;v=J;try{return H()}finally{v=j}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=v;v=H;try{return J()}finally{v=j}},r.unstable_scheduleCallback=function(H,J,j){var D=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?D+j:D):j=D,H){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=j+Y,H={id:p++,callback:J,priorityLevel:H,startTime:j,expirationTime:Y,sortIndex:-1},j>D?(H.sortIndex=j,e(d,H),t(c)===null&&H===t(d)&&(E?(S(z),z=-1):E=!0,me(R,j-D))):(H.sortIndex=Y,e(c,H),w||y||(w=!0,ae(F))),H},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(H){var J=v;return function(){var j=v;v=J;try{return H.apply(this,arguments)}finally{v=j}}}}(Ry)),Ry}var iw;function FD(){return iw||(iw=1,Cy.exports=UD()),Cy.exports}var rw=FD();const h_={},OD=r=>void Object.assign(h_,r);function BD(r,e){function t(p,{args:g=[],attach:v,...y},w){let E=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=y.object;M=Lf(S,{type:p,root:w,attach:v,primitive:!0})}else{const S=h_[E];if(!S)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");M=Lf(new S(...g),{type:p,root:w,attach:v,memoizedProps:{args:g}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),E!=="inject"&&Ly(M,y),M}function n(p,g){let v=!1;if(g){var y,w;(y=g.__r3f)!=null&&y.attach?Iy(p,g,g.__r3f.attach):g.isObject3D&&p.isObject3D&&(p.add(g),v=!0),v||(w=p.__r3f)==null||w.objects.push(g),g.__r3f||Lf(g,{}),g.__r3f.parent=p,cx(g),Df(g)}}function i(p,g,v){let y=!1;if(g){var w,E;if((w=g.__r3f)!=null&&w.attach)Iy(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){g.parent=p,g.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:g});const M=p.children.filter(T=>T!==g),S=M.indexOf(v);p.children=[...M.slice(0,S),g,...M.slice(S)],y=!0}y||(E=p.__r3f)==null||E.objects.push(g),g.__r3f||Lf(g,{}),g.__r3f.parent=p,cx(g),Df(g)}}function s(p,g,v=!1){p&&[...p].forEach(y=>a(g,y,v))}function a(p,g,v){if(g){var y,w,E;if(g.__r3f&&(g.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(R=>R!==g)),(w=g.__r3f)!=null&&w.attach)uw(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){var M;p.remove(g),(M=g.__r3f)!=null&&M.root&&XD(gg(g),g)}const T=(E=g.__r3f)==null?void 0:E.primitive,A=!T&&(v===void 0?g.dispose!==null:v);if(!T){var S;s((S=g.__r3f)==null?void 0:S.objects,g,A),s(g.children,g,A)}if(delete g.__r3f,A&&g.dispose&&g.type!=="Scene"){const R=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?rw.unstable_scheduleCallback(rw.unstable_IdlePriority,R):R()}Df(p)}}function l(p,g,v,y){var w;const E=(w=p.__r3f)==null?void 0:w.parent;if(!E)return;const M=t(g,v,p.__r3f.root);if(p.children){for(const S of p.children)S.__r3f&&n(M,S);p.children=p.children.filter(S=>!S.__r3f)}p.__r3f.objects.forEach(S=>n(M,S)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||a(E,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),n(E,M),M.raycast&&M.__r3f.eventCount&&gg(M).getState().internal.interaction.push(M),[y,y.alternate].forEach(S=>{S!==null&&(S.stateNode=M,S.ref&&(typeof S.ref=="function"?S.ref(M):S.ref.current=M))})}const c=()=>{};return{reconciler:ND({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,g)=>{if(!g)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,n(v,g))},removeChildFromContainer:(p,g)=>{g&&a(p.getState().scene,g)},insertInContainerBefore:(p,g,v)=>{if(!g||!v)return;const y=p.getState().scene;y.__r3f&&i(y,g,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var g;return!!((g=p==null?void 0:p.__r3f)!=null?g:{}).handlers},prepareUpdate(p,g,v,y){var w;if(((w=p==null?void 0:p.__r3f)!=null?w:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:M=[],children:S,...T}=y,{args:A=[],children:R,...F}=v;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((O,z)=>O!==A[z]))return[!0];const N=cE(p,T,F,!0);return N.changes.length?[!1,N]:null}},commitUpdate(p,[g,v],y,w,E,M){g?l(p,y,E,M):Ly(p,v)},commitMount(p,g,v,y){var w;const E=(w=p.__r3f)!=null?w:{};p.raycast&&E.handlers&&E.eventCount&&gg(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Lf(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var g;const{attach:v,parent:y}=(g=p.__r3f)!=null?g:{};v&&y&&uw(y,p,v),p.isObject3D&&(p.visible=!1),Df(p)},unhideInstance(p,g){var v;const{attach:y,parent:w}=(v=p.__r3f)!=null?v:{};y&&w&&Iy(w,p,y),(p.isObject3D&&g.visible==null||g.visible)&&(p.visible=!0),Df(p)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Wn.fun(performance.now)?performance.now:Wn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Wn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Wn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ly}}var sw,ow;const Py=r=>"colorSpace"in r||"outputColorSpace"in r,rE=()=>{var r;return(r=h_.ColorManagement)!=null?r:null},sE=r=>r&&r.isOrthographicCamera,zD=r=>r&&r.hasOwnProperty("current"),mp=typeof window<"u"&&((sw=window.document)!=null&&sw.createElement||((ow=window.navigator)==null?void 0:ow.product)==="ReactNative")?We.useLayoutEffect:We.useEffect;function oE(r){const e=We.useRef(r);return mp(()=>void(e.current=r),[r]),e}function VD({set:r}){return mp(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class aE extends We.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}aE.getDerivedStateFromError=()=>({error:!0});const lE="__default",aw=new Map,HD=r=>r&&!!r.memoized&&!!r.changes;function uE(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const oh=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function gg(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Wn={obj:r=>r===Object(r)&&!Wn.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Wn.str(r)||Wn.num(r)||Wn.boo(r))return r===e;const s=Wn.obj(r);if(s&&n==="reference")return r===e;const a=Wn.arr(r);if(a&&t==="reference")return r===e;if((a||s)&&r===e)return!0;let l;for(l in r)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in i?e:r)if(!Wn.equ(r[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:r)if(r[l]!==e[l])return!1;if(Wn.und(l)){if(a&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function GD(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Lf(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function ux(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,a)=>s[a],r),{target:t,key:i}}else return{target:t,key:e}}const lw=/-\d+$/;function Iy(r,e,t){if(Wn.str(t)){if(lw.test(t)){const s=t.replace(lw,""),{target:a,key:l}=ux(r,s);Array.isArray(a[l])||(a[l]=[])}const{target:n,key:i}=ux(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function uw(r,e,t){var n,i;if(Wn.str(t)){const{target:s,key:a}=ux(r,t),l=e.__r3f.previousAttach;l===void 0?delete s[a]:s[a]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function cE(r,{children:e,key:t,ref:n,...i},{children:s,key:a,ref:l,...c}={},d=!1){const p=r.__r3f,g=Object.entries(i),v=[];if(d){const w=Object.keys(c);for(let E=0;E<w.length;E++)i.hasOwnProperty(w[E])||g.unshift([w[E],lE+"remove"])}g.forEach(([w,E])=>{var M;if((M=r.__r3f)!=null&&M.primitive&&w==="object"||Wn.equ(E,c[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return v.push([w,E,!0,[]]);let S=[];w.includes("-")&&(S=w.split("-")),v.push([w,E,!1,S]);for(const T in i){const A=i[T];T.startsWith(`${w}-`)&&v.push([T,A,!1,T.split("-")])}});const y={...i};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}function Ly(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:l}=HD(e)?e:cE(r,e),c=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=a);for(let v=0;v<l.length;v++){let[y,w,E,M]=l[v];if(Py(r)){const R="srgb",F="srgb-linear";y==="encoding"?(y="colorSpace",w=w===3001?R:F):y==="outputEncoding"&&(y="outputColorSpace",w=w===3001?R:F)}let S=r,T=S[y];if(M.length&&(T=M.reduce((A,R)=>A[R],r),!(T&&T.set))){const[A,...R]=M.reverse();S=R.reverse().reduce((F,N)=>F[N],r),y=A}if(w===lE+"remove")if(S.constructor){let A=aw.get(S.constructor);A||(A=new S.constructor,aw.set(S.constructor,A)),w=A[y]}else w=0;if(E&&n)w?n.handlers[y]=w:delete n.handlers[y],n.eventCount=Object.keys(n.handlers).length;else if(T&&T.set&&(T.copy||T instanceof oc)){if(Array.isArray(w))T.fromArray?T.fromArray(w):T.set(...w);else if(T.copy&&w&&w.constructor&&T.constructor===w.constructor)T.copy(w);else if(w!==void 0){var d;const A=(d=T)==null?void 0:d.isColor;!A&&T.setScalar?T.setScalar(w):T instanceof oc&&w instanceof oc?T.mask=w.mask:T.set(w),!rE()&&s&&!s.linear&&A&&T.convertSRGBToLinear()}}else{var p;if(S[y]=w,(p=S[y])!=null&&p.isTexture&&S[y].format===br&&S[y].type===To&&s){const A=S[y];Py(A)&&Py(s.gl)?A.colorSpace=s.gl.outputColorSpace:A.encoding=s.gl.outputEncoding}}Df(r)}if(n&&n.parent&&r.raycast&&c!==n.eventCount){const v=gg(r).getState().internal,y=v.interaction.indexOf(r);y>-1&&v.interaction.splice(y,1),n.eventCount&&v.interaction.push(r)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=r.__r3f)!=null&&t.parent&&cx(r),r}function Df(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function cx(r){r.onUpdate==null||r.onUpdate(r)}function WD(r,e){r.manual||(sE(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function rg(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function jD(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return gh.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return gh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return gh.ContinuousEventPriority;default:return gh.DefaultEventPriority}}function fE(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function XD(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{fE(t.capturedMap,e,n,i)})}function YD(r){function e(c){const{internal:d}=r.getState(),p=c.offsetX-d.initialClick[0],g=c.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=d.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function n(c,d){const p=r.getState(),g=new Set,v=[],y=d?d(p.internal.interaction):p.internal.interaction;for(let S=0;S<y.length;S++){const T=oh(y[S]);T&&(T.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function w(S){const T=oh(S);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var A;T.events.compute==null||T.events.compute(c,T,(A=T.previousRoot)==null?void 0:A.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(S,!0):[]}let E=y.flatMap(w).sort((S,T)=>{const A=oh(S.object),R=oh(T.object);return!A||!R?S.distance-T.distance:R.events.priority-A.events.priority||S.distance-T.distance}).filter(S=>{const T=rg(S);return g.has(T)?!1:(g.add(T),!0)});p.events.filter&&(E=p.events.filter(E,p));for(const S of E){let T=S.object;for(;T;){var M;(M=T.__r3f)!=null&&M.eventCount&&v.push({...S,eventObject:T}),T=T.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let S of p.internal.capturedMap.get(c.pointerId).values())g.has(rg(S.intersection))||v.push(S.intersection);return v}function i(c,d,p,g){const v=r.getState();if(c.length){const y={stopped:!1};for(const w of c){const E=oh(w.object)||v,{raycaster:M,pointer:S,camera:T,internal:A}=E,R=new te(S.x,S.y,0).unproject(T),F=L=>{var W,X;return(W=(X=A.capturedMap.get(L))==null?void 0:X.has(w.eventObject))!=null?W:!1},N=L=>{const W={intersection:w,target:d.target};A.capturedMap.has(L)?A.capturedMap.get(L).set(w.eventObject,W):A.capturedMap.set(L,new Map([[w.eventObject,W]])),d.target.setPointerCapture(L)},O=L=>{const W=A.capturedMap.get(L);W&&fE(A.capturedMap,w.eventObject,W,L)};let z={};for(let L in d){let W=d[L];typeof W!="function"&&(z[L]=W)}let k={...w,...z,pointer:S,intersections:c,stopped:y.stopped,delta:p,unprojectedPoint:R,ray:M.ray,camera:T,stopPropagation(){const L="pointerId"in d&&A.capturedMap.get(d.pointerId);if((!L||L.has(w.eventObject))&&(k.stopped=y.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(W=>W.eventObject===w.eventObject))){const W=c.slice(0,c.indexOf(w));s([...W,w])}},target:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:O},currentTarget:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:O},nativeEvent:d};if(g(k),y.stopped===!0)break}}return c}function s(c){const{internal:d}=r.getState();for(const p of d.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f,y=v==null?void 0:v.handlers;if(d.hovered.delete(rg(p)),v!=null&&v.eventCount){const w={...p,intersections:c};y.onPointerOut==null||y.onPointerOut(w),y.onPointerLeave==null||y.onPointerLeave(w)}}}function a(c,d){for(let p=0;p<d.length;p++){const g=d[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:p}=r.getState();"pointerId"in d&&p.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),s([]))})}}return function(p){const{onPointerMissed:g,internal:v}=r.getState();v.lastEvent.current=p;const y=c==="onPointerMove",w=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=n(p,y?t:void 0),S=w?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=M.map(A=>A.eventObject)),w&&!M.length&&S<=2&&(a(p,v.interaction),g&&g(p)),y&&s(M);function T(A){const R=A.eventObject,F=R.__r3f,N=F==null?void 0:F.handlers;if(F!=null&&F.eventCount)if(y){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const O=rg(A),z=v.hovered.get(O);z?z.stopped&&A.stopPropagation():(v.hovered.set(O,A),N.onPointerOver==null||N.onPointerOver(A),N.onPointerEnter==null||N.onPointerEnter(A))}N.onPointerMove==null||N.onPointerMove(A)}else{const O=N[c];O?(!w||v.initialHits.includes(R))&&(a(p,v.interaction.filter(z=>!v.initialHits.includes(z))),O(A)):w&&v.initialHits.includes(R)&&a(p,v.interaction.filter(z=>!v.initialHits.includes(z)))}}i(M,p,S,T)}}return{handlePointer:l}}const dE=r=>!!(r!=null&&r.render),hE=We.createContext(null),qD=(r,e)=>{const t=bD((l,c)=>{const d=new te,p=new te,g=new te;function v(S=c().camera,T=p,A=c().size){const{width:R,height:F,top:N,left:O}=A,z=R/F;T.isVector3?g.copy(T):g.set(...T);const k=S.getWorldPosition(d).distanceTo(g);if(sE(S))return{width:R/S.zoom,height:F/S.zoom,top:N,left:O,factor:1,distance:k,aspect:z};{const L=S.fov*Math.PI/180,W=2*Math.tan(L/2)*k,X=W*(R/F);return{width:X,height:W,top:N,left:O,factor:R/X,distance:k,aspect:z}}}let y;const w=S=>l(T=>({performance:{...T.performance,current:S}})),E=new Ze;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>r(c(),S),advance:(S,T)=>e(S,T,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new a_,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=c();y&&clearTimeout(y),S.performance.current!==S.performance.min&&w(S.performance.min),y=setTimeout(()=>w(c().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(T=>({...T,events:{...T.events,...S}})),setSize:(S,T,A,R,F)=>{const N=c().camera,O={width:S,height:T,top:R||0,left:F||0,updateStyle:A};l(z=>({size:O,viewport:{...z.viewport,...v(N,p,O)}}))},setDpr:S=>l(T=>{const A=uE(S);return{viewport:{...T.viewport,dpr:A,initialDpr:T.viewport.initialDpr||A}}}),setFrameloop:(S="always")=>{const T=c().clock;T.stop(),T.elapsedTime=0,S!=="never"&&(T.start(),T.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:We.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,T,A)=>{const R=c().internal;return R.priority=R.priority+(T>0?1:0),R.subscribers.push({ref:S,priority:T,store:A}),R.subscribers=R.subscribers.sort((F,N)=>F.priority-N.priority),()=>{const F=c().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(T>0?1:0),F.subscribers=F.subscribers.filter(N=>N.ref!==S))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:d,gl:p,set:g}=t.getState();if(c.width!==i.width||c.height!==i.height||d.dpr!==s){var v;i=c,s=d.dpr,WD(l,c),p.setPixelRatio(d.dpr);const y=(v=c.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,y)}l!==a&&(a=l,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>r(l)),t};function JD(r,e){const t={callback:r};return e.add(t),()=>void e.delete(t)}let sg,pE=new Set,ZD=new Set,KD=new Set;const QD=r=>JD(r,pE);function Dy(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function ah(r,e){switch(r){case"before":return Dy(pE,e);case"after":return Dy(ZD,e);case"tail":return Dy(KD,e)}}let ky,Ny;function Uy(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),ky=e.internal.subscribers,sg=0;sg<ky.length;sg++)Ny=ky[sg],Ny.ref.current(Ny.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function $D(r){let e=!1,t=!1,n,i,s;function a(d){i=requestAnimationFrame(a),e=!0,n=0,ah("before",d),t=!0;for(const g of r.values()){var p;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(n+=Uy(d,s))}if(t=!1,ah("after",d),n===0)return ah("tail",d),e=!1,cancelAnimationFrame(i)}function l(d,p=1){var g;if(!d)return r.forEach(v=>l(v.store.getState(),p));(g=d.gl.xr)!=null&&g.isPresenting||!d.internal.active||d.frameloop==="never"||(p>1?d.internal.frames=Math.min(60,d.internal.frames+p):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function c(d,p=!0,g,v){if(p&&ah("before",d),g)Uy(d,g,v);else for(const y of r.values())Uy(d,y.store.getState());p&&ah("after",d)}return{loop:a,invalidate:l,advance:c}}function mE(){const r=We.useContext(hE);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Va(r=t=>t,e){return mE()(r,e)}function gE(r,e=0){const t=mE(),n=t.getState().internal.subscribe,i=oE(r);return mp(()=>n(i,e,t),[e,n,t]),null}const Jf=new Map,{invalidate:cw,advance:fw}=$D(Jf),{reconciler:s0,applyProps:Qu}=BD(Jf,jD),Cf={objects:"shallow",strict:!1},ek=(r,e)=>{const t=typeof r=="function"?r(e):r;return dE(t)?t:new nE({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function tk(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:a,updateStyle:l=t}=e;return{width:n,height:i,top:s,left:a,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:a}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function nk(r){const e=Jf.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||qD(cw,fw),a=t||s0.createContainer(s,gh.ConcurrentRoot,null,!1,null,"",i,null);e||Jf.set(r,{fiber:a,store:s});let l,c=!1,d;return{configure(p={}){let{gl:g,size:v,scene:y,events:w,onCreated:E,shadows:M=!1,linear:S=!1,flat:T=!1,legacy:A=!1,orthographic:R=!1,frameloop:F="always",dpr:N=[1,2],performance:O,raycaster:z,camera:k,onPointerMissed:L}=p,W=s.getState(),X=W.gl;W.gl||W.set({gl:X=ek(g,r)});let K=W.raycaster;K||W.set({raycaster:K=new q2});const{params:ne,...de}=z||{};if(Wn.equ(de,K,Cf)||Qu(K,{...de}),Wn.equ(ne,K.params,Cf)||Qu(K,{params:{...K.params,...ne}}),!W.camera||W.camera===d&&!Wn.equ(d,k,Cf)){d=k;const j=k instanceof ap,D=j?k:R?new Yl(0,0,0,0,.1,1e3):new _i(75,0,.1,1e3);j||(D.position.z=5,k&&(Qu(D,k),("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(D.manual=!0,D.updateProjectionMatrix())),!W.camera&&!(k!=null&&k.rotation)&&D.lookAt(0,0,0)),W.set({camera:D}),K.camera=D}if(!W.scene){let j;y!=null&&y.isScene?j=y:(j=new Hx,y&&Qu(j,y)),W.set({scene:Lf(j)})}if(!W.xr){var ae;const j=(ce,Q)=>{const re=s.getState();re.frameloop!=="never"&&fw(ce,!0,re,Q)},D=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?j:null),ce.gl.xr.isPresenting||cw(ce)},Y={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",D),ce.xr.addEventListener("sessionend",D)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",D),ce.xr.removeEventListener("sessionend",D)}};typeof((ae=X.xr)==null?void 0:ae.addEventListener)=="function"&&Y.connect(),W.set({xr:Y})}if(X.shadowMap){const j=X.shadowMap.enabled,D=X.shadowMap.type;if(X.shadowMap.enabled=!!M,Wn.boo(M))X.shadowMap.type=yh;else if(Wn.str(M)){var me;const Y={basic:aM,percentage:v0,soft:yh,variance:_o};X.shadowMap.type=(me=Y[M])!=null?me:yh}else Wn.obj(M)&&Object.assign(X.shadowMap,M);(j!==X.shadowMap.enabled||D!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const H=rE();H&&("enabled"in H?H.enabled=!A:"legacyMode"in H&&(H.legacyMode=A)),c||Qu(X,{outputEncoding:S?3e3:3001,toneMapping:T?Qo:Ex}),W.legacy!==A&&W.set(()=>({legacy:A})),W.linear!==S&&W.set(()=>({linear:S})),W.flat!==T&&W.set(()=>({flat:T})),g&&!Wn.fun(g)&&!dE(g)&&!Wn.equ(g,X,Cf)&&Qu(X,g),w&&!W.events.handlers&&W.set({events:w(s)});const J=tk(r,v);return Wn.equ(J,W.size,Cf)||W.setSize(J.width,J.height,J.updateStyle,J.top,J.left),N&&W.viewport.dpr!==uE(N)&&W.setDpr(N),W.frameloop!==F&&W.setFrameloop(F),W.onPointerMissed||W.set({onPointerMissed:L}),O&&!Wn.equ(O,W.performance,Cf)&&W.set(j=>({performance:{...j.performance,...O}})),l=E,c=!0,this},render(p){return c||this.configure(),s0.updateContainer(Z.jsx(ik,{store:s,children:p,onCreated:l,rootElement:r}),a,null,()=>{}),s},unmount(){vE(r)}}}function ik({store:r,children:e,onCreated:t,rootElement:n}){return mp(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),Z.jsx(hE.Provider,{value:r,children:e})}function vE(r,e){const t=Jf.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),s0.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,a,l,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),GD(i),Jf.delete(r)}catch{}},500)})}}s0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:We.version});const Fy={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function rk(r){const{handlePointer:e}=YD(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Fy).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([a,l])=>{const[c,d]=Fy[a];t.addEventListener(c,l,{passive:d})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,a])=>{if(n&&n.connected instanceof HTMLElement){const[l]=Fy[s];n.connected.removeEventListener(l,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function dw(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function sk({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=We.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=We.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=r?typeof r=="number"?r:r.scroll:null,d=r?typeof r=="number"?r:r.resize:null,p=We.useRef(!1);We.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,y]=We.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:T,top:A,width:R,height:F,bottom:N,right:O,x:z,y:k}=l.current.element.getBoundingClientRect(),L={left:T,top:A,width:R,height:F,bottom:N,right:O,x:z,y:k};l.current.element instanceof HTMLElement&&n&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),p.current&&!uk(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[S,d?dw(S,d):S,c?dw(S,c):S]},[a,n,c,d]);function w(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function E(){l.current.element&&(l.current.resizeObserver=new i(y),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=S=>{!S||S===l.current.element||(w(),l.current.element=S,l.current.scrollContainers=yE(S),E())};return ak(y,!!e),ok(v),We.useEffect(()=>{w(),E()},[e,y,v]),We.useEffect(()=>w,[]),[M,s,g]}function ok(r){We.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function ak(r,e){We.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function yE(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...yE(r.parentElement)]}const lk=["x","y","top","bottom","left","right","width","height"],uk=(r,e)=>lk.every(t=>r[t]===e[t]);var ck=Object.defineProperty,fk=Object.defineProperties,dk=Object.getOwnPropertyDescriptors,hw=Object.getOwnPropertySymbols,hk=Object.prototype.hasOwnProperty,pk=Object.prototype.propertyIsEnumerable,pw=(r,e,t)=>e in r?ck(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mw=(r,e)=>{for(var t in e||(e={}))hk.call(e,t)&&pw(r,t,e[t]);if(hw)for(var t of hw(e))pk.call(e,t)&&pw(r,t,e[t]);return r},mk=(r,e)=>fk(r,dk(e)),gw,vw;typeof window<"u"&&((gw=window.document)!=null&&gw.createElement||((vw=window.navigator)==null?void 0:vw.product)==="ReactNative")?We.useLayoutEffect:We.useEffect;function xE(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=xE(n,e,t);if(i)return i;n=n.sibling}}function _E(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const yw=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=yw;return}return yw.apply(this,arguments)};const p_=_E(We.createContext(null));class SE extends We.Component{render(){return We.createElement(p_.Provider,{value:this._reactInternals},this.props.children)}}function gk(){const r=We.useContext(p_);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=We.useId();return We.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=xE(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[r,e])}function vk(){const r=gk(),[e]=We.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==p_&&!e.has(i)&&e.set(i,We.useContext(_E(i)))}t=t.return}return e}function yk(){const r=vk();return We.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>We.createElement(e,null,We.createElement(t.Provider,mk(mw({},n),{value:r.get(t)}))),e=>We.createElement(SE,mw({},e))),[r])}const xk=We.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:a=rk,eventSource:l,eventPrefix:c,shadows:d,linear:p,flat:g,legacy:v,orthographic:y,frameloop:w,dpr:E,performance:M,raycaster:S,camera:T,scene:A,onPointerMissed:R,onCreated:F,...N},O){We.useMemo(()=>OD(iE),[]);const z=yk(),[k,L]=sk({scroll:!0,debounce:{scroll:50,resize:0},...n}),W=We.useRef(null),X=We.useRef(null);We.useImperativeHandle(O,()=>W.current);const K=oE(R),[ne,de]=We.useState(!1),[ae,me]=We.useState(!1);if(ne)throw ne;if(ae)throw ae;const H=We.useRef(null);mp(()=>{const j=W.current;L.width>0&&L.height>0&&j&&(H.current||(H.current=nk(j)),H.current.configure({gl:s,events:a,shadows:d,linear:p,flat:g,legacy:v,orthographic:y,frameloop:w,dpr:E,performance:M,raycaster:S,camera:T,scene:A,size:L,onPointerMissed:(...D)=>K.current==null?void 0:K.current(...D),onCreated:D=>{D.events.connect==null||D.events.connect(l?zD(l)?l.current:l:X.current),c&&D.setEvents({compute:(Y,ce)=>{const Q=Y[c+"X"],re=Y[c+"Y"];ce.pointer.set(Q/ce.size.width*2-1,-(re/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),F==null||F(D)}}),H.current.render(Z.jsx(z,{children:Z.jsx(aE,{set:me,children:Z.jsx(We.Suspense,{fallback:Z.jsx(VD,{set:de}),children:e??null})})})))}),We.useEffect(()=>{const j=W.current;if(j)return()=>vE(j)},[]);const J=l?"none":"auto";return Z.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...i},...N,children:Z.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:Z.jsx("canvas",{ref:W,style:{display:"block"},children:t})})})}),_k=We.forwardRef(function(e,t){return Z.jsx(SE,{children:Z.jsx(xk,{...e,ref:t})})});function o0(){return o0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},o0.apply(null,arguments)}var m_=vp(),en=r=>gp(r,m_),g_=vp();en.write=r=>gp(r,g_);var Z0=vp();en.onStart=r=>gp(r,Z0);var v_=vp();en.onFrame=r=>gp(r,v_);var y_=vp();en.onFinish=r=>gp(r,y_);var zf=[];en.setTimeout=(r,e)=>{const t=en.now()+e,n=()=>{const s=zf.findIndex(a=>a.cancel==n);~s&&zf.splice(s,1),Xl-=~s?1:0},i={time:t,handler:r,cancel:n};return zf.splice(wE(t),0,i),Xl+=1,ME(),i};var wE=r=>~(~zf.findIndex(e=>e.time>r)||~zf.length);en.cancel=r=>{Z0.delete(r),v_.delete(r),y_.delete(r),m_.delete(r),g_.delete(r)};en.sync=r=>{fx=!0,en.batchedUpdates(r),fx=!1};en.throttle=r=>{let e;function t(){try{r(...e)}finally{e=null}}function n(...i){e=i,en.onStart(t)}return n.handler=r,n.cancel=()=>{Z0.delete(t),e=null},n};var x_=typeof window<"u"?window.requestAnimationFrame:()=>{};en.use=r=>x_=r;en.now=typeof performance<"u"?()=>performance.now():Date.now;en.batchedUpdates=r=>r();en.catch=console.error;en.frameLoop="always";en.advance=()=>{en.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):bE()};var jl=-1,Xl=0,fx=!1;function gp(r,e){fx?(e.delete(r),r(0)):(e.add(r),ME())}function ME(){jl<0&&(jl=0,en.frameLoop!=="demand"&&x_(EE))}function Sk(){jl=-1}function EE(){~jl&&(x_(EE),en.batchedUpdates(bE))}function bE(){const r=jl;jl=en.now();const e=wE(jl);if(e&&(TE(zf.splice(0,e),t=>t.handler()),Xl-=e),!Xl){Sk();return}Z0.flush(),m_.flush(r?Math.min(64,jl-r):16.667),v_.flush(),g_.flush(),y_.flush()}function vp(){let r=new Set,e=r;return{add(t){Xl+=e==r&&!r.has(t)?1:0,r.add(t)},delete(t){return Xl-=e==r&&r.has(t)?1:0,r.delete(t)},flush(t){e.size&&(r=new Set,Xl-=e.size,TE(e,n=>n(t)&&r.add(n)),Xl+=r.size,e=r)}}}function TE(r,e){r.forEach(t=>{try{e(t)}catch(n){en.catch(n)}})}var wk=Object.defineProperty,Mk=(r,e)=>{for(var t in e)wk(r,t,{get:e[t],enumerable:!0})},Co={};Mk(Co,{assign:()=>bk,colors:()=>ql,createStringInterpolator:()=>S_,skipAnimation:()=>CE,to:()=>AE,willAdvance:()=>w_});function dx(){}var Ek=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,configurable:!0}),mt={arr:Array.isArray,obj:r=>!!r&&r.constructor.name==="Object",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",und:r=>r===void 0};function Ha(r,e){if(mt.arr(r)){if(!mt.arr(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}return r===e}var Tn=(r,e)=>r.forEach(e);function $a(r,e,t){if(mt.arr(r)){for(let n=0;n<r.length;n++)e.call(t,r[n],`${n}`);return}for(const n in r)r.hasOwnProperty(n)&&e.call(t,r[n],n)}var Vs=r=>mt.und(r)?[]:mt.arr(r)?r:[r];function Ch(r,e){if(r.size){const t=Array.from(r);r.clear(),Tn(t,e)}}var vh=(r,...e)=>Ch(r,t=>t(...e)),__=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),S_,AE,ql=null,CE=!1,w_=dx,bk=r=>{r.to&&(AE=r.to),r.now&&(en.now=r.now),r.colors!==void 0&&(ql=r.colors),r.skipAnimation!=null&&(CE=r.skipAnimation),r.createStringInterpolator&&(S_=r.createStringInterpolator),r.requestAnimationFrame&&en.use(r.requestAnimationFrame),r.batchedUpdates&&(en.batchedUpdates=r.batchedUpdates),r.willAdvance&&(w_=r.willAdvance),r.frameLoop&&(en.frameLoop=r.frameLoop)},Rh=new Set,Bs=[],Oy=[],a0=0,K0={get idle(){return!Rh.size&&!Bs.length},start(r){a0>r.priority?(Rh.add(r),en.onStart(Tk)):(RE(r),en(hx))},advance:hx,sort(r){if(a0)en.onFrame(()=>K0.sort(r));else{const e=Bs.indexOf(r);~e&&(Bs.splice(e,1),PE(r))}},clear(){Bs=[],Rh.clear()}};function Tk(){Rh.forEach(RE),Rh.clear(),en(hx)}function RE(r){Bs.includes(r)||PE(r)}function PE(r){Bs.splice(Ak(Bs,e=>e.priority>r.priority),0,r)}function hx(r){const e=Oy;for(let t=0;t<Bs.length;t++){const n=Bs[t];a0=n.priority,n.idle||(w_(n),n.advance(r),n.idle||e.push(n))}return a0=0,Oy=Bs,Oy.length=0,Bs=e,Bs.length>0}function Ak(r,e){const t=r.findIndex(e);return t<0?r.length:t}var Ck=(r,e,t)=>Math.min(Math.max(t,r),e),Rk={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},bo="[-+]?\\d*\\.?\\d+",l0=bo+"%";function Q0(...r){return"\\(\\s*("+r.join(")\\s*,\\s*(")+")\\s*\\)"}var Pk=new RegExp("rgb"+Q0(bo,bo,bo)),Ik=new RegExp("rgba"+Q0(bo,bo,bo,bo)),Lk=new RegExp("hsl"+Q0(bo,l0,l0)),Dk=new RegExp("hsla"+Q0(bo,l0,l0,bo)),kk=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Nk=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Uk=/^#([0-9a-fA-F]{6})$/,Fk=/^#([0-9a-fA-F]{8})$/;function Ok(r){let e;return typeof r=="number"?r>>>0===r&&r>=0&&r<=4294967295?r:null:(e=Uk.exec(r))?parseInt(e[1]+"ff",16)>>>0:ql&&ql[r]!==void 0?ql[r]:(e=Pk.exec(r))?(Rf(e[1])<<24|Rf(e[2])<<16|Rf(e[3])<<8|255)>>>0:(e=Ik.exec(r))?(Rf(e[1])<<24|Rf(e[2])<<16|Rf(e[3])<<8|Sw(e[4]))>>>0:(e=kk.exec(r))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Fk.exec(r))?parseInt(e[1],16)>>>0:(e=Nk.exec(r))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Lk.exec(r))?(xw(_w(e[1]),og(e[2]),og(e[3]))|255)>>>0:(e=Dk.exec(r))?(xw(_w(e[1]),og(e[2]),og(e[3]))|Sw(e[4]))>>>0:null}function By(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function xw(r,e,t){const n=t<.5?t*(1+e):t+e-t*e,i=2*t-n,s=By(i,n,r+1/3),a=By(i,n,r),l=By(i,n,r-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(l*255)<<8}function Rf(r){const e=parseInt(r,10);return e<0?0:e>255?255:e}function _w(r){return(parseFloat(r)%360+360)%360/360}function Sw(r){const e=parseFloat(r);return e<0?0:e>1?255:Math.round(e*255)}function og(r){const e=parseFloat(r);return e<0?0:e>100?1:e/100}function ww(r){let e=Ok(r);if(e===null)return r;e=e||0;const t=(e&4278190080)>>>24,n=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${n}, ${i}, ${s})`}var Kh=(r,e,t)=>{if(mt.fun(r))return r;if(mt.arr(r))return Kh({range:r,output:e,extrapolate:t});if(mt.str(r.output[0]))return S_(r);const n=r,i=n.output,s=n.range||[0,1],a=n.extrapolateLeft||n.extrapolate||"extend",l=n.extrapolateRight||n.extrapolate||"extend",c=n.easing||(d=>d);return d=>{const p=zk(d,s);return Bk(d,s[p],s[p+1],i[p],i[p+1],c,a,l,n.map)}};function Bk(r,e,t,n,i,s,a,l,c){let d=c?c(r):r;if(d<e){if(a==="identity")return d;a==="clamp"&&(d=e)}if(d>t){if(l==="identity")return d;l==="clamp"&&(d=t)}return n===i?n:e===t?r<=e?n:i:(e===-1/0?d=-d:t===1/0?d=d-e:d=(d-e)/(t-e),d=s(d),n===-1/0?d=-d:i===1/0?d=d+n:d=d*(i-n)+n,d)}function zk(r,e){for(var t=1;t<e.length-1&&!(e[t]>=r);++t);return t-1}var Vk=(r,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const n=t*r,i=e==="end"?Math.floor(n):Math.ceil(n);return Ck(0,1,i/r)},u0=1.70158,ag=u0*1.525,Mw=u0+1,Ew=2*Math.PI/3,bw=2*Math.PI/4.5,lg=r=>r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375,Hk={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>1-(1-r)*(1-r),easeInOutQuad:r=>r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2,easeInCubic:r=>r*r*r,easeOutCubic:r=>1-Math.pow(1-r,3),easeInOutCubic:r=>r<.5?4*r*r*r:1-Math.pow(-2*r+2,3)/2,easeInQuart:r=>r*r*r*r,easeOutQuart:r=>1-Math.pow(1-r,4),easeInOutQuart:r=>r<.5?8*r*r*r*r:1-Math.pow(-2*r+2,4)/2,easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>1-Math.pow(1-r,5),easeInOutQuint:r=>r<.5?16*r*r*r*r*r:1-Math.pow(-2*r+2,5)/2,easeInSine:r=>1-Math.cos(r*Math.PI/2),easeOutSine:r=>Math.sin(r*Math.PI/2),easeInOutSine:r=>-(Math.cos(Math.PI*r)-1)/2,easeInExpo:r=>r===0?0:Math.pow(2,10*r-10),easeOutExpo:r=>r===1?1:1-Math.pow(2,-10*r),easeInOutExpo:r=>r===0?0:r===1?1:r<.5?Math.pow(2,20*r-10)/2:(2-Math.pow(2,-20*r+10))/2,easeInCirc:r=>1-Math.sqrt(1-Math.pow(r,2)),easeOutCirc:r=>Math.sqrt(1-Math.pow(r-1,2)),easeInOutCirc:r=>r<.5?(1-Math.sqrt(1-Math.pow(2*r,2)))/2:(Math.sqrt(1-Math.pow(-2*r+2,2))+1)/2,easeInBack:r=>Mw*r*r*r-u0*r*r,easeOutBack:r=>1+Mw*Math.pow(r-1,3)+u0*Math.pow(r-1,2),easeInOutBack:r=>r<.5?Math.pow(2*r,2)*((ag+1)*2*r-ag)/2:(Math.pow(2*r-2,2)*((ag+1)*(r*2-2)+ag)+2)/2,easeInElastic:r=>r===0?0:r===1?1:-Math.pow(2,10*r-10)*Math.sin((r*10-10.75)*Ew),easeOutElastic:r=>r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r*10-.75)*Ew)+1,easeInOutElastic:r=>r===0?0:r===1?1:r<.5?-(Math.pow(2,20*r-10)*Math.sin((20*r-11.125)*bw))/2:Math.pow(2,-20*r+10)*Math.sin((20*r-11.125)*bw)/2+1,easeInBounce:r=>1-lg(1-r),easeOutBounce:lg,easeInOutBounce:r=>r<.5?(1-lg(1-2*r))/2:(1+lg(2*r-1))/2,steps:Vk},Qh=Symbol.for("FluidValue.get"),Zf=Symbol.for("FluidValue.observers"),Zo=r=>!!(r&&r[Qh]),Os=r=>r&&r[Qh]?r[Qh]():r,Tw=r=>r[Zf]||null;function Gk(r,e){r.eventObserved?r.eventObserved(e):r(e)}function c0(r,e){const t=r[Zf];t&&t.forEach(n=>{Gk(n,e)})}var Wk=class{constructor(r){if(!r&&!(r=this.get))throw Error("Unknown getter");jk(this,r)}},jk=(r,e)=>IE(r,Qh,e);function yp(r,e){if(r[Qh]){let t=r[Zf];t||IE(r,Zf,t=new Set),t.has(e)||(t.add(e),r.observerAdded&&r.observerAdded(t.size,e))}return e}function f0(r,e){const t=r[Zf];if(t&&t.has(e)){const n=t.size-1;n?t.delete(e):r[Zf]=null,r.observerRemoved&&r.observerRemoved(n,e)}}var IE=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,configurable:!0}),vg=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Xk=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Aw=new RegExp(`(${vg.source})(%|[a-z]+)`,"i"),Yk=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,$0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,LE=r=>{const[e,t]=qk(r);if(!e||__())return r;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||r}else{if(t&&$0.test(t))return LE(t);if(t)return t}return r},qk=r=>{const e=$0.exec(r);if(!e)return[,];const[,t,n]=e;return[t,n]},zy,Jk=(r,e,t,n,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(n)}, ${i})`,DE=r=>{zy||(zy=ql?new RegExp(`(${Object.keys(ql).join("|")})(?!\\w)`,"g"):/^\b$/);const e=r.output.map(s=>Os(s).replace($0,LE).replace(Xk,ww).replace(zy,ww)),t=e.map(s=>s.match(vg).map(Number)),i=t[0].map((s,a)=>t.map(l=>{if(!(a in l))throw Error('The arity of each "output" value must be equal');return l[a]})).map(s=>Kh({...r,output:s}));return s=>{var c;const a=!Aw.test(e[0])&&((c=e.find(d=>Aw.test(d)))==null?void 0:c.replace(vg,""));let l=0;return e[0].replace(vg,()=>`${i[l++](s)}${a||""}`).replace(Yk,Jk)}},M_="react-spring: ",kE=r=>{const e=r;let t=!1;if(typeof e!="function")throw new TypeError(`${M_}once requires a function parameter`);return(...n)=>{t||(e(...n),t=!0)}},Zk=kE(console.warn);function Kk(){Zk(`${M_}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Qk=kE(console.warn);function $k(){Qk(`${M_}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ev(r){return mt.str(r)&&(r[0]=="#"||/\d/.test(r)||!__()&&$0.test(r)||r in(ql||{}))}var E_=__()?We.useEffect:We.useLayoutEffect,eN=()=>{const r=We.useRef(!1);return E_(()=>(r.current=!0,()=>{r.current=!1}),[]),r};function NE(){const r=We.useState()[1],e=eN();return()=>{e.current&&r(Math.random())}}function tN(r,e){const[t]=We.useState(()=>({inputs:e,result:r()})),n=We.useRef(),i=n.current;let s=i;return s?s.inputs&&nN(e,s.inputs)||(s={inputs:e,result:r()}):s=t,We.useEffect(()=>{n.current=s,i==t&&(t.inputs=t.result=void 0)},[s]),s.result}function nN(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}var UE=r=>We.useEffect(r,iN),iN=[];function Cw(r){const e=We.useRef();return We.useEffect(()=>{e.current=r}),e.current}var $h=Symbol.for("Animated:node"),rN=r=>!!r&&r[$h]===r,Jo=r=>r&&r[$h],b_=(r,e)=>Ek(r,$h,e),tv=r=>r&&r[$h]&&r[$h].getPayload(),FE=class{constructor(){b_(this,this)}getPayload(){return this.payload||[]}},xp=class extends FE{constructor(r){super(),this._value=r,this.done=!0,this.durationProgress=0,mt.num(this._value)&&(this.lastPosition=this._value)}static create(r){return new xp(r)}getPayload(){return[this]}getValue(){return this._value}setValue(r,e){return mt.num(r)&&(this.lastPosition=r,e&&(r=Math.round(r/e)*e,this.done&&(this.lastPosition=r))),this._value===r?!1:(this._value=r,!0)}reset(){const{done:r}=this;this.done=!1,mt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,r&&(this.lastVelocity=null),this.v0=null)}},ep=class extends xp{constructor(r){super(0),this._string=null,this._toString=Kh({output:[r,r]})}static create(r){return new ep(r)}getValue(){const r=this._string;return r??(this._string=this._toString(this._value))}setValue(r){if(mt.str(r)){if(r==this._string)return!1;this._string=r,this._value=1}else if(super.setValue(r))this._string=null;else return!1;return!0}reset(r){r&&(this._toString=Kh({output:[this.getValue(),r]})),this._value=0,super.reset()}},d0={dependencies:null},T_=class extends FE{constructor(r){super(),this.source=r,this.setValue(r)}getValue(r){const e={};return $a(this.source,(t,n)=>{rN(t)?e[n]=t.getValue(r):Zo(t)?e[n]=Os(t):r||(e[n]=t)}),e}setValue(r){this.source=r,this.payload=this._makePayload(r)}reset(){this.payload&&Tn(this.payload,r=>r.reset())}_makePayload(r){if(r){const e=new Set;return $a(r,this._addToPayload,e),Array.from(e)}}_addToPayload(r){d0.dependencies&&Zo(r)&&d0.dependencies.add(r);const e=tv(r);e&&Tn(e,t=>this.add(t))}},OE=class extends T_{constructor(r){super(r)}static create(r){return new OE(r)}getValue(){return this.source.map(r=>r.getValue())}setValue(r){const e=this.getPayload();return r.length==e.length?e.map((t,n)=>t.setValue(r[n])).some(Boolean):(super.setValue(r.map(sN)),!0)}};function sN(r){return(ev(r)?ep:xp).create(r)}function px(r){const e=Jo(r);return e?e.constructor:mt.arr(r)?OE:ev(r)?ep:xp}var Rw=(r,e)=>{const t=!mt.fun(r)||r.prototype&&r.prototype.isReactComponent;return We.forwardRef((n,i)=>{const s=We.useRef(null),a=t&&We.useCallback(w=>{s.current=lN(i,w)},[i]),[l,c]=aN(n,e),d=NE(),p=()=>{const w=s.current;if(t&&!w)return;(w?e.applyAnimatedValues(w,l.getValue(!0)):!1)===!1&&d()},g=new oN(p,c),v=We.useRef();E_(()=>(v.current=g,Tn(c,w=>yp(w,g)),()=>{v.current&&(Tn(v.current.deps,w=>f0(w,v.current)),en.cancel(v.current.update))})),We.useEffect(p,[]),UE(()=>()=>{const w=v.current;Tn(w.deps,E=>f0(E,w))});const y=e.getComponentProps(l.getValue());return We.createElement(r,{...y,ref:a})})},oN=class{constructor(r,e){this.update=r,this.deps=e}eventObserved(r){r.type=="change"&&en.write(this.update)}};function aN(r,e){const t=new Set;return d0.dependencies=t,r.style&&(r={...r,style:e.createAnimatedStyle(r.style)}),r=new T_(r),d0.dependencies=null,[r,t]}function lN(r,e){return r&&(mt.fun(r)?r(e):r.current=e),e}var Pw=Symbol.for("AnimatedComponent"),uN=(r,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new T_(i),getComponentProps:n=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:n},s=a=>{const l=Iw(a)||"Anonymous";return mt.str(a)?a=s[a]||(s[a]=Rw(a,i)):a=a[Pw]||(a[Pw]=Rw(a,i)),a.displayName=`Animated(${l})`,a};return $a(r,(a,l)=>{mt.arr(r)&&(l=Iw(a)),s[l]=s(a)}),{animated:s}},Iw=r=>mt.str(r)?r:r&&mt.str(r.displayName)?r.displayName:mt.fun(r)&&r.name||null;function ec(r,...e){return mt.fun(r)?r(...e):r}var Ph=(r,e)=>r===!0||!!(e&&r&&(mt.fun(r)?r(e):Vs(r).includes(e))),BE=(r,e)=>mt.obj(r)?e&&r[e]:r,zE=(r,e)=>r.default===!0?r[e]:r.default?r.default[e]:void 0,cN=r=>r,A_=(r,e=cN)=>{let t=fN;r.default&&r.default!==!0&&(r=r.default,t=Object.keys(r));const n={};for(const i of t){const s=e(r[i],i);mt.und(s)||(n[i]=s)}return n},fN=["config","onProps","onStart","onChange","onPause","onResume","onRest"],dN={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function hN(r){const e={};let t=0;if($a(r,(n,i)=>{dN[i]||(e[i]=n,t++)}),t)return e}function VE(r){const e=hN(r);if(e){const t={to:e};return $a(r,(n,i)=>i in e||(t[i]=n)),t}return{...r}}function tp(r){return r=Os(r),mt.arr(r)?r.map(tp):ev(r)?Co.createStringInterpolator({range:[0,1],output:[r,r]})(1):r}function pN(r){for(const e in r)return!0;return!1}function mx(r){return mt.fun(r)||mt.arr(r)&&mt.obj(r[0])}function mN(r,e){var t;(t=r.ref)==null||t.delete(r),e==null||e.delete(r)}function gN(r,e){var t;e&&r.ref!==e&&((t=r.ref)==null||t.delete(r),e.add(r),r.ref=e)}var vN={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},gx={...vN.default,mass:1,damping:1,easing:Hk.linear,clamp:!1},yN=class{constructor(){this.velocity=0,Object.assign(this,gx)}};function xN(r,e,t){t&&(t={...t},Lw(t,e),e={...t,...e}),Lw(r,e),Object.assign(r,e);for(const a in gx)r[a]==null&&(r[a]=gx[a]);let{frequency:n,damping:i}=r;const{mass:s}=r;return mt.und(n)||(n<.01&&(n=.01),i<0&&(i=0),r.tension=Math.pow(2*Math.PI/n,2)*s,r.friction=4*Math.PI*i*s/n),r}function Lw(r,e){if(!mt.und(e.decay))r.duration=void 0;else{const t=!mt.und(e.tension)||!mt.und(e.friction);(t||!mt.und(e.frequency)||!mt.und(e.damping)||!mt.und(e.mass))&&(r.duration=void 0,r.decay=void 0),t&&(r.frequency=void 0)}}var Dw=[],_N=class{constructor(){this.changed=!1,this.values=Dw,this.toValues=null,this.fromValues=Dw,this.config=new yN,this.immediate=!1}};function HE(r,{key:e,props:t,defaultProps:n,state:i,actions:s}){return new Promise((a,l)=>{let c,d,p=Ph(t.cancel??(n==null?void 0:n.cancel),e);if(p)y();else{mt.und(t.pause)||(i.paused=Ph(t.pause,e));let w=n==null?void 0:n.pause;w!==!0&&(w=i.paused||Ph(w,e)),c=ec(t.delay||0,e),w?(i.resumeQueue.add(v),s.pause()):(s.resume(),v())}function g(){i.resumeQueue.add(v),i.timeouts.delete(d),d.cancel(),c=d.time-en.now()}function v(){c>0&&!Co.skipAnimation?(i.delayed=!0,d=en.setTimeout(y,c),i.pauseQueue.add(g),i.timeouts.add(d)):y()}function y(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(g),i.timeouts.delete(d),r<=(i.cancelId||0)&&(p=!0);try{s.start({...t,callId:r,cancel:p},a)}catch(w){l(w)}}})}var C_=(r,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Vf(r.get()):e.every(t=>t.noop)?GE(r.get()):wo(r.get(),e.every(t=>t.finished)),GE=r=>({value:r,noop:!0,finished:!0,cancelled:!1}),wo=(r,e,t=!1)=>({value:r,finished:e,cancelled:t}),Vf=r=>({value:r,cancelled:!0,finished:!1});function WE(r,e,t,n){const{callId:i,parentId:s,onRest:a}=e,{asyncTo:l,promise:c}=t;return!s&&r===l&&!e.reset?c:t.promise=(async()=>{t.asyncId=i,t.asyncTo=r;const d=A_(e,(M,S)=>S==="onRest"?void 0:M);let p,g;const v=new Promise((M,S)=>(p=M,g=S)),y=M=>{const S=i<=(t.cancelId||0)&&Vf(n)||i!==t.asyncId&&wo(n,!1);if(S)throw M.result=S,g(M),M},w=(M,S)=>{const T=new kw,A=new Nw;return(async()=>{if(Co.skipAnimation)throw np(t),A.result=wo(n,!1),g(A),A;y(T);const R=mt.obj(M)?{...M}:{...S,to:M};R.parentId=i,$a(d,(N,O)=>{mt.und(R[O])&&(R[O]=N)});const F=await n.start(R);return y(T),t.paused&&await new Promise(N=>{t.resumeQueue.add(N)}),F})()};let E;if(Co.skipAnimation)return np(t),wo(n,!1);try{let M;mt.arr(r)?M=(async S=>{for(const T of S)await w(T)})(r):M=Promise.resolve(r(w,n.stop.bind(n))),await Promise.all([M.then(p),v]),E=wo(n.get(),!0,!1)}catch(M){if(M instanceof kw)E=M.result;else if(M instanceof Nw)E=M.result;else throw M}finally{i==t.asyncId&&(t.asyncId=s,t.asyncTo=s?l:void 0,t.promise=s?c:void 0)}return mt.fun(a)&&en.batchedUpdates(()=>{a(E,n,n.item)}),E})()}function np(r,e){Ch(r.timeouts,t=>t.cancel()),r.pauseQueue.clear(),r.resumeQueue.clear(),r.asyncId=r.asyncTo=r.promise=void 0,e&&(r.cancelId=e)}var kw=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Nw=class extends Error{constructor(){super("SkipAnimationSignal")}},vx=r=>r instanceof R_,SN=1,R_=class extends Wk{constructor(){super(...arguments),this.id=SN++,this._priority=0}get priority(){return this._priority}set priority(r){this._priority!=r&&(this._priority=r,this._onPriorityChange(r))}get(){const r=Jo(this);return r&&r.getValue()}to(...r){return Co.to(this,r)}interpolate(...r){return Kk(),Co.to(this,r)}toJSON(){return this.get()}observerAdded(r){r==1&&this._attach()}observerRemoved(r){r==0&&this._detach()}_attach(){}_detach(){}_onChange(r,e=!1){c0(this,{type:"change",parent:this,value:r,idle:e})}_onPriorityChange(r){this.idle||K0.sort(this),c0(this,{type:"priority",parent:this,priority:r})}},pc=Symbol.for("SpringPhase"),jE=1,XE=2,YE=4,Vy=r=>(r[pc]&jE)>0,Hl=r=>(r[pc]&XE)>0,lh=r=>(r[pc]&YE)>0,Uw=(r,e)=>e?r[pc]|=XE|jE:r[pc]&=-3,Fw=(r,e)=>e?r[pc]|=YE:r[pc]&=-5,wN=class extends R_{constructor(r,e){if(super(),this.animation=new _N,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!mt.und(r)||!mt.und(e)){const t=mt.obj(r)?{...r}:{...e,from:r};mt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Hl(this)||this._state.asyncTo)||lh(this)}get goal(){return Os(this.animation.to)}get velocity(){const r=Jo(this);return r instanceof xp?r.lastVelocity||0:r.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Vy(this)}get isAnimating(){return Hl(this)}get isPaused(){return lh(this)}get isDelayed(){return this._state.delayed}advance(r){let e=!0,t=!1;const n=this.animation;let{toValues:i}=n;const{config:s}=n,a=tv(n.to);!a&&Zo(n.to)&&(i=Vs(Os(n.to))),n.values.forEach((d,p)=>{if(d.done)return;const g=d.constructor==ep?1:a?a[p].lastPosition:i[p];let v=n.immediate,y=g;if(!v){if(y=d.lastPosition,s.tension<=0){d.done=!0;return}let w=d.elapsedTime+=r;const E=n.fromValues[p],M=d.v0!=null?d.v0:d.v0=mt.arr(s.velocity)?s.velocity[p]:s.velocity;let S;const T=s.precision||(E==g?.005:Math.min(1,Math.abs(g-E)*.001));if(mt.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,R=Math.exp(-(1-A)*w);y=E+M/(1-A)*(1-R),v=Math.abs(d.lastPosition-y)<=T,S=M*R}else{S=d.lastVelocity==null?M:d.lastVelocity;const A=s.restVelocity||T/10,R=s.clamp?0:s.bounce,F=!mt.und(R),N=E==g?d.v0>0:E<g;let O,z=!1;const k=1,L=Math.ceil(r/k);for(let W=0;W<L&&(O=Math.abs(S)>A,!(!O&&(v=Math.abs(g-y)<=T,v)));++W){F&&(z=y==g||y>g==N,z&&(S=-S*R,y=g));const X=-s.tension*1e-6*(y-g),K=-s.friction*.001*S,ne=(X+K)/s.mass;S=S+ne*k,y=y+S*k}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,d.durationProgress>0&&(d.elapsedTime=s.duration*d.durationProgress,w=d.elapsedTime+=r)),A=(s.progress||0)+w/this._memoizedDuration,A=A>1?1:A<0?0:A,d.durationProgress=A),y=E+s.easing(A)*(g-E),S=(y-d.lastPosition)/r,v=A==1}d.lastVelocity=S,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),v=!0)}a&&!a[p].done&&(v=!1),v?d.done=!0:e=!1,d.setValue(y,s.round)&&(t=!0)});const l=Jo(this),c=l.getValue();if(e){const d=Os(n.to);(c!==d||t)&&!s.decay?(l.setValue(d),this._onChange(d)):t&&s.decay&&this._onChange(c),this._stop()}else t&&this._onChange(c)}set(r){return en.batchedUpdates(()=>{this._stop(),this._focus(r),this._set(r)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Hl(this)){const{to:r,config:e}=this.animation;en.batchedUpdates(()=>{this._onStart(),e.decay||this._set(r,!1),this._stop()})}return this}update(r){return(this.queue||(this.queue=[])).push(r),this}start(r,e){let t;return mt.und(r)?(t=this.queue||[],this.queue=[]):t=[mt.obj(r)?r:{...e,to:r}],Promise.all(t.map(n=>this._update(n))).then(n=>C_(this,n))}stop(r){const{to:e}=this.animation;return this._focus(this.get()),np(this._state,r&&this._lastCallId),en.batchedUpdates(()=>this._stop(e,r)),this}reset(){this._update({reset:!0})}eventObserved(r){r.type=="change"?this._start():r.type=="priority"&&(this.priority=r.priority+1)}_prepareNode(r){const e=this.key||"";let{to:t,from:n}=r;t=mt.obj(t)?t[e]:t,(t==null||mx(t))&&(t=void 0),n=mt.obj(n)?n[e]:n,n==null&&(n=void 0);const i={to:t,from:n};return Vy(this)||(r.reverse&&([t,n]=[n,t]),n=Os(n),mt.und(n)?Jo(this)||this._set(t):this._set(n)),i}_update({...r},e){const{key:t,defaultProps:n}=this;r.default&&Object.assign(n,A_(r,(a,l)=>/^on/.test(l)?BE(a,t):a)),Bw(this,r,"onProps"),ch(this,"onProps",r,this);const i=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return HE(++this._lastCallId,{key:t,props:r,defaultProps:n,state:s,actions:{pause:()=>{lh(this)||(Fw(this,!0),vh(s.pauseQueue),ch(this,"onPause",wo(this,uh(this,this.animation.to)),this))},resume:()=>{lh(this)&&(Fw(this,!1),Hl(this)&&this._resume(),vh(s.resumeQueue),ch(this,"onResume",wo(this,uh(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(a=>{if(r.loop&&a.finished&&!(e&&a.noop)){const l=qE(r);if(l)return this._update(l,!0)}return a})}_merge(r,e,t){if(e.cancel)return this.stop(!0),t(Vf(this));const n=!mt.und(r.to),i=!mt.und(r.from);if(n||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(Vf(this));const{key:s,defaultProps:a,animation:l}=this,{to:c,from:d}=l;let{to:p=c,from:g=d}=r;i&&!n&&(!e.default||mt.und(p))&&(p=g),e.reverse&&([p,g]=[g,p]);const v=!Ha(g,d);v&&(l.from=g),g=Os(g);const y=!Ha(p,c);y&&this._focus(p);const w=mx(e.to),{config:E}=l,{decay:M,velocity:S}=E;(n||i)&&(E.velocity=0),e.config&&!w&&xN(E,ec(e.config,s),e.config!==a.config?ec(a.config,s):void 0);let T=Jo(this);if(!T||mt.und(p))return t(wo(this,!0));const A=mt.und(e.reset)?i&&!e.default:!mt.und(g)&&Ph(e.reset,s),R=A?g:this.get(),F=tp(p),N=mt.num(F)||mt.arr(F)||ev(F),O=!w&&(!N||Ph(a.immediate||e.immediate,s));if(y){const W=px(p);if(W!==T.constructor)if(O)T=this._set(F);else throw Error(`Cannot animate between ${T.constructor.name} and ${W.name}, as the "to" prop suggests`)}const z=T.constructor;let k=Zo(p),L=!1;if(!k){const W=A||!Vy(this)&&v;(y||W)&&(L=Ha(tp(R),F),k=!L),(!Ha(l.immediate,O)&&!O||!Ha(E.decay,M)||!Ha(E.velocity,S))&&(k=!0)}if(L&&Hl(this)&&(l.changed&&!A?k=!0:k||this._stop(c)),!w&&((k||Zo(c))&&(l.values=T.getPayload(),l.toValues=Zo(p)?null:z==ep?[1]:Vs(F)),l.immediate!=O&&(l.immediate=O,!O&&!A&&this._set(c)),k)){const{onRest:W}=l;Tn(EN,K=>Bw(this,e,K));const X=wo(this,uh(this,c));vh(this._pendingCalls,X),this._pendingCalls.add(t),l.changed&&en.batchedUpdates(()=>{var K;l.changed=!A,W==null||W(X,this),A?ec(a.onRest,X):(K=l.onStart)==null||K.call(l,X,this)})}A&&this._set(R),w?t(WE(e.to,e,this._state,this)):k?this._start():Hl(this)&&!y?this._pendingCalls.add(t):t(GE(R))}_focus(r){const e=this.animation;r!==e.to&&(Tw(this)&&this._detach(),e.to=r,Tw(this)&&this._attach())}_attach(){let r=0;const{to:e}=this.animation;Zo(e)&&(yp(e,this),vx(e)&&(r=e.priority+1)),this.priority=r}_detach(){const{to:r}=this.animation;Zo(r)&&f0(r,this)}_set(r,e=!0){const t=Os(r);if(!mt.und(t)){const n=Jo(this);if(!n||!Ha(t,n.getValue())){const i=px(t);!n||n.constructor!=i?b_(this,i.create(t)):n.setValue(t),n&&en.batchedUpdates(()=>{this._onChange(t,e)})}}return Jo(this)}_onStart(){const r=this.animation;r.changed||(r.changed=!0,ch(this,"onStart",wo(this,uh(this,r.to)),this))}_onChange(r,e){e||(this._onStart(),ec(this.animation.onChange,r,this)),ec(this.defaultProps.onChange,r,this),super._onChange(r,e)}_start(){const r=this.animation;Jo(this).reset(Os(r.to)),r.immediate||(r.fromValues=r.values.map(e=>e.lastPosition)),Hl(this)||(Uw(this,!0),lh(this)||this._resume())}_resume(){Co.skipAnimation?this.finish():K0.start(this)}_stop(r,e){if(Hl(this)){Uw(this,!1);const t=this.animation;Tn(t.values,i=>{i.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),c0(this,{type:"idle",parent:this});const n=e?Vf(this.get()):wo(this.get(),uh(this,r??t.to));vh(this._pendingCalls,n),t.changed&&(t.changed=!1,ch(this,"onRest",n,this))}}};function uh(r,e){const t=tp(e),n=tp(r.get());return Ha(n,t)}function qE(r,e=r.loop,t=r.to){const n=ec(e);if(n){const i=n!==!0&&VE(n),s=(i||r).reverse,a=!i||i.reset;return ip({...r,loop:e,default:!1,pause:void 0,to:!s||mx(t)?t:void 0,from:a?r.from:void 0,reset:a,...i})}}function ip(r){const{to:e,from:t}=r=VE(r),n=new Set;return mt.obj(e)&&Ow(e,n),mt.obj(t)&&Ow(t,n),r.keys=n.size?Array.from(n):null,r}function MN(r){const e=ip(r);return mt.und(e.default)&&(e.default=A_(e)),e}function Ow(r,e){$a(r,(t,n)=>t!=null&&e.add(n))}var EN=["onStart","onRest","onChange","onPause","onResume"];function Bw(r,e,t){r.animation[t]=e[t]!==zE(e,t)?BE(e[t],r.key):void 0}function ch(r,e,...t){var n,i,s,a;(i=(n=r.animation)[e])==null||i.call(n,...t),(a=(s=r.defaultProps)[e])==null||a.call(s,...t)}var bN=["onStart","onChange","onRest"],TN=1,AN=class{constructor(r,e){this.id=TN++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),r&&this.start({default:!0,...r})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(r=>r.idle&&!r.isDelayed&&!r.isPaused)}get item(){return this._item}set item(r){this._item=r}get(){const r={};return this.each((e,t)=>r[t]=e.get()),r}set(r){for(const e in r){const t=r[e];mt.und(t)||this.springs[e].set(t)}}update(r){return r&&this.queue.push(ip(r)),this}start(r){let{queue:e}=this;return r?e=Vs(r).map(ip):this.queue=[],this._flush?this._flush(this,e):($E(this,e),yx(this,e))}stop(r,e){if(r!==!!r&&(e=r),e){const t=this.springs;Tn(Vs(e),n=>t[n].stop(!!r))}else np(this._state,this._lastAsyncId),this.each(t=>t.stop(!!r));return this}pause(r){if(mt.und(r))this.start({pause:!0});else{const e=this.springs;Tn(Vs(r),t=>e[t].pause())}return this}resume(r){if(mt.und(r))this.start({pause:!1});else{const e=this.springs;Tn(Vs(r),t=>e[t].resume())}return this}each(r){$a(this.springs,r)}_onFrame(){const{onStart:r,onChange:e,onRest:t}=this._events,n=this._active.size>0,i=this._changed.size>0;(n&&!this._started||i&&!this._started)&&(this._started=!0,Ch(r,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const s=!n&&this._started,a=i||s&&t.size?this.get():null;i&&e.size&&Ch(e,([l,c])=>{c.value=a,l(c,this,this._item)}),s&&(this._started=!1,Ch(t,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(r){if(r.type=="change")this._changed.add(r.parent),r.idle||this._active.add(r.parent);else if(r.type=="idle")this._active.delete(r.parent);else return;en.onFrame(this._onFrame)}};function yx(r,e){return Promise.all(e.map(t=>JE(r,t))).then(t=>C_(r,t))}async function JE(r,e,t){const{keys:n,to:i,from:s,loop:a,onRest:l,onResolve:c}=e,d=mt.obj(e.default)&&e.default;a&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const p=mt.arr(i)||mt.fun(i)?i:void 0;p?(e.to=void 0,e.onRest=void 0,d&&(d.onRest=void 0)):Tn(bN,E=>{const M=e[E];if(mt.fun(M)){const S=r._events[E];e[E]=({finished:T,cancelled:A})=>{const R=S.get(M);R?(T||(R.finished=!1),A&&(R.cancelled=!0)):S.set(M,{value:null,finished:T||!1,cancelled:A||!1})},d&&(d[E]=e[E])}});const g=r._state;e.pause===!g.paused?(g.paused=e.pause,vh(e.pause?g.pauseQueue:g.resumeQueue)):g.paused&&(e.pause=!0);const v=(n||Object.keys(r.springs)).map(E=>r.springs[E].start(e)),y=e.cancel===!0||zE(e,"cancel")===!0;(p||y&&g.asyncId)&&v.push(HE(++r._lastAsyncId,{props:e,state:g,actions:{pause:dx,resume:dx,start(E,M){y?(np(g,r._lastAsyncId),M(Vf(r))):(E.onRest=l,M(WE(p,E,g,r)))}}})),g.paused&&await new Promise(E=>{g.resumeQueue.add(E)});const w=C_(r,await Promise.all(v));if(a&&w.finished&&!(t&&w.noop)){const E=qE(e,a,i);if(E)return $E(r,[E]),JE(r,E,!0)}return c&&en.batchedUpdates(()=>c(w,r,r.item)),w}function zw(r,e){const t={...r.springs};return e&&Tn(Vs(e),n=>{mt.und(n.keys)&&(n=ip(n)),mt.obj(n.to)||(n={...n,to:void 0}),QE(t,n,i=>KE(i))}),ZE(r,t),t}function ZE(r,e){$a(e,(t,n)=>{r.springs[n]||(r.springs[n]=t,yp(t,r))})}function KE(r,e){const t=new wN;return t.key=r,e&&yp(t,e),t}function QE(r,e,t){e.keys&&Tn(e.keys,n=>{(r[n]||(r[n]=t(n)))._prepareNode(e)})}function $E(r,e){Tn(e,t=>{QE(r.springs,t,n=>KE(n,r))})}var nv=({children:r,...e})=>{const t=We.useContext(h0),n=e.pause||!!t.pause,i=e.immediate||!!t.immediate;e=tN(()=>({pause:n,immediate:i}),[n,i]);const{Provider:s}=h0;return We.createElement(s,{value:e},r)},h0=CN(nv,{});nv.Provider=h0.Provider;nv.Consumer=h0.Consumer;function CN(r,e){return Object.assign(r,We.createContext(e)),r.Provider._context=r,r.Consumer._context=r,r}var RN=()=>{const r=[],e=function(n){$k();const i=[];return Tn(r,(s,a)=>{if(mt.und(n))i.push(s.start());else{const l=t(n,s,a);l&&i.push(s.start(l))}}),i};e.current=r,e.add=function(n){r.includes(n)||r.push(n)},e.delete=function(n){const i=r.indexOf(n);~i&&r.splice(i,1)},e.pause=function(){return Tn(r,n=>n.pause(...arguments)),this},e.resume=function(){return Tn(r,n=>n.resume(...arguments)),this},e.set=function(n){Tn(r,(i,s)=>{const a=mt.fun(n)?n(s,i):n;a&&i.set(a)})},e.start=function(n){const i=[];return Tn(r,(s,a)=>{if(mt.und(n))i.push(s.start());else{const l=this._getProps(n,s,a);l&&i.push(s.start(l))}}),i},e.stop=function(){return Tn(r,n=>n.stop(...arguments)),this},e.update=function(n){return Tn(r,(i,s)=>i.update(this._getProps(n,i,s))),this};const t=function(n,i,s){return mt.fun(n)?n(s,i):n};return e._getProps=t,e};function PN(r,e,t){const n=mt.fun(e)&&e;n&&!t&&(t=[]);const i=We.useMemo(()=>n||arguments.length==3?RN():void 0,[]),s=We.useRef(0),a=NE(),l=We.useMemo(()=>({ctrls:[],queue:[],flush(S,T){const A=zw(S,T);return s.current>0&&!l.queue.length&&!Object.keys(A).some(F=>!S.springs[F])?yx(S,T):new Promise(F=>{ZE(S,A),l.queue.push(()=>{F(yx(S,T))}),a()})}}),[]),c=We.useRef([...l.ctrls]),d=[],p=Cw(r)||0;We.useMemo(()=>{Tn(c.current.slice(r,p),S=>{mN(S,i),S.stop(!0)}),c.current.length=r,g(p,r)},[r]),We.useMemo(()=>{g(0,Math.min(p,r))},t);function g(S,T){for(let A=S;A<T;A++){const R=c.current[A]||(c.current[A]=new AN(null,l.flush)),F=n?n(A,R):e[A];F&&(d[A]=MN(F))}}const v=c.current.map((S,T)=>zw(S,d[T])),y=We.useContext(nv),w=Cw(y),E=y!==w&&pN(y);E_(()=>{s.current++,l.ctrls=c.current;const{queue:S}=l;S.length&&(l.queue=[],Tn(S,T=>T())),Tn(c.current,(T,A)=>{i==null||i.add(T),E&&T.start({default:y});const R=d[A];R&&(gN(T,R.ref),T.ref?T.queue.push(R):T.start(R))})}),UE(()=>()=>{Tn(l.ctrls,S=>S.stop(!0))});const M=v.map(S=>({...S}));return i?[M,i]:M}function IN(r,e){const t=mt.fun(r),[[n],i]=PN(1,t?r:[r],t?[]:e);return t||arguments.length==2?[n,i]:n}var LN=class extends R_{constructor(r,e){super(),this.source=r,this.idle=!0,this._active=new Set,this.calc=Kh(...e);const t=this._get(),n=px(t);b_(this,n.create(t))}advance(r){const e=this._get(),t=this.get();Ha(e,t)||(Jo(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Vw(this._active)&&Hy(this)}_get(){const r=mt.arr(this.source)?this.source.map(Os):Vs(Os(this.source));return this.calc(...r)}_start(){this.idle&&!Vw(this._active)&&(this.idle=!1,Tn(tv(this),r=>{r.done=!1}),Co.skipAnimation?(en.batchedUpdates(()=>this.advance()),Hy(this)):K0.start(this))}_attach(){let r=1;Tn(Vs(this.source),e=>{Zo(e)&&yp(e,this),vx(e)&&(e.idle||this._active.add(e),r=Math.max(r,e.priority+1))}),this.priority=r,this._start()}_detach(){Tn(Vs(this.source),r=>{Zo(r)&&f0(r,this)}),this._active.clear(),Hy(this)}eventObserved(r){r.type=="change"?r.idle?this.advance():(this._active.add(r.parent),this._start()):r.type=="idle"?this._active.delete(r.parent):r.type=="priority"&&(this.priority=Vs(this.source).reduce((e,t)=>Math.max(e,(vx(t)?t.priority:0)+1),0))}};function DN(r){return r.idle!==!1}function Vw(r){return!r.size||Array.from(r).every(DN)}function Hy(r){r.idle||(r.idle=!0,Tn(tv(r),e=>{e.done=!0}),c0(r,{type:"idle",parent:r}))}Co.assign({createStringInterpolator:DE,to:(r,e)=>new LN(r,e)});var kN=["primitive"].concat(Object.keys(iE).filter(r=>/^[A-Z]/.test(r)).map(r=>r[0].toLowerCase()+r.slice(1)));Co.assign({createStringInterpolator:DE,colors:Rk,frameLoop:"demand"});QD(()=>{en.advance()});var NN=uN(kN,{applyAnimatedValues:Qu}),UN=NN.animated,FN=Object.defineProperty,ON=(r,e,t)=>e in r?FN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,BN=(r,e,t)=>(ON(r,e+"",t),t);class zN{constructor(){BN(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}var VN=Object.defineProperty,HN=(r,e,t)=>e in r?VN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Gt=(r,e,t)=>(HN(r,typeof e!="symbol"?e+"":e,t),t);const ug=new mc,Hw=new Ga,GN=Math.cos(70*(Math.PI/180)),Gw=(r,e)=>(r%e+e)%e;let WN=class extends zN{constructor(e,t){super(),Gt(this,"object"),Gt(this,"domElement"),Gt(this,"enabled",!0),Gt(this,"target",new te),Gt(this,"minDistance",0),Gt(this,"maxDistance",1/0),Gt(this,"minZoom",0),Gt(this,"maxZoom",1/0),Gt(this,"minPolarAngle",0),Gt(this,"maxPolarAngle",Math.PI),Gt(this,"minAzimuthAngle",-1/0),Gt(this,"maxAzimuthAngle",1/0),Gt(this,"enableDamping",!1),Gt(this,"dampingFactor",.05),Gt(this,"enableZoom",!0),Gt(this,"zoomSpeed",1),Gt(this,"enableRotate",!0),Gt(this,"rotateSpeed",1),Gt(this,"enablePan",!0),Gt(this,"panSpeed",1),Gt(this,"screenSpacePanning",!0),Gt(this,"keyPanSpeed",7),Gt(this,"zoomToCursor",!1),Gt(this,"autoRotate",!1),Gt(this,"autoRotateSpeed",2),Gt(this,"reverseOrbit",!1),Gt(this,"reverseHorizontalOrbit",!1),Gt(this,"reverseVerticalOrbit",!1),Gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Gt(this,"mouseButtons",{LEFT:qu.ROTATE,MIDDLE:qu.DOLLY,RIGHT:qu.PAN}),Gt(this,"touches",{ONE:Ju.ROTATE,TWO:Ju.DOLLY_PAN}),Gt(this,"target0"),Gt(this,"position0"),Gt(this,"zoom0"),Gt(this,"_domElementKeyEvents",null),Gt(this,"getPolarAngle"),Gt(this,"getAzimuthalAngle"),Gt(this,"setPolarAngle"),Gt(this,"setAzimuthalAngle"),Gt(this,"getDistance"),Gt(this,"getZoomScale"),Gt(this,"listenToKeyEvents"),Gt(this,"stopListenToKeyEvents"),Gt(this,"saveState"),Gt(this,"reset"),Gt(this,"update"),Gt(this,"connect"),Gt(this,"dispose"),Gt(this,"dollyIn"),Gt(this,"dollyOut"),Gt(this,"getScale"),Gt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=fe=>{let Fe=Gw(fe,2*Math.PI),ut=p.phi;ut<0&&(ut+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let ue=Math.abs(Fe-ut);2*Math.PI-ue<ue&&(Fe<ut?Fe+=2*Math.PI:ut+=2*Math.PI),g.phi=Fe-ut,n.update()},this.setAzimuthalAngle=fe=>{let Fe=Gw(fe,2*Math.PI),ut=p.theta;ut<0&&(ut+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let ue=Math.abs(Fe-ut);2*Math.PI-ue<ue&&(Fe<ut?Fe+=2*Math.PI:ut+=2*Math.PI),g.theta=Fe-ut,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=fe=>{fe.addEventListener("keydown",He),this._domElementKeyEvents=fe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",He),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),c=l.NONE},this.update=(()=>{const fe=new te,Fe=new te(0,1,0),ut=new Tr().setFromUnitVectors(e.up,Fe),ue=ut.clone().invert(),Ve=new te,Re=new Tr,Ye=2*Math.PI;return function(){const $e=n.object.position;ut.setFromUnitVectors(e.up,Fe),ue.copy(ut).invert(),fe.copy($e).sub(n.target),fe.applyQuaternion(ut),p.setFromVector3(fe),n.autoRotate&&c===l.NONE&&ne(X()),n.enableDamping?(p.theta+=g.theta*n.dampingFactor,p.phi+=g.phi*n.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let vt=n.minAzimuthAngle,Dt=n.maxAzimuthAngle;isFinite(vt)&&isFinite(Dt)&&(vt<-Math.PI?vt+=Ye:vt>Math.PI&&(vt-=Ye),Dt<-Math.PI?Dt+=Ye:Dt>Math.PI&&(Dt-=Ye),vt<=Dt?p.theta=Math.max(vt,Math.min(Dt,p.theta)):p.theta=p.theta>(vt+Dt)/2?Math.max(vt,p.theta):Math.min(Dt,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&k||n.object.isOrthographicCamera?p.radius=ce(p.radius):p.radius=ce(p.radius*v),fe.setFromSpherical(p),fe.applyQuaternion(ue),$e.copy(n.target).add(fe),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),y.set(0,0,0));let Et=!1;if(n.zoomToCursor&&k){let Ct=null;if(n.object instanceof _i&&n.object.isPerspectiveCamera){const dn=fe.length();Ct=ce(dn*v);const hn=dn-Ct;n.object.position.addScaledVector(O,hn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const dn=new te(z.x,z.y,0);dn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),Et=!0;const hn=new te(z.x,z.y,0);hn.unproject(n.object),n.object.position.sub(hn).add(dn),n.object.updateMatrixWorld(),Ct=fe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Ct!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Ct).add(n.object.position):(ug.origin.copy(n.object.position),ug.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(ug.direction))<GN?e.lookAt(n.target):(Hw.setFromNormalAndCoplanarPoint(n.object.up,n.target),ug.intersectPlane(Hw,n.target))))}else n.object instanceof Yl&&n.object.isOrthographicCamera&&(Et=v!==1,Et&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,k=!1,Et||Ve.distanceToSquared(n.object.position)>d||8*(1-Re.dot(n.object.quaternion))>d?(n.dispatchEvent(i),Ve.copy(n.object.position),Re.copy(n.object.quaternion),Et=!1,!0):!1}})(),this.connect=fe=>{n.domElement=fe,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",je),n.domElement.addEventListener("pointerdown",B),n.domElement.addEventListener("pointercancel",ye),n.domElement.addEventListener("wheel",Je)},this.dispose=()=>{var fe,Fe,ut,ue,Ve,Re;n.domElement&&(n.domElement.style.touchAction="auto"),(fe=n.domElement)==null||fe.removeEventListener("contextmenu",je),(Fe=n.domElement)==null||Fe.removeEventListener("pointerdown",B),(ut=n.domElement)==null||ut.removeEventListener("pointercancel",ye),(ue=n.domElement)==null||ue.removeEventListener("wheel",Je),(Ve=n.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",oe),(Re=n.domElement)==null||Re.ownerDocument.removeEventListener("pointerup",ye),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",He)};const n=this,i={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const d=1e-6,p=new sx,g=new sx;let v=1;const y=new te,w=new Ze,E=new Ze,M=new Ze,S=new Ze,T=new Ze,A=new Ze,R=new Ze,F=new Ze,N=new Ze,O=new te,z=new Ze;let k=!1;const L=[],W={};function X(){return 2*Math.PI/60/60*n.autoRotateSpeed}function K(){return Math.pow(.95,n.zoomSpeed)}function ne(fe){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=fe:g.theta-=fe}function de(fe){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=fe:g.phi-=fe}const ae=(()=>{const fe=new te;return function(ut,ue){fe.setFromMatrixColumn(ue,0),fe.multiplyScalar(-ut),y.add(fe)}})(),me=(()=>{const fe=new te;return function(ut,ue){n.screenSpacePanning===!0?fe.setFromMatrixColumn(ue,1):(fe.setFromMatrixColumn(ue,0),fe.crossVectors(n.object.up,fe)),fe.multiplyScalar(ut),y.add(fe)}})(),H=(()=>{const fe=new te;return function(ut,ue){const Ve=n.domElement;if(Ve&&n.object instanceof _i&&n.object.isPerspectiveCamera){const Re=n.object.position;fe.copy(Re).sub(n.target);let Ye=fe.length();Ye*=Math.tan(n.object.fov/2*Math.PI/180),ae(2*ut*Ye/Ve.clientHeight,n.object.matrix),me(2*ue*Ye/Ve.clientHeight,n.object.matrix)}else Ve&&n.object instanceof Yl&&n.object.isOrthographicCamera?(ae(ut*(n.object.right-n.object.left)/n.object.zoom/Ve.clientWidth,n.object.matrix),me(ue*(n.object.top-n.object.bottom)/n.object.zoom/Ve.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function J(fe){n.object instanceof _i&&n.object.isPerspectiveCamera||n.object instanceof Yl&&n.object.isOrthographicCamera?v=fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function j(fe){J(v/fe)}function D(fe){J(v*fe)}function Y(fe){if(!n.zoomToCursor||!n.domElement)return;k=!0;const Fe=n.domElement.getBoundingClientRect(),ut=fe.clientX-Fe.left,ue=fe.clientY-Fe.top,Ve=Fe.width,Re=Fe.height;z.x=ut/Ve*2-1,z.y=-(ue/Re)*2+1,O.set(z.x,z.y,1).unproject(n.object).sub(n.object.position).normalize()}function ce(fe){return Math.max(n.minDistance,Math.min(n.maxDistance,fe))}function Q(fe){w.set(fe.clientX,fe.clientY)}function re(fe){Y(fe),R.set(fe.clientX,fe.clientY)}function pe(fe){S.set(fe.clientX,fe.clientY)}function $(fe){E.set(fe.clientX,fe.clientY),M.subVectors(E,w).multiplyScalar(n.rotateSpeed);const Fe=n.domElement;Fe&&(ne(2*Math.PI*M.x/Fe.clientHeight),de(2*Math.PI*M.y/Fe.clientHeight)),w.copy(E),n.update()}function ie(fe){F.set(fe.clientX,fe.clientY),N.subVectors(F,R),N.y>0?j(K()):N.y<0&&D(K()),R.copy(F),n.update()}function Te(fe){T.set(fe.clientX,fe.clientY),A.subVectors(T,S).multiplyScalar(n.panSpeed),H(A.x,A.y),S.copy(T),n.update()}function Ce(fe){Y(fe),fe.deltaY<0?D(K()):fe.deltaY>0&&j(K()),n.update()}function Pe(fe){let Fe=!1;switch(fe.code){case n.keys.UP:H(0,n.keyPanSpeed),Fe=!0;break;case n.keys.BOTTOM:H(0,-n.keyPanSpeed),Fe=!0;break;case n.keys.LEFT:H(n.keyPanSpeed,0),Fe=!0;break;case n.keys.RIGHT:H(-n.keyPanSpeed,0),Fe=!0;break}Fe&&(fe.preventDefault(),n.update())}function Ie(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const fe=.5*(L[0].pageX+L[1].pageX),Fe=.5*(L[0].pageY+L[1].pageY);w.set(fe,Fe)}}function Qe(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const fe=.5*(L[0].pageX+L[1].pageX),Fe=.5*(L[0].pageY+L[1].pageY);S.set(fe,Fe)}}function ee(){const fe=L[0].pageX-L[1].pageX,Fe=L[0].pageY-L[1].pageY,ut=Math.sqrt(fe*fe+Fe*Fe);R.set(0,ut)}function lt(){n.enableZoom&&ee(),n.enablePan&&Qe()}function Ae(){n.enableZoom&&ee(),n.enableRotate&&Ie()}function Le(fe){if(L.length==1)E.set(fe.pageX,fe.pageY);else{const ut=Xe(fe),ue=.5*(fe.pageX+ut.x),Ve=.5*(fe.pageY+ut.y);E.set(ue,Ve)}M.subVectors(E,w).multiplyScalar(n.rotateSpeed);const Fe=n.domElement;Fe&&(ne(2*Math.PI*M.x/Fe.clientHeight),de(2*Math.PI*M.y/Fe.clientHeight)),w.copy(E)}function ge(fe){if(L.length==1)T.set(fe.pageX,fe.pageY);else{const Fe=Xe(fe),ut=.5*(fe.pageX+Fe.x),ue=.5*(fe.pageY+Fe.y);T.set(ut,ue)}A.subVectors(T,S).multiplyScalar(n.panSpeed),H(A.x,A.y),S.copy(T)}function ze(fe){const Fe=Xe(fe),ut=fe.pageX-Fe.x,ue=fe.pageY-Fe.y,Ve=Math.sqrt(ut*ut+ue*ue);F.set(0,Ve),N.set(0,Math.pow(F.y/R.y,n.zoomSpeed)),j(N.y),R.copy(F)}function _e(fe){n.enableZoom&&ze(fe),n.enablePan&&ge(fe)}function V(fe){n.enableZoom&&ze(fe),n.enableRotate&&Le(fe)}function B(fe){var Fe,ut;n.enabled!==!1&&(L.length===0&&((Fe=n.domElement)==null||Fe.ownerDocument.addEventListener("pointermove",oe),(ut=n.domElement)==null||ut.ownerDocument.addEventListener("pointerup",ye)),nt(fe),fe.pointerType==="touch"?Ke(fe):Se(fe))}function oe(fe){n.enabled!==!1&&(fe.pointerType==="touch"?gt(fe):ke(fe))}function ye(fe){var Fe,ut,ue;ot(fe),L.length===0&&((Fe=n.domElement)==null||Fe.releasePointerCapture(fe.pointerId),(ut=n.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",oe),(ue=n.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",ye)),n.dispatchEvent(a),c=l.NONE}function Se(fe){let Fe;switch(fe.button){case 0:Fe=n.mouseButtons.LEFT;break;case 1:Fe=n.mouseButtons.MIDDLE;break;case 2:Fe=n.mouseButtons.RIGHT;break;default:Fe=-1}switch(Fe){case qu.DOLLY:if(n.enableZoom===!1)return;re(fe),c=l.DOLLY;break;case qu.ROTATE:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(n.enablePan===!1)return;pe(fe),c=l.PAN}else{if(n.enableRotate===!1)return;Q(fe),c=l.ROTATE}break;case qu.PAN:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(n.enableRotate===!1)return;Q(fe),c=l.ROTATE}else{if(n.enablePan===!1)return;pe(fe),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function ke(fe){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;$(fe);break;case l.DOLLY:if(n.enableZoom===!1)return;ie(fe);break;case l.PAN:if(n.enablePan===!1)return;Te(fe);break}}function Je(fe){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(fe.preventDefault(),n.dispatchEvent(s),Ce(fe),n.dispatchEvent(a))}function He(fe){n.enabled===!1||n.enablePan===!1||Pe(fe)}function Ke(fe){switch(it(fe),L.length){case 1:switch(n.touches.ONE){case Ju.ROTATE:if(n.enableRotate===!1)return;Ie(),c=l.TOUCH_ROTATE;break;case Ju.PAN:if(n.enablePan===!1)return;Qe(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case Ju.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;lt(),c=l.TOUCH_DOLLY_PAN;break;case Ju.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ae(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function gt(fe){switch(it(fe),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;Le(fe),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;ge(fe),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;_e(fe),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;V(fe),n.update();break;default:c=l.NONE}}function je(fe){n.enabled!==!1&&fe.preventDefault()}function nt(fe){L.push(fe)}function ot(fe){delete W[fe.pointerId];for(let Fe=0;Fe<L.length;Fe++)if(L[Fe].pointerId==fe.pointerId){L.splice(Fe,1);return}}function it(fe){let Fe=W[fe.pointerId];Fe===void 0&&(Fe=new Ze,W[fe.pointerId]=Fe),Fe.set(fe.pageX,fe.pageY)}function Xe(fe){const Fe=fe.pointerId===L[0].pointerId?L[1]:L[0];return W[Fe.pointerId]}this.dollyIn=(fe=K())=>{D(fe),n.update()},this.dollyOut=(fe=K())=>{j(fe),n.update()},this.getScale=()=>v,this.setScale=fe=>{J(fe),n.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};function jN(){var r=Object.create(null);function e(i,s){var a=i.id,l=i.name,c=i.dependencies;c===void 0&&(c=[]);var d=i.init;d===void 0&&(d=function(){});var p=i.getTransferables;if(p===void 0&&(p=null),!r[a])try{c=c.map(function(v){return v&&v.isWorkerModule&&(e(v,function(y){if(y instanceof Error)throw y}),v=r[v.id].value),v}),d=n("<"+l+">.init",d),p&&(p=n("<"+l+">.getTransferables",p));var g=null;typeof d=="function"?g=d.apply(void 0,c):console.error("worker module init function failed to rehydrate"),r[a]={id:a,value:g,getTransferables:p},s(g)}catch(v){v&&v.noLog||console.error(v),s(v)}}function t(i,s){var a,l=i.id,c=i.args;(!r[l]||typeof r[l].value!="function")&&s(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var d=(a=r[l]).value.apply(a,c);d&&typeof d.then=="function"?d.then(p,function(g){return s(g instanceof Error?g:new Error(""+g))}):p(d)}catch(g){s(g)}function p(g){try{var v=r[l].getTransferables&&r[l].getTransferables(g);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),s(g,v)}catch(y){console.error(y),s(y)}}}function n(i,s){var a=void 0;self.troikaDefine=function(c){return a=c};var l=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(c){console.error(c)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(i){var s=i.data,a=s.messageId,l=s.action,c=s.data;try{l==="registerModule"&&e(c,function(d){d instanceof Error?postMessage({messageId:a,success:!1,error:d.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof d=="function"}})}),l==="callModule"&&t(c,function(d,p){d instanceof Error?postMessage({messageId:a,success:!1,error:d.message}):postMessage({messageId:a,success:!0,result:d},p||void 0)})}catch(d){postMessage({messageId:a,success:!1,error:d.stack})}})}function XN(r){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=r.dependencies,n=r.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var i=Promise.all(t).then(function(s){return n.apply(null,s)});return e._getInitResult=function(){return i},i},e}var eb=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),r=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return eb=function(){return r},r},YN=0,qN=0,Gy=!1,Ih=Object.create(null),Lh=Object.create(null),xx=Object.create(null);function td(r){if((!r||typeof r.init!="function")&&!Gy)throw new Error("requires `options.init` function");var e=r.dependencies,t=r.init,n=r.getTransferables,i=r.workerId,s=XN(r);i==null&&(i="#default");var a="workerModule"+ ++YN,l=r.name||a,c=null;e=e&&e.map(function(p){return typeof p=="function"&&!p.workerModuleData&&(Gy=!0,p=td({workerId:i,name:"<"+l+"> function dependency: "+p.name,init:`function(){return (
`+yg(p)+`
)}`}),Gy=!1),p&&p.workerModuleData&&(p=p.workerModuleData),p});function d(){for(var p=[],g=arguments.length;g--;)p[g]=arguments[g];if(!eb())return s.apply(void 0,p);if(!c){c=Ww(i,"registerModule",d.workerModuleData);var v=function(){c=null,Lh[i].delete(v)};(Lh[i]||(Lh[i]=new Set)).add(v)}return c.then(function(y){var w=y.isCallable;if(w)return Ww(i,"callModule",{id:a,args:p});throw new Error("Worker module function was called but `init` did not return a callable function")})}return d.workerModuleData={isWorkerModule:!0,id:a,name:l,dependencies:e,init:yg(t),getTransferables:n&&yg(n)},d.onMainThread=s,d}function JN(r){Lh[r]&&Lh[r].forEach(function(e){e()}),Ih[r]&&(Ih[r].terminate(),delete Ih[r])}function yg(r){var e=r.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function ZN(r){var e=Ih[r];if(!e){var t=yg(jN);e=Ih[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var i=n.data,s=i.messageId,a=xx[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete xx[s],a(i)}}return e}function Ww(r,e,t){return new Promise(function(n,i){var s=++qN;xx[s]=function(a){a.success?n(a.result):i(new Error("Error in worker "+e+" call: "+a.error))},ZN(r).postMessage({messageId:s,action:e,data:t})})}function tb(){var r=function(e){function t(J,j,D,Y,ce,Q,re,pe){var $=1-re;pe.x=$*$*J+2*$*re*D+re*re*ce,pe.y=$*$*j+2*$*re*Y+re*re*Q}function n(J,j,D,Y,ce,Q,re,pe,$,ie){var Te=1-$;ie.x=Te*Te*Te*J+3*Te*Te*$*D+3*Te*$*$*ce+$*$*$*re,ie.y=Te*Te*Te*j+3*Te*Te*$*Y+3*Te*$*$*Q+$*$*$*pe}function i(J,j){for(var D=/([MLQCZ])([^MLQCZ]*)/g,Y,ce,Q,re,pe;Y=D.exec(J);){var $=Y[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ie){return parseFloat(ie)});switch(Y[1]){case"M":re=ce=$[0],pe=Q=$[1];break;case"L":($[0]!==re||$[1]!==pe)&&j("L",re,pe,re=$[0],pe=$[1]);break;case"Q":{j("Q",re,pe,re=$[2],pe=$[3],$[0],$[1]);break}case"C":{j("C",re,pe,re=$[4],pe=$[5],$[0],$[1],$[2],$[3]);break}case"Z":(re!==ce||pe!==Q)&&j("L",re,pe,ce,Q);break}}}function s(J,j,D){D===void 0&&(D=16);var Y={x:0,y:0};i(J,function(ce,Q,re,pe,$,ie,Te,Ce,Pe){switch(ce){case"L":j(Q,re,pe,$);break;case"Q":{for(var Ie=Q,Qe=re,ee=1;ee<D;ee++)t(Q,re,ie,Te,pe,$,ee/(D-1),Y),j(Ie,Qe,Y.x,Y.y),Ie=Y.x,Qe=Y.y;break}case"C":{for(var lt=Q,Ae=re,Le=1;Le<D;Le++)n(Q,re,ie,Te,Ce,Pe,pe,$,Le/(D-1),Y),j(lt,Ae,Y.x,Y.y),lt=Y.x,Ae=Y.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function p(J,j){var D=J.getContext?J.getContext("webgl",d):J,Y=c.get(D);if(!Y){let lt=function(V){var B=Q[V];if(!B&&(B=Q[V]=D.getExtension(V),!B))throw new Error(V+" not supported");return B},Ae=function(V,B){var oe=D.createShader(B);return D.shaderSource(oe,V),D.compileShader(oe),oe},Le=function(V,B,oe,ye){if(!re[V]){var Se={},ke={},Je=D.createProgram();D.attachShader(Je,Ae(B,D.VERTEX_SHADER)),D.attachShader(Je,Ae(oe,D.FRAGMENT_SHADER)),D.linkProgram(Je),re[V]={program:Je,transaction:function(Ke){D.useProgram(Je),Ke({setUniform:function(je,nt){for(var ot=[],it=arguments.length-2;it-- >0;)ot[it]=arguments[it+2];var Xe=ke[nt]||(ke[nt]=D.getUniformLocation(Je,nt));D["uniform"+je].apply(D,[Xe].concat(ot))},setAttribute:function(je,nt,ot,it,Xe){var fe=Se[je];fe||(fe=Se[je]={buf:D.createBuffer(),loc:D.getAttribLocation(Je,je),data:null}),D.bindBuffer(D.ARRAY_BUFFER,fe.buf),D.vertexAttribPointer(fe.loc,nt,D.FLOAT,!1,0,0),D.enableVertexAttribArray(fe.loc),ce?D.vertexAttribDivisor(fe.loc,it):lt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(fe.loc,it),Xe!==fe.data&&(D.bufferData(D.ARRAY_BUFFER,Xe,ot),fe.data=Xe)}})}}}re[V].transaction(ye)},ge=function(V,B){$++;try{D.activeTexture(D.TEXTURE0+$);var oe=pe[V];oe||(oe=pe[V]=D.createTexture(),D.bindTexture(D.TEXTURE_2D,oe),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.NEAREST),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.NEAREST)),D.bindTexture(D.TEXTURE_2D,oe),B(oe,$)}finally{$--}},ze=function(V,B,oe){var ye=D.createFramebuffer();ie.push(ye),D.bindFramebuffer(D.FRAMEBUFFER,ye),D.activeTexture(D.TEXTURE0+B),D.bindTexture(D.TEXTURE_2D,V),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,V,0);try{oe(ye)}finally{D.deleteFramebuffer(ye),D.bindFramebuffer(D.FRAMEBUFFER,ie[--ie.length-1]||null)}},_e=function(){Q={},re={},pe={},$=-1,ie.length=0};var Te=lt,Ce=Ae,Pe=Le,Ie=ge,Qe=ze,ee=_e,ce=typeof WebGL2RenderingContext<"u"&&D instanceof WebGL2RenderingContext,Q={},re={},pe={},$=-1,ie=[];D.canvas.addEventListener("webglcontextlost",function(V){_e(),V.preventDefault()},!1),c.set(D,Y={gl:D,isWebGL2:ce,getExtension:lt,withProgram:Le,withTexture:ge,withTextureFramebuffer:ze,handleContextLoss:_e})}j(Y)}function g(J,j,D,Y,ce,Q,re,pe){re===void 0&&(re=15),pe===void 0&&(pe=null),p(J,function($){var ie=$.gl,Te=$.withProgram,Ce=$.withTexture;Ce("copy",function(Pe,Ie){ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,ce,Q,0,ie.RGBA,ie.UNSIGNED_BYTE,j),Te("copy",a,l,function(Qe){var ee=Qe.setUniform,lt=Qe.setAttribute;lt("aUV",2,ie.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ee("1i","image",Ie),ie.bindFramebuffer(ie.FRAMEBUFFER,pe||null),ie.disable(ie.BLEND),ie.colorMask(re&8,re&4,re&2,re&1),ie.viewport(D,Y,ce,Q),ie.scissor(D,Y,ce,Q),ie.drawArrays(ie.TRIANGLES,0,3)})})})}function v(J,j,D){var Y=J.width,ce=J.height;p(J,function(Q){var re=Q.gl,pe=new Uint8Array(Y*ce*4);re.readPixels(0,0,Y,ce,re.RGBA,re.UNSIGNED_BYTE,pe),J.width=j,J.height=D,g(re,pe,0,0,Y,ce)})}var y=Object.freeze({__proto__:null,withWebGLContext:p,renderImageData:g,resizeWebGLCanvasWithoutClearing:v});function w(J,j,D,Y,ce,Q){Q===void 0&&(Q=1);var re=new Uint8Array(J*j),pe=Y[2]-Y[0],$=Y[3]-Y[1],ie=[];s(D,function(lt,Ae,Le,ge){ie.push({x1:lt,y1:Ae,x2:Le,y2:ge,minX:Math.min(lt,Le),minY:Math.min(Ae,ge),maxX:Math.max(lt,Le),maxY:Math.max(Ae,ge)})}),ie.sort(function(lt,Ae){return lt.maxX-Ae.maxX});for(var Te=0;Te<J;Te++)for(var Ce=0;Ce<j;Ce++){var Pe=Qe(Y[0]+pe*(Te+.5)/J,Y[1]+$*(Ce+.5)/j),Ie=Math.pow(1-Math.abs(Pe)/ce,Q)/2;Pe<0&&(Ie=1-Ie),Ie=Math.max(0,Math.min(255,Math.round(Ie*255))),re[Ce*J+Te]=Ie}return re;function Qe(lt,Ae){for(var Le=1/0,ge=1/0,ze=ie.length;ze--;){var _e=ie[ze];if(_e.maxX+ge<=lt)break;if(lt+ge>_e.minX&&Ae-ge<_e.maxY&&Ae+ge>_e.minY){var V=S(lt,Ae,_e.x1,_e.y1,_e.x2,_e.y2);V<Le&&(Le=V,ge=Math.sqrt(Le))}}return ee(lt,Ae)&&(ge=-ge),ge}function ee(lt,Ae){for(var Le=0,ge=ie.length;ge--;){var ze=ie[ge];if(ze.maxX<=lt)break;var _e=ze.y1>Ae!=ze.y2>Ae&&lt<(ze.x2-ze.x1)*(Ae-ze.y1)/(ze.y2-ze.y1)+ze.x1;_e&&(Le+=ze.y1<ze.y2?1:-1)}return Le!==0}}function E(J,j,D,Y,ce,Q,re,pe,$,ie){Q===void 0&&(Q=1),pe===void 0&&(pe=0),$===void 0&&($=0),ie===void 0&&(ie=0),M(J,j,D,Y,ce,Q,re,null,pe,$,ie)}function M(J,j,D,Y,ce,Q,re,pe,$,ie,Te){Q===void 0&&(Q=1),$===void 0&&($=0),ie===void 0&&(ie=0),Te===void 0&&(Te=0);for(var Ce=w(J,j,D,Y,ce,Q),Pe=new Uint8Array(Ce.length*4),Ie=0;Ie<Ce.length;Ie++)Pe[Ie*4+Te]=Ce[Ie];g(re,Pe,$,ie,J,j,1<<3-Te,pe)}function S(J,j,D,Y,ce,Q){var re=ce-D,pe=Q-Y,$=re*re+pe*pe,ie=$?Math.max(0,Math.min(1,((J-D)*re+(j-Y)*pe)/$)):0,Te=J-(D+ie*re),Ce=j-(Y+ie*pe);return Te*Te+Ce*Ce}var T=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:E,generateIntoFramebuffer:M}),A="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",R="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",F="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",N=new Float32Array([0,0,2,0,0,2]),O=null,z=!1,k={},L=new WeakMap;function W(J){if(!z&&!de(J))throw new Error("WebGL generation not supported")}function X(J,j,D,Y,ce,Q,re){if(Q===void 0&&(Q=1),re===void 0&&(re=null),!re&&(re=O,!re)){var pe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!pe)throw new Error("OffscreenCanvas or DOM canvas not supported");re=O=pe.getContext("webgl",{depth:!1})}W(re);var $=new Uint8Array(J*j*4);p(re,function(Pe){var Ie=Pe.gl,Qe=Pe.withTexture,ee=Pe.withTextureFramebuffer;Qe("readable",function(lt,Ae){Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,J,j,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),ee(lt,Ae,function(Le){ne(J,j,D,Y,ce,Q,Ie,Le,0,0,0),Ie.readPixels(0,0,J,j,Ie.RGBA,Ie.UNSIGNED_BYTE,$)})})});for(var ie=new Uint8Array(J*j),Te=0,Ce=0;Te<$.length;Te+=4)ie[Ce++]=$[Te];return ie}function K(J,j,D,Y,ce,Q,re,pe,$,ie){Q===void 0&&(Q=1),pe===void 0&&(pe=0),$===void 0&&($=0),ie===void 0&&(ie=0),ne(J,j,D,Y,ce,Q,re,null,pe,$,ie)}function ne(J,j,D,Y,ce,Q,re,pe,$,ie,Te){Q===void 0&&(Q=1),$===void 0&&($=0),ie===void 0&&(ie=0),Te===void 0&&(Te=0),W(re);var Ce=[];s(D,function(Pe,Ie,Qe,ee){Ce.push(Pe,Ie,Qe,ee)}),Ce=new Float32Array(Ce),p(re,function(Pe){var Ie=Pe.gl,Qe=Pe.isWebGL2,ee=Pe.getExtension,lt=Pe.withProgram,Ae=Pe.withTexture,Le=Pe.withTextureFramebuffer,ge=Pe.handleContextLoss;if(Ae("rawDistances",function(ze,_e){(J!==ze._lastWidth||j!==ze._lastHeight)&&Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,ze._lastWidth=J,ze._lastHeight=j,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),lt("main",A,R,function(V){var B=V.setAttribute,oe=V.setUniform,ye=!Qe&&ee("ANGLE_instanced_arrays"),Se=!Qe&&ee("EXT_blend_minmax");B("aUV",2,Ie.STATIC_DRAW,0,N),B("aLineSegment",4,Ie.DYNAMIC_DRAW,1,Ce),oe.apply(void 0,["4f","uGlyphBounds"].concat(Y)),oe("1f","uMaxDistance",ce),oe("1f","uExponent",Q),Le(ze,_e,function(ke){Ie.enable(Ie.BLEND),Ie.colorMask(!0,!0,!0,!0),Ie.viewport(0,0,J,j),Ie.scissor(0,0,J,j),Ie.blendFunc(Ie.ONE,Ie.ONE),Ie.blendEquationSeparate(Ie.FUNC_ADD,Qe?Ie.MAX:Se.MAX_EXT),Ie.clear(Ie.COLOR_BUFFER_BIT),Qe?Ie.drawArraysInstanced(Ie.TRIANGLES,0,3,Ce.length/4):ye.drawArraysInstancedANGLE(Ie.TRIANGLES,0,3,Ce.length/4)})}),lt("post",a,F,function(V){V.setAttribute("aUV",2,Ie.STATIC_DRAW,0,N),V.setUniform("1i","tex",_e),Ie.bindFramebuffer(Ie.FRAMEBUFFER,pe),Ie.disable(Ie.BLEND),Ie.colorMask(Te===0,Te===1,Te===2,Te===3),Ie.viewport($,ie,J,j),Ie.scissor($,ie,J,j),Ie.drawArrays(Ie.TRIANGLES,0,3)})}),Ie.isContextLost())throw ge(),new Error("webgl context lost")})}function de(J){var j=!J||J===O?k:J.canvas||J,D=L.get(j);if(D===void 0){z=!0;var Y=null;try{var ce=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Q=X(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,J);D=Q&&ce.length===Q.length&&Q.every(function(re,pe){return re===ce[pe]}),D||(Y="bad trial run results",console.info(ce,Q))}catch(re){D=!1,Y=re.message}Y&&console.warn("WebGL SDF generation not supported:",Y),z=!1,L.set(j,D)}return D}var ae=Object.freeze({__proto__:null,generate:X,generateIntoCanvas:K,generateIntoFramebuffer:ne,isSupported:de});function me(J,j,D,Y,ce,Q){ce===void 0&&(ce=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),Q===void 0&&(Q=1);try{return X.apply(ae,arguments)}catch(re){return console.info("WebGL SDF generation failed, falling back to JS",re),w.apply(T,arguments)}}function H(J,j,D,Y,ce,Q,re,pe,$,ie){ce===void 0&&(ce=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),Q===void 0&&(Q=1),pe===void 0&&(pe=0),$===void 0&&($=0),ie===void 0&&(ie=0);try{return K.apply(ae,arguments)}catch(Te){return console.info("WebGL SDF generation failed, falling back to JS",Te),E.apply(T,arguments)}}return e.forEachPathCommand=i,e.generate=me,e.generateIntoCanvas=H,e.javascript=T,e.pathToLineSegments=s,e.webgl=ae,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}function KN(){var r=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach(function(ge,ze){n[ge]=1<<ze+1,i[n[ge]]=ge}),Object.freeze(n);var s=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,l=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,c=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,d=n.S|n.WS|n.B|s|n.PDI|c,p=null;function g(){if(!p){p=new Map;var ge=function(_e){if(t.hasOwnProperty(_e)){var V=0;t[_e].split(",").forEach(function(B){var oe=B.split("+"),ye=oe[0],Se=oe[1];ye=parseInt(ye,36),Se=Se?parseInt(Se,36):0,p.set(V+=ye,n[_e]);for(var ke=0;ke<Se;ke++)p.set(++V,n[_e])})}};for(var ze in t)ge(ze)}}function v(ge){return g(),p.get(ge.codePointAt(0))||n.L}function y(ge){return i[v(ge)]}var w={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function E(ge,ze){var _e=36,V=0,B=new Map,oe=ze&&new Map,ye;return ge.split(",").forEach(function Se(ke){if(ke.indexOf("+")!==-1)for(var Je=+ke;Je--;)Se(ye);else{ye=ke;var He=ke.split(">"),Ke=He[0],gt=He[1];Ke=String.fromCodePoint(V+=parseInt(Ke,_e)),gt=String.fromCodePoint(V+=parseInt(gt,_e)),B.set(Ke,gt),ze&&oe.set(gt,Ke)}}),{map:B,reverseMap:oe}}var M,S,T;function A(){if(!M){var ge=E(w.pairs,!0),ze=ge.map,_e=ge.reverseMap;M=ze,S=_e,T=E(w.canonical,!1).map}}function R(ge){return A(),M.get(ge)||null}function F(ge){return A(),S.get(ge)||null}function N(ge){return A(),T.get(ge)||null}var O=n.L,z=n.R,k=n.EN,L=n.ES,W=n.ET,X=n.AN,K=n.CS,ne=n.B,de=n.S,ae=n.ON,me=n.BN,H=n.NSM,J=n.AL,j=n.LRO,D=n.RLO,Y=n.LRE,ce=n.RLE,Q=n.PDF,re=n.LRI,pe=n.RLI,$=n.FSI,ie=n.PDI;function Te(ge,ze){for(var _e=125,V=new Uint32Array(ge.length),B=0;B<ge.length;B++)V[B]=v(ge[B]);var oe=new Map;function ye(li,gi){var $n=V[li];V[li]=gi,oe.set($n,oe.get($n)-1),$n&l&&oe.set(l,oe.get(l)-1),oe.set(gi,(oe.get(gi)||0)+1),gi&l&&oe.set(l,(oe.get(l)||0)+1)}for(var Se=new Uint8Array(ge.length),ke=new Map,Je=[],He=null,Ke=0;Ke<ge.length;Ke++)He||Je.push(He={start:Ke,end:ge.length-1,level:ze==="rtl"?1:ze==="ltr"?0:Ai(Ke,!1)}),V[Ke]&ne&&(He.end=Ke,He=null);for(var gt=ce|Y|D|j|s|ie|Q|ne,je=function(li){return li+(li&1?1:2)},nt=function(li){return li+(li&1?2:1)},ot=0;ot<Je.length;ot++){He=Je[ot];var it=[{_level:He.level,_override:0,_isolate:0}],Xe=void 0,fe=0,Fe=0,ut=0;oe.clear();for(var ue=He.start;ue<=He.end;ue++){var Ve=V[ue];if(Xe=it[it.length-1],oe.set(Ve,(oe.get(Ve)||0)+1),Ve&l&&oe.set(l,(oe.get(l)||0)+1),Ve&gt)if(Ve&(ce|Y)){Se[ue]=Xe._level;var Re=(Ve===ce?nt:je)(Xe._level);Re<=_e&&!fe&&!Fe?it.push({_level:Re,_override:0,_isolate:0}):fe||Fe++}else if(Ve&(D|j)){Se[ue]=Xe._level;var Ye=(Ve===D?nt:je)(Xe._level);Ye<=_e&&!fe&&!Fe?it.push({_level:Ye,_override:Ve&D?z:O,_isolate:0}):fe||Fe++}else if(Ve&s){Ve&$&&(Ve=Ai(ue+1,!0)===1?pe:re),Se[ue]=Xe._level,Xe._override&&ye(ue,Xe._override);var et=(Ve===pe?nt:je)(Xe._level);et<=_e&&fe===0&&Fe===0?(ut++,it.push({_level:et,_override:0,_isolate:1,_isolInitIndex:ue})):fe++}else if(Ve&ie){if(fe>0)fe--;else if(ut>0){for(Fe=0;!it[it.length-1]._isolate;)it.pop();var $e=it[it.length-1]._isolInitIndex;$e!=null&&(ke.set($e,ue),ke.set(ue,$e)),it.pop(),ut--}Xe=it[it.length-1],Se[ue]=Xe._level,Xe._override&&ye(ue,Xe._override)}else Ve&Q?(fe===0&&(Fe>0?Fe--:!Xe._isolate&&it.length>1&&(it.pop(),Xe=it[it.length-1])),Se[ue]=Xe._level):Ve&ne&&(Se[ue]=He.level);else Se[ue]=Xe._level,Xe._override&&Ve!==me&&ye(ue,Xe._override)}for(var vt=[],Dt=null,Et=He.start;Et<=He.end;Et++){var Ct=V[Et];if(!(Ct&c)){var dn=Se[Et],hn=Ct&s,Rn=Ct===ie;Dt&&dn===Dt._level?(Dt._end=Et,Dt._endsWithIsolInit=hn):vt.push(Dt={_start:Et,_end:Et,_level:dn,_startsWithPDI:Rn,_endsWithIsolInit:hn})}}for(var si=[],hi=0;hi<vt.length;hi++){var Jn=vt[hi];if(!Jn._startsWithPDI||Jn._startsWithPDI&&!ke.has(Jn._start)){for(var ji=[Dt=Jn],pi=void 0;Dt&&Dt._endsWithIsolInit&&(pi=ke.get(Dt._end))!=null;)for(var wi=hi+1;wi<vt.length;wi++)if(vt[wi]._start===pi){ji.push(Dt=vt[wi]);break}for(var oi=[],hr=0;hr<ji.length;hr++)for(var ra=ji[hr],pr=ra._start;pr<=ra._end;pr++)oi.push(pr);for(var nl=Se[oi[0]],sa=He.level,Gs=oi[0]-1;Gs>=0;Gs--)if(!(V[Gs]&c)){sa=Se[Gs];break}var Po=oi[oi.length-1],il=Se[Po],oa=He.level;if(!(V[Po]&s)){for(var q=Po+1;q<=He.end;q++)if(!(V[q]&c)){oa=Se[q];break}}si.push({_seqIndices:oi,_sosType:Math.max(sa,nl)%2?z:O,_eosType:Math.max(oa,il)%2?z:O})}}for(var Ee=0;Ee<si.length;Ee++){var Oe=si[Ee],he=Oe._seqIndices,Me=Oe._sosType,st=Oe._eosType,ht=Se[he[0]]&1?z:O;if(oe.get(H))for(var yt=0;yt<he.length;yt++){var Mt=he[yt];if(V[Mt]&H){for(var Ot=Me,Pt=yt-1;Pt>=0;Pt--)if(!(V[he[Pt]]&c)){Ot=V[he[Pt]];break}ye(Mt,Ot&(s|ie)?ae:Ot)}}if(oe.get(k))for(var ct=0;ct<he.length;ct++){var It=he[ct];if(V[It]&k)for(var Bt=ct-1;Bt>=-1;Bt--){var sn=Bt===-1?Me:V[he[Bt]];if(sn&a){sn===J&&ye(It,X);break}}}if(oe.get(J))for(var tn=0;tn<he.length;tn++){var Zt=he[tn];V[Zt]&J&&ye(Zt,z)}if(oe.get(L)||oe.get(K))for(var Tt=1;Tt<he.length-1;Tt++){var un=he[Tt];if(V[un]&(L|K)){for(var jt=0,Zn=0,Cr=Tt-1;Cr>=0&&(jt=V[he[Cr]],!!(jt&c));Cr--);for(var jn=Tt+1;jn<he.length&&(Zn=V[he[jn]],!!(Zn&c));jn++);jt===Zn&&(V[un]===L?jt===k:jt&(k|X))&&ye(un,jt)}}if(oe.get(k))for(var Kn=0;Kn<he.length;Kn++){var cn=he[Kn];if(V[cn]&k){for(var Qn=Kn-1;Qn>=0&&V[he[Qn]]&(W|c);Qn--)ye(he[Qn],k);for(Kn++;Kn<he.length&&V[he[Kn]]&(W|c|k);Kn++)V[he[Kn]]!==k&&ye(he[Kn],k)}}if(oe.get(W)||oe.get(L)||oe.get(K))for(var Fn=0;Fn<he.length;Fn++){var ai=he[Fn];if(V[ai]&(W|L|K)){ye(ai,ae);for(var Pn=Fn-1;Pn>=0&&V[he[Pn]]&c;Pn--)ye(he[Pn],ae);for(var nn=Fn+1;nn<he.length&&V[he[nn]]&c;nn++)ye(he[nn],ae)}}if(oe.get(k))for(var Mi=0,Io=Me;Mi<he.length;Mi++){var rl=he[Mi],sl=V[rl];sl&k?Io===O&&ye(rl,O):sl&a&&(Io=sl)}if(oe.get(l)){var Ts=z|k|X,aa=Ts|O,Xr=[];{for(var fs=[],Ni=0;Ni<he.length;Ni++)if(V[he[Ni]]&l){var Xt=ge[he[Ni]],Yr=void 0;if(R(Xt)!==null)if(fs.length<63)fs.push({char:Xt,seqIndex:Ni});else break;else if((Yr=F(Xt))!==null)for(var Rr=fs.length-1;Rr>=0;Rr--){var As=fs[Rr].char;if(As===Yr||As===F(N(Xt))||R(N(As))===Xt){Xr.push([fs[Rr].seqIndex,Ni]),fs.length=Rr;break}}}Xr.sort(function(li,gi){return li[0]-gi[0]})}for(var qr=0;qr<Xr.length;qr++){for(var xc=Xr[qr],On=xc[0],ds=xc[1],_c=!1,Xi=0,Lo=On+1;Lo<ds;Lo++){var Do=he[Lo];if(V[Do]&aa){_c=!0;var Pr=V[Do]&Ts?z:O;if(Pr===ht){Xi=Pr;break}}}if(_c&&!Xi){Xi=Me;for(var Ws=On-1;Ws>=0;Ws--){var ko=he[Ws];if(V[ko]&aa){var Ei=V[ko]&Ts?z:O;Ei!==ht?Xi=Ei:Xi=ht;break}}}if(Xi){if(V[he[On]]=V[he[ds]]=Xi,Xi!==ht){for(var bi=On+1;bi<he.length;bi++)if(!(V[he[bi]]&c)){v(ge[he[bi]])&H&&(V[he[bi]]=Xi);break}}if(Xi!==ht){for(var Cs=ds+1;Cs<he.length;Cs++)if(!(V[he[Cs]]&c)){v(ge[he[Cs]])&H&&(V[he[Cs]]=Xi);break}}}}for(var Jr=0;Jr<he.length;Jr++)if(V[he[Jr]]&l){for(var la=Jr,No=Jr,Yi=Me,Uo=Jr-1;Uo>=0;Uo--)if(V[he[Uo]]&c)la=Uo;else{Yi=V[he[Uo]]&Ts?z:O;break}for(var mr=st,js=Jr+1;js<he.length;js++)if(V[he[js]]&(l|c))No=js;else{mr=V[he[js]]&Ts?z:O;break}for(var Ti=la;Ti<=No;Ti++)V[he[Ti]]=Yi===mr?Yi:ht;Jr=No}}}for(var mi=He.start;mi<=He.end;mi++){var Xs=Se[mi],gr=V[mi];if(Xs&1?gr&(O|k|X)&&Se[mi]++:gr&z?Se[mi]++:gr&(X|k)&&(Se[mi]+=2),gr&c&&(Se[mi]=mi===0?He.level:Se[mi-1]),mi===He.end||v(ge[mi])&(de|ne))for(var Ys=mi;Ys>=0&&v(ge[Ys])&d;Ys--)Se[Ys]=He.level}}return{levels:Se,paragraphs:Je};function Ai(li,gi){for(var $n=li;$n<ge.length;$n++){var Vn=V[$n];if(Vn&(z|J))return 1;if(Vn&(ne|O)||gi&&Vn===ie)return 0;if(Vn&s){var er=qs($n);$n=er===-1?ge.length:er}}return 0}function qs(li){for(var gi=1,$n=li+1;$n<ge.length;$n++){var Vn=V[$n];if(Vn&ne)break;if(Vn&ie){if(--gi===0)return $n}else Vn&s&&gi++}return-1}}var Ce="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Pe;function Ie(){if(!Pe){var ge=E(Ce,!0),ze=ge.map,_e=ge.reverseMap;_e.forEach(function(V,B){ze.set(B,V)}),Pe=ze}}function Qe(ge){return Ie(),Pe.get(ge)||null}function ee(ge,ze,_e,V){var B=ge.length;_e=Math.max(0,_e==null?0:+_e),V=Math.min(B-1,V==null?B-1:+V);for(var oe=new Map,ye=_e;ye<=V;ye++)if(ze[ye]&1){var Se=Qe(ge[ye]);Se!==null&&oe.set(ye,Se)}return oe}function lt(ge,ze,_e,V){var B=ge.length;_e=Math.max(0,_e==null?0:+_e),V=Math.min(B-1,V==null?B-1:+V);var oe=[];return ze.paragraphs.forEach(function(ye){var Se=Math.max(_e,ye.start),ke=Math.min(V,ye.end);if(Se<ke){for(var Je=ze.levels.slice(Se,ke+1),He=ke;He>=Se&&v(ge[He])&d;He--)Je[He]=ye.level;for(var Ke=ye.level,gt=1/0,je=0;je<Je.length;je++){var nt=Je[je];nt>Ke&&(Ke=nt),nt<gt&&(gt=nt|1)}for(var ot=Ke;ot>=gt;ot--)for(var it=0;it<Je.length;it++)if(Je[it]>=ot){for(var Xe=it;it+1<Je.length&&Je[it+1]>=ot;)it++;it>Xe&&oe.push([Xe+Se,it+Se])}}}),oe}function Ae(ge,ze,_e,V){var B=Le(ge,ze,_e,V),oe=[].concat(ge);return B.forEach(function(ye,Se){oe[Se]=(ze.levels[ye]&1?Qe(ge[ye]):null)||ge[ye]}),oe.join("")}function Le(ge,ze,_e,V){for(var B=lt(ge,ze,_e,V),oe=[],ye=0;ye<ge.length;ye++)oe[ye]=ye;return B.forEach(function(Se){for(var ke=Se[0],Je=Se[1],He=oe.slice(ke,Je+1),Ke=He.length;Ke--;)oe[Je-Ke]=He[Ke]}),oe}return e.closingToOpeningBracket=F,e.getBidiCharType=v,e.getBidiCharTypeName=y,e.getCanonicalBracket=N,e.getEmbeddingLevels=Te,e.getMirroredCharacter=Qe,e.getMirroredCharactersMap=ee,e.getReorderSegments=lt,e.getReorderedIndices=Le,e.getReorderedString=Ae,e.openingToClosingBracket=R,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}const nb=/\bvoid\s+main\s*\(\s*\)\s*{/g;function _x(r){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,i){let s=an[i];return s?_x(s):n}return r.replace(e,t)}const lr=[];for(let r=0;r<256;r++)lr[r]=(r<16?"0":"")+r.toString(16);function QN(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(lr[r&255]+lr[r>>8&255]+lr[r>>16&255]+lr[r>>24&255]+"-"+lr[e&255]+lr[e>>8&255]+"-"+lr[e>>16&15|64]+lr[e>>24&255]+"-"+lr[t&63|128]+lr[t>>8&255]+"-"+lr[t>>16&255]+lr[t>>24&255]+lr[n&255]+lr[n>>8&255]+lr[n>>16&255]+lr[n>>24&255]).toUpperCase()}const Yu=Object.assign||function(){let r=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},$N=Date.now(),jw=new WeakMap,Xw=new Map;let eU=1e10;function Sx(r,e){const t=rU(e);let n=jw.get(r);if(n||jw.set(r,n=Object.create(null)),n[t])return new n[t];const i=`_onBeforeCompile${t}`,s=function(d,p){r.onBeforeCompile.call(this,d,p);const g=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let v=Xw[g];if(!v){const y=tU(this,d,e,t);v=Xw[g]=y}d.vertexShader=v.vertexShader,d.fragmentShader=v.fragmentShader,Yu(d.uniforms,this.uniforms),e.timeUniform&&(d.uniforms[e.timeUniform]={get value(){return Date.now()-$N}}),this[i]&&this[i](d)},a=function(){return l(e.chained?r:r.clone())},l=function(d){const p=Object.create(d,c);return Object.defineProperty(p,"baseMaterial",{value:r}),Object.defineProperty(p,"id",{value:eU++}),p.uuid=QN(),p.uniforms=Yu({},d.uniforms,e.uniforms),p.defines=Yu({},d.defines,e.defines),p.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",p.extensions=Yu({},d.extensions,e.extensions),p._listeners=void 0,p},c={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>r.type,set:d=>{r.type=d}},isDerivedFrom:{writable:!0,configurable:!0,value:function(d){const p=this.baseMaterial;return d===p||p.isDerivedMaterial&&p.isDerivedFrom(d)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(d){this[i]=d}},copy:{writable:!0,configurable:!0,value:function(d){return r.copy.call(this,d),!r.isShaderMaterial&&!r.isDerivedMaterial&&(Yu(this.extensions,d.extensions),Yu(this.defines,d.defines),Yu(this.uniforms,Vx.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new r.constructor;return l(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=Sx(r.isDerivedMaterial?r.getDepthMaterial():new X0({depthPacking:Ux}),e),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=Sx(r.isDerivedMaterial?r.getDistanceMaterial():new Y0,e),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:p}=this;d&&d.dispose(),p&&p.dispose(),r.dispose.call(this)}}};return n[t]=a,new a}function tU(r,{vertexShader:e,fragmentShader:t},n,i){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:c,fragmentDefs:d,fragmentMainIntro:p,fragmentMainOutro:g,fragmentColorTransform:v,customRewriter:y,timeUniform:w}=n;if(s=s||"",a=a||"",l=l||"",d=d||"",p=p||"",g=g||"",(c||y)&&(e=_x(e)),(v||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=_x(t)),y){let E=y({vertexShader:e,fragmentShader:t});e=E.vertexShader,t=E.fragmentShader}if(v){let E=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,M=>(E.push(M),"")),g=`${v}
${E.join(`
`)}
${g}`}if(w){const E=`
uniform float ${w};
`;s=E+s,d=E+d}return c&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,a=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(E,M,S,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,S))?M:`troika_${M}_${i}`),r.map&&r.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=Yw(e,i,s,a,l),t=Yw(t,i,d,p,g),{vertexShader:e,fragmentShader:t}}function Yw(r,e,t,n,i){return(n||i||t)&&(r=r.replace(nb,`
${t}
void troikaOrigMain${e}() {`),r+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${i}
}`),r}function nU(r,e){return r==="uniforms"?void 0:typeof e=="function"?e.toString():e}let iU=0;const qw=new Map;function rU(r){const e=JSON.stringify(r,nU);let t=qw.get(e);return t==null&&qw.set(e,t=++iU),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function sU(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(i){var s=e._bin,a=new Uint8Array(i);if(s.readASCII(a,0,4)=="ttcf"){var l=4;s.readUshort(a,l),l+=2,s.readUshort(a,l),l+=2;var c=s.readUint(a,l);l+=4;for(var d=[],p=0;p<c;p++){var g=s.readUint(a,l);l+=4,d.push(e._readFont(a,g))}return d}return[e._readFont(a,0)]},_readFont:function(i,s){var a=e._bin,l=s;a.readFixed(i,s),s+=4;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],p={_data:i,_offset:l},g={},v=0;v<c;v++){var y=a.readASCII(i,s,4);s+=4,a.readUint(i,s),s+=4;var w=a.readUint(i,s);s+=4;var E=a.readUint(i,s);s+=4,g[y]={offset:w,length:E}}for(v=0;v<d.length;v++){var M=d[v];g[M]&&(p[M.trim()]=e[M.trim()].parse(i,g[M].offset,g[M].length,p))}return p},_tabOffset:function(i,s,a){for(var l=e._bin,c=l.readUshort(i,a+4),d=a+12,p=0;p<c;p++){var g=l.readASCII(i,d,4);d+=4,l.readUint(i,d),d+=4;var v=l.readUint(i,d);if(d+=4,l.readUint(i,d),d+=4,g==s)return v}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,a){for(var l=[],c=0;c<a;c++)l.push(e._bin.readUshort(i,s+2*c));return l},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(i[s+c]);return l},readUnicode:function(i,s,a){for(var l="",c=0;c<a;c++){var d=i[s++]<<8|i[s++];l+=String.fromCharCode(d)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,a){var l=e._bin._tdec;return l&&s==0&&a==i.length?l.decode(i):e._bin.readASCII(i,s,a)},readBytes:function(i,s,a){for(var l=[],c=0;c<a;c++)l.push(i[s+c]);return l},readASCIIArray:function(i,s,a){for(var l=[],c=0;c<a;c++)l.push(String.fromCharCode(i[s+c]));return l},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,a,l,c){var d=e._bin,p={},g=s;d.readFixed(i,s),s+=4;var v=d.readUshort(i,s);s+=2;var y=d.readUshort(i,s);s+=2;var w=d.readUshort(i,s);return s+=2,p.scriptList=e._lctf.readScriptList(i,g+v),p.featureList=e._lctf.readFeatureList(i,g+y),p.lookupList=e._lctf.readLookupList(i,g+w,c),p},e._lctf.readLookupList=function(i,s,a){var l=e._bin,c=s,d=[],p=l.readUshort(i,s);s+=2;for(var g=0;g<p;g++){var v=l.readUshort(i,s);s+=2;var y=e._lctf.readLookupTable(i,c+v,a);d.push(y)}return d},e._lctf.readLookupTable=function(i,s,a){var l=e._bin,c=s,d={tabs:[]};d.ltype=l.readUshort(i,s),s+=2,d.flag=l.readUshort(i,s),s+=2;var p=l.readUshort(i,s);s+=2;for(var g=d.ltype,v=0;v<p;v++){var y=l.readUshort(i,s);s+=2;var w=a(i,g,c+y,d);d.tabs.push(w)}return d},e._lctf.numOfOnes=function(i){for(var s=0,a=0;a<32;a++)i>>>a&1&&s++;return s},e._lctf.readClassDef=function(i,s){var a=e._bin,l=[],c=a.readUshort(i,s);if(s+=2,c==1){var d=a.readUshort(i,s);s+=2;var p=a.readUshort(i,s);s+=2;for(var g=0;g<p;g++)l.push(d+g),l.push(d+g),l.push(a.readUshort(i,s)),s+=2}if(c==2){var v=a.readUshort(i,s);for(s+=2,g=0;g<v;g++)l.push(a.readUshort(i,s)),s+=2,l.push(a.readUshort(i,s)),s+=2,l.push(a.readUshort(i,s)),s+=2}return l},e._lctf.getInterval=function(i,s){for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1];if(i[a+2],l<=s&&s<=c)return a}return-1},e._lctf.readCoverage=function(i,s){var a=e._bin,l={};l.fmt=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);return s+=2,l.fmt==1&&(l.tab=a.readUshorts(i,s,c)),l.fmt==2&&(l.tab=a.readUshorts(i,s,3*c)),l},e._lctf.coverageIndex=function(i,s){var a=i.tab;if(i.fmt==1)return a.indexOf(s);if(i.fmt==2){var l=e._lctf.getInterval(a,s);if(l!=-1)return a[l+2]+(s-a[l])}return-1},e._lctf.readFeatureList=function(i,s){var a=e._bin,l=s,c=[],d=a.readUshort(i,s);s+=2;for(var p=0;p<d;p++){var g=a.readASCII(i,s,4);s+=4;var v=a.readUshort(i,s);s+=2;var y=e._lctf.readFeatureTable(i,l+v);y.tag=g.trim(),c.push(y)}return c},e._lctf.readFeatureTable=function(i,s){var a=e._bin,l=s,c={},d=a.readUshort(i,s);s+=2,d>0&&(c.featureParams=l+d);var p=a.readUshort(i,s);s+=2,c.tab=[];for(var g=0;g<p;g++)c.tab.push(a.readUshort(i,s+2*g));return c},e._lctf.readScriptList=function(i,s){var a=e._bin,l=s,c={},d=a.readUshort(i,s);s+=2;for(var p=0;p<d;p++){var g=a.readASCII(i,s,4);s+=4;var v=a.readUshort(i,s);s+=2,c[g.trim()]=e._lctf.readScriptTable(i,l+v)}return c},e._lctf.readScriptTable=function(i,s){var a=e._bin,l=s,c={},d=a.readUshort(i,s);s+=2,d>0&&(c.default=e._lctf.readLangSysTable(i,l+d));var p=a.readUshort(i,s);s+=2;for(var g=0;g<p;g++){var v=a.readASCII(i,s,4);s+=4;var y=a.readUshort(i,s);s+=2,c[v.trim()]=e._lctf.readLangSysTable(i,l+y)}return c},e._lctf.readLangSysTable=function(i,s){var a=e._bin,l={};a.readUshort(i,s),s+=2,l.reqFeature=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);return s+=2,l.features=a.readUshorts(i,s,c),l},e.CFF={},e.CFF.parse=function(i,s,a){var l=e._bin;(i=new Uint8Array(i.buffer,s,a))[s=0],i[++s],i[++s],i[++s],s++;var c=[];s=e.CFF.readIndex(i,s,c);for(var d=[],p=0;p<c.length-1;p++)d.push(l.readASCII(i,s+c[p],c[p+1]-c[p]));s+=c[c.length-1];var g=[];s=e.CFF.readIndex(i,s,g);var v=[];for(p=0;p<g.length-1;p++)v.push(e.CFF.readDict(i,s+g[p],s+g[p+1]));s+=g[g.length-1];var y=v[0],w=[];s=e.CFF.readIndex(i,s,w);var E=[];for(p=0;p<w.length-1;p++)E.push(l.readASCII(i,s+w[p],w[p+1]-w[p]));if(s+=w[w.length-1],e.CFF.readSubrs(i,s,y),y.CharStrings){s=y.CharStrings,w=[],s=e.CFF.readIndex(i,s,w);var M=[];for(p=0;p<w.length-1;p++)M.push(l.readBytes(i,s+w[p],w[p+1]-w[p]));y.CharStrings=M}if(y.ROS){s=y.FDArray;var S=[];for(s=e.CFF.readIndex(i,s,S),y.FDArray=[],p=0;p<S.length-1;p++){var T=e.CFF.readDict(i,s+S[p],s+S[p+1]);e.CFF._readFDict(i,T,E),y.FDArray.push(T)}s+=S[S.length-1],s=y.FDSelect,y.FDSelect=[];var A=i[s];if(s++,A!=3)throw A;var R=l.readUshort(i,s);for(s+=2,p=0;p<R+1;p++)y.FDSelect.push(l.readUshort(i,s),i[s+2]),s+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(i,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(i,y.charset,y.CharStrings.length)),e.CFF._readFDict(i,y,E),y},e.CFF._readFDict=function(i,s,a){var l;for(var c in s.Private&&(l=s.Private[1],s.Private=e.CFF.readDict(i,l,l+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,l+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(s[c]=a[s[c]-426+35])},e.CFF.readSubrs=function(i,s,a){var l=e._bin,c=[];s=e.CFF.readIndex(i,s,c);var d,p=c.length;d=p<1240?107:p<33900?1131:32768,a.Bias=d,a.Subrs=[];for(var g=0;g<c.length-1;g++)a.Subrs.push(l.readBytes(i,s+c[g],c[g+1]-c[g]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var a=0;a<i.charset.length;a++)if(i.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,a){e._bin;var l=[".notdef"],c=i[s];if(s++,c!=0)throw"error: unknown encoding format: "+c;var d=i[s];s++;for(var p=0;p<d;p++)l.push(i[s+p]);return l},e.CFF.readCharset=function(i,s,a){var l=e._bin,c=[".notdef"],d=i[s];if(s++,d==0)for(var p=0;p<a;p++){var g=l.readUshort(i,s);s+=2,c.push(g)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;c.length<a;){g=l.readUshort(i,s),s+=2;var v=0;for(d==1?(v=i[s],s++):(v=l.readUshort(i,s),s+=2),p=0;p<=v;p++)c.push(g),g++}}return c},e.CFF.readIndex=function(i,s,a){var l=e._bin,c=l.readUshort(i,s)+1,d=i[s+=2];if(s++,d==1)for(var p=0;p<c;p++)a.push(i[s+p]);else if(d==2)for(p=0;p<c;p++)a.push(l.readUshort(i,s+2*p));else if(d==3)for(p=0;p<c;p++)a.push(16777215&l.readUint(i,s+3*p-1));else if(c!=1)throw"unsupported offset size: "+d+", count: "+c;return(s+=c*d)-1},e.CFF.getCharString=function(i,s,a){var l=e._bin,c=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var p=1,g=null,v=null;c<=20&&(g=c,p=1),c==12&&(g=100*c+d,p=2),21<=c&&c<=27&&(g=c,p=1),c==28&&(v=l.readShort(i,s+1),p=3),29<=c&&c<=31&&(g=c,p=1),32<=c&&c<=246&&(v=c-139,p=1),247<=c&&c<=250&&(v=256*(c-247)+d+108,p=2),251<=c&&c<=254&&(v=256*-(c-251)-d-108,p=2),c==255&&(v=l.readInt(i,s+1)/65535,p=5),a.val=v??"o"+g,a.size=p},e.CFF.readCharString=function(i,s,a){for(var l=s+a,c=e._bin,d=[];s<l;){var p=i[s],g=i[s+1];i[s+2],i[s+3],i[s+4];var v=1,y=null,w=null;p<=20&&(y=p,v=1),p==12&&(y=100*p+g,v=2),p!=19&&p!=20||(y=p,v=2),21<=p&&p<=27&&(y=p,v=1),p==28&&(w=c.readShort(i,s+1),v=3),29<=p&&p<=31&&(y=p,v=1),32<=p&&p<=246&&(w=p-139,v=1),247<=p&&p<=250&&(w=256*(p-247)+g+108,v=2),251<=p&&p<=254&&(w=256*-(p-251)-g-108,v=2),p==255&&(w=c.readInt(i,s+1)/65535,v=5),d.push(w??"o"+y),s+=v}return d},e.CFF.readDict=function(i,s,a){for(var l=e._bin,c={},d=[];s<a;){var p=i[s],g=i[s+1];i[s+2],i[s+3],i[s+4];var v=1,y=null,w=null;if(p==28&&(w=l.readShort(i,s+1),v=3),p==29&&(w=l.readInt(i,s+1),v=5),32<=p&&p<=246&&(w=p-139,v=1),247<=p&&p<=250&&(w=256*(p-247)+g+108,v=2),251<=p&&p<=254&&(w=256*-(p-251)-g-108,v=2),p==255)throw w=l.readInt(i,s+1)/65535,v=5,"unknown number";if(p==30){var E=[];for(v=1;;){var M=i[s+v];v++;var S=M>>4,T=15&M;if(S!=15&&E.push(S),T!=15&&E.push(T),T==15)break}for(var A="",R=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],F=0;F<E.length;F++)A+=R[E[F]];w=parseFloat(A)}p<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][p],v=1,p==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],v=2)),y!=null?(c[y]=d.length==1?d[0]:d,d=[]):d.push(w),s+=v}return c},e.cmap={},e.cmap.parse=function(i,s,a){i=new Uint8Array(i.buffer,s,a),s=0;var l=e._bin,c={};l.readUshort(i,s),s+=2;var d=l.readUshort(i,s);s+=2;var p=[];c.tables=[];for(var g=0;g<d;g++){var v=l.readUshort(i,s);s+=2;var y=l.readUshort(i,s);s+=2;var w=l.readUint(i,s);s+=4;var E="p"+v+"e"+y,M=p.indexOf(w);if(M==-1){var S;M=c.tables.length,p.push(w);var T=l.readUshort(i,w);T==0?S=e.cmap.parse0(i,w):T==4?S=e.cmap.parse4(i,w):T==6?S=e.cmap.parse6(i,w):T==12?S=e.cmap.parse12(i,w):console.debug("unknown format: "+T,v,y,w),c.tables.push(S)}if(c[E]!=null)throw"multiple tables for one platform+encoding";c[E]=M}return c},e.cmap.parse0=function(i,s){var a=e._bin,l={};l.format=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,l.map=[];for(var d=0;d<c-6;d++)l.map.push(i[s+d]);return l},e.cmap.parse4=function(i,s){var a=e._bin,l=s,c={};c.format=a.readUshort(i,s),s+=2;var d=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2;var p=a.readUshort(i,s);s+=2;var g=p/2;c.searchRange=a.readUshort(i,s),s+=2,c.entrySelector=a.readUshort(i,s),s+=2,c.rangeShift=a.readUshort(i,s),s+=2,c.endCount=a.readUshorts(i,s,g),s+=2*g,s+=2,c.startCount=a.readUshorts(i,s,g),s+=2*g,c.idDelta=[];for(var v=0;v<g;v++)c.idDelta.push(a.readShort(i,s)),s+=2;for(c.idRangeOffset=a.readUshorts(i,s,g),s+=2*g,c.glyphIdArray=[];s<l+d;)c.glyphIdArray.push(a.readUshort(i,s)),s+=2;return c},e.cmap.parse6=function(i,s){var a=e._bin,l={};l.format=a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,l.firstCode=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,l.glyphIdArray=[];for(var d=0;d<c;d++)l.glyphIdArray.push(a.readUshort(i,s)),s+=2;return l},e.cmap.parse12=function(i,s){var a=e._bin,l={};l.format=a.readUshort(i,s),s+=2,s+=2,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4;var c=a.readUint(i,s);s+=4,l.groups=[];for(var d=0;d<c;d++){var p=s+12*d,g=a.readUint(i,p+0),v=a.readUint(i,p+4),y=a.readUint(i,p+8);l.groups.push([g,v,y])}return l},e.glyf={},e.glyf.parse=function(i,s,a,l){for(var c=[],d=0;d<l.maxp.numGlyphs;d++)c.push(null);return c},e.glyf._parseGlyf=function(i,s){var a=e._bin,l=i._data,c=e._tabOffset(l,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var d={};if(d.noc=a.readShort(l,c),c+=2,d.xMin=a.readShort(l,c),c+=2,d.yMin=a.readShort(l,c),c+=2,d.xMax=a.readShort(l,c),c+=2,d.yMax=a.readShort(l,c),c+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var p=0;p<d.noc;p++)d.endPts.push(a.readUshort(l,c)),c+=2;var g=a.readUshort(l,c);if(c+=2,l.length-c<g)return null;d.instructions=a.readBytes(l,c,g),c+=g;var v=d.endPts[d.noc-1]+1;for(d.flags=[],p=0;p<v;p++){var y=l[c];if(c++,d.flags.push(y),(8&y)!=0){var w=l[c];c++;for(var E=0;E<w;E++)d.flags.push(y),p++}}for(d.xs=[],p=0;p<v;p++){var M=(2&d.flags[p])!=0,S=(16&d.flags[p])!=0;M?(d.xs.push(S?l[c]:-l[c]),c++):S?d.xs.push(0):(d.xs.push(a.readShort(l,c)),c+=2)}for(d.ys=[],p=0;p<v;p++)M=(4&d.flags[p])!=0,S=(32&d.flags[p])!=0,M?(d.ys.push(S?l[c]:-l[c]),c++):S?d.ys.push(0):(d.ys.push(a.readShort(l,c)),c+=2);var T=0,A=0;for(p=0;p<v;p++)T+=d.xs[p],A+=d.ys[p],d.xs[p]=T,d.ys[p]=A}else{var R;d.parts=[];do{R=a.readUshort(l,c),c+=2;var F={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(F),F.glyphIndex=a.readUshort(l,c),c+=2,1&R){var N=a.readShort(l,c);c+=2;var O=a.readShort(l,c);c+=2}else N=a.readInt8(l,c),c++,O=a.readInt8(l,c),c++;2&R?(F.m.tx=N,F.m.ty=O):(F.p1=N,F.p2=O),8&R?(F.m.a=F.m.d=a.readF2dot14(l,c),c+=2):64&R?(F.m.a=a.readF2dot14(l,c),c+=2,F.m.d=a.readF2dot14(l,c),c+=2):128&R&&(F.m.a=a.readF2dot14(l,c),c+=2,F.m.b=a.readF2dot14(l,c),c+=2,F.m.c=a.readF2dot14(l,c),c+=2,F.m.d=a.readF2dot14(l,c),c+=2)}while(32&R);if(256&R){var z=a.readUshort(l,c);for(c+=2,d.instr=[],p=0;p<z;p++)d.instr.push(l[c]),c++}}return d},e.GDEF={},e.GDEF.parse=function(i,s,a,l){var c=s;s+=4;var d=e._bin.readUshort(i,s);return{glyphClassDef:d===0?null:e._lctf.readClassDef(i,c+d)}},e.GPOS={},e.GPOS.parse=function(i,s,a,l){return e._lctf.parse(i,s,a,l,e.GPOS.subt)},e.GPOS.subt=function(i,s,a,l){var c=e._bin,d=a,p={};if(p.fmt=c.readUshort(i,a),a+=2,s==1||s==2||s==3||s==7||s==8&&p.fmt<=2){var g=c.readUshort(i,a);a+=2,p.coverage=e._lctf.readCoverage(i,g+d)}if(s==1&&p.fmt==1){var v=c.readUshort(i,a);a+=2,v!=0&&(p.pos=e.GPOS.readValueRecord(i,a,v))}else if(s==2&&p.fmt>=1&&p.fmt<=2){v=c.readUshort(i,a),a+=2;var y=c.readUshort(i,a);a+=2;var w=e._lctf.numOfOnes(v),E=e._lctf.numOfOnes(y);if(p.fmt==1){p.pairsets=[];var M=c.readUshort(i,a);a+=2;for(var S=0;S<M;S++){var T=d+c.readUshort(i,a);a+=2;var A=c.readUshort(i,T);T+=2;for(var R=[],F=0;F<A;F++){var N=c.readUshort(i,T);T+=2,v!=0&&(X=e.GPOS.readValueRecord(i,T,v),T+=2*w),y!=0&&(K=e.GPOS.readValueRecord(i,T,y),T+=2*E),R.push({gid2:N,val1:X,val2:K})}p.pairsets.push(R)}}if(p.fmt==2){var O=c.readUshort(i,a);a+=2;var z=c.readUshort(i,a);a+=2;var k=c.readUshort(i,a);a+=2;var L=c.readUshort(i,a);for(a+=2,p.classDef1=e._lctf.readClassDef(i,d+O),p.classDef2=e._lctf.readClassDef(i,d+z),p.matrix=[],S=0;S<k;S++){var W=[];for(F=0;F<L;F++){var X=null,K=null;v!=0&&(X=e.GPOS.readValueRecord(i,a,v),a+=2*w),y!=0&&(K=e.GPOS.readValueRecord(i,a,y),a+=2*E),W.push({val1:X,val2:K})}p.matrix.push(W)}}}else if(s==4&&p.fmt==1)p.markCoverage=e._lctf.readCoverage(i,c.readUshort(i,a)+d),p.baseCoverage=e._lctf.readCoverage(i,c.readUshort(i,a+2)+d),p.markClassCount=c.readUshort(i,a+4),p.markArray=e.GPOS.readMarkArray(i,c.readUshort(i,a+6)+d),p.baseArray=e.GPOS.readBaseArray(i,c.readUshort(i,a+8)+d,p.markClassCount);else if(s==6&&p.fmt==1)p.mark1Coverage=e._lctf.readCoverage(i,c.readUshort(i,a)+d),p.mark2Coverage=e._lctf.readCoverage(i,c.readUshort(i,a+2)+d),p.markClassCount=c.readUshort(i,a+4),p.mark1Array=e.GPOS.readMarkArray(i,c.readUshort(i,a+6)+d),p.mark2Array=e.GPOS.readBaseArray(i,c.readUshort(i,a+8)+d,p.markClassCount);else{if(s==9&&p.fmt==1){var ne=c.readUshort(i,a);a+=2;var de=c.readUint(i,a);if(a+=4,l.ltype==9)l.ltype=ne;else if(l.ltype!=ne)throw"invalid extension substitution";return e.GPOS.subt(i,l.ltype,d+de)}console.debug("unsupported GPOS table LookupType",s,"format",p.fmt)}return p},e.GPOS.readValueRecord=function(i,s,a){var l=e._bin,c=[];return c.push(1&a?l.readShort(i,s):0),s+=1&a?2:0,c.push(2&a?l.readShort(i,s):0),s+=2&a?2:0,c.push(4&a?l.readShort(i,s):0),s+=4&a?2:0,c.push(8&a?l.readShort(i,s):0),s+=8&a?2:0,c},e.GPOS.readBaseArray=function(i,s,a){var l=e._bin,c=[],d=s,p=l.readUshort(i,s);s+=2;for(var g=0;g<p;g++){for(var v=[],y=0;y<a;y++)v.push(e.GPOS.readAnchorRecord(i,d+l.readUshort(i,s))),s+=2;c.push(v)}return c},e.GPOS.readMarkArray=function(i,s){var a=e._bin,l=[],c=s,d=a.readUshort(i,s);s+=2;for(var p=0;p<d;p++){var g=e.GPOS.readAnchorRecord(i,a.readUshort(i,s+2)+c);g.markClass=a.readUshort(i,s),l.push(g),s+=4}return l},e.GPOS.readAnchorRecord=function(i,s){var a=e._bin,l={};return l.fmt=a.readUshort(i,s),l.x=a.readShort(i,s+2),l.y=a.readShort(i,s+4),l},e.GSUB={},e.GSUB.parse=function(i,s,a,l){return e._lctf.parse(i,s,a,l,e.GSUB.subt)},e.GSUB.subt=function(i,s,a,l){var c=e._bin,d=a,p={};if(p.fmt=c.readUshort(i,a),a+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&p.fmt<=2||s==6&&p.fmt<=2){var g=c.readUshort(i,a);a+=2,p.coverage=e._lctf.readCoverage(i,d+g)}if(s==1&&p.fmt>=1&&p.fmt<=2){if(p.fmt==1)p.delta=c.readShort(i,a),a+=2;else if(p.fmt==2){var v=c.readUshort(i,a);a+=2,p.newg=c.readUshorts(i,a,v),a+=2*p.newg.length}}else if(s==2&&p.fmt==1){v=c.readUshort(i,a),a+=2,p.seqs=[];for(var y=0;y<v;y++){var w=c.readUshort(i,a)+d;a+=2;var E=c.readUshort(i,w);p.seqs.push(c.readUshorts(i,w+2,E))}}else if(s==4)for(p.vals=[],v=c.readUshort(i,a),a+=2,y=0;y<v;y++){var M=c.readUshort(i,a);a+=2,p.vals.push(e.GSUB.readLigatureSet(i,d+M))}else if(s==5&&p.fmt==2){if(p.fmt==2){var S=c.readUshort(i,a);a+=2,p.cDef=e._lctf.readClassDef(i,d+S),p.scset=[];var T=c.readUshort(i,a);for(a+=2,y=0;y<T;y++){var A=c.readUshort(i,a);a+=2,p.scset.push(A==0?null:e.GSUB.readSubClassSet(i,d+A))}}}else if(s==6&&p.fmt==3){if(p.fmt==3){for(y=0;y<3;y++){v=c.readUshort(i,a),a+=2;for(var R=[],F=0;F<v;F++)R.push(e._lctf.readCoverage(i,d+c.readUshort(i,a+2*F)));a+=2*v,y==0&&(p.backCvg=R),y==1&&(p.inptCvg=R),y==2&&(p.ahedCvg=R)}v=c.readUshort(i,a),a+=2,p.lookupRec=e.GSUB.readSubstLookupRecords(i,a,v)}}else{if(s==7&&p.fmt==1){var N=c.readUshort(i,a);a+=2;var O=c.readUint(i,a);if(a+=4,l.ltype==9)l.ltype=N;else if(l.ltype!=N)throw"invalid extension substitution";return e.GSUB.subt(i,l.ltype,d+O)}console.debug("unsupported GSUB table LookupType",s,"format",p.fmt)}return p},e.GSUB.readSubClassSet=function(i,s){var a=e._bin.readUshort,l=s,c=[],d=a(i,s);s+=2;for(var p=0;p<d;p++){var g=a(i,s);s+=2,c.push(e.GSUB.readSubClassRule(i,l+g))}return c},e.GSUB.readSubClassRule=function(i,s){var a=e._bin.readUshort,l={},c=a(i,s),d=a(i,s+=2);s+=2,l.input=[];for(var p=0;p<c-1;p++)l.input.push(a(i,s)),s+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,d),l},e.GSUB.readSubstLookupRecords=function(i,s,a){for(var l=e._bin.readUshort,c=[],d=0;d<a;d++)c.push(l(i,s),l(i,s+2)),s+=4;return c},e.GSUB.readChainSubClassSet=function(i,s){var a=e._bin,l=s,c=[],d=a.readUshort(i,s);s+=2;for(var p=0;p<d;p++){var g=a.readUshort(i,s);s+=2,c.push(e.GSUB.readChainSubClassRule(i,l+g))}return c},e.GSUB.readChainSubClassRule=function(i,s){for(var a=e._bin,l={},c=["backtrack","input","lookahead"],d=0;d<c.length;d++){var p=a.readUshort(i,s);s+=2,d==1&&p--,l[c[d]]=a.readUshorts(i,s,p),s+=2*l[c[d]].length}return p=a.readUshort(i,s),s+=2,l.subst=a.readUshorts(i,s,2*p),s+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(i,s){var a=e._bin,l=s,c=[],d=a.readUshort(i,s);s+=2;for(var p=0;p<d;p++){var g=a.readUshort(i,s);s+=2,c.push(e.GSUB.readLigature(i,l+g))}return c},e.GSUB.readLigature=function(i,s){var a=e._bin,l={chain:[]};l.nglyph=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var d=0;d<c-1;d++)l.chain.push(a.readUshort(i,s)),s+=2;return l},e.head={},e.head.parse=function(i,s,a){var l=e._bin,c={};return l.readFixed(i,s),s+=4,c.fontRevision=l.readFixed(i,s),s+=4,l.readUint(i,s),s+=4,l.readUint(i,s),s+=4,c.flags=l.readUshort(i,s),s+=2,c.unitsPerEm=l.readUshort(i,s),s+=2,c.created=l.readUint64(i,s),s+=8,c.modified=l.readUint64(i,s),s+=8,c.xMin=l.readShort(i,s),s+=2,c.yMin=l.readShort(i,s),s+=2,c.xMax=l.readShort(i,s),s+=2,c.yMax=l.readShort(i,s),s+=2,c.macStyle=l.readUshort(i,s),s+=2,c.lowestRecPPEM=l.readUshort(i,s),s+=2,c.fontDirectionHint=l.readShort(i,s),s+=2,c.indexToLocFormat=l.readShort(i,s),s+=2,c.glyphDataFormat=l.readShort(i,s),s+=2,c},e.hhea={},e.hhea.parse=function(i,s,a){var l=e._bin,c={};return l.readFixed(i,s),s+=4,c.ascender=l.readShort(i,s),s+=2,c.descender=l.readShort(i,s),s+=2,c.lineGap=l.readShort(i,s),s+=2,c.advanceWidthMax=l.readUshort(i,s),s+=2,c.minLeftSideBearing=l.readShort(i,s),s+=2,c.minRightSideBearing=l.readShort(i,s),s+=2,c.xMaxExtent=l.readShort(i,s),s+=2,c.caretSlopeRise=l.readShort(i,s),s+=2,c.caretSlopeRun=l.readShort(i,s),s+=2,c.caretOffset=l.readShort(i,s),s+=2,s+=8,c.metricDataFormat=l.readShort(i,s),s+=2,c.numberOfHMetrics=l.readUshort(i,s),s+=2,c},e.hmtx={},e.hmtx.parse=function(i,s,a,l){for(var c=e._bin,d={aWidth:[],lsBearing:[]},p=0,g=0,v=0;v<l.maxp.numGlyphs;v++)v<l.hhea.numberOfHMetrics&&(p=c.readUshort(i,s),s+=2,g=c.readShort(i,s),s+=2),d.aWidth.push(p),d.lsBearing.push(g);return d},e.kern={},e.kern.parse=function(i,s,a,l){var c=e._bin,d=c.readUshort(i,s);if(s+=2,d==1)return e.kern.parseV1(i,s-2,a,l);var p=c.readUshort(i,s);s+=2;for(var g={glyph1:[],rval:[]},v=0;v<p;v++){s+=2,a=c.readUshort(i,s),s+=2;var y=c.readUshort(i,s);s+=2;var w=y>>>8;if((w&=15)!=0)throw"unknown kern table format: "+w;s=e.kern.readFormat0(i,s,g)}return g},e.kern.parseV1=function(i,s,a,l){var c=e._bin;c.readFixed(i,s),s+=4;var d=c.readUint(i,s);s+=4;for(var p={glyph1:[],rval:[]},g=0;g<d;g++){c.readUint(i,s),s+=4;var v=c.readUshort(i,s);s+=2,c.readUshort(i,s),s+=2;var y=v>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(i,s,p)}return p},e.kern.readFormat0=function(i,s,a){var l=e._bin,c=-1,d=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2,l.readUshort(i,s),s+=2,l.readUshort(i,s),s+=2;for(var p=0;p<d;p++){var g=l.readUshort(i,s);s+=2;var v=l.readUshort(i,s);s+=2;var y=l.readShort(i,s);s+=2,g!=c&&(a.glyph1.push(g),a.rval.push({glyph2:[],vals:[]}));var w=a.rval[a.rval.length-1];w.glyph2.push(v),w.vals.push(y),c=g}return s},e.loca={},e.loca.parse=function(i,s,a,l){var c=e._bin,d=[],p=l.head.indexToLocFormat,g=l.maxp.numGlyphs+1;if(p==0)for(var v=0;v<g;v++)d.push(c.readUshort(i,s+(v<<1))<<1);if(p==1)for(v=0;v<g;v++)d.push(c.readUint(i,s+(v<<2)));return d},e.maxp={},e.maxp.parse=function(i,s,a){var l=e._bin,c={},d=l.readUint(i,s);return s+=4,c.numGlyphs=l.readUshort(i,s),s+=2,d==65536&&(c.maxPoints=l.readUshort(i,s),s+=2,c.maxContours=l.readUshort(i,s),s+=2,c.maxCompositePoints=l.readUshort(i,s),s+=2,c.maxCompositeContours=l.readUshort(i,s),s+=2,c.maxZones=l.readUshort(i,s),s+=2,c.maxTwilightPoints=l.readUshort(i,s),s+=2,c.maxStorage=l.readUshort(i,s),s+=2,c.maxFunctionDefs=l.readUshort(i,s),s+=2,c.maxInstructionDefs=l.readUshort(i,s),s+=2,c.maxStackElements=l.readUshort(i,s),s+=2,c.maxSizeOfInstructions=l.readUshort(i,s),s+=2,c.maxComponentElements=l.readUshort(i,s),s+=2,c.maxComponentDepth=l.readUshort(i,s),s+=2),c},e.name={},e.name.parse=function(i,s,a){var l=e._bin,c={};l.readUshort(i,s),s+=2;var d=l.readUshort(i,s);s+=2,l.readUshort(i,s);for(var p,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=s+=2,y=0;y<d;y++){var w=l.readUshort(i,s);s+=2;var E=l.readUshort(i,s);s+=2;var M=l.readUshort(i,s);s+=2;var S=l.readUshort(i,s);s+=2;var T=l.readUshort(i,s);s+=2;var A=l.readUshort(i,s);s+=2;var R,F=g[S],N=v+12*d+A;if(w==0)R=l.readUnicode(i,N,T/2);else if(w==3&&E==0)R=l.readUnicode(i,N,T/2);else if(E==0)R=l.readASCII(i,N,T);else if(E==1)R=l.readUnicode(i,N,T/2);else if(E==3)R=l.readUnicode(i,N,T/2);else{if(w!=1)throw"unknown encoding "+E+", platformID: "+w;R=l.readASCII(i,N,T),console.debug("reading unknown MAC encoding "+E+" as ASCII")}var O="p"+w+","+M.toString(16);c[O]==null&&(c[O]={}),c[O][F!==void 0?F:S]=R,c[O]._lang=M}for(var z in c)if(c[z].postScriptName!=null&&c[z]._lang==1033)return c[z];for(var z in c)if(c[z].postScriptName!=null&&c[z]._lang==0)return c[z];for(var z in c)if(c[z].postScriptName!=null&&c[z]._lang==3084)return c[z];for(var z in c)if(c[z].postScriptName!=null)return c[z];for(var z in c){p=z;break}return console.debug("returning name table with languageID "+c[p]._lang),c[p]},e["OS/2"]={},e["OS/2"].parse=function(i,s,a){var l=e._bin.readUshort(i,s);s+=2;var c={};if(l==0)e["OS/2"].version0(i,s,c);else if(l==1)e["OS/2"].version1(i,s,c);else if(l==2||l==3||l==4)e["OS/2"].version2(i,s,c);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(i,s,c)}return c},e["OS/2"].version0=function(i,s,a){var l=e._bin;return a.xAvgCharWidth=l.readShort(i,s),s+=2,a.usWeightClass=l.readUshort(i,s),s+=2,a.usWidthClass=l.readUshort(i,s),s+=2,a.fsType=l.readUshort(i,s),s+=2,a.ySubscriptXSize=l.readShort(i,s),s+=2,a.ySubscriptYSize=l.readShort(i,s),s+=2,a.ySubscriptXOffset=l.readShort(i,s),s+=2,a.ySubscriptYOffset=l.readShort(i,s),s+=2,a.ySuperscriptXSize=l.readShort(i,s),s+=2,a.ySuperscriptYSize=l.readShort(i,s),s+=2,a.ySuperscriptXOffset=l.readShort(i,s),s+=2,a.ySuperscriptYOffset=l.readShort(i,s),s+=2,a.yStrikeoutSize=l.readShort(i,s),s+=2,a.yStrikeoutPosition=l.readShort(i,s),s+=2,a.sFamilyClass=l.readShort(i,s),s+=2,a.panose=l.readBytes(i,s,10),s+=10,a.ulUnicodeRange1=l.readUint(i,s),s+=4,a.ulUnicodeRange2=l.readUint(i,s),s+=4,a.ulUnicodeRange3=l.readUint(i,s),s+=4,a.ulUnicodeRange4=l.readUint(i,s),s+=4,a.achVendID=[l.readInt8(i,s),l.readInt8(i,s+1),l.readInt8(i,s+2),l.readInt8(i,s+3)],s+=4,a.fsSelection=l.readUshort(i,s),s+=2,a.usFirstCharIndex=l.readUshort(i,s),s+=2,a.usLastCharIndex=l.readUshort(i,s),s+=2,a.sTypoAscender=l.readShort(i,s),s+=2,a.sTypoDescender=l.readShort(i,s),s+=2,a.sTypoLineGap=l.readShort(i,s),s+=2,a.usWinAscent=l.readUshort(i,s),s+=2,a.usWinDescent=l.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,a){var l=e._bin;return s=e["OS/2"].version0(i,s,a),a.ulCodePageRange1=l.readUint(i,s),s+=4,a.ulCodePageRange2=l.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,a){var l=e._bin;return s=e["OS/2"].version1(i,s,a),a.sxHeight=l.readShort(i,s),s+=2,a.sCapHeight=l.readShort(i,s),s+=2,a.usDefault=l.readUshort(i,s),s+=2,a.usBreak=l.readUshort(i,s),s+=2,a.usMaxContext=l.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,a){var l=e._bin;return s=e["OS/2"].version2(i,s,a),a.usLowerOpticalPointSize=l.readUshort(i,s),s+=2,a.usUpperOpticalPointSize=l.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,a){var l=e._bin,c={};return c.version=l.readFixed(i,s),s+=4,c.italicAngle=l.readFixed(i,s),s+=4,c.underlinePosition=l.readShort(i,s),s+=2,c.underlineThickness=l.readShort(i,s),s+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var a=i.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var c=a.tables[l];if(c.format==0)return s>=c.map.length?0:c.map[s];if(c.format==4){for(var d=-1,p=0;p<c.endCount.length;p++)if(s<=c.endCount[p]){d=p;break}return d==-1||c.startCount[d]>s?0:65535&(c.idRangeOffset[d]!=0?c.glyphIdArray[s-c.startCount[d]+(c.idRangeOffset[d]>>1)-(c.idRangeOffset.length-d)]:s+c.idDelta[d])}if(c.format==12){if(s>c.groups[c.groups.length-1][1])return 0;for(p=0;p<c.groups.length;p++){var g=c.groups[p];if(g[0]<=s&&s<=g[1])return g[2]+(s-g[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(i,s){var a={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var l=i.SVG.entries[s];return l==null?a:(typeof l=="string"&&(l=e.SVG.toPath(l),i.SVG.entries[s]=l),l)}if(i.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},d=i.CFF,p=i.CFF.Private;if(d.ROS){for(var g=0;d.FDSelect[g+2]<=s;)g+=2;p=d.FDArray[d.FDSelect[g+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],c,d,p,a)}else i.glyf&&e.U._drawGlyf(s,i,a);return a},e.U._drawGlyf=function(i,s,a){var l=s.glyf[i];l==null&&(l=s.glyf[i]=e.glyf._parseGlyf(s,i)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,a):e.U._compoGlyph(l,s,a))},e.U._simpleGlyph=function(i,s){for(var a=0;a<i.noc;a++){for(var l=a==0?0:i.endPts[a-1]+1,c=i.endPts[a],d=l;d<=c;d++){var p=d==l?c:d-1,g=d==c?l:d+1,v=1&i.flags[d],y=1&i.flags[p],w=1&i.flags[g],E=i.xs[d],M=i.ys[d];if(d==l)if(v){if(!y){e.U.P.moveTo(s,E,M);continue}e.U.P.moveTo(s,i.xs[p],i.ys[p])}else y?e.U.P.moveTo(s,i.xs[p],i.ys[p]):e.U.P.moveTo(s,(i.xs[p]+E)/2,(i.ys[p]+M)/2);v?y&&e.U.P.lineTo(s,E,M):w?e.U.P.qcurveTo(s,E,M,i.xs[g],i.ys[g]):e.U.P.qcurveTo(s,E,M,(E+i.xs[g])/2,(M+i.ys[g])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,a){for(var l=0;l<i.parts.length;l++){var c={cmds:[],crds:[]},d=i.parts[l];e.U._drawGlyf(d.glyphIndex,s,c);for(var p=d.m,g=0;g<c.crds.length;g+=2){var v=c.crds[g],y=c.crds[g+1];a.crds.push(v*p.a+y*p.b+p.tx),a.crds.push(v*p.c+y*p.d+p.ty)}for(g=0;g<c.cmds.length;g++)a.cmds.push(c.cmds[g])}},e.U._getGlyphClass=function(i,s){var a=e._lctf.getInterval(s,i);return a==-1?0:s[a+2]},e.U._applySubs=function(i,s,a,l){for(var c=i.length-s-1,d=0;d<a.tabs.length;d++)if(a.tabs[d]!=null){var p,g=a.tabs[d];if(!g.coverage||(p=e._lctf.coverageIndex(g.coverage,i[s]))!=-1){if(a.ltype==1)i[s],g.fmt==1?i[s]=i[s]+g.delta:i[s]=g.newg[p];else if(a.ltype==4)for(var v=g.vals[p],y=0;y<v.length;y++){var w=v[y],E=w.chain.length;if(!(E>c)){for(var M=!0,S=0,T=0;T<E;T++){for(;i[s+S+(1+T)]==-1;)S++;w.chain[T]!=i[s+S+(1+T)]&&(M=!1)}if(M){for(i[s]=w.nglyph,T=0;T<E+S;T++)i[s+T+1]=-1;break}}}else if(a.ltype==5&&g.fmt==2)for(var A=e._lctf.getInterval(g.cDef,i[s]),R=g.cDef[A+2],F=g.scset[R],N=0;N<F.length;N++){var O=F[N],z=O.input;if(!(z.length>c)){for(M=!0,T=0;T<z.length;T++){var k=e._lctf.getInterval(g.cDef,i[s+1+T]);if(A==-1&&g.cDef[k+2]!=z[T]){M=!1;break}}if(M){var L=O.substLookupRecords;for(y=0;y<L.length;y+=2)L[y],L[y+1]}}}else if(a.ltype==6&&g.fmt==3){if(!e.U._glsCovered(i,g.backCvg,s-g.backCvg.length)||!e.U._glsCovered(i,g.inptCvg,s)||!e.U._glsCovered(i,g.ahedCvg,s+g.inptCvg.length))continue;var W=g.lookupRec;for(N=0;N<W.length;N+=2){A=W[N];var X=l[W[N+1]];e.U._applySubs(i,s+A,X,l)}}}}},e.U._glsCovered=function(i,s,a){for(var l=0;l<s.length;l++)if(e._lctf.coverageIndex(s[l],i[a+l])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,a){for(var l={cmds:[],crds:[]},c=0,d=0;d<s.length;d++){var p=s[d];if(p!=-1){for(var g=d<s.length-1&&s[d+1]!=-1?s[d+1]:0,v=e.U.glyphToPath(i,p),y=0;y<v.crds.length;y+=2)l.crds.push(v.crds[y]+c),l.crds.push(v.crds[y+1]);for(a&&l.cmds.push(a),y=0;y<v.cmds.length;y++)l.cmds.push(v.cmds[y]);a&&l.cmds.push("X"),c+=i.hmtx.aWidth[p],d<s.length-1&&(c+=e.U.getPairAdjustment(i,p,g))}}return l},e.U.P={},e.U.P.moveTo=function(i,s,a){i.cmds.push("M"),i.crds.push(s,a)},e.U.P.lineTo=function(i,s,a){i.cmds.push("L"),i.crds.push(s,a)},e.U.P.curveTo=function(i,s,a,l,c,d,p){i.cmds.push("C"),i.crds.push(s,a,l,c,d,p)},e.U.P.qcurveTo=function(i,s,a,l,c){i.cmds.push("Q"),i.crds.push(s,a,l,c)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,a,l,c){for(var d=s.stack,p=s.nStems,g=s.haveWidth,v=s.width,y=s.open,w=0,E=s.x,M=s.y,S=0,T=0,A=0,R=0,F=0,N=0,O=0,z=0,k=0,L=0,W={val:0,size:0};w<i.length;){e.CFF.getCharString(i,w,W);var X=W.val;if(w+=W.size,X=="o1"||X=="o18")d.length%2!=0&&!g&&(v=d.shift()+l.nominalWidthX),p+=d.length>>1,d.length=0,g=!0;else if(X=="o3"||X=="o23")d.length%2!=0&&!g&&(v=d.shift()+l.nominalWidthX),p+=d.length>>1,d.length=0,g=!0;else if(X=="o4")d.length>1&&!g&&(v=d.shift()+l.nominalWidthX,g=!0),y&&e.U.P.closePath(c),M+=d.pop(),e.U.P.moveTo(c,E,M),y=!0;else if(X=="o5")for(;d.length>0;)E+=d.shift(),M+=d.shift(),e.U.P.lineTo(c,E,M);else if(X=="o6"||X=="o7")for(var K=d.length,ne=X=="o6",de=0;de<K;de++){var ae=d.shift();ne?E+=ae:M+=ae,ne=!ne,e.U.P.lineTo(c,E,M)}else if(X=="o8"||X=="o24"){K=d.length;for(var me=0;me+6<=K;)S=E+d.shift(),T=M+d.shift(),A=S+d.shift(),R=T+d.shift(),E=A+d.shift(),M=R+d.shift(),e.U.P.curveTo(c,S,T,A,R,E,M),me+=6;X=="o24"&&(E+=d.shift(),M+=d.shift(),e.U.P.lineTo(c,E,M))}else{if(X=="o11")break;if(X=="o1234"||X=="o1235"||X=="o1236"||X=="o1237")X=="o1234"&&(T=M,A=(S=E+d.shift())+d.shift(),L=R=T+d.shift(),N=R,z=M,E=(O=(F=(k=A+d.shift())+d.shift())+d.shift())+d.shift(),e.U.P.curveTo(c,S,T,A,R,k,L),e.U.P.curveTo(c,F,N,O,z,E,M)),X=="o1235"&&(S=E+d.shift(),T=M+d.shift(),A=S+d.shift(),R=T+d.shift(),k=A+d.shift(),L=R+d.shift(),F=k+d.shift(),N=L+d.shift(),O=F+d.shift(),z=N+d.shift(),E=O+d.shift(),M=z+d.shift(),d.shift(),e.U.P.curveTo(c,S,T,A,R,k,L),e.U.P.curveTo(c,F,N,O,z,E,M)),X=="o1236"&&(S=E+d.shift(),T=M+d.shift(),A=S+d.shift(),L=R=T+d.shift(),N=R,O=(F=(k=A+d.shift())+d.shift())+d.shift(),z=N+d.shift(),E=O+d.shift(),e.U.P.curveTo(c,S,T,A,R,k,L),e.U.P.curveTo(c,F,N,O,z,E,M)),X=="o1237"&&(S=E+d.shift(),T=M+d.shift(),A=S+d.shift(),R=T+d.shift(),k=A+d.shift(),L=R+d.shift(),F=k+d.shift(),N=L+d.shift(),O=F+d.shift(),z=N+d.shift(),Math.abs(O-E)>Math.abs(z-M)?E=O+d.shift():M=z+d.shift(),e.U.P.curveTo(c,S,T,A,R,k,L),e.U.P.curveTo(c,F,N,O,z,E,M));else if(X=="o14"){if(d.length>0&&!g&&(v=d.shift()+a.nominalWidthX,g=!0),d.length==4){var H=d.shift(),J=d.shift(),j=d.shift(),D=d.shift(),Y=e.CFF.glyphBySE(a,j),ce=e.CFF.glyphBySE(a,D);e.U._drawCFF(a.CharStrings[Y],s,a,l,c),s.x=H,s.y=J,e.U._drawCFF(a.CharStrings[ce],s,a,l,c)}y&&(e.U.P.closePath(c),y=!1)}else if(X=="o19"||X=="o20")d.length%2!=0&&!g&&(v=d.shift()+l.nominalWidthX),p+=d.length>>1,d.length=0,g=!0,w+=p+7>>3;else if(X=="o21")d.length>2&&!g&&(v=d.shift()+l.nominalWidthX,g=!0),M+=d.pop(),E+=d.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,E,M),y=!0;else if(X=="o22")d.length>1&&!g&&(v=d.shift()+l.nominalWidthX,g=!0),E+=d.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,E,M),y=!0;else if(X=="o25"){for(;d.length>6;)E+=d.shift(),M+=d.shift(),e.U.P.lineTo(c,E,M);S=E+d.shift(),T=M+d.shift(),A=S+d.shift(),R=T+d.shift(),E=A+d.shift(),M=R+d.shift(),e.U.P.curveTo(c,S,T,A,R,E,M)}else if(X=="o26")for(d.length%2&&(E+=d.shift());d.length>0;)S=E,T=M+d.shift(),E=A=S+d.shift(),M=(R=T+d.shift())+d.shift(),e.U.P.curveTo(c,S,T,A,R,E,M);else if(X=="o27")for(d.length%2&&(M+=d.shift());d.length>0;)T=M,A=(S=E+d.shift())+d.shift(),R=T+d.shift(),E=A+d.shift(),M=R,e.U.P.curveTo(c,S,T,A,R,E,M);else if(X=="o10"||X=="o29"){var Q=X=="o10"?l:a;if(d.length==0)console.debug("error: empty stack");else{var re=d.pop(),pe=Q.Subrs[re+Q.Bias];s.x=E,s.y=M,s.nStems=p,s.haveWidth=g,s.width=v,s.open=y,e.U._drawCFF(pe,s,a,l,c),E=s.x,M=s.y,p=s.nStems,g=s.haveWidth,v=s.width,y=s.open}}else if(X=="o30"||X=="o31"){var $=d.length,ie=(me=0,X=="o31");for(me+=$-(K=-3&$);me<K;)ie?(T=M,A=(S=E+d.shift())+d.shift(),M=(R=T+d.shift())+d.shift(),K-me==5?(E=A+d.shift(),me++):E=A,ie=!1):(S=E,T=M+d.shift(),A=S+d.shift(),R=T+d.shift(),E=A+d.shift(),K-me==5?(M=R+d.shift(),me++):M=R,ie=!0),e.U.P.curveTo(c,S,T,A,R,E,M),me+=4}else{if((X+"").charAt(0)=="o")throw console.debug("Unknown operation: "+X,i),X;d.push(X)}}}s.x=E,s.y=M,s.nStems=p,s.haveWidth=g,s.width=v,s.open=y};var t=e,n={Typr:t};return r.Typr=t,r.default=n,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function oU(){return function(r){var e=Uint8Array,t=Uint16Array,n=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(X,K){for(var ne=new t(31),de=0;de<31;++de)ne[de]=K+=1<<X[de-1];var ae=new n(ne[30]);for(de=1;de<30;++de)for(var me=ne[de];me<ne[de+1];++me)ae[me]=me-ne[de]<<5|de;return[ne,ae]},c=l(i,2),d=c[0],p=c[1];d[28]=258,p[258]=28;for(var g=l(s,0)[0],v=new t(32768),y=0;y<32768;++y){var w=(43690&y)>>>1|(21845&y)<<1;w=(61680&(w=(52428&w)>>>2|(13107&w)<<2))>>>4|(3855&w)<<4,v[y]=((65280&w)>>>8|(255&w)<<8)>>>1}var E=function(X,K,ne){for(var de=X.length,ae=0,me=new t(K);ae<de;++ae)++me[X[ae]-1];var H,J=new t(K);for(ae=0;ae<K;++ae)J[ae]=J[ae-1]+me[ae-1]<<1;{H=new t(1<<K);var j=15-K;for(ae=0;ae<de;++ae)if(X[ae])for(var D=ae<<4|X[ae],Y=K-X[ae],ce=J[X[ae]-1]++<<Y,Q=ce|(1<<Y)-1;ce<=Q;++ce)H[v[ce]>>>j]=D}return H},M=new e(288);for(y=0;y<144;++y)M[y]=8;for(y=144;y<256;++y)M[y]=9;for(y=256;y<280;++y)M[y]=7;for(y=280;y<288;++y)M[y]=8;var S=new e(32);for(y=0;y<32;++y)S[y]=5;var T=E(M,9),A=E(S,5),R=function(X){for(var K=X[0],ne=1;ne<X.length;++ne)X[ne]>K&&(K=X[ne]);return K},F=function(X,K,ne){var de=K/8|0;return(X[de]|X[de+1]<<8)>>(7&K)&ne},N=function(X,K){var ne=K/8|0;return(X[ne]|X[ne+1]<<8|X[ne+2]<<16)>>(7&K)},O=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(X,K,ne){var de=new Error(K||O[X]);if(de.code=X,Error.captureStackTrace&&Error.captureStackTrace(de,z),!ne)throw de;return de},k=function(X,K,ne){var de=X.length;if(!de||ne&&!ne.l&&de<5)return K||new e(0);var ae=!K||ne,me=!ne||ne.i;ne||(ne={}),K||(K=new e(3*de));var H,J=function(Xe){var fe=K.length;if(Xe>fe){var Fe=new e(Math.max(2*fe,Xe));Fe.set(K),K=Fe}},j=ne.f||0,D=ne.p||0,Y=ne.b||0,ce=ne.l,Q=ne.d,re=ne.m,pe=ne.n,$=8*de;do{if(!ce){ne.f=j=F(X,D,1);var ie=F(X,D+1,3);if(D+=3,!ie){var Te=X[(_e=((H=D)/8|0)+(7&H&&1)+4)-4]|X[_e-3]<<8,Ce=_e+Te;if(Ce>de){me&&z(0);break}ae&&J(Y+Te),K.set(X.subarray(_e,Ce),Y),ne.b=Y+=Te,ne.p=D=8*Ce;continue}if(ie==1)ce=T,Q=A,re=9,pe=5;else if(ie==2){var Pe=F(X,D,31)+257,Ie=F(X,D+10,15)+4,Qe=Pe+F(X,D+5,31)+1;D+=14;for(var ee=new e(Qe),lt=new e(19),Ae=0;Ae<Ie;++Ae)lt[a[Ae]]=F(X,D+3*Ae,7);D+=3*Ie;var Le=R(lt),ge=(1<<Le)-1,ze=E(lt,Le);for(Ae=0;Ae<Qe;){var _e,V=ze[F(X,D,ge)];if(D+=15&V,(_e=V>>>4)<16)ee[Ae++]=_e;else{var B=0,oe=0;for(_e==16?(oe=3+F(X,D,3),D+=2,B=ee[Ae-1]):_e==17?(oe=3+F(X,D,7),D+=3):_e==18&&(oe=11+F(X,D,127),D+=7);oe--;)ee[Ae++]=B}}var ye=ee.subarray(0,Pe),Se=ee.subarray(Pe);re=R(ye),pe=R(Se),ce=E(ye,re),Q=E(Se,pe)}else z(1);if(D>$){me&&z(0);break}}ae&&J(Y+131072);for(var ke=(1<<re)-1,Je=(1<<pe)-1,He=D;;He=D){var Ke=(B=ce[N(X,D)&ke])>>>4;if((D+=15&B)>$){me&&z(0);break}if(B||z(2),Ke<256)K[Y++]=Ke;else{if(Ke==256){He=D,ce=null;break}var gt=Ke-254;if(Ke>264){var je=i[Ae=Ke-257];gt=F(X,D,(1<<je)-1)+d[Ae],D+=je}var nt=Q[N(X,D)&Je],ot=nt>>>4;if(nt||z(3),D+=15&nt,Se=g[ot],ot>3&&(je=s[ot],Se+=N(X,D)&(1<<je)-1,D+=je),D>$){me&&z(0);break}ae&&J(Y+131072);for(var it=Y+gt;Y<it;Y+=4)K[Y]=K[Y-Se],K[Y+1]=K[Y+1-Se],K[Y+2]=K[Y+2-Se],K[Y+3]=K[Y+3-Se];Y=it}}ne.l=ce,ne.p=He,ne.b=Y,ce&&(j=1,ne.m=re,ne.d=Q,ne.n=pe)}while(!j);return Y==K.length?K:function(Xe,fe,Fe){(Fe==null||Fe>Xe.length)&&(Fe=Xe.length);var ut=new(Xe instanceof t?t:Xe instanceof n?n:e)(Fe-fe);return ut.set(Xe.subarray(fe,Fe)),ut}(K,0,Y)},L=new e(0),W=typeof TextDecoder<"u"&&new TextDecoder;try{W.decode(L,{stream:!0})}catch{}return r.convert_streams=function(X){var K=new DataView(X),ne=0;function de(){var Pe=K.getUint16(ne);return ne+=2,Pe}function ae(){var Pe=K.getUint32(ne);return ne+=4,Pe}function me(Pe){Te.setUint16(Ce,Pe),Ce+=2}function H(Pe){Te.setUint32(Ce,Pe),Ce+=4}for(var J={signature:ae(),flavor:ae(),length:ae(),numTables:de(),reserved:de(),totalSfntSize:ae(),majorVersion:de(),minorVersion:de(),metaOffset:ae(),metaLength:ae(),metaOrigLength:ae(),privOffset:ae(),privLength:ae()},j=0;Math.pow(2,j)<=J.numTables;)j++;j--;for(var D=16*Math.pow(2,j),Y=16*J.numTables-D,ce=12,Q=[],re=0;re<J.numTables;re++)Q.push({tag:ae(),offset:ae(),compLength:ae(),origLength:ae(),origChecksum:ae()}),ce+=16;var pe,$=new Uint8Array(12+16*Q.length+Q.reduce(function(Pe,Ie){return Pe+Ie.origLength+4},0)),ie=$.buffer,Te=new DataView(ie),Ce=0;return H(J.flavor),me(J.numTables),me(D),me(j),me(Y),Q.forEach(function(Pe){H(Pe.tag),H(Pe.origChecksum),H(ce),H(Pe.origLength),Pe.outOffset=ce,(ce+=Pe.origLength)%4!=0&&(ce+=4-ce%4)}),Q.forEach(function(Pe){var Ie,Qe=X.slice(Pe.offset,Pe.offset+Pe.compLength);if(Pe.compLength!=Pe.origLength){var ee=new Uint8Array(Pe.origLength);Ie=new Uint8Array(Qe,2),k(Ie,ee)}else ee=new Uint8Array(Qe);$.set(ee,Pe.outOffset);var lt=0;(ce=Pe.outOffset+Pe.origLength)%4!=0&&(lt=4-ce%4),$.set(new Uint8Array(lt).buffer,Pe.outOffset+Pe.origLength),pe=ce+lt}),ie.slice(0,pe)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function aU(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,a=4,l=8,c=16,d=32;let p;function g(O){if(!p){const z={R:s,L:i,D:a,C:c,U:d,T:l};p=new Map;for(let k in n){let L=0;n[k].split(",").forEach(W=>{let[X,K]=W.split("+");X=parseInt(X,36),K=K?parseInt(K,36):0,p.set(L+=X,z[k]);for(let ne=K;ne--;)p.set(++L,z[k])})}}return p.get(O)||d}const v=1,y=2,w=3,E=4,M=[null,"isol","init","fina","medi"];function S(O){const z=new Uint8Array(O.length);let k=d,L=v,W=-1;for(let X=0;X<O.length;X++){const K=O.codePointAt(X);let ne=g(K)|0,de=v;ne&l||(k&(i|a|c)?ne&(s|a|c)?(de=w,(L===v||L===w)&&z[W]++):ne&(i|d)&&(L===y||L===E)&&z[W]--:k&(s|d)&&(L===y||L===E)&&z[W]--,L=z[X]=de,k=ne,W=X,K>65535&&X++)}return z}function T(O,z){const k=[];for(let W=0;W<z.length;W++){const X=z.codePointAt(W);X>65535&&W++,k.push(r.U.codeToGlyph(O,X))}const L=O.GSUB;if(L){const{lookupList:W,featureList:X}=L;let K;const ne=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,de=[];X.forEach(ae=>{if(ne.test(ae.tag))for(let me=0;me<ae.tab.length;me++){if(de[ae.tab[me]])continue;de[ae.tab[me]]=!0;const H=W[ae.tab[me]],J=/^(isol|init|fina|medi)$/.test(ae.tag);J&&!K&&(K=S(z));for(let j=0;j<k.length;j++)(!K||!J||M[K[j]]===ae.tag)&&r.U._applySubs(k,j,H,W)}})}return k}function A(O,z){const k=new Int16Array(z.length*3);let L=0;for(;L<z.length;L++){const ne=z[L];if(ne===-1)continue;k[L*3+2]=O.hmtx.aWidth[ne];const de=O.GPOS;if(de){const ae=de.lookupList;for(let me=0;me<ae.length;me++){const H=ae[me];for(let J=0;J<H.tabs.length;J++){const j=H.tabs[J];if(H.ltype===1){if(r._lctf.coverageIndex(j.coverage,ne)!==-1&&j.pos){K(j.pos,L);break}}else if(H.ltype===2){let D=null,Y=W();if(Y!==-1){const ce=r._lctf.coverageIndex(j.coverage,z[Y]);if(ce!==-1){if(j.fmt===1){const Q=j.pairsets[ce];for(let re=0;re<Q.length;re++)Q[re].gid2===ne&&(D=Q[re])}else if(j.fmt===2){const Q=r.U._getGlyphClass(z[Y],j.classDef1),re=r.U._getGlyphClass(ne,j.classDef2);D=j.matrix[Q][re]}if(D){D.val1&&K(D.val1,Y),D.val2&&K(D.val2,L);break}}}}else if(H.ltype===4){const D=r._lctf.coverageIndex(j.markCoverage,ne);if(D!==-1){const Y=W(X),ce=Y===-1?-1:r._lctf.coverageIndex(j.baseCoverage,z[Y]);if(ce!==-1){const Q=j.markArray[D],re=j.baseArray[ce][Q.markClass];k[L*3]=re.x-Q.x+k[Y*3]-k[Y*3+2],k[L*3+1]=re.y-Q.y+k[Y*3+1];break}}}else if(H.ltype===6){const D=r._lctf.coverageIndex(j.mark1Coverage,ne);if(D!==-1){const Y=W();if(Y!==-1){const ce=z[Y];if(R(O,ce)===3){const Q=r._lctf.coverageIndex(j.mark2Coverage,ce);if(Q!==-1){const re=j.mark1Array[D],pe=j.mark2Array[Q][re.markClass];k[L*3]=pe.x-re.x+k[Y*3]-k[Y*3+2],k[L*3+1]=pe.y-re.y+k[Y*3+1];break}}}}}}}}else if(O.kern&&!O.cff){const ae=W();if(ae!==-1){const me=O.kern.glyph1.indexOf(z[ae]);if(me!==-1){const H=O.kern.rval[me].glyph2.indexOf(ne);H!==-1&&(k[ae*3+2]+=O.kern.rval[me].vals[H])}}}}return k;function W(ne){for(let de=L-1;de>=0;de--)if(z[de]!==-1&&(!ne||ne(z[de])))return de;return-1}function X(ne){return R(O,ne)===1}function K(ne,de){for(let ae=0;ae<3;ae++)k[de*3+ae]+=ne[ae]||0}}function R(O,z){const k=O.GDEF&&O.GDEF.glyphClassDef;return k?r.U._getGlyphClass(z,k):0}function F(...O){for(let z=0;z<O.length;z++)if(typeof O[z]=="number")return O[z]}function N(O){const z=Object.create(null),k=O["OS/2"],L=O.hhea,W=O.head.unitsPerEm,X=F(k&&k.sTypoAscender,L&&L.ascender,W),K={unitsPerEm:W,ascender:X,descender:F(k&&k.sTypoDescender,L&&L.descender,0),capHeight:F(k&&k.sCapHeight,X),xHeight:F(k&&k.sxHeight,X),lineGap:F(k&&k.sTypoLineGap,L&&L.lineGap),supportsCodePoint(ne){return r.U.codeToGlyph(O,ne)>0},forEachGlyph(ne,de,ae,me){let H=0;const J=1/K.unitsPerEm*de,j=T(O,ne);let D=0;const Y=A(O,j);return j.forEach((ce,Q)=>{if(ce!==-1){let re=z[ce];if(!re){const{cmds:pe,crds:$}=r.U.glyphToPath(O,ce);let ie="",Te=0;for(let ee=0,lt=pe.length;ee<lt;ee++){const Ae=t[pe[ee]];ie+=pe[ee];for(let Le=1;Le<=Ae;Le++)ie+=(Le>1?",":"")+$[Te++]}let Ce,Pe,Ie,Qe;if($.length){Ce=Pe=1/0,Ie=Qe=-1/0;for(let ee=0,lt=$.length;ee<lt;ee+=2){let Ae=$[ee],Le=$[ee+1];Ae<Ce&&(Ce=Ae),Le<Pe&&(Pe=Le),Ae>Ie&&(Ie=Ae),Le>Qe&&(Qe=Le)}}else Ce=Ie=Pe=Qe=0;re=z[ce]={index:ce,advanceWidth:O.hmtx.aWidth[ce],xMin:Ce,yMin:Pe,xMax:Ie,yMax:Qe,path:ie}}me.call(null,re,H+Y[Q*3]*J,Y[Q*3+1]*J,D),H+=Y[Q*3+2]*J,ae&&(H+=ae*de)}D+=ne.codePointAt(D)>65535?2:1}),H}};return K}return function(z){const k=new Uint8Array(z,0,4),L=r._bin.readASCII(k,0,4);if(L==="wOFF")z=e(z);else if(L==="wOF2")throw new Error("woff2 fonts not supported");return N(r.parse(z)[0])}}const lU=td({name:"Typr Font Parser",dependencies:[sU,oU,aU],init(r,e,t){const n=r(),i=e();return t(n,i)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function uU(){return function(r){var e=function(){this.buckets=new Map};e.prototype.add=function(A){var R=A>>5;this.buckets.set(R,(this.buckets.get(R)||0)|1<<(31&A))},e.prototype.has=function(A){var R=this.buckets.get(A>>5);return R!==void 0&&(R&1<<(31&A))!=0},e.prototype.serialize=function(){var A=[];return this.buckets.forEach(function(R,F){A.push((+F).toString(36)+":"+R.toString(36))}),A.join(",")},e.prototype.deserialize=function(A){var R=this;this.buckets.clear(),A.split(",").forEach(function(F){var N=F.split(":");R.buckets.set(parseInt(N[0],36),parseInt(N[1],36))})};var t=Math.pow(2,8),n=t-1,i=~n;function s(A){var R=function(N){return N&i}(A).toString(16),F=function(N){return(N&i)+t-1}(A).toString(16);return"codepoint-index/plane"+(A>>16)+"/"+R+"-"+F+".json"}function a(A,R){var F=A&n,N=R.codePointAt(F/6|0);return((N=(N||48)-48)&1<<F%6)!=0}function l(A,R){var F;(F=A,F.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(N){return N.split("-").map(function(O){return parseInt(O.trim(),16)})})).forEach(function(N){var O=N[0],z=N[1];z===void 0&&(z=O),R(O,z)})}function c(A,R){l(A,function(F,N){for(var O=F;O<=N;O++)R(O)})}var d={},p={},g=new WeakMap,v="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(A){var R=g.get(A);return R||(R=new e,c(A.ranges,function(F){return R.add(F)}),g.set(A,R)),R}var w,E=new Map;function M(A,R,F){return A[R]?R:A[F]?F:function(N){for(var O in N)return O}(A)}function S(A,R){var F=R;if(!A.includes(F)){F=1/0;for(var N=0;N<A.length;N++)Math.abs(A[N]-R)<Math.abs(F-R)&&(F=A[N])}return F}function T(A){return w||(w=new Set,c("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(R){w.add(R)})),w.has(A)}return r.CodePointSet=e,r.clearCache=function(){d={},p={}},r.getFontsForString=function(A,R){R===void 0&&(R={});var F,N=R.lang;N===void 0&&(N=new RegExp("\\p{Script=Hangul}","u").test(F=A)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(F)?"ja":"en");var O=R.category;O===void 0&&(O="sans-serif");var z=R.style;z===void 0&&(z="normal");var k=R.weight;k===void 0&&(k=400);var L=(R.dataUrl||v).replace(/\/$/g,""),W=new Map,X=new Uint8Array(A.length),K={},ne={},de=new Array(A.length),ae=new Map,me=!1;function H(D){var Y=E.get(D);return Y||(Y=fetch(L+"/"+D).then(function(ce){if(!ce.ok)throw new Error(ce.statusText);return ce.json().then(function(Q){if(!Array.isArray(Q)||Q[0]!==1)throw new Error("Incorrect schema version; need 1, got "+Q[0]);return Q[1]})}).catch(function(ce){if(L!==v)return me||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+L+'", trying default CDN. '+ce.message),me=!0),L=v,E.delete(D),H(D);throw ce}),E.set(D,Y)),Y}for(var J=function(D){var Y=A.codePointAt(D),ce=s(Y);de[D]=ce,d[ce]||ae.has(ce)||ae.set(ce,H(ce).then(function(Q){d[ce]=Q})),Y>65535&&(D++,j=D)},j=0;j<A.length;j++)J(j);return Promise.all(ae.values()).then(function(){ae.clear();for(var D=function(ce){var Q=A.codePointAt(ce),re=null,pe=d[de[ce]],$=void 0;for(var ie in pe){var Te=ne[ie];if(Te===void 0&&(Te=ne[ie]=new RegExp(ie).test(N||"en")),Te){for(var Ce in $=ie,pe[ie])if(a(Q,pe[ie][Ce])){re=Ce;break}break}}if(!re){e:for(var Pe in pe)if(Pe!==$){for(var Ie in pe[Pe])if(a(Q,pe[Pe][Ie])){re=Ie;break e}}}re||(console.debug("No font coverage for U+"+Q.toString(16)),re="latin"),de[ce]=re,p[re]||ae.has(re)||ae.set(re,H("font-meta/"+re+".json").then(function(Qe){p[re]=Qe})),Q>65535&&(ce++,Y=ce)},Y=0;Y<A.length;Y++)D(Y);return Promise.all(ae.values())}).then(function(){for(var D,Y=null,ce=0;ce<A.length;ce++){var Q=A.codePointAt(ce);if(Y&&(T(Q)||y(Y).has(Q)))X[ce]=X[ce-1];else{Y=p[de[ce]];var re=K[Y.id];if(!re){var pe=Y.typeforms,$=M(pe,O,"sans-serif"),ie=M(pe[$],z,"normal"),Te=S((D=pe[$])===null||D===void 0?void 0:D[ie],k);re=K[Y.id]=L+"/font-files/"+Y.id+"/"+$+"."+ie+"."+Te+".woff"}var Ce=W.get(re);Ce==null&&(Ce=W.size,W.set(re,Ce)),X[ce]=Ce}Q>65535&&(ce++,X[ce]=X[ce-1])}return{fontUrls:Array.from(W.keys()),chars:X}})},Object.defineProperty(r,"__esModule",{value:!0}),r}({})}function cU(r,e){const t=Object.create(null),n=Object.create(null);function i(a,l){const c=d=>{console.error(`Failure loading font ${a}`,d)};try{const d=new XMLHttpRequest;d.open("get",a,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status>=400)c(new Error(d.statusText));else if(d.status>0)try{const p=r(d.response);p.src=a,l(p)}catch(p){c(p)}},d.onerror=c,d.send()}catch(d){c(d)}}function s(a,l){let c=t[a];c?l(c):n[a]?n[a].push(l):(n[a]=[l],i(a,d=>{d.src=a,t[a]=d,n[a].forEach(p=>p(d)),delete n[a]}))}return function(a,l,{lang:c,fonts:d=[],style:p="normal",weight:g="normal",unicodeFontsURL:v}={}){const y=new Uint8Array(a.length),w=[];a.length||T();const E=new Map,M=[];if(p!=="italic"&&(p="normal"),typeof g!="number"&&(g=g==="bold"?700:400),d&&!Array.isArray(d)&&(d=[d]),d=d.slice().filter(R=>!R.lang||R.lang.test(c)).reverse(),d.length){let O=0;(function z(k=0){for(let L=k,W=a.length;L<W;L++){const X=a.codePointAt(L);if(O===1&&w[y[L-1]].supportsCodePoint(X)||L>0&&/\s/.test(a[L]))y[L]=y[L-1],O===2&&(M[M.length-1][1]=L);else for(let K=y[L],ne=d.length;K<=ne;K++)if(K===ne){const de=O===2?M[M.length-1]:M[M.length]=[L,L];de[1]=L,O=2}else{y[L]=K;const{src:de,unicodeRange:ae}=d[K];if(!ae||A(X,ae)){const me=t[de];if(!me){s(de,()=>{z(L)});return}if(me.supportsCodePoint(X)){let H=E.get(me);typeof H!="number"&&(H=w.length,w.push(me),E.set(me,H)),y[L]=H,O=1;break}}}X>65535&&L+1<W&&(y[L+1]=y[L],L++,O===2&&(M[M.length-1][1]=L))}S()})()}else M.push([0,a.length-1]),S();function S(){if(M.length){const R=M.map(F=>a.substring(F[0],F[1]+1)).join(`
`);e.getFontsForString(R,{lang:c||void 0,style:p,weight:g,dataUrl:v}).then(({fontUrls:F,chars:N})=>{const O=w.length;let z=0;M.forEach(L=>{for(let W=0,X=L[1]-L[0];W<=X;W++)y[L[0]+W]=N[z++]+O;z++});let k=0;F.forEach((L,W)=>{s(L,X=>{w[W+O]=X,++k===F.length&&T()})})})}else T()}function T(){l({chars:y,fonts:w})}function A(R,F){for(let N=0;N<F.length;N++){const[O,z=O]=F[N];if(O<=R&&R<=z)return!0}return!1}}}const fU=td({name:"FontResolver",dependencies:[cU,lU,uU],init(r,e,t){return r(e,t())}});function dU(r,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",s=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:w,lang:E,fonts:M,style:S,weight:T,preResolvedFonts:A,unicodeFontsURL:R},F){const N=({chars:O,fonts:z})=>{let k,L;const W=[];for(let X=0;X<O.length;X++)O[X]!==L?(L=O[X],W.push(k={start:X,end:X,fontObj:z[O[X]]})):k.end=X;F(W)};A?N(A):r(w,N,{lang:E,fonts:M,style:S,weight:T,unicodeFontsURL:R})}function l({text:w="",font:E,lang:M,sdfGlyphSize:S=64,fontSize:T=400,fontWeight:A=1,fontStyle:R="normal",letterSpacing:F=0,lineHeight:N="normal",maxWidth:O=1/0,direction:z,textAlign:k="left",textIndent:L=0,whiteSpace:W="normal",overflowWrap:X="normal",anchorX:K=0,anchorY:ne=0,metricsOnly:de=!1,unicodeFontsURL:ae,preResolvedFonts:me=null,includeCaretPositions:H=!1,chunkedBoundsSize:J=8192,colorRanges:j=null},D){const Y=g(),ce={fontLoad:0,typesetting:0};w.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),w=w.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,F=+F,O=+O,N=N||"normal",L=+L,a({text:w,lang:M,style:R,weight:A,fonts:typeof E=="string"?[{src:E}]:E,unicodeFontsURL:ae,preResolvedFonts:me},Q=>{ce.fontLoad=g()-Y;const re=isFinite(O);let pe=null,$=null,ie=null,Te=null,Ce=null,Pe=null,Ie=null,Qe=null,ee=0,lt=0,Ae=W!=="nowrap";const Le=new Map,ge=g();let ze=L,_e=0,V=new v;const B=[V];Q.forEach(Je=>{const{fontObj:He}=Je,{ascender:Ke,descender:gt,unitsPerEm:je,lineGap:nt,capHeight:ot,xHeight:it}=He;let Xe=Le.get(He);if(!Xe){const Ve=T/je,Re=N==="normal"?(Ke-gt+nt)*Ve:N*T,Ye=(Re-(Ke-gt)*Ve)/2,et=Math.min(Re,(Ke-gt)*Ve),$e=(Ke+gt)/2*Ve+et/2;Xe={index:Le.size,src:He.src,fontObj:He,fontSizeMult:Ve,unitsPerEm:je,ascender:Ke*Ve,descender:gt*Ve,capHeight:ot*Ve,xHeight:it*Ve,lineHeight:Re,baseline:-Ye-Ke*Ve,caretTop:$e,caretBottom:$e-et},Le.set(He,Xe)}const{fontSizeMult:fe}=Xe,Fe=w.slice(Je.start,Je.end+1);let ut,ue;He.forEachGlyph(Fe,T,F,(Ve,Re,Ye,et)=>{Re+=_e,et+=Je.start,ut=Re,ue=Ve;const $e=w.charAt(et),vt=Ve.advanceWidth*fe,Dt=V.count;let Et;if("isEmpty"in Ve||(Ve.isWhitespace=!!$e&&new RegExp(i).test($e),Ve.canBreakAfter=!!$e&&s.test($e),Ve.isEmpty=Ve.xMin===Ve.xMax||Ve.yMin===Ve.yMax||n.test($e)),!Ve.isWhitespace&&!Ve.isEmpty&&lt++,Ae&&re&&!Ve.isWhitespace&&Re+vt+ze>O&&Dt){if(V.glyphAt(Dt-1).glyphObj.canBreakAfter)Et=new v,ze=-Re;else for(let dn=Dt;dn--;)if(dn===0&&X==="break-word"){Et=new v,ze=-Re;break}else if(V.glyphAt(dn).glyphObj.canBreakAfter){Et=V.splitAt(dn+1);const hn=Et.glyphAt(0).x;ze-=hn;for(let Rn=Et.count;Rn--;)Et.glyphAt(Rn).x-=hn;break}Et&&(V.isSoftWrapped=!0,V=Et,B.push(V),ee=O)}let Ct=V.glyphAt(V.count);Ct.glyphObj=Ve,Ct.x=Re+ze,Ct.y=Ye,Ct.width=vt,Ct.charIndex=et,Ct.fontData=Xe,$e===`
`&&(V=new v,B.push(V),ze=-(Re+vt+F*T)+L)}),_e=ut+ue.advanceWidth*fe+F*T});let oe=0;B.forEach(Je=>{let He=!0;for(let Ke=Je.count;Ke--;){const gt=Je.glyphAt(Ke);He&&!gt.glyphObj.isWhitespace&&(Je.width=gt.x+gt.width,Je.width>ee&&(ee=Je.width),He=!1);let{lineHeight:je,capHeight:nt,xHeight:ot,baseline:it}=gt.fontData;je>Je.lineHeight&&(Je.lineHeight=je);const Xe=it-Je.baseline;Xe<0&&(Je.baseline+=Xe,Je.cap+=Xe,Je.ex+=Xe),Je.cap=Math.max(Je.cap,Je.baseline+nt),Je.ex=Math.max(Je.ex,Je.baseline+ot)}Je.baseline-=oe,Je.cap-=oe,Je.ex-=oe,oe+=Je.lineHeight});let ye=0,Se=0;if(K&&(typeof K=="number"?ye=-K:typeof K=="string"&&(ye=-ee*(K==="left"?0:K==="center"?.5:K==="right"?1:d(K)))),ne&&(typeof ne=="number"?Se=-ne:typeof ne=="string"&&(Se=ne==="top"?0:ne==="top-baseline"?-B[0].baseline:ne==="top-cap"?-B[0].cap:ne==="top-ex"?-B[0].ex:ne==="middle"?oe/2:ne==="bottom"?oe:ne==="bottom-baseline"?-B[B.length-1].baseline:d(ne)*oe)),!de){const Je=e.getEmbeddingLevels(w,z);pe=new Uint16Array(lt),$=new Uint8Array(lt),ie=new Float32Array(lt*2),Te={},Ie=[1/0,1/0,-1/0,-1/0],Qe=[],H&&(Pe=new Float32Array(w.length*4)),j&&(Ce=new Uint8Array(lt*3));let He=0,Ke=-1,gt=-1,je,nt;if(B.forEach((ot,it)=>{let{count:Xe,width:fe}=ot;if(Xe>0){let Fe=0;for(let et=Xe;et--&&ot.glyphAt(et).glyphObj.isWhitespace;)Fe++;let ut=0,ue=0;if(k==="center")ut=(ee-fe)/2;else if(k==="right")ut=ee-fe;else if(k==="justify"&&ot.isSoftWrapped){let et=0;for(let $e=Xe-Fe;$e--;)ot.glyphAt($e).glyphObj.isWhitespace&&et++;ue=(ee-fe)/et}if(ue||ut){let et=0;for(let $e=0;$e<Xe;$e++){let vt=ot.glyphAt($e);const Dt=vt.glyphObj;vt.x+=ut+et,ue!==0&&Dt.isWhitespace&&$e<Xe-Fe&&(et+=ue,vt.width+=ue)}}const Ve=e.getReorderSegments(w,Je,ot.glyphAt(0).charIndex,ot.glyphAt(ot.count-1).charIndex);for(let et=0;et<Ve.length;et++){const[$e,vt]=Ve[et];let Dt=1/0,Et=-1/0;for(let Ct=0;Ct<Xe;Ct++)if(ot.glyphAt(Ct).charIndex>=$e){let dn=Ct,hn=Ct;for(;hn<Xe;hn++){let Rn=ot.glyphAt(hn);if(Rn.charIndex>vt)break;hn<Xe-Fe&&(Dt=Math.min(Dt,Rn.x),Et=Math.max(Et,Rn.x+Rn.width))}for(let Rn=dn;Rn<hn;Rn++){const si=ot.glyphAt(Rn);si.x=Et-(si.x+si.width-Dt)}break}}let Re;const Ye=et=>Re=et;for(let et=0;et<Xe;et++){const $e=ot.glyphAt(et);Re=$e.glyphObj;const vt=Re.index,Dt=Je.levels[$e.charIndex]&1;if(Dt){const Et=e.getMirroredCharacter(w[$e.charIndex]);Et&&$e.fontData.fontObj.forEachGlyph(Et,0,0,Ye)}if(H){const{charIndex:Et,fontData:Ct}=$e,dn=$e.x+ye,hn=$e.x+$e.width+ye;Pe[Et*4]=Dt?hn:dn,Pe[Et*4+1]=Dt?dn:hn,Pe[Et*4+2]=ot.baseline+Ct.caretBottom+Se,Pe[Et*4+3]=ot.baseline+Ct.caretTop+Se;const Rn=Et-Ke;Rn>1&&p(Pe,Ke,Rn),Ke=Et}if(j){const{charIndex:Et}=$e;for(;Et>gt;)gt++,j.hasOwnProperty(gt)&&(nt=j[gt])}if(!Re.isWhitespace&&!Re.isEmpty){const Et=He++,{fontSizeMult:Ct,src:dn,index:hn}=$e.fontData,Rn=Te[dn]||(Te[dn]={});Rn[vt]||(Rn[vt]={path:Re.path,pathBounds:[Re.xMin,Re.yMin,Re.xMax,Re.yMax]});const si=$e.x+ye,hi=$e.y+ot.baseline+Se;ie[Et*2]=si,ie[Et*2+1]=hi;const Jn=si+Re.xMin*Ct,ji=hi+Re.yMin*Ct,pi=si+Re.xMax*Ct,wi=hi+Re.yMax*Ct;Jn<Ie[0]&&(Ie[0]=Jn),ji<Ie[1]&&(Ie[1]=ji),pi>Ie[2]&&(Ie[2]=pi),wi>Ie[3]&&(Ie[3]=wi),Et%J===0&&(je={start:Et,end:Et,rect:[1/0,1/0,-1/0,-1/0]},Qe.push(je)),je.end++;const oi=je.rect;if(Jn<oi[0]&&(oi[0]=Jn),ji<oi[1]&&(oi[1]=ji),pi>oi[2]&&(oi[2]=pi),wi>oi[3]&&(oi[3]=wi),pe[Et]=vt,$[Et]=hn,j){const hr=Et*3;Ce[hr]=nt>>16&255,Ce[hr+1]=nt>>8&255,Ce[hr+2]=nt&255}}}}}),Pe){const ot=w.length-Ke;ot>1&&p(Pe,Ke,ot)}}const ke=[];Le.forEach(({index:Je,src:He,unitsPerEm:Ke,ascender:gt,descender:je,lineHeight:nt,capHeight:ot,xHeight:it})=>{ke[Je]={src:He,unitsPerEm:Ke,ascender:gt,descender:je,lineHeight:nt,capHeight:ot,xHeight:it}}),ce.typesetting=g()-ge,D({glyphIds:pe,glyphFontIndices:$,glyphPositions:ie,glyphData:Te,fontData:ke,caretPositions:Pe,glyphColors:Ce,chunkedBounds:Qe,fontSize:T,topBaseline:Se+B[0].baseline,blockBounds:[ye,Se-oe,ye+ee,Se],visibleBounds:Ie,timings:ce})})}function c(w,E){l({...w,metricsOnly:!0},M=>{const[S,T,A,R]=M.blockBounds;E({width:A-S,height:R-T})})}function d(w){let E=w.match(/^([\d.]+)%$/),M=E?parseFloat(E[1]):NaN;return isNaN(M)?0:M/100}function p(w,E,M){const S=w[E*4],T=w[E*4+1],A=w[E*4+2],R=w[E*4+3],F=(T-S)/M;for(let N=0;N<M;N++){const O=(E+N)*4;w[O]=S+F*N,w[O+1]=S+F*(N+1),w[O+2]=A,w[O+3]=R}}function g(){return(self.performance||Date).now()}function v(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return v.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(w){let E=v.flyweight;return E.data=this.data,E.index=w,E},splitAt(w){let E=new v;return E.data=this.data.splice(w*y.length),E}},v.flyweight=y.reduce((w,E,M,S)=>(Object.defineProperty(w,E,{get(){return this.data[this.index*y.length+M]},set(T){this.data[this.index*y.length+M]=T}}),w),{data:null,index:0}),{typeset:l,measure:c}}const lc=()=>(self.performance||Date).now(),iv=tb();let Jw;function hU(r,e,t,n,i,s,a,l,c,d,p=!0){return p?mU(r,e,t,n,i,s,a,l,c,d).then(null,g=>(Jw||(console.warn("WebGL SDF generation failed, falling back to JS",g),Jw=!0),Kw(r,e,t,n,i,s,a,l,c,d))):Kw(r,e,t,n,i,s,a,l,c,d)}const xg=[],pU=5;let wx=0;function ib(){const r=lc();for(;xg.length&&lc()-r<pU;)xg.shift()();wx=xg.length?setTimeout(ib,0):0}const mU=(...r)=>new Promise((e,t)=>{xg.push(()=>{const n=lc();try{iv.webgl.generateIntoCanvas(...r),e({timing:lc()-n})}catch(i){t(i)}}),wx||(wx=setTimeout(ib,0))}),gU=4,vU=2e3,Zw={};let yU=0;function Kw(r,e,t,n,i,s,a,l,c,d){const p="TroikaTextSDFGenerator_JS_"+yU++%gU;let g=Zw[p];return g||(g=Zw[p]={workerModule:td({name:p,workerId:p,dependencies:[tb,lc],init(v,y){const w=v().javascript.generate;return function(...E){const M=y();return{textureData:w(...E),timing:y()-M}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(r,e,t,n,i,s).then(({textureData:v,timing:y})=>{const w=lc(),E=new Uint8Array(v.length*4);for(let M=0;M<v.length;M++)E[M*4+d]=v[M];return iv.webglUtils.renderImageData(a,E,l,c,r,e,1<<3-d),y+=lc()-w,--g.requests===0&&(g.idleTimer=setTimeout(()=>{JN(p)},vU)),{timing:y}})}function xU(r){r._warm||(iv.webgl.isSupported(r),r._warm=!0)}const _U=iv.webglUtils.resizeWebGLCanvasWithoutClearing,kf={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},SU=new wt;function Pf(){return(self.performance||Date).now()}const Qw=Object.create(null);function rb(r,e){r=EU({},r);const t=Pf(),{defaultFontURL:n}=kf,i=[];if(n&&i.push({label:"default",src:$w(n)}),r.font&&i.push({label:"user",src:$w(r.font)}),r.font=i,r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||kf.sdfGlyphSize,r.unicodeFontsURL=r.unicodeFontsURL||kf.unicodeFontsURL,r.colorRanges!=null){let y={};for(let w in r.colorRanges)if(r.colorRanges.hasOwnProperty(w)){let E=r.colorRanges[w];typeof E!="number"&&(E=SU.set(E).getHex()),y[w]=E}r.colorRanges=y}Object.freeze(r);const{textureWidth:s,sdfExponent:a}=kf,{sdfGlyphSize:l}=r,c=s/l*4;let d=Qw[l];if(!d){const y=document.createElement("canvas");y.width=s,y.height=l*256/c,d=Qw[l]={glyphCount:0,sdfGlyphSize:l,sdfCanvas:y,sdfTexture:new ri(y,void 0,void 0,void 0,Si,Si),contextLost:!1,glyphsByFont:new Map},d.sdfTexture.generateMipmaps=!1,wU(d)}const{sdfTexture:p,sdfCanvas:g}=d;ab(r).then(y=>{const{glyphIds:w,glyphFontIndices:E,fontData:M,glyphPositions:S,fontSize:T,timings:A}=y,R=[],F=new Float32Array(w.length*4);let N=0,O=0;const z=Pf(),k=M.map(ne=>{let de=d.glyphsByFont.get(ne.src);return de||d.glyphsByFont.set(ne.src,de=new Map),de});w.forEach((ne,de)=>{const ae=E[de],{src:me,unitsPerEm:H}=M[ae];let J=k[ae].get(ne);if(!J){const{path:Q,pathBounds:re}=y.glyphData[me][ne],pe=Math.max(re[2]-re[0],re[3]-re[1])/l*(kf.sdfMargin*l+.5),$=d.glyphCount++,ie=[re[0]-pe,re[1]-pe,re[2]+pe,re[3]+pe];k[ae].set(ne,J={path:Q,atlasIndex:$,sdfViewBox:ie}),R.push(J)}const{sdfViewBox:j}=J,D=S[O++],Y=S[O++],ce=T/H;F[N++]=D+j[0]*ce,F[N++]=Y+j[1]*ce,F[N++]=D+j[2]*ce,F[N++]=Y+j[3]*ce,w[de]=J.atlasIndex}),A.quads=(A.quads||0)+(Pf()-z);const L=Pf();A.sdf={};const W=g.height,X=Math.ceil(d.glyphCount/c),K=Math.pow(2,Math.ceil(Math.log2(X*l)));K>W&&(console.info(`Increasing SDF texture size ${W}->${K}`),_U(g,s,K),p.dispose()),Promise.all(R.map(ne=>sb(ne,d,r.gpuAccelerateSDF).then(({timing:de})=>{A.sdf[ne.atlasIndex]=de}))).then(()=>{R.length&&!d.contextLost&&(ob(d),p.needsUpdate=!0),A.sdfTotal=Pf()-L,A.total=Pf()-t,e(Object.freeze({parameters:r,sdfTexture:p,sdfGlyphSize:l,sdfExponent:a,glyphBounds:F,glyphAtlasIndices:w,glyphColors:y.glyphColors,caretPositions:y.caretPositions,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{d.contextLost||xU(g)})}function sb({path:r,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:i,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:c}=kf,d=Math.max(t[2]-t[0],t[3]-t[1]),p=Math.floor(e/4),g=p%(l/n)*n,v=Math.floor(p/(l/n))*n,y=e%4;return hU(n,n,r,t,d,c,i,g,v,y,a)}function wU(r){const e=r.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),r.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),r.contextLost=!1;const n=[];r.glyphsByFont.forEach(i=>{i.forEach(s=>{n.push(sb(s,r,!0))})}),Promise.all(n).then(()=>{ob(r),r.sdfTexture.needsUpdate=!0})})}function MU({font:r,characters:e,sdfGlyphSize:t},n){let i=Array.isArray(e)?e.join(`
`):""+e;rb({font:r,sdfGlyphSize:t,text:i},n)}function EU(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}let cg;function $w(r){return cg||(cg=typeof document>"u"?{}:document.createElement("a")),cg.href=r,cg.href}function ob(r){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=r,{width:n,height:i}=e,s=r.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==n*i*4)&&(a=new Uint8Array(n*i*4),t.image={width:n,height:i,data:a},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,n,i,s.RGBA,s.UNSIGNED_BYTE,a)}}const bU=td({name:"Typesetter",dependencies:[dU,fU,KN],init(r,e,t){return r(e,t())}}),ab=td({name:"Typesetter",dependencies:[bU],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[];for(let t in r)r[t]&&r[t].buffer&&e.push(r[t].buffer);return e}});ab.onMainThread;const eM={};function TU(r){let e=eM[r];return e||(e=eM[r]=new tl(1,1,r,r).translate(.5,.5,0)),e}const AU="aTroikaGlyphBounds",tM="aTroikaGlyphIndex",CU="aTroikaGlyphColor";class RU extends s_{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new dr,this.boundingBox=new fr}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=TU(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,i,s){this.updateAttributeData(AU,e,4),this.updateAttributeData(tM,t,1),this.updateAttributeData(CU,s,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:i,floor:s,min:a,max:l,sin:c,cos:d}=Math,p=i/2,g=i*2,v=Math.abs(t),y=e[0]/v,w=e[2]/v,E=s((y+p)/g)!==s((w+p)/g)?-v:a(c(y)*v,c(w)*v),M=s((y-p)/g)!==s((w-p)/g)?v:l(c(y)*v,c(w)*v),S=s((y+i)/g)!==s((w+i)/g)?v*2:l(v-d(y)*v,v-d(w)*v);n.min.set(E,e[1],t<0?-S:0),n.max.set(M,e[3],t<0?0:S)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(tM).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){t=n[i].end;let s=n[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const i=this.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(this.setAttribute(e,new dc(t,n)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const PU=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,IU=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,LU=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,DU=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function kU(r){const e=Sx(r,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ze},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new vn(0,0,0,0)},uTroikaClipRect:{value:new vn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ze},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new wt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Qt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:PU,vertexTransform:IU,fragmentDefs:LU,fragmentColorTransform:DU,customRewriter({vertexShader:t,fragmentShader:n}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(nb,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const P_=new el({color:16777215,side:Mo,transparent:!0}),nM=8421504,iM=new Wt,fg=new te,Wy=new te,fh=[],NU=new te,jy="+x+y";function rM(r){return Array.isArray(r)?r[0]:r}let lb=()=>{const r=new ii(new tl(1,1),P_);return lb=()=>r,r},ub=()=>{const r=new ii(new tl(1,1,32,1),P_);return ub=()=>r,r};const UU={type:"syncstart"},FU={type:"synccomplete"},cb=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],OU=cb.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let fb=class extends ii{constructor(){const e=new RU;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=nM,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=jy,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(UU),rb({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(i=>i&&i())})),this.dispatchEvent(FU),e&&e()})))}onBeforeRender(e,t,n,i,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return kU(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=P_.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return rM(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return rM(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:l,blockBounds:c}=i;n.uTroikaSDFTexture.value=l,n.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(c),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let d=0,p=0,g=0,v,y,w,E=0,M=0;if(t){let{outlineWidth:T,outlineOffsetX:A,outlineOffsetY:R,outlineBlur:F,outlineOpacity:N}=this;d=this._parsePercent(T)||0,p=Math.max(0,this._parsePercent(F)||0),v=N,E=this._parsePercent(A)||0,M=this._parsePercent(R)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(w=this.strokeColor,n.uTroikaStrokeColor.value.set(w??nM),y=this.strokeOpacity,y==null&&(y=1)),v=this.fillOpacity;n.uTroikaEdgeOffset.value=d,n.uTroikaPositionOffset.value.set(E,M),n.uTroikaBlurRadius.value=p,n.uTroikaStrokeWidth.value=g,n.uTroikaStrokeOpacity.value=y,n.uTroikaFillOpacity.value=v??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let S=this.clipRect;if(S&&Array.isArray(S)&&S.length===4)n.uTroikaClipRect.value.fromArray(S);else{const T=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(c[0]-T,c[1]-T,c[2]+T,c[3]+T)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new wt;(s!==l._input||typeof s=="object")&&l.set(l._input=s)}let a=this.orientation||jy;if(a!==e._orientation){let l=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let c=a!==jy&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,d,p,g,v]=c;fg.set(0,0,0)[p]=d==="-"?1:-1,Wy.set(0,0,0)[v]=g==="-"?-1:1,iM.lookAt(NU,fg.cross(Wy),Wy),l.setFromMatrix4(iM)}else l.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ze){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new Ze){return fg.copy(e),this.localPositionToTextCoords(this.worldToLocal(fg),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:i}=this;if(n){const s=n.blockBounds,a=i?ub():lb(),l=a.geometry,{position:c,uv:d}=l.attributes;for(let p=0;p<d.count;p++){let g=s[0]+d.getX(p)*(s[2]-s[0]);const v=s[1]+d.getY(p)*(s[3]-s[1]);let y=0;i&&(y=i-Math.cos(g/i)*i,g=Math.sin(g/i)*i),c.setXYZ(p,g,v,y)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,fh.length=0,a.raycast(e,fh);for(let p=0;p<fh.length;p++)fh[p].object=this,t.push(fh[p])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,OU.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};cb.forEach(r=>{const e="_private_"+r;Object.defineProperty(fb.prototype,r,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new fr;new wt;const BU=We.forwardRef(({sdfGlyphSize:r=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:i=1,children:s,characters:a,onSync:l,...c},d)=>{const p=Va(({invalidate:w})=>w),[g]=We.useState(()=>new fb),[v,y]=We.useMemo(()=>{const w=[];let E="";return We.Children.forEach(s,M=>{typeof M=="string"||typeof M=="number"?E+=M:w.push(M)}),[w,E]},[s]);return RD(()=>new Promise(w=>MU({font:n,characters:a},w)),["troika-text",n,a]),We.useLayoutEffect(()=>void g.sync(()=>{p(),l&&l(g)})),We.useEffect(()=>()=>g.dispose(),[g]),We.createElement("primitive",o0({object:g,ref:d,font:n,text:y,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:r},c),v)}),zU=We.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:l,onEnd:c,...d},p)=>{const g=Va(N=>N.invalidate),v=Va(N=>N.camera),y=Va(N=>N.gl),w=Va(N=>N.events),E=Va(N=>N.setEvents),M=Va(N=>N.set),S=Va(N=>N.get),T=Va(N=>N.performance),A=e||v,R=n||w.connected||y.domElement,F=We.useMemo(()=>new WN(A),[A]);return gE(()=>{F.enabled&&F.update()},-1),We.useEffect(()=>(s&&F.connect(s===!0?R:s),F.connect(R),()=>void F.dispose()),[s,R,t,F,g]),We.useEffect(()=>{const N=k=>{g(),t&&T.regress(),a&&a(k)},O=k=>{l&&l(k)},z=k=>{c&&c(k)};return F.addEventListener("change",N),F.addEventListener("start",O),F.addEventListener("end",z),()=>{F.removeEventListener("start",O),F.removeEventListener("end",z),F.removeEventListener("change",N)}},[a,l,c,F,g,E]),We.useEffect(()=>{if(r){const N=S().controls;return M({controls:F}),()=>M({controls:N})}},[r,F]),We.createElement("primitive",o0({ref:p,object:F,enableDamping:i},d))}),If=({position:r,rotation:e,color:t,text:n,scale:i=[.9,.9,.01]})=>Z.jsxs("group",{position:r,rotation:e,children:[Z.jsxs("mesh",{children:[Z.jsx("boxGeometry",{args:i}),Z.jsx("meshStandardMaterial",{color:t,roughness:.3,metalness:.2})]}),Z.jsx(BU,{position:[0,0,.01],fontSize:.15,color:"#ffffff",anchorX:"center",anchorY:"middle",maxWidth:.8,textAlign:"center",font:"Arial",children:n})]}),VU=({skillCategories:r,autoRotate:e})=>{const t=We.useRef(),[n,i]=We.useState(!1),{rotation:s}=IN({rotation:n?[0,Math.PI,0]:[0,0,0],config:{mass:10,tension:200,friction:50}});gE((c,d)=>{e&&t.current&&(t.current.rotation.y+=d*.2,t.current.rotation.x+=d*.05)});const a=["#4F46E5","#2563EB","#0EA5E9","#06B6D4","#10B981","#6366F1"],l=r.slice(0,6).length===6?r.slice(0,6):[...r.slice(0,6),...Array(6-r.slice(0,6).length).fill({category:"Skills",skills:["React","Node.js","JavaScript"]})];return Z.jsxs(UN.group,{ref:t,rotation:s,onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),children:[Z.jsx(If,{position:[0,1,0],rotation:[-Math.PI/2,0,0],color:a[0],text:`${l[0].category}
${l[0].skills.slice(0,3).join(", ")}`}),Z.jsx(If,{position:[0,-1,0],rotation:[Math.PI/2,0,0],color:a[1],text:`${l[1].category}
${l[1].skills.slice(0,3).join(", ")}`}),Z.jsx(If,{position:[0,0,1],rotation:[0,0,0],color:a[2],text:`${l[2].category}
${l[2].skills.slice(0,3).join(", ")}`}),Z.jsx(If,{position:[0,0,-1],rotation:[0,Math.PI,0],color:a[3],text:`${l[3].category}
${l[3].skills.slice(0,3).join(", ")}`}),Z.jsx(If,{position:[1,0,0],rotation:[0,Math.PI/2,0],color:a[4],text:`${l[4].category}
${l[4].skills.slice(0,3).join(", ")}`}),Z.jsx(If,{position:[-1,0,0],rotation:[0,-Math.PI/2,0],color:a[5],text:`${l[5].category}
${l[5].skills.slice(0,3).join(", ")}`})]})},HU=({skillCategories:r,isDarkMode:e})=>{const[t,n]=We.useState(!0);return Z.jsx("div",{className:`w-full h-[400px] md:h-[500px] rounded-lg overflow-hidden ${e?"bg-gray-900":"bg-gray-100"}`,children:Z.jsxs(_k,{camera:{position:[0,0,5],fov:45},children:[Z.jsx("ambientLight",{intensity:.5}),Z.jsx("pointLight",{position:[10,10,10],intensity:1}),Z.jsx(VU,{skillCategories:r,autoRotate:t}),Z.jsx(zU,{enableZoom:!1,enablePan:!1,onStart:()=>n(!1),onEnd:()=>n(!0)})]})})},GU=({isDarkMode:r})=>{const e=[{category:"Programming",skills:["Java","J2EE","Python",".Net","C","C#","C++","Rust","Bash","PowerShell"],gradient:"from-blue-500 to-cyan-400"},{category:"Java APIs",skills:["EJB","J2EE","JSP","JSTL","Custom Tag Libraries","JAX-RS","JDBC","Servlets","JNDI","JMS","JAXB","JUnit","Spring MVC","Spring Boot"],gradient:"from-indigo-500 to-purple-500"},{category:"Cloud Platforms",skills:["AWS (EC2, S3, Lambda, SQS, RDS, EKS, DynamoDB)","Azure (VMs, VNet, Azure AD, AKS)","GCP"],gradient:"from-cyan-500 to-emerald-500"},{category:"Frameworks",skills:["MEAN Stack","MERN Stack","Express","React","Vue","Angular"],gradient:"from-pink-500 to-rose-500"},{category:"Web Technologies",skills:["HTML/HTML5","CSS/CSS3","Bootstrap","JSP","Ajax","XML","JSON","NodeJS","ReactJS"],gradient:"from-amber-500 to-orange-500"},{category:"Databases",skills:["Azure SQL","MySQL","PostgreSQL","MongoDB","Cassandra","Oracle","Cosmos DB"],gradient:"from-emerald-500 to-teal-500"},{category:"Deployment Tools",skills:["Azure DevOps","Jenkins","Docker","Kubernetes","Terraform","Bamboo","Git","Maven","Gradle"],gradient:"from-violet-500 to-purple-500"},{category:"Testing & QA",skills:["JUnit","Mockito","PyTest","Postman","Selenium","Rest-Assured","TestNG","Cucumber"],gradient:"from-sky-500 to-indigo-500"}];return Z.jsxs("section",{id:"skills",className:`pt-1 pb-12 md:pt-1 md:pb-20 px-4 relative ${r?"bg-black":"bg-white"}`,children:[Z.jsx("div",{className:`absolute inset-0 ${r?"bg-black":"bg-white"} opacity-90`}),Z.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:Z.jsxs(Jl,{children:[Z.jsx("h2",{className:"text-5xl md:text-7xl font-bold mb-3 text-center",children:Z.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"Skills"})}),Z.jsx("p",{className:`text-center ${r?"text-gray-300":"text-gray-600"} text-lg mb-10 md:mb-16 max-w-3xl mx-auto`,children:"Expertise across various technologies and frameworks to build robust, scalable applications"}),Z.jsx("div",{className:"mb-16",children:Z.jsx(HU,{skillCategories:e,isDarkMode:r})}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t,n)=>Z.jsxs("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg p-6 shadow-lg border hover:shadow-xl transition-all duration-300 h-full`,children:[Z.jsx("h3",{className:`text-xl md:text-2xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r ${t.gradient} border-b ${r?"border-gray-700":"border-gray-200"} pb-2`,children:t.category}),Z.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills.map((i,s)=>Z.jsx("span",{className:`${r?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-800"} py-1 px-3 text-sm rounded-full mb-2 font-medium`,children:i},s))})]},n))})]})})]})};class _p{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const WU=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},ur={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:WU()},I_=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},jU=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=I_(r);ur.publicKey=t.publicKey,ur.blockHeadless=t.blockHeadless,ur.storageProvider=t.storageProvider,ur.blockList=t.blockList,ur.limitRate=t.limitRate,ur.origin=t.origin||e},db=async(r,e,t={})=>{const n=await fetch(ur.origin+r,{method:"POST",headers:t,body:e}),i=await n.text(),s=new _p(n.status,i);if(n.ok)return s;throw s},hb=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},XU=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},pb=r=>r.webdriver||!r.languages||r.languages.length===0,mb=()=>new _p(451,"Unavailable For Headless Browser"),YU=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},qU=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},JU=(r,e)=>r instanceof FormData?r.get(e):r[e],gb=(r,e)=>{if(qU(r))return!1;YU(r.list,r.watchVariable);const t=JU(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},vb=()=>new _p(403,"Forbidden"),ZU=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},KU=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},yb=async(r,e,t)=>{if(!e.throttle||!t)return!1;ZU(e.throttle,e.id);const n=e.id||r;return await KU(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},xb=()=>new _p(429,"Too Many Requests"),QU=async(r,e,t,n)=>{const i=I_(n),s=i.publicKey||ur.publicKey,a=i.blockHeadless||ur.blockHeadless,l=i.storageProvider||ur.storageProvider,c={...ur.blockList,...i.blockList},d={...ur.limitRate,...i.limitRate};return a&&pb(navigator)?Promise.reject(mb()):(hb(s,r,e),XU(t),t&&gb(c,t)?Promise.reject(vb()):await yb(location.pathname,d,l)?Promise.reject(xb()):db("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},$U=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},e4=r=>typeof r=="string"?document.querySelector(r):r,t4=async(r,e,t,n)=>{const i=I_(n),s=i.publicKey||ur.publicKey,a=i.blockHeadless||ur.blockHeadless,l=ur.storageProvider||i.storageProvider,c={...ur.blockList,...i.blockList},d={...ur.limitRate,...i.limitRate};if(a&&pb(navigator))return Promise.reject(mb());const p=e4(t);hb(s,r,e),$U(p);const g=new FormData(p);return gb(c,g)?Promise.reject(vb()):await yb(location.pathname,d,l)?Promise.reject(xb()):(g.append("lib_version","4.4.1"),g.append("service_id",r),g.append("template_id",e),g.append("user_id",s),db("/api/v1.0/email/send-form",g))},p0={init:jU,send:QU,sendForm:t4,EmailJSResponseStatus:_p},n4=({isDarkMode:r})=>{const[e,t]=We.useState({name:"",email:"",message:""}),[n,i]=We.useState({name:"",email:"",message:""}),[s,a]=We.useState(!1),[l,c]=We.useState(!1),[d,p]=We.useState(!1),[g,v]=We.useState({name:!1,email:!1,message:!1});We.useEffect(()=>{p0.init("BHFgnAR4gXKiisD-X")},[]);const y=(T,A)=>{let R="";switch(T){case"name":A.trim()?A.trim().length<2&&(R="Name must be at least 2 characters"):R="Name is required";break;case"email":A.trim()?/^\S+@\S+\.\S+$/.test(A)||(R="Please enter a valid email address"):R="Email is required";break;case"message":A.trim()?A.trim().length<10&&(R="Message must be at least 10 characters"):R="Message is required";break}return R},w=T=>{const{name:A,value:R}=T.target;t({...e,[A]:R}),g[A]&&i({...n,[A]:y(A,R)})},E=T=>{const{name:A,value:R}=T.target;v({...g,[A]:!0}),i({...n,[A]:y(A,R)})},M=()=>{const T={name:y("name",e.name),email:y("email",e.email),message:y("message",e.message)};return i(T),!Object.values(T).some(A=>A)},S=T=>{T.preventDefault(),v({name:!0,email:!0,message:!0}),M()&&(a(!0),p(!1),p0.send("service_m9huo7g","template_l3u2eq3",{name:e.name,email:e.email,subject:"Contact from Portfolio",message:e.message}).then(A=>{console.log("Email successfully sent!",A),a(!1),c(!0),t({name:"",email:"",message:""}),v({name:!1,email:!1,message:!1}),setTimeout(()=>{c(!1)},5e3)}).catch(A=>{console.error("Failed to send email:",A),a(!1),p(!0),setTimeout(()=>{p(!1)},5e3)}))};return Z.jsxs("section",{id:"contact",className:`pt-1 pb-16 md:pt-1 md:pb-24 px-4 relative ${r?"bg-black":"bg-white"}`,children:[Z.jsx("div",{className:`absolute inset-0 ${r?"bg-black":"bg-white"} opacity-100`}),Z.jsx("div",{className:"max-w-5xl mx-auto relative z-10",children:Z.jsxs(Jl,{children:[Z.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-3 text-center",children:Z.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-purple-600",children:"Get In Touch"})}),Z.jsx("p",{className:`text-center ${r?"text-gray-300":"text-gray-600"} text-lg mb-12 max-w-3xl mx-auto`,children:"Have a project in mind or want to discuss opportunities? I'd love to hear from you!"}),Z.jsx("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl p-6 md:p-8 shadow-xl border`,children:Z.jsxs("div",{className:"flex flex-col md:flex-row gap-10",children:[Z.jsxs("div",{className:"md:w-2/5",children:[Z.jsx("h3",{className:"text-xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-purple-600",children:"Contact Information"}),Z.jsx("div",{className:"space-y-6",children:Z.jsx("div",{className:`rounded-lg p-5 ${r?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} border transition-all hover:shadow-md`,children:Z.jsxs("div",{className:"flex items-start",children:[Z.jsx("div",{className:"text-cyan-500 mt-1 mr-4",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Z.jsx("path",{d:"M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"})})}),Z.jsxs("div",{children:[Z.jsx("h4",{className:`text-sm font-semibold ${r?"text-gray-300":"text-gray-700"} mb-1`,children:"Email"}),Z.jsx("a",{href:"mailto:deepakreddyiic1234@gmail.com",className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-blue-600 font-medium hover:underline transition-colors","aria-label":"Send email to Deepak",children:"deepakreddyiic1234@gmail.com"})]})]})})})]}),Z.jsxs("div",{className:"md:w-3/5",children:[Z.jsx("h3",{className:"text-xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-purple-600",children:"Send Me a Message"}),Z.jsxs("form",{onSubmit:S,noValidate:!0,"aria-label":"Contact form",children:[Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[Z.jsxs("div",{children:[Z.jsxs("label",{htmlFor:"name",className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-1`,children:["Name ",Z.jsx("span",{className:"text-red-500",children:"*"})]}),Z.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:w,onBlur:E,"aria-invalid":n.name?"true":"false","aria-describedby":n.name?"name-error":void 0,className:`w-full px-4 py-2.5 ${r?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300 text-gray-800"} border rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-colors ${n.name&&g.name?"border-red-500":""}`,required:!0}),n.name&&g.name&&Z.jsx("p",{id:"name-error",className:"mt-1 text-red-500 text-xs",children:n.name})]}),Z.jsxs("div",{children:[Z.jsxs("label",{htmlFor:"email",className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-1`,children:["Email ",Z.jsx("span",{className:"text-red-500",children:"*"})]}),Z.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:w,onBlur:E,"aria-invalid":n.email?"true":"false","aria-describedby":n.email?"email-error":void 0,className:`w-full px-4 py-2.5 ${r?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300 text-gray-800"} border rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-colors ${n.email&&g.email?"border-red-500":""}`,required:!0}),n.email&&g.email&&Z.jsx("p",{id:"email-error",className:"mt-1 text-red-500 text-xs",children:n.email})]})]}),Z.jsxs("div",{className:"mt-5",children:[Z.jsxs("label",{htmlFor:"message",className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-1`,children:["Message ",Z.jsx("span",{className:"text-red-500",children:"*"})]}),Z.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:w,onBlur:E,rows:"5","aria-invalid":n.message?"true":"false","aria-describedby":n.message?"message-error":void 0,className:`w-full px-4 py-2.5 ${r?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300 text-gray-800"} border rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-colors resize-none ${n.message&&g.message?"border-red-500":""}`,required:!0}),n.message&&g.message&&Z.jsx("p",{id:"message-error",className:"mt-1 text-red-500 text-xs",children:n.message})]}),Z.jsxs("div",{className:"mt-6",children:[Z.jsx("button",{type:"submit",disabled:s,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-medium rounded-md hover:from-cyan-600 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 disabled:opacity-70 transition-colors duration-300 shadow-md hover:shadow-lg","aria-label":"Send message",children:s?Z.jsxs("span",{className:"flex items-center",children:[Z.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Z.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Z.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Message"}),l&&Z.jsxs("div",{className:"mt-4 p-3 bg-green-100 border border-green-300 text-green-800 rounded-md flex items-start",role:"alert","aria-live":"polite",children:[Z.jsx("svg",{className:"h-5 w-5 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Z.jsx("span",{children:"Your message has been sent successfully! I'll get back to you soon."})]}),d&&Z.jsxs("div",{className:"mt-4 p-3 bg-red-100 border border-red-300 text-red-800 rounded-md flex items-start",role:"alert","aria-live":"polite",children:[Z.jsx("svg",{className:"h-5 w-5 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Z.jsx("span",{children:"There was an error sending your message. Please try again or email me directly."})]})]})]})]})]})})]})})]})},i4=({isDarkMode:r})=>{const e=new Date().getFullYear();return Z.jsx("footer",{className:`${r?"bg-black text-gray-300":"bg-white text-gray-700"} p-6 text-center`,children:Z.jsx("div",{className:"max-w-4xl mx-auto",children:Z.jsx("div",{children:Z.jsxs("p",{className:`${r?"text-gray-400":"text-gray-600"} text-sm`,children:[" ",e," Deepak Reddy. All rights reserved."]})})})})},r4=({isDarkMode:r})=>Z.jsxs("div",{className:"fixed left-4 top-1/2 transform -translate-y-1/2 flex flex-col gap-6 z-20",children:[Z.jsx("a",{href:"https://instagram.com/deepakreddy_22",target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center w-10 h-10 rounded-full ${r?"bg-black hover:text-pink-400":"bg-white hover:text-pink-600"} shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1`,"aria-label":"Instagram",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:Z.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),Z.jsx("a",{href:"https://www.linkedin.com/in/deepak-reddy-3a911924b/",target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center w-10 h-10 rounded-full ${r?"bg-black hover:text-blue-400":"bg-white hover:text-blue-600"} shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1`,"aria-label":"LinkedIn",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:Z.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),Z.jsx("a",{href:"https://github.com/deepakreddy22",target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center w-10 h-10 rounded-full ${r?"bg-black hover:text-purple-400":"bg-white hover:text-purple-600"} shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1`,"aria-label":"GitHub",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:Z.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),Z.jsx("a",{href:"https://x.com/kdr_9837",target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center w-10 h-10 rounded-full ${r?"bg-black hover:text-red-400":"bg-white hover:text-red-600"} shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1`,"aria-label":"X",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:Z.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})]}),dh=({variant:r="wave1",flip:e=!1,isDarkMode:t})=>{const n={wave1:"M0,64L48,80C96,96,192,128,288,128C384,128,480,96,576,96C672,96,768,128,864,138.7C960,149,1056,139,1152,122.7C1248,107,1344,85,1392,74.7L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z",wave2:"M0,128L48,149.3C96,171,192,213,288,229.3C384,245,480,235,576,202.7C672,171,768,117,864,117.3C960,117,1056,171,1152,197.3C1248,224,1344,224,1392,224L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z",wave3:"M0,224L48,213.3C96,203,192,181,288,154.7C384,128,480,96,576,106.7C672,117,768,171,864,176C960,181,1056,139,1152,144C1248,149,1344,203,1392,229.3L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"},i=n[r]||n.wave1;return t?Z.jsx("div",{className:"bg-black w-full h-8"}):Z.jsx("div",{className:"w-full overflow-hidden",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",className:`w-full ${e?"transform rotate-180":""}`,preserveAspectRatio:"none",style:{height:"70px"},children:Z.jsx("path",{className:"fill-white",fillOpacity:"1",d:i})})})},s4=({isDarkMode:r,toggleDarkMode:e})=>Z.jsx("button",{onClick:e,className:`fixed right-6 top-24 z-40 p-2 ${r?"bg-gray-800 hover:bg-gray-700":"bg-white hover:bg-gray-100"} rounded-full shadow-lg hover:shadow-xl transition-all duration-300`,"aria-label":r?"Switch to light mode":"Switch to dark mode",title:r?"Switch to light mode":"Switch to dark mode",children:r?Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),o4=({isDarkMode:r})=>{const[e,t]=We.useState(!1),[n,i]=We.useState([{id:1,type:"bot",text:" Hi there! I'm Deepu, Deepak's portfolio assistant. How can I help you today?",options:[{text:"Learn about Deepak's work",value:"portfolio"},{text:"Send Deepak a message",value:"contact"}]}]),[s,a]=We.useState(""),[l,c]=We.useState(!1),d=We.useRef(null),[p,g]=We.useState(!1),[v,y]=We.useState(0),[w,E]=We.useState({name:"",email:"",message:""}),M={specializations:["Full-stack web development","React and modern JavaScript frameworks","DevOps and CI/CD pipelines","Machine Learning deployment","Cloud infrastructure on AWS and Azure"],education:{degrees:[{degree:"Master's in Information Technology and Management",school:"Illinois Institute of Technology",location:"Chicago, IL",year:"",details:"Focused on advanced software development and cloud computing"}],certifications:["AWS Solutions Architect Associate","Microsoft Azure Administrator","Google Cloud Professional Developer"]},workExperience:[{company:"FourHub Tech LLC",position:"Software Engineer",duration:"2021 - Present",responsibilities:["Led development of cloud-native applications using React, Node.js and AWS","Implemented CI/CD pipelines and automated testing frameworks","Collaborated with cross-functional teams to deliver high-quality software solutions"]},{company:"WeSpotHire LLC",position:"Software Developer",duration:"2019 - 2021",responsibilities:["Developed and maintained RESTful APIs and microservices","Built and enhanced frontend components using React and TypeScript","Participated in code reviews and mentored junior developers"]}],techStack:{frontend:["React","TypeScript","JavaScript","HTML5","CSS3","Tailwind CSS"],backend:["Node.js","Python","Java","Express","Django","RESTful APIs"],devops:["Docker","Kubernetes","CI/CD","GitHub Actions","Jenkins"],cloud:["AWS","Azure","GCP","Serverless","Microservices"],databases:["MongoDB","PostgreSQL","MySQL","Redis","Firebase"]},projects:[{name:"Data Visualization Dashboard",description:"An interactive dashboard for visualizing complex datasets with filterable views and real-time updates.",technologies:["React","D3.js","Node.js","MongoDB","WebSockets"],highlights:"Features interactive charts, custom filtering, and real-time data updates"},{name:"Machine Learning Model Deployment",description:"End-to-end ML deployment pipeline for image classification models with automated training and serving.",technologies:["Python","TensorFlow","Docker","Kubernetes","Flask API"],highlights:"Includes CI/CD integration, model versioning, and performance monitoring"},{name:"Real-time Collaborative Editor",description:"A collaborative coding environment allowing multiple users to edit code simultaneously.",technologies:["React","Node.js","WebSockets","MongoDB","Redis"],highlights:"Features syntax highlighting, real-time collaboration, and chat functionality"}],latestProject:{name:"Cloud-Native Microservices Architecture",description:"A scalable, resilient microservices application deployed on Kubernetes with comprehensive monitoring.",technologies:["Go","gRPC","Kubernetes","Prometheus","Grafana","Istio"],highlights:"Implements service mesh for advanced traffic management and resilience patterns"},socialMedia:{instagram:"deepakreddy_22",linkedin:"deepak-reddy-3a911924b",github:"deepakreddy22",twitter:"kdr_9837"}},S={greeting:["It's great to meet you! Are you interested in Deepak's work, or do you have a specific question?","Hello! Looking for anything specific in Deepak's portfolio?"],projects:[`Deepak has worked on several exciting projects! Some highlights include:

 Data Visualization Dashboard: Interactive charts with React and D3.js
 Machine Learning Model Deployment: End-to-end ML pipeline with TensorFlow
 Real-time Collaborative Editor: Multi-user coding environment

Which one sounds interesting to you?`,"Deepak specializes in full-stack development, machine learning, and DevOps. Is there a specific area you'd like to know more about?"],latestProject:[`Deepak's latest project is a ${M.latestProject.name}.

It's ${M.latestProject.description}

Tech stack: ${M.latestProject.technologies.join(", ")}

Highlights: ${M.latestProject.highlights}`],skills:[`Deepak is skilled in:

 Frontend: ${M.techStack.frontend.join(", ")}
 Backend: ${M.techStack.backend.join(", ")}
 DevOps: ${M.techStack.devops.join(", ")}
 Cloud: ${M.techStack.cloud.join(", ")}
 Databases: ${M.techStack.databases.join(", ")}

Need any details on these?`],specialization:[`Deepak specializes in:

 ${M.specializations.join(`
 `)}

Which area are you most interested in?`],education:[`Deepak's educational background includes:

 ${M.education.degrees[0].degree} from ${M.education.degrees[0].school} (${M.education.degrees[0].location})

He also holds certifications in:
 ${M.education.certifications.join(`
 `)}`],experience:[`Deepak's work experience includes:

 ${M.workExperience[0].position} at ${M.workExperience[0].company} (${M.workExperience[0].duration})
  - ${M.workExperience[0].responsibilities.join(`
  - `)}

 ${M.workExperience[1].position} at ${M.workExperience[1].company} (${M.workExperience[1].duration})
  - ${M.workExperience[1].responsibilities.join(`
  - `)}

Would you like to know more about a specific role?`],contact:["You can contact Deepak directly at dkilaru@hawk.iit.edu. Do you need any other information?","Deepak's email is dkilaru@hawk.iit.edu. Feel free to reach out to him directly!"],resume:["I'd be happy to help you get Deepak's resume! You can download it directly using the button below."],techStack:[`For the Data Visualization Dashboard, Deepak used:
 Frontend: React, D3.js
 Backend: Node.js
 Database: MongoDB
 Real-time updates: WebSockets`,`For the Machine Learning Model Deployment, Deepak used:
 ML Framework: TensorFlow
 API: Flask
 Containerization: Docker
 Orchestration: Kubernetes
 Language: Python`,`For the Real-time Collaborative Editor, Deepak used:
 Frontend: React
 Backend: Node.js
 Real-time communication: WebSockets
 Database: MongoDB
 Caching: Redis`],default:["That's an interesting question! While I'm just a simple bot, Deepak would be happy to discuss this with you. You can reach him at dkilaru@hawk.iit.edu.","Great question! Deepak would love to talk more about this. His email is dkilaru@hawk.iit.edu if you'd like to contact him directly.","I'm not sure I understand perfectly, but you can reach Deepak at dkilaru@hawk.iit.edu for more information."],goodbye:["It was great chatting with you! Feel free to reach out anytime you have more questions about Deepak's work.","Thanks for stopping by! Don't hesitate to connect with Deepak directly for more detailed information."],contextual_home:["I see you're looking at Deepak's home section! Would you like to learn about his skills or see his latest projects?","Welcome to Deepak's portfolio! Can I help you navigate to the projects section or would you like to see his resume?"],contextual_about:["You're checking out Deepak's background! Would you like more details about his education or work experience?","This section highlights Deepak's journey. Would you like to know about his skills or specializations?"],contextual_testimonials:["These are Deepak's key skills. Would you like me to elaborate on any specific technology?","You're viewing Deepak's technical expertise. Would you like to see projects where he applied these skills?"],contextual_experience:["You're looking at Deepak's work history. Would you like more details about a specific role or company?","This section shows Deepak's professional experience. Would you like to know more about the technologies he used at these companies?"],contextual_projects:["These are some of Deepak's highlighted projects. Would you like more technical details about any specific one?","You're viewing Deepak's portfolio projects. Would you like to know more about his development process or tech stack?"],contextual_contact:["Looking to get in touch with Deepak? You can use this form or I can provide his email directly.","Ready to connect with Deepak? Feel free to use this contact form or check out his LinkedIn profile."],socialMedia:[`You can connect with Deepak on these social platforms:

 Instagram: @${M.socialMedia.instagram}
 LinkedIn: linkedin.com/in/${M.socialMedia.linkedin}
 GitHub: github.com/${M.socialMedia.github}
 X/Twitter: @${M.socialMedia.twitter}

Feel free to follow or connect!`]},T=["I'd be happy to help you get in touch with Deepak! First, could you tell me your name?","Thanks! Could you provide your email address so Deepak can reach you?","Finally, what message would you like to send to Deepak?",`Thanks for providing your information! Here's what I've collected:

Name: {{name}}
Email: {{email}}
Message: {{message}}

Is this correct? (yes/no)`],A=()=>{var $;($=d.current)==null||$.scrollIntoView({behavior:"smooth"})};We.useEffect(()=>{A()},[n]),We.useEffect(()=>{p0.init("BHFgnAR4gXKiisD-X")},[]);const R=()=>{t(!e)},F=$=>{a($.target.value)},N=$=>{const ie=S[$]||S.default;return ie[Math.floor(Math.random()*ie.length)]},O=$=>{const ie=$.toLowerCase();if(/^show my resume$|^show resume$|^view resume$/i.test(ie))return"resume";if(/^explain my projects$|^tell me about projects$|^show projects$/i.test(ie))return"projects";if(/^give me contact info$|^contact information$|^how to contact$/i.test(ie))return"contact";if(/^list skills$|^what are my skills$|^show skills$/i.test(ie))return"skills";if(/^explain experience$|^work history$|^job experience$/i.test(ie))return"experience";if(/^social media$|^social accounts$|^social profiles$/i.test(ie))return"socialMedia";if(/hi|hello|hey|greetings/i.test(ie))return"greeting";if(/latest project|newest project|recent work/i.test(ie))return"latestProject";if(/project|portfolio|work on|app|website|developed|build/i.test(ie))return"projects";if(/tech stack|technologies|tools used|built with|framework|library/i.test(ie))return"techStack";if(/speciali[sz]e|focus|expert|good at/i.test(ie))return"specialization";if(/education|degree|university|college|school|academic|study|studied|learn|certification|diploma|graduate/i.test(ie))return"education";if(/skill|technology|tech stack|know|experience with/i.test(ie))return"skills";if(/work experience|job|career|work history|company|employment|position|role|professional experience/i.test(ie))return"experience";if(/contact|email|reach|get in touch|connect|hire|work with|message|reach out/i.test(ie))return"contact";if(/resume|cv|download/i.test(ie))return"resume";if(/social media|instagram|linkedin|github|twitter|x|social|profile|follow|connect with|account/i.test(ie))return"socialMedia";if(/bye|goodbye|see you|farewell|thanks|thank you/i.test(ie))return"goodbye";{const Te=z();return Te?"contextual_"+Te:"default"}},z=()=>{try{const $={home:document.getElementById("home"),"about-me":document.getElementById("about-me"),testimonials:document.getElementById("testimonials"),experience:document.getElementById("experience"),projects:document.getElementById("projects"),contact:document.getElementById("contact")};for(const[ie,Te]of Object.entries($))if(Te&&k(Te))return ie;return null}catch($){return console.error("Error in detecting section:",$),null}},k=$=>{try{const ie=$.getBoundingClientRect();return ie.top>=0&&ie.left>=0&&ie.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&ie.right<=(window.innerWidth||document.documentElement.clientWidth)}catch{return!1}},L=$=>{if(v===0&&$===""){const ie={id:n.length+1,type:"bot",text:T[0]};i(Te=>[...Te,ie]);return}if($!=="")switch(v){case 0:E(Pe=>({...Pe,name:$})),y(1);const ie={id:n.length+1,type:"bot",text:T[1]};i(Pe=>[...Pe,ie]);break;case 1:if(W($)){E(Ie=>({...Ie,email:$})),y(2);const Pe={id:n.length+1,type:"bot",text:T[2]};i(Ie=>[...Ie,Pe])}else{const Pe={id:n.length+1,type:"bot",text:"That doesn't appear to be a valid email address. Please provide a valid email so Deepak can get back to you."};i(Ie=>[...Ie,Pe])}break;case 2:E(Pe=>({...Pe,message:$})),y(3);const Te=T[3].replace("{{name}}",w.name).replace("{{email}}",w.email).replace("{{message}}",$),Ce={id:n.length+1,type:"bot",text:Te};i(Pe=>[...Pe,Ce]);break;case 3:if(/yes|correct|right|looks good|send it/i.test($)){const Pe={from_name:w.name,from_email:w.email,message:w.message};p0.send("service_d3v40zc","template_8wr0zfj",Pe).then(Ie=>{console.log("SUCCESS!",Ie.status,Ie.text);const Qe={id:n.length+1,type:"bot",text:"Great! I've sent your message to Deepak. He'll get back to you soon! Is there anything else I can help you with?"};i(ee=>[...ee,Qe]),g(!1),y(0),E({name:"",email:"",message:""})},Ie=>{console.log("FAILED...",Ie);const Qe={id:n.length+1,type:"bot",text:"I'm sorry, there was an error sending your message. Please try again later or contact Deepak directly at dkilaru@hawk.iit.edu."};i(ee=>[...ee,Qe]),g(!1),y(0)})}else{const Pe={id:n.length+1,type:"bot",text:"No problem! Let's start over. What's your name?"};i(Ie=>[...Ie,Pe]),y(0),E({name:"",email:"",message:""})}break}},W=$=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($),X=()=>{try{const $={home:document.getElementById("home"),"about-me":document.getElementById("about-me"),testimonials:document.getElementById("testimonials"),experience:document.getElementById("experience"),projects:document.getElementById("projects"),contact:document.getElementById("contact")};let ie=[];if($.experience){const Ce=$.experience.querySelectorAll(".experience-item");Ce&&Ce.length&&Ce.forEach(Pe=>{var Ie,Qe,ee;try{const lt=(Ie=Pe.querySelector(".company-name"))==null?void 0:Ie.textContent,Ae=(Qe=Pe.querySelector(".position"))==null?void 0:Qe.textContent,Le=(ee=Pe.querySelector(".period"))==null?void 0:ee.textContent,ge=Array.from(Pe.querySelectorAll(".details li")).map(ze=>ze.textContent);lt&&ie.push({company:lt,position:Ae,period:Le,details:ge})}catch(lt){console.error("Error extracting experience item:",lt)}})}let Te=[];if($.projects){const Ce=$.projects.querySelectorAll(".project-card");Ce&&Ce.length&&Ce.forEach(Pe=>{var Ie,Qe;try{const ee=(Ie=Pe.querySelector(".project-title"))==null?void 0:Ie.textContent,lt=(Qe=Pe.querySelector(".project-description"))==null?void 0:Qe.textContent,Ae=Array.from(Pe.querySelectorAll(".tech-tag")).map(Le=>Le.textContent);ee&&Te.push({title:ee,description:lt,technologies:Ae})}catch(ee){console.error("Error extracting project item:",ee)}})}return ie.length>0&&(M.workExperience=ie.map(Ce=>({company:Ce.company,position:Ce.position||"Not specified",duration:Ce.period||"Not specified",responsibilities:Ce.details||[]}))),Te.length>0&&(M.projects=Te.map(Ce=>({name:Ce.title,description:Ce.description||"A portfolio project",technologies:Ce.technologies||[],highlights:"Featured project in portfolio"}))),!0}catch($){return console.error("Error gathering portfolio data:",$),!1}};We.useEffect(()=>{setTimeout(()=>{X()},2e3)},[]),We.useEffect(()=>{e&&X()},[e]);const K={tech:[{topic:"react",info:"React is currently at version 18.2, with React 19 in alpha stage. The latest trends include Server Components, React Query for data fetching, and increased focus on performance with features like automatic batching."},{topic:"javascript",info:"JavaScript's latest ECMAScript standard is ES2023, introducing features like Array.prototype.findLast(), Array.prototype.toSorted() (non-mutating sort), and improvements to the RegExp /v flag."},{topic:"ai",info:"The AI industry is rapidly evolving with developments in generative AI like GPT-4o, Claude 3 Opus, and open-source models like Llama 3. Key trends include multimodal capabilities, better reasoning, and finetuning for specialized tasks."},{topic:"cloud",info:"Cloud computing is trending toward serverless architectures, edge computing, and AI integration. Major providers (AWS, Azure, GCP) are expanding their AI services, while cost optimization and sustainability are becoming key concerns."},{topic:"machine learning",info:"Recent advances in machine learning include foundation models, few-shot learning, and attention mechanisms. MLOps practices are becoming standard, and there's increasing focus on responsible AI and explainability."}],career:[{topic:"software engineering",info:"The software engineering job market remains strong with median salaries around $130,000 in the US. Remote work options continue to be prevalent, with skills in AI/ML, cloud architecture, and fullstack development being highly sought after."},{topic:"interview",info:"Modern tech interviews are evolving beyond whiteboard coding to include take-home assignments, pair programming, and system design discussions. Companies are increasingly valuing soft skills and cultural fit alongside technical expertise."},{topic:"salary",info:"For experienced software engineers, salary ranges typically fall between $120,000-$180,000 base, with total compensation potentially higher at larger tech companies. Factors like location, company size, and specialized skills significantly impact compensation."}],industry:[{topic:"startups",info:"The startup ecosystem is seeing increased focus on AI applications, climate tech, and healthcare innovation. Funding has become more selective in 2023-2024 compared to previous years, with investors emphasizing sustainable business models and path to profitability."},{topic:"tech trends",info:"Current technology trends include AI integration across all sectors, increased adoption of AR/VR technologies, focus on cybersecurity in response to sophisticated threats, and continued expansion of IoT and edge computing applications."}],general:[{topic:"portfolio",info:"A portfolio website showcases a person's work, skills, and achievements. For developers, it typically includes projects, technical skills, work experience, and contact information. A good portfolio demonstrates technical abilities and also gives a sense of the person's style and approach to problem-solving."},{topic:"web development",info:"Web development involves creating and maintaining websites and web applications. It includes frontend development (HTML, CSS, JavaScript), backend development (server-side logic, databases), and fullstack development (both). Modern web development often uses frameworks like React, Angular, or Vue for frontend and Node.js, Django, or Ruby on Rails for backend."},{topic:"software development",info:"Software development is the process of designing, coding, testing, and maintaining computer software. It follows methodologies like Agile or Waterfall and includes stages such as requirements gathering, design, implementation, testing, deployment, and maintenance. Key principles include DRY (Don't Repeat Yourself), SOLID, and writing clean, maintainable code."},{topic:"resume",info:"A strong technical resume should be concise (1-2 pages), highlight relevant skills and experience, quantify achievements, include keywords from job descriptions, and be tailored to specific roles. It should include sections for technical skills, work experience, education, and notable projects or achievements."},{topic:"learning",info:"Effective ways to learn programming include: building real projects, contributing to open source, pair programming, teaching others what you've learned, reading documentation and books, taking focused online courses, consistent daily practice, and joining developer communities for feedback and support."}],coding:[{topic:"java",info:"Java is an object-oriented programming language widely used for enterprise applications, Android development, and backend services. It's known for its 'write once, run anywhere' capability through the Java Virtual Machine (JVM). Recent versions have added features like lambdas, streams, and modules to modernize the language."},{topic:"python",info:"Python is a high-level, interpreted language known for its readability and versatility. It's widely used in data science, machine learning, web development, automation, and scripting. Python 3.11 and 3.12 brought significant performance improvements and new features like pattern matching and better error messages."},{topic:"node",info:"Node.js is a JavaScript runtime built on Chrome's V8 engine that allows developers to run JavaScript on the server. It's known for its non-blocking, event-driven architecture that makes it efficient for I/O-intensive applications like web servers. The Node.js ecosystem includes npm, one of the largest package repositories in the world."},{topic:"database",info:"Modern database technologies include SQL databases (PostgreSQL, MySQL, SQL Server) for structured data with relations, NoSQL databases (MongoDB, Cassandra) for flexible schemas and horizontal scaling, NewSQL solutions combining SQL and NoSQL benefits, and specialized databases like time-series (InfluxDB), graph (Neo4j), and vector databases (Pinecone) for AI applications."}]},ne=$=>{const ie=$.toLowerCase(),Te=()=>{let Ie=null,Qe=0;for(const ee in K)for(const lt of K[ee]){if(ie.includes(lt.topic)){const Le=10-Math.abs(ie.indexOf(lt.topic)-ie.length/2)/ie.length*10;Le>Qe&&(Qe=Le,Ie=lt)}const Ae=Ce(lt.topic);for(const Le of Ae)if(ie.includes(Le)){const ge=(7-Math.abs(ie.indexOf(Le)-ie.length/2)/ie.length*7)*.8;ge>Qe&&(Qe=ge,Ie=lt)}}return Ie},Ce=Ie=>({react:["react.js","reactjs","jsx","component","hooks","frontend framework"],javascript:["js","ecmascript","typescript","frontend","scripting"],ai:["artificial intelligence","ml","deep learning","neural networks","gpt"],"machine learning":["ml","ai","neural networks","data science","training models"],cloud:["aws","azure","gcp","serverless","iaas","paas"],"software engineering":["coding","programming","software development","engineering","coding"],interview:["job interview","technical interview","hiring","coding challenge"],salary:["compensation","pay","income","money","earnings"],startups:["startup","entrepreneurship","founder","venture capital","seed funding"],"tech trends":["technology trends","emerging tech","future tech","innovation"],portfolio:["personal website","showcase","developer portfolio","work samples"],"web development":["web dev","frontend","backend","fullstack","website creation"],"software development":["software engineering","coding","programming","development"],resume:["cv","curriculum vitae","job application","professional summary"],learning:["study","tutorial","education","course","skill development"],java:["jvm","object oriented","enterprise","spring","jakarta ee"],python:["py","scripting","data science","django","flask"],node:["node.js","nodejs","javascript backend","npm","server-side javascript"],database:["db","sql","nosql","data storage","dbms","persistence"]})[Ie]||[],Pe=Te();return Pe?ae(Pe.info,Pe.topic):de(ie)?me():null},de=$=>[/what is|what are|how to|how do|explain|tell me about|describe|define|who is|why is|when was|where is/i,/difference between|compare|versus|vs\./i,/best way to|tips for|advice on|guide to/i,/meaning of|definition of|purpose of/i].some(Te=>Te.test($)),ae=($,ie)=>{const Te=[`Here's what I know about ${ie}:

`,`I can share some information about ${ie}:

`,`Regarding ${ie}:

`,`About ${ie}:

`,`On the topic of ${ie}:

`],Ce=[`

Is there anything specific about ${ie} you'd like to know?`,`

Do you have any specific questions about this?`,`

Can I clarify anything else about ${ie}?`,`

Would you like more details on any aspect of this?`],Pe=Te[Math.floor(Math.random()*Te.length)],Ie=Ce[Math.floor(Math.random()*Ce.length)];return`${Pe}${$}${Ie}`},me=$=>{const ie=[`That's an interesting question! While I focus primarily on helping you explore Deepak's portfolio and background, I can try to provide a general perspective:

This topic may involve multiple considerations and approaches. I'd recommend researching current sources for the most accurate and up-to-date information.

Would you like to return to discussing Deepak's work and experience?`,`Great question! I specialize in providing information about Deepak's portfolio, skills, and background. For this specific topic, you might want to check specialized resources for the most current information.

Is there anything about Deepak's work or skills that I can help with instead?`,`I appreciate your curiosity! While my primary purpose is to help you navigate Deepak's portfolio and professional background, this appears to be a more general question.

For the most accurate information on this topic, consulting specialized resources would be ideal.

Can I tell you about Deepak's projects or experience instead?`];return ie[Math.floor(Math.random()*ie.length)]},H=($,ie={})=>{switch(X(),$){case"experience":return J(ie);case"projects":return j(ie);case"skills":return D(ie);case"education":return Y();default:return N($)}},J=($={})=>{const{company:ie}=$;if(ie){const Te=M.workExperience.find(Ce=>Ce.company.toLowerCase().includes(ie.toLowerCase()));if(Te)return`About Deepak's work at ${Te.company}:

 Position: ${Te.position}
 Period: ${Te.duration}

Key responsibilities:
 ${Te.responsibilities.join(`
 `)}`}return S.experience[0]},j=($={})=>{const{project:ie,technology:Te}=$;if(ie){const Ce=M.projects.find(Pe=>Pe.name.toLowerCase().includes(ie.toLowerCase()));if(Ce)return`About the ${Ce.name} project:

${Ce.description}

Technologies used:
 ${Ce.technologies.join(`
 `)}

${Ce.highlights}`}if(Te){const Ce=M.projects.filter(Pe=>Pe.technologies.some(Ie=>Ie.toLowerCase().includes(Te.toLowerCase())));if(Ce.length>0)return`Projects where Deepak used ${Te}:

${Ce.map(Pe=>` ${Pe.name}: ${Pe.description.substring(0,100)}...`).join(`

`)}`}return S.projects[0]},D=($={})=>{const{category:ie}=$;if(ie&&M.techStack[ie.toLowerCase()]){const Te=M.techStack[ie.toLowerCase()];return`Deepak's ${ie} skills include:

 ${Te.join(`
 `)}`}return S.skills[0]},Y=()=>S.education[0],ce=()=>{if(!s.trim())return;const $={id:n.length+1,type:"user",text:s};i(Te=>[...Te,$]);const ie=s;a(""),c(!0),setTimeout(()=>{if(c(!1),p){L(ie);return}if(["what is","how does","tell me about","latest","current","trends","news","explain","when was","who is"].some(ee=>ie.toLowerCase().includes(ee))){const ee=ne(ie);if(ee){c(!0),setTimeout(()=>{c(!1);const lt={id:n.length+2,type:"bot",text:ee};i(Ae=>[...Ae,lt])},1500+Math.random()*1e3);return}}const Pe=Q(ie),Ie=O(ie);if(Ie==="contact"){const ee=ie.toLowerCase();if(/send|message|get in touch|form|fill out|submit|contact form/i.test(ee)){g(!0),L("");return}else{const Ae={id:n.length+2,type:"bot",text:N("contact")};i(Le=>[...Le,Ae]);return}}const Qe={id:n.length+2,type:"bot",text:H(Ie,Pe)};Ie==="resume"&&(Qe.action="resume"),i(ee=>[...ee,Qe])},1e3+Math.random()*1e3)},Q=$=>{const ie=$.toLowerCase();let Te={};return M.workExperience.forEach(Ce=>{ie.includes(Ce.company.toLowerCase())&&(Te.company=Ce.company)}),M.projects.forEach(Ce=>{ie.includes(Ce.name.toLowerCase())&&(Te.project=Ce.name)}),["frontend","backend","devops","cloud","databases"].forEach(Ce=>{ie.includes(Ce)&&(Te.category=Ce),M.techStack[Ce].forEach(Pe=>{ie.includes(Pe.toLowerCase())&&(Te.technology=Pe)})}),Te},re=$=>{$.key==="Enter"&&ce()},pe=$=>{const ie={id:n.length+1,type:"user",text:$.text};i(Te=>[...Te,ie]),c(!0),setTimeout(()=>{if(c(!1),$.value==="portfolio"){const Te={id:n.length+2,type:"bot",text:`Great! I'd be happy to tell you about Deepak. What would you like to know about?

 Skills & Technologies
 Projects
 Work Experience
 Education

Or you can ask me a specific question about Deepak's background or expertise.`};i(Ce=>[...Ce,Te])}else $.value==="contact"&&(g(!0),L(""))},1e3)};return Z.jsxs("div",{className:"fixed right-4 bottom-4 z-50",children:[!e&&Z.jsxs("div",{onClick:R,className:`flex items-center cursor-pointer transition-opacity duration-300 p-3 rounded-full ${r?"bg-gradient-to-r from-cyan-600 to-purple-600":"bg-gradient-to-r from-cyan-500 to-purple-500"} shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300`,children:[Z.jsx("div",{className:"mr-3",children:Z.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center",children:Z.jsx("span",{className:"text-2xl",children:""})})}),Z.jsx("div",{className:"text-white max-w-[180px]",children:Z.jsx("p",{className:"font-medium text-sm",children:"Hi, I'm Deepu  Deepak's portfolio bot. Want to chat?"})})]}),e&&Z.jsxs("div",{className:`rounded-xl shadow-2xl ${r?"bg-gray-800":"bg-white"} w-80 md:w-96 overflow-hidden flex flex-col`,style:{height:"500px",maxHeight:"80vh"},children:[Z.jsxs("div",{className:`p-4 ${r?"bg-gradient-to-r from-cyan-700 to-purple-700":"bg-gradient-to-r from-cyan-500 to-purple-500"} text-white flex items-center justify-between`,children:[Z.jsxs("div",{className:"flex items-center",children:[Z.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center mr-3",children:Z.jsx("span",{className:"text-xl",children:""})}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-semibold",children:"Deepu"}),Z.jsx("p",{className:"text-xs opacity-80",children:p?"Contact Assistant":"Portfolio Assistant"})]})]}),Z.jsx("button",{onClick:R,className:"text-white hover:text-gray-200 transition-colors",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Z.jsxs("div",{className:`flex-1 p-4 overflow-y-auto ${r?"bg-gray-800":"bg-gray-50"}`,style:{scrollBehavior:"smooth"},children:[n.map($=>Z.jsx("div",{className:`mb-4 flex ${$.type==="user"?"justify-end":"justify-start"}`,children:Z.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[85%] ${$.type==="user"?`${r?"bg-purple-600":"bg-purple-500"} text-white`:`${r?"bg-gray-700":"bg-white"} ${r?"text-white":"text-gray-800"} shadow`}`,children:[Z.jsx("p",{className:"whitespace-pre-line",children:$.text}),$.action==="resume"&&Z.jsxs("a",{href:"https://drive.google.com/file/d/1IyTVLQiJhc2-Z3C78y2diijVFG5_LiVV/view?usp=drive_link",target:"_blank",rel:"noopener noreferrer",className:`mt-2 inline-flex items-center justify-center w-full py-2 px-3 rounded-md ${r?"bg-cyan-600 hover:bg-cyan-700":"bg-cyan-500 hover:bg-cyan-600"} text-white text-sm font-medium transition-colors`,children:[Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Resume"]}),$.options&&$.options.length>0&&Z.jsx("div",{className:"mt-3 space-y-2",children:$.options.map((ie,Te)=>Z.jsx("button",{onClick:()=>pe(ie),className:`w-full text-left py-2 px-3 rounded-md text-white text-sm font-medium transition-colors ${r?"bg-gray-600 hover:bg-gray-500":"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600"}`,children:ie.text},Te))})]})},$.id)),l&&Z.jsx("div",{className:"mb-4 flex justify-start",children:Z.jsx("div",{className:`rounded-lg px-4 py-2 ${r?"bg-gray-700":"bg-white"} ${r?"text-white":"text-gray-800"} shadow`,children:Z.jsxs("div",{className:"flex space-x-1",children:[Z.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0ms"}}),Z.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"200ms"}}),Z.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"400ms"}})]})})}),Z.jsx("div",{ref:d})]}),Z.jsxs("div",{className:`p-3 border-t ${r?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} flex items-center`,children:[Z.jsx("input",{type:"text",value:s,onChange:F,onKeyPress:re,placeholder:p?`Type your ${v===0?"name":v===1?"email":v===2?"message":"yes/no"}...`:"Type a message...",className:`flex-1 py-2 px-3 rounded-full ${r?"bg-gray-800 text-white border-gray-700 focus:ring-cyan-600":"bg-gray-100 text-gray-800 border-gray-200 focus:ring-cyan-500"} border focus:outline-none focus:ring-2`}),Z.jsx("button",{onClick:ce,disabled:!s.trim(),className:`ml-2 p-2 rounded-full ${r?"bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-700 hover:to-purple-700":"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600"} text-white disabled:opacity-50 transition-colors`,children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Z.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})},a4=({isDarkMode:r,portfolioData:e})=>{var M;const[t,n]=We.useState(!1),[i,s]=We.useState(""),[a,l]=We.useState([{type:"system",content:"Welcome to DRK Terminal v1.0.0"},{type:"system",content:'Type "help" to see available commands.'},{type:"prompt",content:"$ "}]),[c,d]=We.useState("~"),p=We.useRef(null),g=We.useRef(null),v={skills:{frontend:["React","TypeScript","JavaScript","HTML5","CSS3","Tailwind CSS"],backend:["Java","Spring Boot","Node.js","Python","Express","RESTful APIs"],devops:["Docker","Kubernetes","CI/CD","GitHub Actions","Jenkins"],cloud:["AWS","Azure","GCP","Serverless","Microservices"],databases:["MongoDB","PostgreSQL","MySQL","Oracle","Redis"]},projects:[{name:"Pharma Cloud Platform",description:"Developed a cloud-based platform for pharmaceutical data management and analytics.",technologies:["Java","Spring Boot","AWS"]},{name:"Banking Microservices App",description:"Built a microservices-based banking application with a scalable architecture",technologies:["React","Node.js","Docker"]},{name:"Retail Analytics Dashboard",description:"Created an analytics dashboard for retail data visualization and reporting",technologies:["Python","Flask","Javascript"]},{name:"Personal Portfolio Website",description:"Designed and developed this responsive portfolio website with modern UI/UX principles",technologies:["React","TailwindCSS","Vite"]},{name:"AI-Powered Image Generator",description:"Created a web application that uses machine learning to generate custom images based on text prompts",technologies:["Python","TensorFlow","React","Flask"]}],experience:[{company:"AbbVie",period:"Feb 2024 - Present",position:"Java Full Stack Developer"},{company:"BMO Harris Bank",period:"May 2023 - Jan 2024",position:"Java Full Stack Developer"},{company:"Airtel",period:"Sep 2021 - Dec 2022",position:"Java Full Stack Developer"},{company:"CIBC Bank",period:"Jun 2020 - Jun 2021",position:"Java Developer"}],contact:{email:"dkilaru@hawk.iit.edu",github:"github.com/deepakreddy22",linkedin:"linkedin.com/in/deepak-reddy-3a911924b",instagram:"instagram.com/deepakreddy_22",twitter:"twitter.com/kdr_9837"}},y={help:{description:"Display available commands",execute:()=>[{type:"system",content:"Available commands:"},{type:"output",content:"  help              - Show this help message"},{type:"output",content:"  clear             - Clear terminal screen"},{type:"output",content:"  ls                - List available sections"},{type:"output",content:"  pwd               - Print working directory"},{type:"output",content:"  cd [directory]    - Change directory"},{type:"output",content:"  cat [file]        - Display file content"},{type:"output",content:"  skills            - List all skills by category"},{type:"output",content:"  projects          - List all projects"},{type:"output",content:"  experience        - Show work experience"},{type:"output",content:"  contact           - Display contact information"},{type:"output",content:"  whoami            - Who am I?"},{type:"output",content:"  exit              - Close the terminal"}]},clear:{description:"Clear terminal screen",execute:()=>(l([]),[])},ls:{description:"List available sections",execute:S=>c==="~"?[{type:"output",content:"skills/     projects/     experience/     contact/"}]:c==="~/skills"?[{type:"output",content:"frontend.txt     backend.txt     devops.txt     cloud.txt     databases.txt"}]:c==="~/projects"?[{type:"output",content:v.projects.map(A=>`${A.name.toLowerCase().replace(/\s+/g,"-")}.txt`).join("     ")}]:c==="~/experience"?[{type:"output",content:v.experience.map(A=>`${A.company.toLowerCase().replace(/\s+/g,"-")}.txt`).join("     ")}]:c==="~/contact"?[{type:"output",content:"email.txt     github.txt     linkedin.txt     instagram.txt     twitter.txt"}]:[{type:"error",content:"No such directory: "+c}]},pwd:{description:"Print working directory",execute:()=>[{type:"output",content:c}]},cd:{description:"Change directory",execute:S=>{if(!S||S==="~"||S==="/")return d("~"),[{type:"output",content:"Changed directory to: ~"}];if(S==="..")return c==="~"?[{type:"output",content:"Already at home directory"}]:(d("~"),[{type:"output",content:"Changed directory to: ~"}]);const T=["skills","projects","experience","contact"],A=S.replace("~/","");return T.includes(A)?(d(`~/${A}`),[{type:"output",content:`Changed directory to: ~/${A}`}]):[{type:"error",content:`cd: no such directory: ${S}`}]}},cat:{description:"Display file content",execute:S=>{if(!S)return[{type:"error",content:"cat: missing file operand"}];if(c==="~/skills"){const T=S.replace(".txt","");if(v.skills[T])return[{type:"system",content:`${T.toUpperCase()} SKILLS:`},{type:"output",content:v.skills[T].join(", ")}]}if(c==="~/projects"){const T=S.replace(".txt","").replace(/-/g," "),A=v.projects.find(R=>R.name.toLowerCase()===T);if(A)return[{type:"system",content:A.name.toUpperCase()},{type:"output",content:A.description},{type:"output",content:`Technologies: ${A.technologies.join(", ")}`}]}if(c==="~/experience"){const T=S.replace(".txt","").replace(/-/g," "),A=v.experience.find(R=>R.company.toLowerCase()===T);if(A)return[{type:"system",content:A.company.toUpperCase()},{type:"output",content:`Position: ${A.position}`},{type:"output",content:`Period: ${A.period}`}]}if(c==="~/contact"){const T=S.replace(".txt","");if(v.contact[T])return[{type:"system",content:`${T.toUpperCase()}: `},{type:"output",content:v.contact[T]}]}return[{type:"error",content:`cat: ${S}: No such file or directory`}]}},skills:{description:"List all skills by category",execute:()=>{const S=[{type:"system",content:"SKILLS BY CATEGORY:"}];return Object.entries(v.skills).forEach(([T,A])=>{S.push({type:"system",content:`
${T.toUpperCase()}:`}),S.push({type:"output",content:A.join(", ")})}),S}},projects:{description:"List all projects",execute:()=>{const S=[{type:"system",content:"PROJECTS:"}];return v.projects.forEach(T=>{S.push({type:"system",content:`
${T.name}:`}),S.push({type:"output",content:T.description}),S.push({type:"output",content:`Technologies: ${T.technologies.join(", ")}`})}),S}},experience:{description:"Show work experience",execute:()=>{const S=[{type:"system",content:"WORK EXPERIENCE:"}];return v.experience.forEach(T=>{S.push({type:"system",content:`
${T.company}:`}),S.push({type:"output",content:`Position: ${T.position}`}),S.push({type:"output",content:`Period: ${T.period}`})}),S}},contact:{description:"Display contact information",execute:()=>[{type:"system",content:"CONTACT INFORMATION:"},{type:"output",content:`Email: ${v.contact.email}`},{type:"output",content:`GitHub: ${v.contact.github}`},{type:"output",content:`LinkedIn: ${v.contact.linkedin}`},{type:"output",content:`Instagram: ${v.contact.instagram}`},{type:"output",content:`Twitter: ${v.contact.twitter}`}]},whoami:{description:"Who am I?",execute:()=>[{type:"system",content:"Deepak Reddy"},{type:"output",content:"Software Developer based in Chicago, IL"}]},exit:{description:"Close the terminal",execute:()=>(n(!1),[])}},w=S=>{const[T,...A]=S.trim().split(" "),R=[...a,{type:"command",content:`$ ${S}`}];if(y[T]){const F=y[T].execute(A.join(" "));l([...R,...F,{type:"prompt",content:"$ "}])}else l(T?[...R,{type:"error",content:`command not found: ${T}`},{type:"prompt",content:"$ "}]:[...R,{type:"prompt",content:"$ "}]);s("")},E=S=>{S.key==="Enter"&&w(i)};return We.useEffect(()=>{t&&p.current&&p.current.focus()},[t]),We.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[a]),We.useEffect(()=>{const S=()=>{n(T=>!T)};return window.addEventListener("toggle-terminal",S),()=>{window.removeEventListener("toggle-terminal",S)}},[]),Z.jsx(Z.Fragment,{children:t&&Z.jsx(Z.Fragment,{children:Z.jsxs("div",{className:`fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 
            w-[90%] sm:w-[80%] md:w-[70%] lg:w-[60%] h-[70vh] max-h-[600px] z-50
            ${r?"bg-gray-900 text-green-400":"bg-black text-green-400"} 
            font-mono text-sm shadow-xl rounded-lg overflow-hidden
            transition-all duration-300 ease-in-out border ${r?"border-gray-700":"border-gray-800"}`,children:[Z.jsxs("div",{className:`flex items-center justify-between p-2 border-b ${r?"border-gray-700":"border-gray-800"}`,children:[Z.jsxs("div",{className:"flex items-center",children:[Z.jsxs("div",{className:"flex space-x-2 mr-4",children:[Z.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 cursor-pointer",onClick:()=>n(!1)}),Z.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),Z.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),Z.jsxs("span",{children:["Terminal - ",c]})]}),Z.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white",children:Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Z.jsxs("div",{ref:g,className:"p-4 h-[calc(100%-44px)] overflow-y-auto font-mono",children:[a.map((S,T)=>Z.jsx("div",{className:S.type==="error"?"text-red-500":S.type==="system"?"text-blue-400":S.type==="command"?"text-white":"text-green-400",children:S.content},T)),Z.jsxs("div",{className:"flex items-center",children:[Z.jsx("span",{className:"text-green-400",children:((M=a[a.length-1])==null?void 0:M.content)!=="$ "?"$ ":""}),Z.jsx("input",{ref:p,type:"text",value:i,onChange:S=>s(S.target.value),onKeyDown:E,className:"flex-1 bg-transparent border-none outline-none text-green-400 font-mono caret-green-400 pl-1",spellCheck:"false",autoCapitalize:"none",autoComplete:"off"})]})]})]})})})};function l4(){const[r,e]=We.useState(!1),[t,n]=We.useState(!1),[i,s]=We.useState(!1);We.useEffect(()=>{const l=localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches;s(l),l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);const a=()=>{const l=!i;s(l),l?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return Z.jsxs(Z.Fragment,{children:[!r&&Z.jsx(eT,{onComplete:()=>e(!0)}),Z.jsxs("div",{className:`min-h-screen transition-opacity duration-700 ${r?"opacity-100":"opacity-0"} ${i?"bg-black text-gray-200":"bg-white text-gray-800"}`,children:[Z.jsx(tT,{menuOpen:t,setMenuOpen:n,isDarkMode:i}),Z.jsx(nT,{menuOpen:t,setMenuOpen:n,isDarkMode:i}),Z.jsx(r4,{isDarkMode:i}),Z.jsx(s4,{isDarkMode:i,toggleDarkMode:a}),Z.jsx(o4,{isDarkMode:i}),Z.jsx(a4,{isDarkMode:i}),Z.jsx(sT,{isDarkMode:i}),Z.jsx(dh,{variant:"wave1",isDarkMode:i}),Z.jsx(oT,{isDarkMode:i}),Z.jsx(dh,{variant:"wave2",isDarkMode:i}),Z.jsx(GU,{isDarkMode:i}),Z.jsx(dh,{variant:"wave3",isDarkMode:i}),Z.jsx(aT,{isDarkMode:i}),Z.jsx(dh,{variant:"wave1",flip:!0,isDarkMode:i}),Z.jsx(lT,{isDarkMode:i}),Z.jsx(dh,{variant:"wave2",flip:!0,isDarkMode:i}),Z.jsx(n4,{isDarkMode:i}),Z.jsx(i4,{isDarkMode:i})]})]})}$b.createRoot(document.getElementById("root")).render(Z.jsx(Xb.StrictMode,{children:Z.jsx(l4,{})}));
